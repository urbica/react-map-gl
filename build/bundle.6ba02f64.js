!function(e){function webpackJsonpCallback(t){for(var n,i,o=t[0],s=t[1],l=0,u=[];l<o.length;l++)i=o[l],r[i]&&u.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(a&&a(t);u.length;)u.shift()()}var t={},r={0:0};function jsonpScriptSrc(e){return __webpack_require__.p+"build/"+({}[e]||e)+"."+{1:"b1dfeba1"}[e]+".js"}function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.e=function requireEnsure(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.src=jsonpScriptSrc(e),o=function(t){a.onerror=a.onload=null,clearTimeout(s);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,l=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");l.type=i,l.request=o,n[1](l)}r[e]=void 0}};var s=setTimeout(function(){o({type:"timeout",target:a})},12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__.oe=function(e){throw console.error(e),e};var n=window.webpackJsonp=window.webpackJsonp||[],i=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var o=0;o<n.length;o++)webpackJsonpCallback(n[o]);var a=i;__webpack_require__(__webpack_require__.s=212)}([function(e,t,r){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",function(){return _defineProperty})},function(e,t,r){"use strict";e.exports=r(217)},function(e,t,r){e.exports=r(219)()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return _classCallCheck})},function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}r.d(t,"a",function(){return _createClass})},function(e,t,r){"use strict";function assert(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}r.d(t,"a",function(){return assert})},function(e,t,r){"use strict";var n=r(63),i=r(106);var o=r(5),a={};function uid(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";a[e]=a[e]||1;var t=a[e]++;return"".concat(e,"-").concat(t)}function isPowerOfTwo(e){return Object(o.a)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function isObjectEmpty(e){var t=!0;for(var r in e){t=!1;break}return t}var s=r(37);function formatArrayValue(e,t){for(var r=t.maxElts,n=void 0===r?16:r,i=t.size,o=void 0===i?1:i,a="[",s=0;s<e.length&&s<n;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=formatValue(e[s],t);var l=e.length>n?"...":"]";return"".concat(a).concat(l)}function formatValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isInteger,n=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return formatArrayValue(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}var l=r(107);r.d(t,"c",function(){return n.a}),r.d(t,"e",function(){return i.a}),r.d(t,"i",function(){return uid}),r.d(t,"f",function(){return isPowerOfTwo}),r.d(t,"d",function(){return isObjectEmpty}),r.d(t,"g",function(){return s.a}),r.d(t,"b",function(){return formatValue}),r.d(t,"a",function(){return o.a}),r.d(t,"h",function(){return l.a})},function(e,t,r){"use strict";var n=r(62),i=(r(105),r(33)),o=r(8),a=r(32),s="Failed to create WebGL context in Node.js, headless gl not available",l="Failed to create WebGL context in Node.js, headless gl returned null";function createHeadlessContext(e){var t=e.width,r=e.height,n=e.opts,i=e.onError,o=n.webgl1;if(n.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!a.d)return i(s);var u=Object(a.d)(t,r,n);return u||i(l)}var u,c=r(6),p=c.c&&"undefined"!=typeof document,h=p&&"complete"===document.readyState;function getPageLoadPromise(){return u||(u=p?new Promise(function(e,t){if(p&&"complete"===document.readyState)return h=!0,void e(document);window.onload=function(){h=!0,e(document)}}):Promise.resolve({})),u}function createCanvas(e){var t=e.width,r=void 0===t?800:t,n=e.height,i=void 0===n?600:n,o=e.id,a=void 0===o?"gl-canvas":o,s=e.insert,l=void 0===s||s,u=document.createElement("canvas");if(u.id=a,u.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",u.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",l){var c=document.body;c.insertBefore(u,c.firstChild)}return u}function getCanvas(e){var t,r=e.canvas,n=e.width,i=e.height,o=e.onError,a=void 0===o?function(){}:o;return"string"==typeof r?(h||a("createGLContext called on canvas '".concat(r,"' before page was loaded")),t=document.getElementById(r)):t=r||createCanvas({id:"lumagl-canvas",width:n,height:i,onError:a}),t}function createBrowserContext(e){var t=e.canvas,r=e.opts,n=void 0===r?{}:r,i=e.onError,o=void 0===i?function(e){return null}:i;function onContextCreationError(e){o("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",onContextCreationError,!1);var a=n.webgl1,s=void 0===a||a,l=n.webgl2,u=void 0===l||l,c=null;return u&&(c=(c=c||t.getContext("webgl2",n))||t.getContext("experimental-webgl2",n)),s&&(c=(c=c||t.getContext("webgl",n))||t.getContext("experimental-webgl",n)),t.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),c||o("Failed to create ".concat(u&&!s?"WebGL2":"WebGL"," context"))}var f=r(64),d=r(3),g=r(22);function getContextData(e){return e.luma=e.luma||{},e.luma}function makeDebugContext(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===e?null:void 0===t||t?getDebugContext(e):getRealContext(e)}function getRealContext(e){if(null===e)return null;var t=getContextData(e);return t.realContext?t.realContext:e}function getDebugContext(e){if(null===e)return null;if(!g.a.WebGLDebug)return c.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),e;var t=getContextData(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var r=g.a.WebGLDebug.makeDebugContext(e,onGLError,onValidateGLFunc);return Object.assign(function WebGLDebugContext(){Object(d.a)(this,WebGLDebugContext)}.prototype,r),t.debugContext=r,r.debug=!0,r.gl=e,c.g.info("debug context actived."),r}function getFunctionString(e,t){var r=g.a.WebGLDebug.glFunctionArgsToString(e,t);return r="".concat(r.slice(0,100)).concat(r.length>100?"...":""),"gl.".concat(e,"(").concat(r,")")}function onGLError(e,t,r){var n=g.a.WebGLDebug.glEnumToString(e),i=g.a.WebGLDebug.glFunctionArgsToString(t,r),o="".concat(n," in gl.").concat(t,"(").concat(i,")");if(c.g.throw)throw new Error(o);c.g.error(o)()}function onValidateGLFunc(e,t){var r;if(c.g.priority>=4&&(r=getFunctionString(e,t),c.g.log(4,r)()),c.g.break){r=r||getFunctionString(e,t);c.g.break&&c.g.break.every(function(e){return-1!==r.indexOf(e)})}var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){if(void 0===a.value){if(r=r||getFunctionString(e,t),c.g.throw)throw new Error("Undefined argument: ".concat(r));c.g.error("Undefined argument: ".concat(r))}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}var m,y=r(0);m={},Object(y.a)(m,33902,{gl1:new Float32Array([1,1])}),Object(y.a)(m,33901,{gl1:new Float32Array([1,1])}),Object(y.a)(m,3379,{gl1:64,gl2:2048}),Object(y.a)(m,34076,{gl1:16}),Object(y.a)(m,34930,{gl1:8}),Object(y.a)(m,35661,{gl1:8}),Object(y.a)(m,35660,{gl1:0}),Object(y.a)(m,34024,{gl1:1}),Object(y.a)(m,36348,{gl1:8}),Object(y.a)(m,34921,{gl1:8}),Object(y.a)(m,36347,{gl1:128}),Object(y.a)(m,36349,{gl1:16}),Object(y.a)(m,3386,{gl1:new Int32Array([0,0])}),Object(y.a)(m,32883,{gl1:0,gl2:256}),Object(y.a)(m,35071,{gl1:0,gl2:256}),Object(y.a)(m,37447,{gl1:0,gl2:0}),Object(y.a)(m,36063,{gl1:0,gl2:4}),Object(y.a)(m,35379,{gl1:0,gl2:0}),Object(y.a)(m,35374,{gl1:0,gl2:0}),Object(y.a)(m,35377,{gl1:0,gl2:0}),Object(y.a)(m,34852,{gl1:0,gl2:4}),Object(y.a)(m,36203,{gl1:0,gl2:0}),Object(y.a)(m,33001,{gl1:0,gl2:0}),Object(y.a)(m,33e3,{gl1:0,gl2:0}),Object(y.a)(m,37157,{gl1:0,gl2:0}),Object(y.a)(m,35373,{gl1:0,gl2:0}),Object(y.a)(m,35657,{gl1:0,gl2:0}),Object(y.a)(m,36183,{gl1:0,gl2:0}),Object(y.a)(m,37137,{gl1:0,gl2:0}),Object(y.a)(m,34045,{gl1:0,gl2:0}),Object(y.a)(m,35978,{gl1:0,gl2:0}),Object(y.a)(m,35979,{gl1:0,gl2:0}),Object(y.a)(m,35968,{gl1:0,gl2:0}),Object(y.a)(m,35376,{gl1:0,gl2:0}),Object(y.a)(m,35375,{gl1:0,gl2:0}),Object(y.a)(m,35659,{gl1:0,gl2:0}),Object(y.a)(m,37154,{gl1:0,gl2:0}),Object(y.a)(m,35371,{gl1:0,gl2:0}),Object(y.a)(m,35658,{gl1:0,gl2:0}),Object(y.a)(m,35076,{gl1:0,gl2:-8,negative:!0}),Object(y.a)(m,35077,{gl1:0,gl2:7}),Object(y.a)(m,35380,{gl1:0,gl2:0});function getGLContextInfo2(e){var t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info");return{vendor:n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937)||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function glGetDebugInfo(e){return getGLContextInfo2(e)}var v=r(4),_=function noop(e){return e},b=new(function(){function QueryManager(){Object(d.a)(this,QueryManager),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(v.a)(QueryManager,[{key:"poll",value:function poll(e){this.cancelInvalidQueries(e);var t=!0,r=!1,n=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"setInvalidator",value:function setInvalidator(e){var t=e.queryType,r=e.errorMessage,n=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=r,this.checkInvalid=n}},{key:"beginQuery",value:function beginQuery(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var n={};return e.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),Object.assign(e.promise,n),this.pendingQueries.add(e),e.promise.then(t).catch(r)}},{key:"resolveQuery",value:function resolveQuery(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function rejectQuery(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function deleteQuery(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function cancelQuery(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function invalidateQuery(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function cancelInvalidQueries(e){if(this.checkInvalid(e)){var t=!0,r=!1,n=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.invalidateQuery(a)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}}}]),QueryManager}()),x=r(5),w=32874;function isWebGL2(e){return Boolean(e&&(e instanceof o.a||e.TEXTURE_BINDING_3D===w))}var S={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t=Object.assign({},S,t),n=r.canvas,i=r.width,o=r.height,a=r.throwOnError,s=r.manageState,l=r.debug;function onError(e){if(a)throw new Error(e);return null}c.c?e=createBrowserContext({canvas:getCanvas({canvas:n,width:i,height:o,onError:onError}),opts:t}):e=createHeadlessContext({width:i,height:o,opts:t,onError:onError});return e?(s&&Object(f.a)(e,{copyState:!1,log:function log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return c.g.log.apply(c.g,[1].concat(t))()}}),c.c&&l&&(e=makeDebugContext(e,{debug:l}),c.g.priority=Math.max(c.g.priority,1)),logInfo(e),e):null}function resizeGLContext(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var r=t.useDevicePixels&&window.devicePixelRatio||1,n="width"in t?t.width:e.canvas.clientWidth,i="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=n*r,void(e.canvas.height=i*r)}var o=e.getExtension("STACKGL_resize_drawingbuffer");o&&"width"in t&&"height"in t&&o.resize(t.width,t.height)}function logInfo(e){var t=isWebGL2(e)?"WebGL2":"WebGL1",r=glGetDebugInfo(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";c.g.once(0,"".concat(t).concat(i," context ").concat(n))()}var E=r(26),P={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},C={};Object.keys(P).forEach(function(e){C[e]=e});function getFeature(e,t){var r=P[t];Object(x.a)(r,t);var n=Object(o.n)(e)&&r[1]||r[0],i="string"==typeof n?Boolean(e.getExtension(n)):n;return Object(x.a)(!1===i||!0===i),i}function hasFeature(e,t){return hasFeatures(e,t)}function hasFeatures(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return getFeature(e,t)})}function getFeatures(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Object(o.n)(e),P)e.luma.caps[t]=getFeature(e,t);return e.luma.caps}var T=r(20),k=r(11),O=r(10),A=r(12),I=r(29),R="Shader: GLSL source code must be a JavaScript string",M=35632,L=35633,j=function(e){function Shader(e,t){var r;Object(d.a)(this,Shader),Object(o.e)(e),Object(x.a)("string"==typeof t.source,R);var n=Object(o.k)(t.source,null)||t.id||Object(c.i)("unnamed ".concat(Shader.getTypeName(t.shaderType)));return(r=Object(k.a)(this,Object(O.a)(Shader).call(this,e,{id:n}))).shaderType=t.shaderType,r.source=t.source,r.initialize(t),r}return Object(A.a)(Shader,e),Object(v.a)(Shader,null,[{key:"getTypeName",value:function getTypeName(e){switch(e){case L:return"vertex-shader";case M:return"fragment-shader";default:return Object(x.a)(!1),"unknown"}}}]),Object(v.a)(Shader,[{key:"initialize",value:function initialize(e){var t=e.source,r=Object(o.k)(t,null);r&&(this.id=Object(c.i)(r)),this._compile(t)}},{key:"getParameter",value:function getParameter(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function toString(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function getName(){return Object(o.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function getSource(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function getTranslatedSource(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function _compile(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(o.o)(e,this.source,this.shaderType,this.id),r=t.shaderName,n=t.errors,i=t.warnings;throw c.g.error("GLSL compilation errors in ".concat(r,"\n").concat(n))(),c.g.warn("GLSL compilation warnings in ".concat(r,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(r))}}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(I.a),D=function(e){function VertexShader(e,t){return Object(d.a)(this,VertexShader),"string"==typeof t&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),t={source:t}),Object(k.a)(this,Object(O.a)(VertexShader).call(this,e,Object.assign({},t,{shaderType:L})))}return Object(A.a)(VertexShader,e),Object(v.a)(VertexShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(L)}}]),VertexShader}(j),F=function(e){function FragmentShader(e,t){return Object(d.a)(this,FragmentShader),"string"==typeof t&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),t={source:t}),Object(k.a)(this,Object(O.a)(FragmentShader).call(this,e,Object.assign({},t,{shaderType:M})))}return Object(A.a)(FragmentShader,e),Object(v.a)(FragmentShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(M)}}]),FragmentShader}(j);function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(O.a)(e)););return e}function get_get(e,t,r){return(get_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}var N,z=r(18),B=r(45),U=r(17),V=r(50),q="EXT_color_buffer_float",G=(N={},Object(y.a)(N,33189,{}),Object(y.a)(N,33190,{gl2:!0}),Object(y.a)(N,36012,{gl2:!0}),Object(y.a)(N,36168,{}),Object(y.a)(N,34041,{}),Object(y.a)(N,35056,{gl2:!0}),Object(y.a)(N,36013,{gl2:!0}),Object(y.a)(N,32854,{}),Object(y.a)(N,36194,{}),Object(y.a)(N,32855,{}),Object(y.a)(N,33321,{gl2:!0}),Object(y.a)(N,33330,{gl2:!0}),Object(y.a)(N,33329,{gl2:!0}),Object(y.a)(N,33332,{gl2:!0}),Object(y.a)(N,33331,{gl2:!0}),Object(y.a)(N,33334,{gl2:!0}),Object(y.a)(N,33333,{gl2:!0}),Object(y.a)(N,33323,{gl2:!0}),Object(y.a)(N,33336,{gl2:!0}),Object(y.a)(N,33335,{gl2:!0}),Object(y.a)(N,33338,{gl2:!0}),Object(y.a)(N,33337,{gl2:!0}),Object(y.a)(N,33340,{gl2:!0}),Object(y.a)(N,33339,{gl2:!0}),Object(y.a)(N,32849,{gl2:!0}),Object(y.a)(N,32856,{gl2:!0}),Object(y.a)(N,32857,{gl2:!0}),Object(y.a)(N,36220,{gl2:!0}),Object(y.a)(N,36238,{gl2:!0}),Object(y.a)(N,36975,{gl2:!0}),Object(y.a)(N,36214,{gl2:!0}),Object(y.a)(N,36232,{gl2:!0}),Object(y.a)(N,36226,{gl2:!0}),Object(y.a)(N,36208,{gl2:!0}),Object(y.a)(N,33325,{gl2:q}),Object(y.a)(N,33327,{gl2:q}),Object(y.a)(N,34842,{gl2:q}),Object(y.a)(N,33326,{gl2:q}),Object(y.a)(N,33328,{gl2:q}),Object(y.a)(N,34836,{gl2:q}),Object(y.a)(N,35898,{gl2:q}),N);function isFormatSupported(e,t,r){var n=r[t];if(!n)return!1;var i=Object(o.n)(e)&&n.gl2||n.gl1;return"string"==typeof i?e.getExtension(i):i}var W=function(e){function Renderbuffer(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Renderbuffer),(t=Object(k.a)(this,Object(O.a)(Renderbuffer).call(this,e,r))).initialize(r),Object.seal(Object(z.a)(Object(z.a)(t))),t}return Object(A.a)(Renderbuffer,e),Object(v.a)(Renderbuffer,null,[{key:"isSupported",value:function isSupported(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||isFormatSupported(e,t,G)}},{key:"getSamplesForFormat",value:function getSamplesForFormat(e,t){var r=t.format;return e.getInternalformatParameter(36161,r,32937)}}]),Object(v.a)(Renderbuffer,[{key:"initialize",value:function initialize(e){var t=e.format,r=e.width,n=void 0===r?1:r,i=e.height,a=void 0===i?1:i,s=e.samples,l=void 0===s?0:s;return Object(x.a)(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==l&&Object(o.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,l,t,n,a):this.gl.renderbufferStorage(36161,t,n,a),this.format=t,this.width=n,this.height=a,this.samples=l,this}},{key:"resize",value:function resize(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function _syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function _getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),Renderbuffer}(I.a),H=256,X=1024,K=16384,Z=6144,Y=6145,J=6146,Q=34041,$="clear: bad arguments";function clear_clear(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,i=t.color,o=void 0===i?null:i,a=t.depth,s=void 0===a?null:a,l=t.stencil,u=void 0===l?null:l,c={};n&&(c.framebuffer=n);var p=0;o&&(p|=K,!0!==o&&(c.clearColor=o)),s&&(p|=H,!0!==s&&(c.clearDepth=s)),u&&(p|=X,!0!==s&&(c.clearStencil=s)),Object(x.a)(0!==p,$),Object(E.c)(e,c,function(){e.clear(p)})}function clearBuffer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,i=t.buffer,a=void 0===i?Z:i,s=t.drawBuffer,l=void 0===s?0:s,u=t.value,c=void 0===u?[0,0,0,0]:u;Object(o.d)(e),Object(E.c)(e,{framebuffer:n},function(){switch(a){case Z:switch(c.constructor){case Int32Array:e.clearBufferiv(a,l,c);break;case Uint32Array:e.clearBufferuiv(a,l,c);break;case Float32Array:default:e.clearBufferfv(a,l,c)}break;case Y:e.clearBufferfv(Y,0,[c]);break;case J:e.clearBufferiv(J,0,[c]);break;case Q:var t=Object(U.a)(c,2),r=t[0],n=t[1];e.clearBufferfi(Q,0,r,n);break;default:Object(x.a)(!1,$)}})}var ee=r(40);function glFormatToComponents(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(x.a)(!1),0}}function glTypeToBytes(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(x.a)(!1),0}}var te=function(e){function Framebuffer(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Framebuffer),(t=Object(k.a)(this,Object(O.a)(Framebuffer).call(this,e,r))).width=null,t.height=null,t.attachments={},t.readBuffer=36064,t.drawBuffers=[36064],t.initialize(r),Object.seal(Object(z.a)(Object(z.a)(t))),t}return Object(A.a)(Framebuffer,e),Object(v.a)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function get(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function get(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,n=t.colorBufferHalfFloat;return r&&e.getExtension(Object(o.n)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),n&&e.getExtension(Object(o.n)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Framebuffer(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(v.a)(Framebuffer,[{key:"initialize",value:function initialize(e){var t=e.width,r=void 0===t?1:t,n=e.height,i=void 0===n?1:n,o=e.attachments,a=void 0===o?null:o,s=e.color,l=void 0===s||s,u=e.depth,c=void 0===u||u,p=e.stencil,h=void 0!==p&&p,f=e.check,d=void 0===f||f,g=e.readBuffer,m=e.drawBuffers;if(Object(x.a)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,a)for(var y in a){var v=a[y];(Array.isArray(v)?v[0]:v).resize({width:r,height:i})}else a=this._createDefaultAttachments(l,c,h,r,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:m}),a&&d&&this.checkStatus()}},{key:"update",value:function update(e){var t=e.attachments,r=void 0===t?{}:t,n=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o,s=e.resizeAttachments,l=void 0===s||s;this.attach(r,{clearAttachments:a,resizeAttachments:l});var u=this.gl,c=u.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),u.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function resize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return Object(x.a)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var n in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&c.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r)),this.attachments)this.attachments[n].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function attach(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clearAttachments,i=void 0!==n&&n,o=r.resizeAttachments,a=void 0===o||o,s={};i&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var l=this.gl.bindFramebuffer(36160,this.handle);for(var u in s){Object(x.a)(void 0!==u,"Misspelled framebuffer binding point?");var c=Number(u),p=s[c],h=p;if(h)if(h instanceof W)this._attachRenderbuffer({attachment:c,renderbuffer:h});else if(Array.isArray(p)){var f=Object(U.a)(p,3),d=f[0],g=f[1],m=void 0===g?0:g,y=f[2],v=void 0===y?0:y;h=d,this._attachTexture({attachment:c,texture:d,layer:m,level:v})}else this._attachTexture({attachment:c,texture:h,layer:0,level:0});else this._unattach(c);a&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,l||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function checkStatus(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==r)throw new Error(_getFrameBufferStatus(r));return this}},{key:"clear",value:function clear(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,n=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||r||n)&&clear_clear(this.gl,{color:t,depth:r,stencil:n}),o.forEach(function(e,t){clearBuffer({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,a||null),this}},{key:"readPixels",value:function readPixels(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,o=e.width,a=void 0===o?this.width:o,s=e.height,l=void 0===s?this.height:s,u=e.format,c=void 0===u?6408:u,p=e.type,h=e.pixelArray,f=void 0===h?null:h,d=e.attachment,g=void 0===d?36064:d;this.gl;if(36064===g&&null===this.handle&&(g=1028),Object(x.a)(this.attachments[g]),p=p||this.attachments[g].type,!f){p=p||5121;var m=Object(ee.c)(p,{clamped:!1}),y=glFormatToComponents(c);f=f||new m(a*l*y)}p=p||Object(ee.b)(f);var v=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(r,i,a,l,c,p,f),this.gl.bindFramebuffer(36160,v||null),f}},{key:"readPixelsToBuffer",value:function readPixelsToBuffer(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,a=e.width,s=void 0===a?this.width:a,l=e.height,u=void 0===l?this.height:l,c=e.format,p=void 0===c?6408:c,h=e.type,f=e.buffer,d=void 0===f?null:f,g=e.byteOffset,m=void 0===g?0:g,y=this.gl;if(Object(o.d)(y),h=h||(d?d.type:5121),!d){var v=glFormatToComponents(p),_=glTypeToBytes(h),b=m+s*u*v*_;d=new T.a(y,{bytes:b,type:h,size:v})}return d.bind({target:35051}),Object(E.c)(y,{framebuffer:this},function(){y.readPixels(r,i,s,u,p,h,m)}),d.unbind({target:35051}),d}},{key:"copyToDataUrl",value:function copyToDataUrl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,r=void 0===t?36064:t,n=e.maxHeight,i=void 0===n?Number.MAX_SAFE_INTEGER:n,a=this.readPixels({attachment:r}),s=this.width,l=this.height;l>i;){var u=Object(o.q)({data:a,width:s,height:l});a=u.data,s=u.width,l=u.height}Object(o.h)({data:a,width:s,height:l});var c=document.createElement("canvas");c.width=s,c.height=l;var p=c.getContext("2d"),h=p.createImageData(s,l);return h.data.set(a),p.putImageData(h,0,0),c.toDataURL()}},{key:"copyToImage",value:function copyToImage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,r=void 0===t?null:t,n=e.attachment,i=void 0===n?36064:n,o=e.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(r=r||new Image).src=a,r}},{key:"copyToTexture",value:function copyToTexture(e){var t=e.texture,r=e.target,n=e.xoffset,i=void 0===n?0:n,o=e.yoffset,a=void 0===o?0:o,s=e.zoffset,l=void 0===s?0:s,u=e.mipmapLevel,c=void 0===u?0:u,p=(e.attachment,e.x),h=void 0===p?0:p,f=e.y,d=void 0===f?0:f,g=e.width,m=e.height,y=this.gl,v=y.bindFramebuffer(36160,this.handle);switch(Object(x.a)(r||t),t&&(g=Number.isFinite(g)?g:t.width,m=Number.isFinite(m)?m:t.height,t.bind(0)),t.target){case 3553:case 34067:y.copyTexSubImage2D(r||t.target,c,i,a,h,d,g,m);break;case 35866:case 32879:y.copyTexSubImage3D(r||t.target,c,i,a,l,h,d,g,m)}return t&&t.unbind(),y.bindFramebuffer(36160,v||null),t}},{key:"blit",value:function blit(e){var t=e.srcFramebuffer,r=e.attachment,n=void 0===r?36064:r,i=e.srcX0,a=void 0===i?0:i,s=e.srcY0,l=void 0===s?0:s,u=e.srcX1,c=e.srcY1,p=e.dstX0,h=void 0===p?0:p,f=e.dstY0,d=void 0===f?0:f,g=e.dstX1,m=e.dstY1,y=e.color,v=void 0===y||y,_=e.depth,b=void 0!==_&&_,w=e.stencil,S=void 0!==w&&w,E=e.mask,P=void 0===E?0:E,C=e.filter,T=void 0===C?9728:C,k=this.gl;Object(o.d)(k),t.handle||36064!==n||(n=1028),v&&(P|=16384),b&&(P|=256),S&&(P|=1024),Object(x.a)(P),u=void 0===u?t.width:u,c=void 0===c?t.height:c,g=void 0===g?this.width:g,m=void 0===m?this.height:m;var O=k.bindFramebuffer(36009,this.handle),A=k.bindFramebuffer(36008,t.handle);return k.readBuffer(n),k.blitFramebuffer(a,l,u,c,h,d,g,m,P,T),k.readBuffer(this.readBuffer),k.bindFramebuffer(36008,A||null),k.bindFramebuffer(36009,O||null),this}},{key:"invalidate",value:function invalidate(e){var t=e.attachments,r=void 0===t?[]:t,n=e.x,i=void 0===n?0:n,a=e.y,s=void 0===a?0:a,l=e.width,u=e.height,c=this.gl;Object(o.d)(c);var p=c.bindFramebuffer(36008,this.handle);return 0===i&&0===s&&void 0===l&&void 0===u?c.invalidateFramebuffer(36008,r):c.invalidateFramebuffer(36008,r,i,s,l,u),c.bindFramebuffer(36008,p),this}},{key:"getAttachmentParameter",value:function getAttachmentParameter(e,t,r){var n=this._getAttachmentParameterFallback(t);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=Object(i.c)(this.gl,n)),n}},{key:"getAttachmentParameters",value:function getAttachmentParameters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],n={},o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n[t?Object(i.c)(this.gl,c):c]=this.getAttachmentParameter(e,c,t)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return n}},{key:"getParameters",value:function getParameters(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),r={},n=0;n<t.length;n++){var o=t[n],a=Number(o);r[e?Object(i.c)(this.gl,a):a]=this.getAttachmentParameters(a,e)}return r}},{key:"show",value:function show(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function log(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>c.g.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=this.copyToDataUrl({maxHeight:100});return c.g.image({priority:e,message:t,image:r},t)(),this}},{key:"bind",value:function bind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function unbind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function _createDefaultAttachments(e,t,r,n,i){var o,a=null;e&&((a=a||{})[36064]=new V.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:i,mipmaps:!1,parameters:(o={},Object(y.a)(o,10241,9728),Object(y.a)(o,10240,9728),Object(y.a)(o,10242,33071),Object(y.a)(o,10243,33071),o)}));return t&&r?(a=a||{})[33306]=new W(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}):t?(a=a||{})[36096]=new W(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:i}):r&&Object(x.a)(!1),a}},{key:"_unattach",value:function _unattach(e){var t=this.attachments[e];t&&(t instanceof W?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function _attachRenderbuffer(e){var t=e.attachment,r=void 0===t?36064:t,n=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}},{key:"_attachTexture",value:function _attachTexture(e){var t=e.attachment,r=void 0===t?36064:t,n=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:a.framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:var s=mapIndexToCubeMapFace(i);a.framebufferTexture2D(36160,r,s,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:Object(x.a)(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}},{key:"_setReadBuffer",value:function _setReadBuffer(e,t){Object(o.n)(e)?e.readBuffer(t):Object(x.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function _setDrawBuffers(e,t){if(Object(o.n)(e))e.drawBuffers(t);else{var r=e.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(t):Object(x.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function _getAttachmentParameterFallback(e){var t=getFeatures(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function get(){return this.attachments[36064]||null}},{key:"texture",get:function get(){return this.attachments[36064]||null}},{key:"depth",get:function get(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function get(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(I.a);function mapIndexToCubeMapFace(e){return e<34069?e+34069:e}function _getFrameBufferStatus(e){return(te.STATUS||{})[e]||"Framebuffer error ".concat(e)}te.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var re,ne=function(e){function Sampler(e,t){var r;return Object(d.a)(this,Sampler),Object(o.d)(e),r=Object(k.a)(this,Object(O.a)(Sampler).call(this,e,t)),Object.seal(Object(z.a)(Object(z.a)(r))),r}return Object(A.a)(Sampler,e),Object(v.a)(Sampler,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(Sampler,[{key:"bind",value:function bind(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function unbind(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function _getParameter(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function _setParameter(e,t){switch(e){case 33082:case 33083:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),Sampler}(I.a),ie=(re={},Object(y.a)(re,5126,function(e,t,r){return e.uniform1fv(t,toFloatArray(r,1))}),Object(y.a)(re,35664,function(e,t,r){return e.uniform2fv(t,toFloatArray(r,2))}),Object(y.a)(re,35665,function(e,t,r){return e.uniform3fv(t,toFloatArray(r,3))}),Object(y.a)(re,35666,function(e,t,r){return e.uniform4fv(t,toFloatArray(r,4))}),Object(y.a)(re,5124,function(e,t,r){return e.uniform1iv(t,toIntArray(r,1))}),Object(y.a)(re,35667,function(e,t,r){return e.uniform2iv(t,toIntArray(r,2))}),Object(y.a)(re,35668,function(e,t,r){return e.uniform3iv(t,toIntArray(r,3))}),Object(y.a)(re,35669,function(e,t,r){return e.uniform4iv(t,toIntArray(r,4))}),Object(y.a)(re,35670,function(e,t,r){return e.uniform1iv(t,toIntArray(r,1))}),Object(y.a)(re,35671,function(e,t,r){return e.uniform2iv(t,toIntArray(r,2))}),Object(y.a)(re,35672,function(e,t,r){return e.uniform3iv(t,toIntArray(r,3))}),Object(y.a)(re,35673,function(e,t,r){return e.uniform4iv(t,toIntArray(r,4))}),Object(y.a)(re,35674,function(e,t,r){return e.uniformMatrix2fv(t,!1,toFloatArray(r,4))}),Object(y.a)(re,35675,function(e,t,r){return e.uniformMatrix3fv(t,!1,toFloatArray(r,9))}),Object(y.a)(re,35676,function(e,t,r){return e.uniformMatrix4fv(t,!1,toFloatArray(r,16))}),Object(y.a)(re,35678,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,35680,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,5125,function(e,t,r){return e.uniform1uiv(t,toUIntArray(r,1))}),Object(y.a)(re,36294,function(e,t,r){return e.uniform2uiv(t,toUIntArray(r,2))}),Object(y.a)(re,36295,function(e,t,r){return e.uniform3uiv(t,toUIntArray(r,3))}),Object(y.a)(re,36296,function(e,t,r){return e.uniform4uiv(t,toUIntArray(r,4))}),Object(y.a)(re,35685,function(e,t,r){return e.uniformMatrix2x3fv(t,!1,toFloatArray(r,6))}),Object(y.a)(re,35686,function(e,t,r){return e.uniformMatrix2x4fv(t,!1,toFloatArray(r,8))}),Object(y.a)(re,35687,function(e,t,r){return e.uniformMatrix3x2fv(t,!1,toFloatArray(r,6))}),Object(y.a)(re,35688,function(e,t,r){return e.uniformMatrix3x4fv(t,!1,toFloatArray(r,12))}),Object(y.a)(re,35689,function(e,t,r){return e.uniformMatrix4x2fv(t,!1,toFloatArray(r,8))}),Object(y.a)(re,35690,function(e,t,r){return e.uniformMatrix4x3fv(t,!1,toFloatArray(r,12))}),Object(y.a)(re,35679,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,35682,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36289,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36292,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36293,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36298,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36299,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36300,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36303,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36306,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36307,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36308,function(e,t,r){return e.uniform1i(t,r)}),Object(y.a)(re,36311,function(e,t,r){return e.uniform1i(t,r)}),re),oe={},ae={},se={},le=[0];function toTypedArray(e,t,r,n){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(le[0]=e,e=le);var i=e.length;if(i%t&&c.g.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;var o=n[i];o||(o=new r(i),n[i]=o);for(var a=0;a<i;a++)o[a]=e[a];return o}function toFloatArray(e,t){return toTypedArray(e,t,Float32Array,oe)}function toIntArray(e,t){return toTypedArray(e,t,Int32Array,ae)}function toUIntArray(e,t){return toTypedArray(e,t,Uint32Array,se)}function parseUniformName(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function getUniformSetter(e,t,r){var n=ie[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n.bind(null,e,t)}function checkUniformValues(e,t,r){for(var n in e){var i=e[n];if((!r||Boolean(r[n]))&&!checkUniformValue(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function checkUniformValue(e){return Array.isArray(e)||ArrayBuffer.isView(e)?checkUniformArray(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof B.a||e instanceof ne||(e instanceof W||e instanceof te&&Boolean(e.texture))))}function checkUniformArray(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function areUniformsEqual(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var ue,ce=r(47),pe=5120,he=5121,fe=5122,de=5123,ge=0,me=1,ye=2,ve=3,_e=4,be=5,xe=6,we=5126,Se=(ue={},Object(y.a)(ue,we,[we,1,"float"]),Object(y.a)(ue,35664,[we,2,"vec2"]),Object(y.a)(ue,35665,[we,3,"vec3"]),Object(y.a)(ue,35666,[we,4,"vec4"]),Object(y.a)(ue,5124,[5124,1,"int"]),Object(y.a)(ue,35667,[5124,2,"ivec2"]),Object(y.a)(ue,35668,[5124,3,"ivec3"]),Object(y.a)(ue,35669,[5124,4,"ivec4"]),Object(y.a)(ue,5125,[5125,1,"uint"]),Object(y.a)(ue,36294,[5125,2,"uvec2"]),Object(y.a)(ue,36295,[5125,3,"uvec3"]),Object(y.a)(ue,36296,[5125,4,"uvec4"]),Object(y.a)(ue,35670,[we,1,"bool"]),Object(y.a)(ue,35671,[we,2,"bvec2"]),Object(y.a)(ue,35672,[we,3,"bvec3"]),Object(y.a)(ue,35673,[we,4,"bvec4"]),Object(y.a)(ue,35674,[we,8,"mat2"]),Object(y.a)(ue,35685,[we,8,"mat2x3"]),Object(y.a)(ue,35686,[we,8,"mat2x4"]),Object(y.a)(ue,35675,[we,12,"mat3"]),Object(y.a)(ue,35687,[we,12,"mat3x2"]),Object(y.a)(ue,35688,[we,12,"mat3x4"]),Object(y.a)(ue,35676,[we,16,"mat4"]),Object(y.a)(ue,35689,[we,16,"mat4x2"]),Object(y.a)(ue,35690,[we,16,"mat4x3"]),ue);function getPrimitiveDrawMode(e){switch(e){case ge:return ge;case me:case ve:case ye:return me;case _e:case be:case xe:return _e;default:return Object(x.a)(!1),0}}function decomposeCompositeGLType(e){var t=Se[e];if(!t)return null;var r=Object(U.a)(t,2);return{type:r[0],components:r[1]}}function getCompositeGLType(e,t){switch(e){case pe:case he:case fe:case de:e=we}for(var r in Se){var n=Object(U.a)(Se[r],3),i=n[0],o=n[1],a=n[2];if(i===e&&o===t)return{glType:r,name:a}}return null}var Ee=function(){function ProgramConfiguration(e){Object(d.a)(this,ProgramConfiguration),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(v.a)(ProgramConfiguration,[{key:"getAttributeInfo",value:function getAttributeInfo(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfos[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function getAttributeLocation(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function getAttributeAccessor(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function getVaryingInfo(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function getVaryingIndex(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function getVaryingAccessor(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function _readAttributesFromProgram(e){for(var t=e.gl,r=t.getProgramParameter(e.handle,35721),n=0;n<r;n++){var i=t.getActiveAttrib(e.handle,n),o=i.name,a=i.type,s=i.size,l=t.getAttribLocation(e.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function _readVaryingsFromProgram(e){var t=e.gl;if(Object(o.n)(t)){for(var r=t.getProgramParameter(e.handle,35971),n=0;n<r;n++){var i=t.getTransformFeedbackVarying(e.handle,n),a=i.name,s=i.type,l=i.size;this._addVarying(n,a,s,l)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function _addAttribute(e,t,r,n){var i=decomposeCompositeGLType(r),o={type:i.type,size:n*i.components};this._inferProperties(e,t,o);var a={location:e,name:t,accessor:new ce.a(o)};this.attributeInfos.push(a),this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function _inferProperties(e,t,r){/instance/i.test(t)&&(r.divisor=1)}},{key:"_addVarying",value:function _addVarying(e,t,r,n){var i=decomposeCompositeGLType(r),o=i.type,a=i.components,s={location:e,name:t,accessor:new ce.a({type:o,size:n*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),ProgramConfiguration}(),Pe=function(e){function Program(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Program),(t=Object(k.a)(this,Object(O.a)(Program).call(this,e,r))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),t._isCached=!1,t.initialize(r),Object.seal(Object(z.a)(Object(z.a)(t))),t._setId(r.id),t}return Object(A.a)(Program,e),Object(v.a)(Program,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,r=e.fs,n=e.varyings,i=e.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof t?new D(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof r?new F(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Object(x.a)(this.vs instanceof D),Object(x.a)(this.fs instanceof F),this.uniforms={},this.samplers={},n&&(Object(o.d)(this.gl),this.varyings=n,this.gl.transformFeedbackVaryings(this.handle,n,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ee(this),this.setProps(e)}},{key:"delete",value:function _delete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:get_get(Object(O.a)(Program.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),this}},{key:"draw",value:function draw(e){var t=this,r=e.logPriority,n=e.drawMode,a=void 0===n?4:n,s=e.vertexCount,l=e.offset,u=void 0===l?0:l,p=e.start,h=e.end,f=e.isIndexed,d=void 0!==f&&f,g=e.indexType,m=void 0===g?5123:g,y=e.isInstanced,v=void 0!==y&&y,_=e.instanceCount,b=void 0===_?0:_,w=e.vertexArray,S=void 0===w?null:w,P=e.transformFeedback,C=e.framebuffer,T=e.parameters,k=void 0===T?{}:T,O=e.uniforms,A=void 0===O?{}:O,I=e.samplers,R=void 0===I?{}:I;if(void 0!==r){var M=C?C.id:"default",L="mode=".concat(Object(i.a)(this.gl,a)," verts=").concat(s," ")+"instances=".concat(b," indexType=").concat(Object(i.a)(this.gl,m)," ")+"isInstanced=".concat(v," isIndexed=").concat(d," ")+"Framebuffer=".concat(M);c.g.log(r,L)()}return this.gl.useProgram(this.handle),Object(x.a)(S),S.bindForDraw(s,b,function(){if(A&&(c.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),t.setUniforms(A,R)),t._bindTextures(),void 0!==C&&(k=Object.assign({},k,{framebuffer:C})),P){var e=getPrimitiveDrawMode(a);P.begin(e)}Object(E.c)(t.gl,k,function(){d&&v?t.gl.drawElementsInstanced(a,s,m,u,b):d&&Object(o.n)(t.gl)&&!isNaN(p)&&!isNaN(h)?t.gl.drawRangeElements(a,p,h,s,m,u):d?t.gl.drawElements(a,s,m,u):v?t.gl.drawArraysInstanced(a,u,s,b):t.gl.drawArrays(a,u,s)}),P&&P.end()}),this}},{key:"setSamplers",value:function setSamplers(e){Object.assign(this.samplers,e)}},{key:"setUniforms",value:function setUniforms(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o={};for(var a in t)areUniformsEqual(this.uniforms[a],t[a])||(i=!0,o[a]=t[a],this.uniforms[a]=(e=t[a],Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e));return i&&(n(),checkUniformValues(o,this.id,this._uniformSetters),Object.assign(this.samplers,r),this._setUniforms(o)),this}},{key:"_bindTextures",value:function _bindTextures(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var r=this.uniforms[e],n=this.samplers[e];r instanceof te&&(r=r.texture),r instanceof B.a&&r.bind(t.textureIndex),n&&n.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function _setUniforms(e){for(var t in this.gl.useProgram(this.handle),e){var r=e[t],n=this._uniformSetters[t];if(n)if(r instanceof te&&(r=r.texture),r instanceof B.a){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var i=r,o=n.textureIndex;i.bind(o),n(o)}else n(r)}return this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function _getOptionsFromHandle(e){var t=this.gl.getAttachedShaders(e),r={},n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new D({handle:l});break;case 35632:r.fs=new F({handle:l})}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}},{key:"_getParameter",value:function _getParameter(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function _setId(e){if(!e){var t=this._getName();this.id=Object(c.i)(t)}}},{key:"_getName",value:function _getName(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function _compileAndLink(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),c.g.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),c.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||c.g.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function _readUniformLocationsFromLinkedProgram(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),n=parseUniformName(r.name),i=n.name,o=(n.isArray,e.getUniformLocation(this.handle,i));this._uniformSetters[i]=getUniformSetter(e,o,r)}this._textureIndexCounter=0}},{key:"reset",value:function reset(){}},{key:"getActiveUniforms",value:function getActiveUniforms(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function getUniformBlockIndex(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function getActiveUniformBlockParameter(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function uniformBlockBinding(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),Program}(I.a),Ce=(r(74),I.a,function noop(e){return e}),Te=function(e){function Query(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Query),t=Object(k.a)(this,Object(O.a)(Query).call(this,e,r));var n=r.onComplete,i=void 0===n?Ce:n,o=r.onError,a=void 0===o?Ce:o;return t.target=null,t.onComplete=i,t.onError=a,t.promise=null,Object.seal(Object(z.a)(Object(z.a)(t))),t}return Object(A.a)(Query,e),Object(v.a)(Query,null,[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(o.n)(e),n=hasFeatures(e,C.TIMER_QUERY),i=r||n,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){switch(u.value){case"queries":i=i&&r;break;case"timers":i=i&&n;break;case"timestamps":var p=n?e.getQuery(36392,34916):0;i=i&&p>0;break;default:Object(x.a)(!1)}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return i}}]),Object(v.a)(Query,[{key:"beginTimeElapsedQuery",value:function beginTimeElapsedQuery(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function beginOcclusionQuery(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function beginTransformFeedbackQuery(){return this.begin(35976)}},{key:"getTimestamp",value:function getTimestamp(){b.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){b.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function begin(e){b.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){b.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function end(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function cancel(){return this.end(),b.cancelQuery(this),this}},{key:"isResultAvailable",value:function isResultAvailable(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function getResult(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function _createHandle(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function _deleteHandle(){b.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function poll(e){b.poll(e)}}]),Query}(I.a);b.setInvalidator({queryType:Te,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function checkInvalid(e){return e.getParameter(36795)}});r(108),B.a;var ke=function(e){function TransformFeedback(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,TransformFeedback),Object(o.d)(e),(t=Object(k.a)(this,Object(O.a)(TransformFeedback).call(this,e,r))).initialize(r),t.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(z.a)(Object(z.a)(t))),t}return Object(A.a)(TransformFeedback,e),Object(v.a)(TransformFeedback,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(TransformFeedback,[{key:"initialize",value:function initialize(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(c.d)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(t),this}},{key:"setProps",value:function setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function setBuffers(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var r in t)e.setBuffer(r,t[r])}),this}},{key:"setBuffer",value:function setBuffer(e,t){var r=this,n=this._getVaryingIndex(e),i=this._getBufferParams(t),o=i.buffer,a=i.sizeInBytes,s=i.offsetInBytes;return n<0?(this.unused[e]=o,c.g.warn(function(){return"".concat(r.id," unused varying buffer ").concat(e)})(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,o,s,a),this)}},{key:"begin",value:function begin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function _getBufferParams(e){var t,r,n;return e instanceof T.a==!1?(n=e.buffer,r=e.sizeInBytes,t=e.offsetInBytes):n=e,void 0===t&&void 0===r||(t=t||0,r=r||n.byteLength-t),{buffer:n,offsetInBytes:t,sizeInBytes:r}}},{key:"_getVaryingInfo",value:function _getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function _getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function _bindBuffers(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),r=t.buffer,n=t.sizeInBytes,i=t.offsetInBytes;this._bindBuffer(e,r,i,n)}}},{key:"_unbindBuffers",value:function _unbindBuffers(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function _bindBuffer(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==n?this.gl.bindBufferRange(35982,e,i,r,n):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(I.a),Oe=null;function getScratchArray(e,t){var r;return new e((r=e.BYTES_PER_ELEMENT*t,(!Oe||Oe.byteLength<r)&&(Oe=new ArrayBuffer(r)),Oe),0,t)}function fillArray(e){for(var t=e.target,r=e.source,n=e.start,i=void 0===n?0:n,o=e.count,a=void 0===o?1:o,s=r.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=r[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l);return t}var Ae=r(42),Ie=r(112),Re=r(113);function getBrowser(e){if(!e&&!Object(Ie.a)())return"Node";if(Object(Re.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i?"IE":Ae.b.chrome?"Chrome":Ae.b.safari?"Safari":Ae.b.mozInnerScreenX?"Firefox":"Unknown"}var Me=function(e){function VertexArrayObject(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,VertexArrayObject);var n=r.id||r.program&&r.program.id;return(t=Object(k.a)(this,Object(O.a)(VertexArrayObject).call(this,e,Object.assign({},r,{id:n})))).hasVertexArrays=VertexArrayObject.isSupported(e),t.buffer=null,t.bufferValue=null,t.initialize(r),Object.seal(Object(z.a)(Object(z.a)(t))),t}return Object(A.a)(VertexArrayObject,e),Object(v.a)(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?Object(o.n)(e)||"Chrome"===getBrowser():Object(o.n)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new VertexArrayObject(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function getMaxAttributes(e){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||e.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function setConstant(e,t,r){switch(r.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(e,t,r);break;case Int32Array:VertexArrayObject._setConstantIntArray(e,t,r);break;case Uint32Array:VertexArrayObject._setConstantUintArray(e,t,r);break;default:Object(c.a)(!1)}}}]),Object(v.a)(VertexArrayObject,[{key:"delete",value:function _delete(){get_get(Object(O.a)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function setProps(e){return this}},{key:"setElementBuffer",value:function setElementBuffer(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function setBuffer(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var n=r.size,i=r.type,a=r.stride,s=r.offset,l=r.normalized,u=r.integer,p=r.divisor,h=this.gl;return e=Number(e),this.bind(function(){h.bindBuffer(34962,t.handle),u?(Object(c.a)(Object(o.n)(h)),h.vertexAttribIPointer(e,n,i,a,s)):h.vertexAttribPointer(e,n,i,l,a,s),h.enableVertexAttribArray(e),h.vertexAttribDivisor(e,p||0)}),this}},{key:"enable",value:function enable(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===e&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return r?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function getConstantBuffer(e,t,r){var n=this._normalizeConstantArrayValue(t,r),i=n.byteLength*e,o=n.length*e,a=!this.buffer;if(this.buffer=this.buffer||new T.a(this.gl,i),a=(a=a||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(n,this.bufferValue)){var s=getScratchArray(t.constructor,o);fillArray({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function _normalizeConstantArrayValue(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function _compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function _createHandle(){return this.hasVertexArrays=VertexArrayObject.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function _deleteHandle(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function _bindHandle(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function _getParameter(e,t){var r=this,n=t.location;return Object(c.a)(Number.isFinite(n)),this.bind(function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(n,e);default:return r.gl.getVertexAttrib(n,e)}})}},{key:"MAX_ATTRIBUTES",get:function get(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function _setConstantFloatArray(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function _setConstantIntArray(e,t,r){switch(Object(c.a)(Object(o.n)(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function _setConstantUintArray(e,t,r){switch(Object(c.a)(Object(o.n)(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:Object(c.a)(!1)}}}]),VertexArrayObject}(I.a),Le=function(){function VertexArray(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,VertexArray);var r=t.id||t.program&&t.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=Me.isSupported(e)?new Me(e):Me.getDefaultArray(e),Object(c.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(t),Object.seal(this)}return Object(v.a)(VertexArray,[{key:"delete",value:function _delete(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function reset(){this.elements=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function clearDrawParams(){this.drawParams=null}},{key:"getDrawParams",value:function getDrawParams(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function setAttributes(e){var t=this;return this.vertexArrayObject.bind(function(){for(var r in e){var n=e[r];if(n instanceof T.a)t.setBuffer(r,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof T.a){var i=n[0],o=n[1];t.setBuffer(r,i,o)}else{if(!ArrayBuffer.isView(n)&&!Array.isArray(n))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");t.setConstant(r,n)}}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function setElementBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function setBuffer(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t);var n=this._resolveLocationAndAccessor(e,t,t.accessor,r),i=n.location,o=n.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,o)),this}},{key:"setConstant",value:function setConstant(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this._resolveLocationAndAccessor(e,t,r),i=n.location,o=n.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,o),this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function unbindBuffers(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new T.a(e.gl,{size:4});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof T.a&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function bindBuffers(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof T.a&&e.setBuffer(t,r)}}),this}},{key:"bindForDraw",value:function bindForDraw(e,t,r){var n,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),n=r(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),n}},{key:"_resolveLocationAndAccessor",value:function _resolveLocationAndAccessor(e,t,r,n){var i=this,o=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,c.g.once(3,function(){return"unused value ".concat(e," in ").concat(i.id)})(),this;var a=this._getAttributeInfo(e),s=ce.a.resolve(a.accessor,r,n),l=s.size,u=s.type;return Object(c.a)(Number.isFinite(l)&&Number.isFinite(u)),{location:o,accessor:s}}},{key:"_getAttributeInfo",value:function _getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function _getAttributeIndex(e){if(this.configuration)return this.configuration.getAttributeLocation(e);var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_setConstantAttributes",value:function _setConstantAttributes(e,t){var r=Math.max(0|e,0|t),n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)n=this.values[i],ArrayBuffer.isView(n)&&this._setConstantAttribute(i,n)}},{key:"_setConstantAttributeZero",value:function _setConstantAttributeZero(e,t){if(Me.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function _setConstantAttribute(e,t){Me.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function _updateDrawParams(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elements.accessor.type),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function _updateDrawParamsForLocation(e,t){var r=this.values[t],n=this.accessors[t];if(r){var i=n.divisor>0;if(e.isInstanced=e.isInstanced||i,r instanceof T.a){var o=r;if(i){var a=o.getVertexCount(n);e.instanceCount=Math.min(e.instanceCount,a)}else{var s=o.getVertexCount(n);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function setElements(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(e,t)}}]),VertexArray}(),je=r(89),De=r(416),Fe=function(){function Object3D(e){var t=e.id;e.display;Object(d.a)(this,Object3D),this.id=t||Object(c.i)(this.constructor.name),this.display=!0,this.position=new je.a,this.rotation=new je.a,this.scale=new je.a(1,1,1),this.matrix=new De.a,this.userData={}}return Object(v.a)(Object3D,[{key:"toString",value:function toString(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function setPosition(e){return Object(x.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function setRotation(e){return Object(x.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function setScale(e){return Object(x.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function setMatrixComponents(e){var t=e.position,r=e.rotation,n=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function updateMatrix(){var e=this.position,t=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(r),this}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,r=e.rotation,n=e.scale;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function getCoordinateUniforms(e,t){Object(x.a)(e),t=t||this.matrix;var r=new De.a(e).multiplyRight(t),n=r.invert(),i=n.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:n,worldInverseTransposeMatrix:i}}},{key:"transform",value:function transform(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,r=0;r<t.length;++r)t[r].transform();return this}}]),Object3D}(),Ne=(r(21),function(){function Attribute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Attribute);var r=t.id,n=void 0===r?Object(c.i)("attribute"):r,i=t.type,o=t.isIndexed,a=void 0!==o&&o;this.gl=e,this.id=n,this.isIndexed=a,this.target=a?34963:34962,this.type=i,a&&!i&&(this.type=e&&hasFeature(e,C.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(t),Object.seal(this),this._validateAttributeDefinition()}return Object(v.a)(Attribute,[{key:"delete",value:function _delete(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function update(e){var t=e.value,r=e.buffer,n=e.constant,i=void 0===n?this.constant||!1:n;this.constant=i,r?(this.externalBuffer=r,this.constant=!1,this.type=r.accessor.type,void 0!==r.accessor.divisor&&(this.divisor=r.accessor.divisor)):t&&(this.externalBuffer=null,this.value=t,!i&&this.gl&&(this.buffer=this.buffer||new T.a(this.gl,Object.assign({},e,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)),this._setAccessor(e)}},{key:"getBuffer",value:function getBuffer(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function getValue(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_setAccessor",value:function _setAccessor(e){var t=e.size,r=void 0===t?this.size:t,n=e.offset,i=void 0===n?this.offset||0:n,o=e.stride,a=void 0===o?this.stride||0:o,s=e.normalized,l=void 0===s?this.normalized||!1:s,u=e.integer,p=void 0===u?this.integer||!1:u,h=e.divisor,f=void 0===h?this.divisor||0:h,d=e.instanced,g=e.isInstanced;this.size=r,this.offset=i,this.stride=a,this.normalized=l,this.integer=p,this.divisor=f,void 0!==g&&(c.g.deprecated("Attribute.isInstanced"),this.divisor=g?1:0),void 0!==d&&(c.g.deprecated("Attribute.instanced"),this.divisor=d?1:0)}},{key:"_validateAttributeDefinition",value:function _validateAttributeDefinition(){}}]),Attribute}()),ze={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function getDrawMode(e){var t="string"==typeof e?ze[e]||ze.TRIANGLES:e;return Object(x.a)(t>=0&&t<=ze.TRIANGLE_FAN,"Illegal drawMode"),t}var Be=function(){function Geometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,Geometry);var t=e.id,r=e.drawMode,n=void 0===r?ze.TRIANGLES:r,i=e.vertexCount,o=void 0===i?void 0:i,a=e.attributes;this.id=t||Object(c.i)(this.constructor.name),this.drawMode=getDrawMode(n),this.vertexCount=o,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),a&&this.setAttributes(a)}return Object(v.a)(Geometry,[{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,r}},{key:"setVertexCount",value:function setVertexCount(e){this.vertexCount=e}},{key:"getVertexCount",value:function getVertexCount(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function hasAttribute(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function getAttribute(e){var t=this.attributes[e];return Object(x.a)(t),t.value}},{key:"getArray",value:function getArray(e){var t=this.attributes[e];return Object(x.a)(t),t.value}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setAttributes",value:function setAttributes(e){for(var t in e){var r=e[t];r=ArrayBuffer.isView(r)?{value:r}:r,Object(x.a)(ArrayBuffer.isView(r.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,r),this.attributes[t]=r}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function _autoDetectAttribute(e,t){var r;switch(e){case"indices":r=r||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,Object(x.a)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(x.a)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function _print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),Geometry}(),Ue="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",Ve="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",qe="vs",Ge="fs";function transpileShader(e,t,r){switch(t){case 300:return r?convertVertexShaderTo300(e):convertFragmentShaderTo300(e);case 100:return r?convertVertexShaderTo100(e):convertFragmentShaderTo100(e);default:throw new Error("unknown GLSL version ".concat(t))}}function convertVertexShaderTo300(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}function convertFragmentShaderTo300(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}function convertVertexShaderTo100(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function convertFragmentShaderTo100(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function assert_assert(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var We=function(){function ShaderModule(e){var t=e.name,r=e.vs,n=e.fs,i=e.dependencies,o=void 0===i?[]:i,a=e.getUniforms,s=void 0===a?function(){return{}}:a,l=e.deprecations,u=void 0===l?[]:l,c=e.vertexShader,p=e.fragmentShader;Object(d.a)(this,ShaderModule),assert_assert("string"==typeof t),this.name=t,this.vs=r||c,this.fs=n||p,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(u)}return Object(v.a)(ShaderModule,[{key:"getModuleSource",value:function getModuleSource(e,t){var r;switch(e){case"vs":r=transpileShader(this.vs||"",t,!0);break;case"fs":r=transpileShader(this.fs||"",t,!1);break;default:assert_assert(!1)}return"string"!=typeof r?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(r,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function getUniforms(e,t){return this.getModuleUniforms(e,t)}},{key:"checkDeprecations",value:function checkDeprecations(e,t){this.deprecations.forEach(function(r){r.regex.test(e)&&(r.deprecated&&t?t.deprecated(r.old,r.new)():t&&t.removed(r.old,r.new)())})}},{key:"_parseDeprecationDefinitions",value:function _parseDeprecationDefinitions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}}]),ShaderModule}(),He=new(function(){function ShaderModuleRegistry(){Object(d.a)(this,ShaderModuleRegistry),this.shaderModules={},this.defaultShaderModules=[]}return Object(v.a)(ShaderModuleRegistry,[{key:"setDefaultShaderModules",value:function setDefaultShaderModules(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function registerShaderModules(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,r=void 0!==t&&t,n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this._registerShaderModule(l,r)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"getShaderModule",value:function getShaderModule(e){if(e instanceof We)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||assert_assert(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function resolveModules(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})}},{key:"_registerShaderModule",value:function _registerShaderModule(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof We)return e;if(assert_assert(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new We(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),ShaderModuleRegistry}());function setDefaultShaderModules(e){He.setDefaultShaderModules(e)}function registerShaderModules(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,r=void 0!==t&&t;He.registerShaderModules(e,{ignoreMultipleRegistrations:r})}function resolveModules(e){return e=e.concat(He.defaultShaderModules),getShaderDependencies(e=He.resolveModules(e))}function getShaderDependencies(e){var t={},r={};return getDependencyGraph({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort(function(e,t){return r[t]-r[e]}).map(function(e){return t[e]})}function getDependencyGraph(e){var t=e.modules,r=e.level,n=e.moduleMap,i=e.moduleDepth;if(r>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n[c.name]=c,(void 0===i[c.name]||i[c.name]<r)&&(i[c.name]=r)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var p=!0,h=!1,f=void 0;try{for(var d,g=t[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var m=d.value;m.dependencies&&getDependencyGraph({modules:m.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}}function isOldIE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},r=e.userAgent||t.userAgent||"",n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i}var Xe=32874,Ke=7936,Ze=7937,Ye=7938,Je=35724,Qe={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},$e={};function webgl_info_isWebGL2(e){return Boolean(e&&("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||32874===Xe))}function webgl_info_getContextInfo(e){var t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Ke),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Ze);return{gpuVendor:identifyGPUVendor(r,n),vendor:r,renderer:n,version:e.getParameter(Ye),shadingLanguageVersion:e.getParameter(Je)}}function identifyGPUVendor(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(Qe).forEach(function(e){$e[e]=e});var et={};function webgl_info_canCompileGLGSExtension(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Qe[t];if(assert_assert(n,t),!isOldIE(r))return!0;if(t in et)return et[t];var i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);var l=e.getShaderParameter(s,35713);return e.deleteShader(s),et[t]=l,l}function webgl_info_getFeature(e,t){var r=Qe[t];assert_assert(r,t);var n=webgl_info_isWebGL2(e)&&r[1]||r[0],i="string"==typeof n?Boolean(e.getExtension(n)):n;return assert_assert(!1===i||!0===i),i}function webgl_info_hasFeatures(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return webgl_info_getFeature(e,t)})}function getPlatformShaderDefines(e){switch(webgl_info_getContextInfo(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function getVersionDefines(e,t,r){var n="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return webgl_info_hasFeatures(e,$e.GLSL_FRAG_DEPTH)&&(n+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_DERIVATIVES)&&webgl_info_canCompileGLGSExtension(e,$e.GLSL_DERIVATIVES)&&(n+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_FRAG_DATA)&&webgl_info_canCompileGLGSExtension(e,$e.GLSL_FRAG_DATA,{behavior:"require"})&&(n+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_TEXTURE_LOD)&&(n+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),n}var tt,rt,nt=r(55),it=r.n(nt),ot=(tt={},Object(y.a)(tt,qe,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(y.a)(tt,Ge,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),tt),at=/void main\s*\([^\)]*\)\s*\{\n?/,st=/}\n?[^{}]*$/;function injectShader(e,t,r,n){var i=t===qe,o=function _loop(t){var n=r[t];switch(t){case"vs:#decl":i&&(e=e.replace(at,function(e){return"".concat(n,"\n").concat(e)}));break;case"vs:#main-start":i&&(e=e.replace(at,function(e){return e+n}));break;case"vs:#main-end":i&&(e=e.replace(st,function(e){return n+e}));break;case"fs:#decl":i||(e=e.replace(at,function(e){return"".concat(n,"\n").concat(e)}));break;case"fs:#main-start":i||(e=e.replace(at,function(e){return e+n}));break;case"fs:#main-end":i||(e=e.replace(st,function(e){return n+e}));break;default:e=e.replace(t,function(e){return e+n})}};for(var a in r)o(a);return n&&(e=e.replace("}s*$",function(e){return e+ot[t]})),e}function combineInjects(e){var t={};return it()(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var r in e)t[r]=t[r]?"".concat(t[r],"\n").concat(e[r]):e[r]}),t}var lt=(rt={},Object(y.a)(rt,qe,"vertex"),Object(y.a)(rt,Ge,"fragment"),rt),ut="precision highp float;\n\n";function assembleShaders(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.vs,n=t.fs,i=resolveModules(t.modules||[]);return{gl:e,vs:assembleShader(e,Object.assign({},t,{source:r,type:qe,modules:i})),fs:assembleShader(e,Object.assign({},t,{source:n,type:Ge,modules:i})),getUniforms:assembleGetUniforms(i),modules:assembleModuleMap(i)}}function assembleShader(e,t){var r=t.id,n=t.source,i=t.type,o=t.modules,a=void 0===o?[]:o,s=t.defines,l=void 0===s?{}:s,u=t.inject,c=void 0===u?{}:u,p=t.prologue,h=void 0===p||p,f=t.log;assert_assert("string"==typeof n,"shader source must be a string");var d=i===qe,g=n.split("\n"),m=100,y="",v=n;0===g[0].indexOf("#version ")&&(m=300,y=g[0],v=g.slice(1).join("\n"));var _=h?"".concat(y,"\n").concat(getShaderName({id:r,source:n,type:i}),"\n").concat(getPlatformShaderDefines(e),"\n").concat(getVersionDefines(e),"\n").concat(getApplicationDefines(l),"\n").concat(d?"":ut,"\n"):"".concat(y,"\n"),b=!1,x=!0,w=!1,S=void 0;try{for(var E,P=a[Symbol.iterator]();!(x=(E=P.next()).done);x=!0){var C=E.value;switch(C.name){case"inject":b=!0;break;default:C.checkDeprecations(v,f),_+=C.getModuleSource(i,m)}}}catch(e){w=!0,S=e}finally{try{x||null==P.return||P.return()}finally{if(w)throw S}}return _=injectShader(_+=v,i,c,b)}function assembleGetUniforms(e){return function getUniforms(t){var r={},n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value.getUniforms(t,r);Object.assign(r,l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}function assembleModuleMap(e){var t,r={},n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=(t=l,He.getShaderModule(t));r[l]=u}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function getShaderName(e){var t=e.id,r=e.source,n=e.type;return t&&"string"==typeof t&&-1===r.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(lt[n],"\n\n"):""}function getApplicationDefines(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,r="";for(var n in e){0===t&&(r+="\n// APPLICATION DEFINES\n"),t++;var i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}return 0===t&&(r+="\n"),r}var ct={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function fp64ify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.fround(e),i=e-n;return t[r]=n,t[r+1]=i,t}var pt="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",ht="".concat(pt,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),ft={ONE:1};var dt={name:"fp64",vs:ht,fs:null,fp64ify:fp64ify,fp64LowPart:function fp64LowPart(e){return e-Math.fround(e)},fp64ifyMatrix4:function fp64ifyMatrix4(e){for(var t=new Float32Array(32),r=0;r<4;++r)for(var n=0;n<4;++n){var i=4*r+n;fp64ify(e[4*n+r],t,2*i)}return t},getUniforms:function fp64_getUniforms(){return Object.assign({},ft)}},gt=("".concat(pt),[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),mt={modelMatrix:gt,viewMatrix:gt,projectionMatrix:gt,cameraPositionWorld:[0,0,0]};var yt="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n";"".concat(yt,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),"\n".concat(yt);"".concat("\n","\n").concat("#define LIGHT_MAX 4\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform bool lighting_uEnableReflections;\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\nuniform float reflection;\nuniform float refraction;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n"),new Float32Array([1,1,2]);var vt={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var _t={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function picking_getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var r=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}};var bt="void main() {}",xt="#version 300 es\n".concat(bt);function getQualifierDetails(e,t){t=Array.isArray(t)?t:[t];var r=e.replace(/^\s+/,"").split(/\s+/),n=Object(U.a)(r,3),i=n[0],o=n[1],a=n[2];return t.includes(i)&&o&&a?{qualifier:i,type:o,name:a.split(";")[0]}:null}function getPassthroughFS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,r=void 0===t?100:t,n=e.input,i=e.inputType,o=e.output;if(!n)return 300===r?xt:bt;var a=convertToVec4(n,i);return 300===r?"#version 300 es\nin ".concat(i," ").concat(n,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function typeToChannelSuffix(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return it()(!1),null}}function typeToChannelCount(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return it()(!1),null}}function convertToVec4(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return it()(!1),null}}var wt={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},St=r(27),Et=r.n(St),Pt={},Ct=function addModel(e){Pt[e.id]||(Pt[e.id]=e,Et.a.listItem("luma.gl",e.id))},Tt=function logModel(e,t){if(Et.a.isReady()&&!Et.a.throttle("luma.gl:".concat(e.id),1e3)){var r=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,n=Object.assign({},e.uniforms,t);Et.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:n},{path:"objects.attributes",data:r}])}},kt=function removeModel(e){delete Pt[e],Et.a.deleteItem("luma.gl",e)},Ot=function recursiveSet(e,t,r){e&&(t.length>1?recursiveSet(e[t[0]],t.slice(1),r):e[t[0]]=r)},At=new Map,It=function setOverride(e,t,r){g.b.__SEER_INITIALIZED__&&(At.has(e)||At.set(e,new Map),At.get(e).set(t,r))},Rt=function getOverrides(e,t){if(g.b.__SEER_INITIALIZED__&&e){var r=At.get(e);r&&r.forEach(function(e,r){Ot(t,r,e)})}};function getDebugTableForUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,r=void 0===t?"Uniforms":t,n=e.program,i=e.uniforms,o=e.undefinedOnly,a=void 0!==o&&o;Object(x.a)(n);var s=n._uniformSetters,l={},u=Object.keys(s).sort(),p=0,h=!0,f=!1,d=void 0;try{for(var g,m=u[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var v=g.value;v.match(".*_.*")||v.match(".*Matrix")||addUniformToTable({table:l,header:r,uniforms:i,uniformName:v,undefinedOnly:a})&&p++}}catch(e){f=!0,d=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}var _=!0,b=!1,w=void 0;try{for(var S,E=u[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var P=S.value;P.match(".*Matrix")&&addUniformToTable({table:l,header:r,uniforms:i,uniformName:P,undefinedOnly:a})&&p++}}catch(e){b=!0,w=e}finally{try{_||null==E.return||E.return()}finally{if(b)throw w}}var C=!0,T=!1,k=void 0;try{for(var O,A=u[Symbol.iterator]();!(C=(O=A.next()).done);C=!0){var I=O.value;l[I]||addUniformToTable({table:l,header:r,uniforms:i,uniformName:I,undefinedOnly:a})&&p++}}catch(e){T=!0,k=e}finally{try{C||null==A.return||A.return()}finally{if(T)throw k}}var R=0,M={};if(!a)for(var L in i){var j=i[L];l[L]||(R++,M[L]=Object(y.a)({Type:"NOT USED: ".concat(j)},r,Object(c.b)(j)))}return{table:l,count:p,unusedTable:M,unusedCount:R}}function addUniformToTable(e){var t,r=e.table,n=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],l=isUniformDefined(s);return(!a||!l)&&(r[o]=(t={},Object(y.a)(t,n,l?Object(c.b)(s):"N/A"),Object(y.a)(t,"Uniform Type",l?s:"NOT PROVIDED"),t),!0)}function isUniformDefined(e){return null!=e}function getDebugTableForVertexArray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,n=void 0===r?"Attributes":r;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=getDebugTableRow(t,t.elements,null,n));var o=t.values;for(var a in o){var s=t._getAttributeInfo(a);if(s){var l="".concat(a,": ").concat(s.name),u=t.accessors[s.location];u&&(l="".concat(a,": ").concat(getGLSLDeclaration(s.name,u))),i[l]=getDebugTableRow(t,o[a],u,n)}}return i}function getDebugTableRow(e,t,r,n){var o,a,s,l,u=e.gl,p="NOT PROVIDED",h="N/A",f="N/A",d="N/A";if(r&&(p=r.type,h=r.size,a=-1!==(p=String(p).replace("Array","")).indexOf("nt")),t instanceof T.a){var g,m,v=t,_=v.getDebugData(),b=_.data;if(s=_.modified?"*":"",l=b,f=(d=v.byteLength)/b.BYTES_PER_ELEMENT/h,r){var x=r.divisor>0;m="".concat(x?"I ":"P "," ").concat(f," (x").concat(h,"=").concat(d," bytes ").concat(Object(i.c)(u,p),")")}else a=!0,m="".concat(d," bytes");return g={},Object(y.a)(g,n,"".concat(s).concat(Object(c.b)(l,{size:h,isInteger:a}))),Object(y.a)(g,"Format ",m),g}return l=t,h=t.length,a=-1!==(p=String(t.constructor.name).replace("Array","")).indexOf("nt"),o={},Object(y.a)(o,n,"".concat(Object(c.b)(l,{size:h,isInteger:a})," (constant)")),Object(y.a)(o,"Format ","".concat(h,"x").concat(p," (constant)")),o}function getGLSLDeclaration(e,t){var r=getCompositeGLType(t.type,t.size);return r?"".concat(e," (").concat(r.name,")"):e}function getDebugTableForProgramConfiguration(e){var t={},r="Accessors for ".concat(e.id),n=!0,i=!1,o=void 0;try{for(var a,s=e.attributeInfos[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(l){var u=debug_program_configuration_getGLSLDeclaration(l);t["in ".concat(u)]=Object(y.a)({},r,JSON.stringify(l.accessor))}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,p=!1,h=void 0;try{for(var f,d=e.varyingInfos[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var g=f.value;if(g){var m=debug_program_configuration_getGLSLDeclaration(g);t["out ".concat(m)]=Object(y.a)({},r,JSON.stringify(g.accessor))}}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}return t}function debug_program_configuration_getGLSLDeclaration(e){var t=e.accessor,r=getCompositeGLType(t.type,t.size);return r?"".concat(r.name," ").concat(e.name):e.name}Et.a.listenFor("luma.gl",function(e){var t=Pt[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var r=e.valuePath.slice(1);It(e.itemKey,r,e.value);var n=t.getUniforms();Ot(n,r,e.value),t.setUniforms(n)}});var Mt=["renderPickingBuffer","pickingEnabled"],Lt=function(e){function Model(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Model),t=Object(k.a)(this,Object(O.a)(Model).call(this,r)),Object(x.a)(Object(o.m)(e)),t.gl=e,t.lastLogTime=0,t.initialize(r),t}return Object(A.a)(Model,e),Object(v.a)(Model,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new Le(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings))),this.isInstanced=e.isInstanced||e.instanced,this.onBeforeRender=e.onBeforeRender||function(){},this.onAfterRender=e.onAfterRender||function(){},Object(x.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function setProps(e){Object.assign(this.props,e),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&Te.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&c.g.warn("GPU timer not supported")()),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"delete",value:function _delete(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this.program.delete(),this.vertexArray.delete(),kt(this.id)}},{key:"destroy",value:function destroy(){this.delete()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,this.geometry&&(r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:t})),this.animated&&(r=r||"animated model ".concat(this.id)),r}},{key:"getDrawMode",value:function getDrawMode(){return this.drawMode}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getUniforms",value:function getUniforms(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"setDrawMode",value:function setDrawMode(e){return this.props.drawMode=getDrawMode(e),this}},{key:"setVertexCount",value:function setVertexCount(e){return Object(x.a)(Number.isFinite(e)),this.props.vertexCount=e,this}},{key:"setInstanceCount",value:function setInstanceCount(e){return Object(x.a)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function setGeometry(e){this.geometry=e;var t=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function setAttributes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;Object.assign(this.attributes,e);var t=this._createBuffersFromAttributeDescriptors(e);return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function setUniforms(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),Rt(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,r,function(){e._checkForDeprecatedUniforms(t),e.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function _setAnimationProps(e){var t=this;if(this.animated){Object(x.a)(e,"Model.draw(): animated uniforms but no animationProps");var r=this._evaluateAnimateUniforms(e);this.program.setUniforms(r,{},function(){t._checkForDeprecatedUniforms(r),t.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function updateModuleSettings(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function clear(e){return clear_clear(this.program.gl,e),this}},{key:"draw",value:function draw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,r=void 0===t?null:t,n=e.framebuffer,i=e.uniforms,o=void 0===i?{}:i,a=e.attributes,s=void 0===a?{}:a,l=e.samplers,u=void 0===l?{}:l,p=e.transformFeedback,h=void 0===p?this.transformFeedback:p,f=e.parameters,d=void 0===f?{}:f,g=e.vertexArray,m=void 0===g?this.vertexArray:g,y=e.animationProps;Ct(this),this.setAttributes(s),this.updateModuleSettings(r),this.setUniforms(o,u),this._refreshAnimationProps(y);var v=this._logDrawCallStart(2),_=this.vertexArray.getDrawParams(this.props);_.isInstanced&&!this.isInstanced&&c.g.warn("Found instanced attributes on non-instanced model",this.id)();var b=_.isIndexed,x=_.indexType,w=this.isInstanced,S=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},e,{logPriority:v,uniforms:null,framebuffer:n,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:m,transformFeedback:h,isIndexed:b,indexType:x,isInstanced:w,instanceCount:S})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(v,m,n),this}},{key:"transform",value:function transform(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,r=void 0===t||t,n=e.feedbackBuffers,i=e.unbindModels,o=void 0===i?[]:i,a=e.parameters;n&&this._setFeedbackBuffers(n),r&&(a=Object.assign({},a,Object(y.a)({},35977,r))),o.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:a}))}finally{o.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function render(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(x.a)(arguments.length<=1),this.draw({uniforms:e})}},{key:"_createProgram",value:function _createProgram(e){var t=e.vs,r=void 0===t?null:t,n=e.fs,i=void 0===n?null:n,o=e.modules,a=void 0===o?null:o,s=e.defines,l=void 0===s?{}:s,u=e.inject,p=void 0===u?{}:u,h=e.shaderCache,f=void 0===h?null:h,d=e.varyings,g=void 0===d?null:d,m=e.bufferMode,y=void 0===m?35981:m,v=e.program,_=void 0===v?null:v;this.getModuleUniforms=function(e){};var b=this.id;if(!_){r=r||Ue,i=i||Ve;var w=assembleShaders(this.gl,{vs:r,fs:i,modules:a,inject:p,defines:l,log:c.g});r=w.vs,i=w.fs,_=f?f.getProgram(this.gl,{id:b,vs:r,fs:i}):new Pe(this.gl,{id:b,vs:r,fs:i,varyings:g,bufferMode:y}),this.getModuleUniforms=w.getUniforms||function(e){}}return Object(x.a)(_ instanceof Pe,"Model needs a program"),_}},{key:"_checkForDeprecatedUniforms",value:function _checkForDeprecatedUniforms(e){Mt.forEach(function(t){t in e&&c.g.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function _refreshAnimationProps(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function _evaluateAnimateUniforms(e){if(!this.animated)return{};var t={};for(var r in this.animatedUniforms){var n=this.animatedUniforms[r];t[r]=n(e)}return t}},{key:"_extractAnimatedUniforms",value:function _extractAnimatedUniforms(e){var t=!1;for(var r in e){var n=e[r];"function"==typeof n?(this.animatedUniforms[r]=n,t=!0):delete this.animatedUniforms[r]}if(this.animated=!Object(c.d)(this.animatedUniforms),!t)return e;var i={};for(var o in e)this.animatedUniforms[o]||(i[o]=e[o]);return i}},{key:"_setFeedbackBuffers",value:function _setFeedbackBuffers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new ke(t,{program:this.program}),this.transformFeedback.setBuffers(e),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function _timerQueryStart(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new Te(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function _timerQueryEnd(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,c.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function _createBuffersFromAttributeDescriptors(e){var t=this.program.gl,r={};for(var n in e){var i=e[n],o=this._attributes[n];i instanceof Ne?o=i:i instanceof T.a?(o=o||new Ne(t,Object.assign({},i,i.layout,{id:n}))).update({buffer:i}):o?o.update(i):o=new Ne(t,Object.assign({},i,{id:n})),this._attributes[n]=o,r[n]=o.getValue()}return r}},{key:"_logDrawCallStart",value:function _logDrawCallStart(e){var t=e>3?0:1e4;if(!(c.g.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),c.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:c.g.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function _logDrawCallEnd(e,t,r,n){if(void 0!==e){var i=getDebugTableForVertexArray({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),a=o.table,s=o.unusedTable,l=o.unusedCount,u=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),p=u.table;u.count>0&&c.g.log("MISSING UNIFORMS",Object.keys(p))(),l>0&&c.g.log("UNUSED UNIFORMS",Object.keys(s))();var h=getDebugTableForProgramConfiguration(this.vertexArray.configuration);c.g.table(e,i)(),c.g.table(e,a)(),c.g.table(e+1,h)(),Tt(this,r),n&&n.log({priority:2,message:"Rendered to ".concat(n.id)}),c.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function get(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function get(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),Model}(Fe),jt=r(25),Dt={preserveDrawingBuffer:!0},Ft=function(){function AnimationLoop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,AnimationLoop);var t=e.onCreateContext,r=void 0===t?function(e){return createGLContext(e)}:t,n=e.onAddHTML,i=void 0===n?null:n,o=e.onInitialize,a=void 0===o?function(){}:o,s=e.onRender,l=void 0===s?function(){}:s,u=e.onFinalize,p=void 0===u?function(){}:u,h=e.gl,f=void 0===h?null:h,g=e.glOptions,m=void 0===g?{}:g,y=e.debug,v=void 0!==y&&y,_=e.createFramebuffer,b=void 0!==_&&_,x=e.autoResizeViewport,w=void 0===x||x,S=e.autoResizeDrawingBuffer,E=void 0===S||S,P=e.useDevicePixels,C=void 0===P||P;return"useDevicePixelRatio"in e&&(c.g.deprecated("useDevicePixelRatio","useDevicePixels")(),C=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:i,onInitialize:a,onRender:l,onFinalize:p,gl:f,glOptions:m,debug:v,createFramebuffer:b},this.gl=f,this.needsRedraw=null,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:E,useDevicePixels:C}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(v.a)(AnimationLoop,[{key:"setNeedsRedraw",value:function setNeedsRedraw(e){return Object(x.a)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function start(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=getPageLoadPromise().then(function(){return e._stopped?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e.onInitialize(e.animationProps))}).then(function(t){e._stopped||(e._addCallbackData(t||{}),!1===t||e._animationFrameId||(e._animationFrameId=Object(o.p)(e._renderFrame)))})),this}},{key:"stop",value:function stop(){return this._animationFrameId&&(this._finalizeCallbackData(),Object(o.f)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"onCreateContext",value:function onCreateContext(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function onInitialize(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function onRender(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function onFinalize(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function getHTMLControlValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=document.getElementById(e);return r?Number(r.value):t}},{key:"setViewParameters",value:function setViewParameters(){return c.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_clearNeedsRedraw",value:function _clearNeedsRedraw(){this.needsRedraw=null}},{key:"_setupFrame",value:function _setupFrame(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function _renderFrame(){this._stopped||(this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit?this.gl.commit().then(this._renderFrame):this._animationFrameId=Object(o.p)(this._renderFrame))}},{key:"_initializeCallbackData",value:function _initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function _updateCallbackData(){var e=this._getSizeAndAspect(),t=e.width,r=e.height,n=e.aspect;t===this.animationProps.width&&r===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function _finalizeCallbackData(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function _addCallbackData(e){"object"===Object(jt.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function _createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,Dt,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(e),!Object(o.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=makeDebugContext(this.gl)),Object(E.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function _createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}},{key:"_getSizeAndAspect",value:function _getSizeAndAspect(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,r=1,n=this.gl.canvas,i=n.clientWidth,o=n.clientHeight;return i>=0&&o>=0?r=t>0?i/o:1:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}},{key:"_resizeViewport",value:function _resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&resizeGLContext(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function _createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new te(this.gl))}},{key:"_resizeFramebuffer",value:function _resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function _startEventHandling(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function _onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function _onMouseleave(e){this.animationProps._mousePosition=null}}]),AnimationLoop}();new Uint8Array([0,0,0]);var Nt,zt="transform_uSampler_",Bt="transform_uSize_",Ut="transform_position";function updateForTextures(e){var t=e.vs,r=e.sourceTextureMap,n=e.targetTextureVarying,i=e.targetTexture,o=Object.keys(r).length,a=null,s={},l=t,u={};if(o>0||n){var c=l.split("\n"),p=c.slice();if(c.forEach(function(e,t,i){if(o>0){var l=processAttributeDefinition(e,r);if(l){var c=l.updatedLine,h=l.inject;p[t]=c,u=combineInjects([u,h]),Object.assign(s,l.samplerTextureMap),o--}}n&&!a&&(a=getVaryingType(e,n))}),n){it()(i);var h="".concat(Bt).concat(n),f="uniform vec2 ".concat(h,";\n"),d="     vec2 ".concat(Ut," = transform_getPos(").concat(h,");\n     gl_Position = vec4(").concat(Ut,", 0, 1.);\n");u=combineInjects([u,{"vs:#decl":f,"vs:#main-start":d}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:s}}function getSizeUniforms(e){var t,r,n=e.sourceTextureMap,i=e.targetTextureVarying,o=e.targetTexture,a={};for(var s in i&&(t=o.width,r=o.height,a["".concat(Bt).concat(i)]=[t,r]),n){var l=n[s];t=l.width,r=l.height,a["".concat(Bt).concat(s)]=[t,r]}return a}function getAttributeDefinition(e){return getQualifierDetails(e,["attribute","in"])}function getSamplerDeclerations(e){var t="".concat(zt).concat(e),r="".concat(Bt).concat(e);return{samplerName:t,sizeName:r,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(r,";")}}function getVaryingType(e,t){var r=getQualifierDetails(e,["varying","out"]);return r&&r.name===t?r.type:null}function processAttributeDefinition(e,t){var r={},n=getAttributeDefinition(e);if(!n)return null;var i=n.type,o=n.name;if(o&&t[o]){var a="// ".concat(e," => Replaced by Transform with a sampler"),s=getSamplerDeclerations(o),l=s.samplerName,u=s.sizeName,c=s.uniformDeclerations,p=typeToChannelSuffix(i),h="  ".concat(i," ").concat(o," = transform_getInput(").concat(l,", ").concat(u,").").concat(p,";\n");return r[l]=o,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:r}}return null}var Vt=(Nt={},Object(y.a)(Nt,10241,9728),Object(y.a)(Nt,10240,9728),Object(y.a)(Nt,10242,33071),Object(y.a)(Nt,10243,33071),Nt),qt=function(){function Transform(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Transform),Object(o.d)(e),this.gl=e,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(t),Object.seal(this)}return Object(v.a)(Transform,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(Transform,[{key:"delete",value:function _delete(){for(var e in this._createdBuffers)this._createdBuffers[e].delete();this.model.delete()}},{key:"getBuffer",value:function getBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.feedbackBuffers[this.currentIndex][e]:null;return t?t instanceof T.a?t:t.buffer:null}},{key:"_getTargetTexture",value:function _getTargetTexture(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,r=void 0===t?null:t,n=e.packed,i=void 0!==n&&n,o=this.getBuffer(r);if(o)return o.getData();Object(x.a)(!r||r===this.targetTextureVarying);var a=this.framebuffers[this.currentIndex].readPixels();if(!i)return a;for(var s=a.constructor,l=typeToChannelCount(this.targetTextureType),u=new s(a.length*l/4),c=0,p=0;p<a.length;p+=4)for(var h=0;h<l;h++)u[c++]=a[p+h];return u}},{key:"getFramebuffer",value:function getFramebuffer(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function _getInputs(){var e={},t=this.currentIndex,r=Object.assign({},this.sourceBuffers[t]);if(this.hasSourceTextures||this.targetTextureVarying){for(var n in r.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var i=this.samplerTextureMap[n];e[n]=this.sourceTextures[t][i]}this._setSourceTextureParameters();var o=getSizeUniforms({sourceTextureMap:this.sourceTextures[t],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[t]});Object.assign(e,o)}return{attributes:r,uniforms:e}}},{key:"run",value:function run(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputs(),r=t.attributes,n=t.uniforms;Object.assign(n,e.uniforms);var i=Object.assign({},e.parameters),o=e.clearRenderTarget,a=void 0===o||o,s=null,l=!0;this.renderingToTexture&&(l=!1,s=this.framebuffers[this.currentIndex],Object(x.a)(s),i.viewport=[0,0,s.width,s.height],a&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(r),this.model.transform(Object.assign({},e,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:n,discard:l,framebuffer:s,parameters:i}))}},{key:"swapBuffers",value:function swapBuffers(){c.g.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function swap(){Object(x.a)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementCount&&this._setElementCount(e.elementCount);var t=e.sourceBuffers,r=void 0===t?null:t,n=e.feedbackBuffers,i=void 0===n?null:n,o=this.currentIndex;if(r||i){for(var a in i)Object(x.a)(i[a]instanceof T.a||i[a].buffer instanceof T.a);Object.assign(this.sourceBuffers[o],r),Object.assign(this.feedbackBuffers[o],i),this._createFeedbackBuffers({feedbackBuffers:i}),this.transformFeedbacks[o]&&this.transformFeedbacks[o].setBuffers(this.feedbackBuffers[o]),this._setupSwapBuffers()}var s=e._sourceTextures,l=e._targetTexture;(s||l)&&(Object.assign(this.sourceTextures[o],s),this._updateTargetTexture(l||this._targetRefTexName,o),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function _setSourceTextureParameters(){var e=this.currentIndex;for(var t in this.sourceTextures[e])this.sourceTextures[e][t].setParameters(Vt)}},{key:"_setElementCount",value:function _setElementCount(e){this.elementCount!==e&&(this.elementCount<e&&this._updateElementIDBuffer(e),this.model.setVertexCount(e),this.elementCount=e)}},{key:"_updateTargetTexture",value:function _updateTargetTexture(e,t){var r=this._buildTargetTexture(e);r&&(this.targetTextures[t]=r,this.framebuffers[t]&&(this.framebuffers[t].update({attachments:Object(y.a)({},36064,this.targetTextures[t]),resizeAttachments:!1}),this.framebuffers[t].resize({width:r.width,height:r.height})))}},{key:"_initialize",value:function _initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._validateProps(e),r=t.feedbackBuffers,n=t.feedbackMap,i=e.sourceBuffers,o=e.varyings,a=e._targetTexture,s=e._targetTextureVarying,l=e._swapTexture,u=o;n&&!Array.isArray(o)&&(u=Object.values(n)),this.varyingsArray=u,this.feedbackMap=n,this._swapTexture=l,a&&(this.targetTextureVarying=s,this.renderingToTexture=!0,Object(x.a)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:i,feedbackBuffers:r}),this._setupTextures(e),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},e,{id:e.id||"transform-model",drawMode:e.drawMode||0,varyings:u}))}},{key:"_validateProps",value:function _validateProps(e){var t=e.feedbackBuffers,r=e.feedbackMap,n=e.destinationBuffers,i=e.sourceDestinationMap;n&&(c.g.deprecated("destinationBuffers","feedbackBuffers")(),t=t||n),i&&(c.g.deprecated("sourceDestinationMap","feedbackMap")(),r=r||i);var o=e.vs,a=e.elementCount,s=e.varyings,l=e._sourceTextures,u=e._targetTexture,p=e._targetTextureVarying,h=e._swapTexture;for(var f in Object(x.a)(o&&(s||r||u)&&a),t||{})Object(x.a)(t[f]instanceof T.a||t[f].buffer instanceof T.a);for(var d in l||{})Object(x.a)(l[d]instanceof V.a);return Object(x.a)(!u||p),Object(x.a)(!h||l[h]),{feedbackBuffers:t,feedbackMap:r}}},{key:"_setupBuffers",value:function _setupBuffers(e){var t=e.sourceBuffers,r=void 0===t?null:t,n=e.feedbackBuffers,i=void 0===n?null:n;this.sourceBuffers[0]=Object.assign({},r),this.feedbackBuffers[0]=Object.assign({},i),this._createFeedbackBuffers({feedbackBuffers:i}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function _setupTextures(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,r=e._targetTexture;if(this.sourceTextures[0]=Object.assign({},t),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var n=this._buildTargetTexture(r);Object(x.a)(n),this.targetTextures[0]=n,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function _buildTargetTexture(e){var t;if(e instanceof V.a)return e;var r=this.sourceTextures[0][e];return r?(this._targetRefTexName=e,Object(o.g)(r,{parameters:(t={},Object(y.a)(t,10241,9728),Object(y.a)(t,10240,9728),Object(y.a)(t,10242,33071),Object(y.a)(t,10243,33071),t),pixelStore:Object(y.a)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function _createFeedbackBuffers(e){var t=e.feedbackBuffers;if(this.feedbackMap){var r=this.currentIndex;for(var n in this.feedbackMap){var i=this.feedbackMap[n];if(!(i===this.targetTextureVarying||t&&t[i])){var o=this.sourceBuffers[r][n],a=o.bytes,s=o.type,l=o.usage,u=o.accessor,c=new T.a(this.gl,{bytes:a,type:s,usage:l,accessor:u});this._createdBuffers[i]&&this._createdBuffers[i].delete(),this._createdBuffers[i]=c,this.feedbackBuffers[r][i]=c}}}}},{key:"_createNewBuffer",value:function _createNewBuffer(e,t){var r=new T.a(this.gl,t);return this._createdBuffers[e]&&(this._createdBuffers[e].delete(),this._createdBuffers[e]=r),r}},{key:"_setupSwapBuffers",value:function _setupSwapBuffers(){if(this.feedbackMap){var e=this.currentIndex,t=(e+1)%2;for(var r in Object.assign(this.sourceBuffers[t],this.sourceBuffers[e]),Object.assign(this.feedbackBuffers[t],this.feedbackBuffers[e]),this.feedbackMap){var n=this.feedbackMap[r];n!==this.targetTextureVarying&&(this.sourceBuffers[t][r]=this.feedbackBuffers[e][n],this.feedbackBuffers[t][n]=this.sourceBuffers[e][r],Object(x.a)(this.feedbackBuffers[t][n]instanceof T.a))}this.transformFeedbacks[t]&&this.transformFeedbacks[t].setBuffers(this.feedbackBuffers[t])}}},{key:"_setupSwapTextures",value:function _setupSwapTextures(){if(this._swapTexture&&this.targetTextureVarying){var e=this.currentIndex,t=(e+1)%2;Object.assign(this.sourceTextures[t],this.sourceTextures[e]),this.sourceTextures[t][this._swapTexture]=this.targetTextures[e],this._updateTargetTexture(this.sourceTextures[e][this._swapTexture],t)}}},{key:"_buildModel",value:function _buildModel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getShaders(e),r=t.vs,n=t.fs,i=t.modules,o=t.uniforms,a=t.inject,s=t.samplerTextureMap;this.model=new Lt(this.gl,Object.assign({},e,{vs:r,fs:n,vertexCount:e.elementCount,modules:i,uniforms:o,inject:a})),this.samplerTextureMap=s,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(e.elementCount)}},{key:"_setupTransformFeedback",value:function _setupTransformFeedback(){Object(c.d)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new ke(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new ke(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function _setupFramebuffers(){if(this.renderingToTexture){var e=this.targetTextures[0],t=e.width,r=e.height;if(this.framebuffers[0]=new te(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:t,height:r,attachments:Object(y.a)({},36064,this.targetTextures[0])}),this._swapTexture){var n=this.targetTextures[1];t=n.width,r=n.height,this.framebuffers[1]=new te(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:t,height:r,attachments:Object(y.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function _updateElementIDBuffer(e){if(this.hasSourceTextures||this.targetTextureVarying){var t=new Float32Array(e);t.forEach(function(e,t,r){r[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new T.a(this.gl,{data:t,size:1})}}},{key:"_getShaders",value:function _getShaders(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e.vs),r=t.vs,n=t.uniforms,i=t.targetTextureType,a=t.inject,s=t.samplerTextureMap,l=combineInjects([e.inject||{},a]);return this.targetTextureType=i,{vs:r,fs:getPassthroughFS({version:Object(o.l)(r),input:this.targetTextureVarying,inputType:i,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[wt].concat(e.modules||[]):e.modules,uniforms:n,inject:l,samplerTextureMap:s}}},{key:"_processVertexShader",value:function _processVertexShader(e){return updateForTextures({vs:e,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),Transform}(),Gt=function(){function ShaderCache(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gl,r=e._cachePrograms,n=void 0!==r&&r;Object(d.a)(this,ShaderCache),Object(x.a)(t),this.gl=t,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=n}return Object(v.a)(ShaderCache,[{key:"delete",value:function _delete(){return this}},{key:"getVertexShader",value:function getVertexShader(e,t){Object(x.a)("string"==typeof t),Object(x.a)(this._compareContexts(e,this.gl));var r=this.vertexShaders[t];return r||(r=new D(e,t),this.vertexShaders[t]=r),r}},{key:"getFragmentShader",value:function getFragmentShader(e,t){Object(x.a)("string"==typeof t),Object(x.a)(this._compareContexts(e,this.gl));var r=this.fragmentShaders[t];return r||(r=new F(e,t),this.fragmentShaders[t]=r),r}},{key:"getProgram",value:function getProgram(e,t){Object(x.a)(this._compareContexts(e,this.gl)),Object(x.a)("string"==typeof t.vs),Object(x.a)("string"==typeof t.fs),Object(x.a)("string"==typeof t.id);var r=this._getProgramKey(t),n=this.programs[r];return n?(this._resetProgram(n),n):(n=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(n)&&(n._isCached=!0,this.programs[r]=n),n)}},{key:"_getProgramKey",value:function _getProgramKey(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function _checkProgramProp(e){return!e.varyings}},{key:"_createNewProgram",value:function _createNewProgram(e,t){var r=t.vs,n=t.fs,i=this.getVertexShader(e,r),o=this.getFragmentShader(e,n);return new Pe(this.gl,Object.assign({},t,{vs:i,fs:o}))}},{key:"_resetProgram",value:function _resetProgram(e,t){e.reset()}},{key:"_compareContexts",value:function _compareContexts(e,t){return(e.gl||e)===(t.gl||t)}}]),ShaderCache}(),Wt=function(){function Pass(e,t){Object(d.a)(this,Pass);var r=t.id,n=void 0===r?"pass":r;this.id=n,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,t)}return Object(v.a)(Pass,[{key:"setProps",value:function setProps(e){Object.assign(this.props,e)}},{key:"render",value:function render(e,t){var r=this;if(this.props.enabled){var n=this.gl,i={gl:n,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:t,swapBuffers:function swapBuffers(){return e._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=te.getDefaultFramebuffer(n)):this.props.swap&&(i.inputBuffer=e.writeBuffer,i.outputBuffer=e.readBuffer),Object(E.c)(n,{framebuffer:i.outputBuffer},function(){return r._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function _renderPass(e){e.gl,e.inputBuffer,e.outputBuffer,e.animationProps}}]),Pass}(),Ht=function(e){function CompositePass(e,t){return Object(d.a)(this,CompositePass),t=Array.isArray(t)?{passes:t}:t,Object(k.a)(this,Object(O.a)(CompositePass).call(this,e,Object.assign({id:"composite-pass"},t)))}return Object(A.a)(CompositePass,e),Object(v.a)(CompositePass,[{key:"render",value:function render(){var e=this.props.passes,t=void 0===e?[]:e,r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.render.apply(s,arguments)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}}]),CompositePass}(Wt),Xt=function(){function RenderState(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(d.a)(this,RenderState),this.gl=e,this.framebuffer1=new te(e,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new te(e,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(v.a)(RenderState,[{key:"reset",value:function reset(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function _swapFramebuffers(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),RenderState}(),Kt=function(e){function MultiPassRenderer(e,t){var r;return Object(d.a)(this,MultiPassRenderer),t=Array.isArray(t)?{passes:t}:t,(r=Object(k.a)(this,Object(O.a)(MultiPassRenderer).call(this,e,Object.assign({id:"multi-pass"},t)))).renderState=new Xt(e,t),r}return Object(A.a)(MultiPassRenderer,e),Object(v.a)(MultiPassRenderer,[{key:"render",value:function render(e){this.renderState.reset();var t=this.props.passes,r=void 0===t?[]:t,n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.render(this.renderState,e)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return this}}]),MultiPassRenderer}(Ht),Zt=function(e){function ClearPass(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,ClearPass),Object(k.a)(this,Object(O.a)(ClearPass).call(this,e,Object.assign({id:"clear-pass"},t)))}return Object(A.a)(ClearPass,e),Object(v.a)(ClearPass,[{key:"_renderPass",value:function _renderPass(e){var t=e.gl,r=this.props.clearBits,n=void 0===r?16640:r;t.clear(n)}}]),ClearPass}(Wt),Yt={x:[2,0,1],y:[0,1,2],z:[1,2,0]},Jt=function(e){function TruncatedConeGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,TruncatedConeGeometry);for(var t=e.bottomRadius,r=void 0===t?0:t,n=e.topRadius,i=void 0===n?0:n,o=e.height,a=void 0===o?1:o,s=e.nradial,l=void 0===s?10:s,u=e.nvertical,c=void 0===u?10:u,p=e.verticalAxis,h=void 0===p?"y":p,f=e.topCap,g=void 0!==f&&f,m=e.bottomCap,y=void 0!==m&&m,v=(g?2:0)+(y?2:0),_=(l+1)*(c+1+v),b=Math.atan2(r-i,a),x=Math.sin,w=Math.cos,S=Math.PI,E=w(b),P=x(b),C=g?-2:0,T=c+(y?2:0),A=l+1,I=new Float32Array(3*_),R=new Float32Array(3*_),M=new Float32Array(2*_),L=new Uint16Array(l*(c+v)*6),j=Yt[h],D=0,F=0,N=C;N<=T;N++){var z=N/c,B=a*z,U=void 0;N<0?(B=0,z=1,U=r):N>c?(B=a,z=1,U=i):U=r+N/c*(i-r),-2!==N&&N!==c+2||(U=0,z=0),B-=a/2;for(var V=0;V<A;V++){var q=x(V*S*2/l),G=w(V*S*2/l);I[D+j[0]]=q*U,I[D+j[1]]=B,I[D+j[2]]=G*U,R[D+j[0]]=N<0||N>c?0:q*E,R[D+j[1]]=N<0?-1:N>c?1:P,R[D+j[2]]=N<0||N>c?0:G*E,M[F+0]=V/l,M[F+1]=z,F+=2,D+=3}}for(var W=0;W<c+v;W++)for(var H=0;H<l;H++){var X=6*(W*l+H);L[X+0]=A*(W+0)+0+H,L[X+1]=A*(W+0)+1+H,L[X+2]=A*(W+1)+1+H,L[X+3]=A*(W+0)+0+H,L[X+4]=A*(W+1)+1+H,L[X+5]=A*(W+1)+0+H}return Object(k.a)(this,Object(O.a)(TruncatedConeGeometry).call(this,Object.assign({},e,{attributes:{positions:I,normals:R,texCoords:M,indices:L}})))}return Object(A.a)(TruncatedConeGeometry,e),TruncatedConeGeometry}(Be),Qt=function(e){function CubeGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,CubeGeometry);var t=e.id,r=void 0===t?Object(c.i)("cube-geometry"):t;return Object(k.a)(this,Object(O.a)(CubeGeometry).call(this,Object.assign({},e,{id:r,attributes:{indices:new Uint16Array($t),positions:new Float32Array(er),normals:new Float32Array(tr),texCoords:new Float32Array(rr)}})))}return Object(A.a)(CubeGeometry,e),CubeGeometry}(Be),$t=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),er=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),tr=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),rr=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);var nr=function(e){function CylinderGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,CylinderGeometry);var t=e.radius,r=void 0===t?1:t;return Object(k.a)(this,Object(O.a)(CylinderGeometry).call(this,Object.assign({},e,{bottomRadius:r,topRadius:r})))}return Object(A.a)(CylinderGeometry,e),CylinderGeometry}(Jt);var ir="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",or=[-1,-1,1,-1,-1,1,1,1],ar=function(e){function ClipSpace(e,t){var r;Object(d.a)(this,ClipSpace);var n=or.map(function(e){return-1===e?0:e});return(r=Object(k.a)(this,Object(O.a)(ClipSpace).call(this,e,Object.assign({},t,{vs:ir,geometry:new Be({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(or)},aTexCoord:{size:2,value:new Float32Array(n)},aCoordinate:{size:2,value:new Float32Array(n)}}})})))).setVertexCount(4),r}return Object(A.a)(ClipSpace,e),ClipSpace}(Lt),sr="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",lr=function(e){function CopyPass(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,CopyPass),(t=Object(k.a)(this,Object(O.a)(CopyPass).call(this,e,Object.assign({id:"copy-pass",swap:!0},r)))).clipspace=new ar(e,{id:"copy-pass",fs:sr}),t}return Object(A.a)(CopyPass,e),Object(v.a)(CopyPass,[{key:"_renderPass",value:function _renderPass(e){var t=e.inputBuffer,r=this.props.opacity,n=void 0===r?1:r;this.clipspace.draw({uniforms:{uDiffuseSampler:t,uOpacity:n},parameters:{depthWrite:!1,depthTest:!1}})}}]),CopyPass}(Wt),ur="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",cr=function(e){function TexturePass(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,TexturePass),t=Object(k.a)(this,Object(O.a)(TexturePass).call(this,e,Object.assign({id:"texture-pass"},r)));var n=r.texture,i=r.opacity,o=void 0===i?1:i;return t.clipspace=new ar(e,{id:"texture-pass",fs:ur,uniforms:{uDiffuseSampler:n,uOpacity:o}}),t}return Object(A.a)(TexturePass,e),Object(v.a)(TexturePass,[{key:"_renderPass",value:function _renderPass(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),TexturePass}(Wt);r(394);function browser_request_file_noop(){}var pr=4,hr=function(){function XHR(e){var t=e.url,r=e.path,n=void 0===r?null:r,i=e.method,o=void 0===i?"GET":i,a=e.asynchronous,s=void 0===a||a,l=e.noCache,u=void 0!==l&&l,c=e.sendAsBinary,p=void 0!==c&&c,h=e.responseType,f=void 0!==h&&h,g=e.onProgress,m=void 0===g?browser_request_file_noop:g,y=e.onError,v=void 0===y?browser_request_file_noop:y,_=e.onAbort,b=void 0===_?browser_request_file_noop:_,x=e.onComplete,w=void 0===x?browser_request_file_noop:x;Object(d.a)(this,XHR),this.url=n?n.join(n,t):t,this.method=o,this.async=s,this.noCache=u,this.sendAsBinary=p,this.responseType=f,this.req=new XMLHttpRequest,this.req.onload=function(e){return w(e)},this.req.onerror=function(e){return v(e)},this.req.onabort=function(e){return b(e)},this.req.onprogress=function(e){e.lengthComputable?m(e,Math.round(e.loaded/e.total*100)):m(e,-1)}}return Object(v.a)(XHR,[{key:"setRequestHeader",value:function setRequestHeader(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function sendAsync(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(r,n){try{var i=e.req,o=e.method,a=e.noCache,s=e.sendAsBinary,l=e.responseType,u=a?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(o,u,e.async),l&&(i.responseType=l),e.async&&(i.onreadystatechange=function(e){i.readyState===pr&&(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error("".concat(i.status,": ").concat(u))))}),s?i.sendAsBinary(t):i.send(t),e.async||(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error("".concat(i.status,": ").concat(u))))}catch(e){n(e)}})}}]),XHR}();function requestFile(e){return new hr(e).sendAsync()}var fr="";function loadImage(e,t){return e=fr?fr+e:e,"undefined"==typeof Image?requestFile({url:e=new URL(e,location.pathname).href,responseType:"arraybuffer"}).then(function(e){var t=new Blob([new Uint8Array(e)]);return createImageBitmap(t)}):new Promise(function(r,n){try{var i=new Image;i.onload=function(){return r(i)},i.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){n(e)}})}function load_files_noop(){}function loadImages(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,r=e.onProgress,n=void 0===r?load_files_noop:r;Object(x.a)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(r){var o=loadImage(r,e);return o.then(function(e){return n({progress:++i/t.length,count:i,total:t.length,url:r})}),o}))}function loadTextures(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.urls,n=t.onProgress,i=void 0===n?load_files_noop:n;return Object(x.a)(r.every(function(e){return"string"==typeof e}),"loadTextures: {urls} must be array of strings"),loadImages(Object.assign({urls:r,onProgress:i},t)).then(function(n){return n.map(function(n,i){return new V.a(e,Object.assign({id:r[i]},t,{data:n}))})})}r(37),r(63),r(106),r(107);r.d(t,"w",function(){return n.d}),r.d(t,"r",function(){return createGLContext}),r.d(t,"D",function(){return f.a}),r.d(t,"C",function(){return E.b}),r.d(t,"E",function(){return E.c}),r.d(t,"e",function(){return C}),r.d(t,"u",function(){return hasFeature}),r.d(t,"v",function(){return hasFeatures}),r.d(t,"b",function(){return T.a}),r.d(t,"f",function(){return te}),r.d(t,"i",function(){return V.a}),r.d(t,"q",function(){return clear_clear}),r.d(t,"h",function(){return Lt}),r.d(t,"a",function(){return Ft}),r.d(t,"j",function(){return qt}),r.d(t,"k",function(){return Ne}),r.d(t,"o",function(){return Gt}),r.d(t,"n",function(){return Kt}),r.d(t,"l",function(){return Zt}),r.d(t,"m",function(){return lr}),r.d(t,"p",function(){return cr}),r.d(t,"g",function(){return Be}),r.d(t,"c",function(){return Qt}),r.d(t,"d",function(){return nr}),r.d(t,"x",function(){return loadImages}),r.d(t,"y",function(){return loadTextures}),r.d(t,"B",function(){return setDefaultShaderModules}),r.d(t,"A",function(){return registerShaderModules}),r.d(t,"s",function(){return ct}),r.d(t,"t",function(){return dt}),r.d(t,"z",function(){return _t}),r(117)},function(e,t,r){"use strict";var n=r(32),i=r(62);function requestAnimationFrame(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function cancelAnimationFrame(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var o=35632,a=35633;function getShaderName(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",r=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:t}function getShaderTypeName(e){switch(e){case o:return"fragment";case a:return"vertex";default:return"unknown type"}}function parseGLSLCompilerError(e,t,r,n){for(var i=e.split(/\r?\n/),o={},a={},s=n||getShaderName(t)||"(unnamed)",l="".concat(getShaderTypeName(r)," shader ").concat(s),u=0;u<i.length;u++){var c=i[u];if(!(c.length<=1)){var p=c.split(":"),h=p[0],f=parseInt(p[2],10);if(isNaN(f))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==h?o[f]=c:a[f]=c}}var d=addLineNumbers(t);return{shaderName:l,errors:formatErrors(o,d),warnings:formatErrors(a,d)}}function formatErrors(e,t){for(var r="",n=0;n<t.length;n++){var i=t[n];if((e[n+3]||e[n+2]||e[n+1])&&(r+="".concat(i,"\n"),e[n+1])){var o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=padLeft("^^^ ".concat(s,": ").concat(u,"\n\n"),l)}}return r}function addLineNumbers(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map(function(e,n){var o=n+t,a=String(o).length;return padLeft(o,i-a)+r+e})}function padLeft(e,t){for(var r="",n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}var s=r(40),l=r(33);function getShaderVersion(e){var t=100,r=e.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){var n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}var u=r(105);r.d(t,"c",function(){return n.c}),r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return n.b}),r.d(t,"m",function(){return i.c}),r.d(t,"n",function(){return i.d}),r.d(t,"e",function(){return i.b}),r.d(t,"d",function(){return i.a}),r.d(t,"p",function(){return requestAnimationFrame}),r.d(t,"f",function(){return cancelAnimationFrame}),r.d(t,"o",function(){return parseGLSLCompilerError}),r.d(t,"k",function(){return getShaderName}),r.d(t,"h",function(){return s.a}),r.d(t,"q",function(){return s.d}),r.d(t,"j",function(){return l.b}),r.d(t,"i",function(){return l.a}),r.d(t,"l",function(){return getShaderVersion}),r.d(t,"g",function(){return u.a})},function(e,t,r){e.exports=r(400)},function(e,t,r){"use strict";function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",function(){return _getPrototypeOf})},function(e,t,r){"use strict";r.d(t,"a",function(){return _possibleConstructorReturn});var n=r(25),i=r(18);function _possibleConstructorReturn(e,t){return!t||"object"!==Object(n.a)(t)&&"function"!=typeof t?Object(i.a)(e):t}},function(e,t,r){"use strict";r.d(t,"a",function(){return _inherits});var n=r(114);function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(n.a)(e,t)}},function(e,t,r){"use strict";var n={};r.r(n),r.d(n,"spaceFactor",function(){return f}),r.d(n,"space",function(){return d}),r.d(n,"color",function(){return g}),r.d(n,"fontFamily",function(){return m}),r.d(n,"fontSize",function(){return y}),r.d(n,"mq",function(){return v}),r.d(n,"borderRadius",function(){return _}),r.d(n,"maxWidth",function(){return b}),r.d(n,"sidebarWidth",function(){return x}),r.d(n,"buttonTextTransform",function(){return w});var i=r(1),o=r.n(i),a=r(2),s=r.n(a),l=r(147),u=r.n(l),c=r(145),p=r.n(c),h=r(87),f=8,d=[f/2,f,2*f,3*f,4*f,5*f,6*f],g={base:"#333",light:"#767676",lightest:"#ccc",link:"#1978c8",linkHover:"#f28a25",border:"#e8e8e8",name:"#7f9a44",type:"#b77daa",error:"#c00",baseBackground:"#fff",codeBackground:"#f5f5f5",sidebarBackground:"#f5f5f5",ribbonBackground:"#f9970d",ribbonText:"#fff"},m={base:["-apple-system","BlinkMacSystemFont",'"Segoe UI"','"Roboto"','"Oxygen"','"Ubuntu"','"Cantarell"','"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"sans-serif"],monospace:["Consolas",'"Liberation Mono"',"Menlo","monospace"]},y={base:15,text:16,small:13,h1:48,h2:36,h3:24,h4:18,h5:16,h6:16},v={small:"@media (max-width: 600px)"},_=3,b=1e3,x=200,w="uppercase",S=p()(function(e,t,r){var i=u()({},n,t.theme),o=u()({},e(i),t.styles&&t.styles[r]);return h.a.createStyleSheet(o,{meta:r,link:!0})}),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){return function(t){var r,n,a=t.name.replace(/Renderer$/,"");return n=r=function(r){function _class(t,r){_classCallCheck(this,_class);var n=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,t,r));return n.sheet=S(e,r.config||{},a),n.sheet.update(t).attach(),n}return _inherits(_class,i["Component"]),P(_class,[{key:"componentDidUpdate",value:function componentDidUpdate(e){this.sheet.update(e)}},{key:"render",value:function render(){return o.a.createElement(t,E({},this.props,{classes:this.sheet.classes}))}}]),_class}(),r.displayName="Styled("+a+")",r.contextTypes={config:s.a.object},n}};r.d(t,"a",function(){return C})},function(e,t,r){"use strict";r.d(t,"p",function(){return transpose}),r.d(t,"e",function(){return invert}),r.d(t,"a",function(){return determinant}),r.d(t,"g",function(){return multiply}),r.d(t,"o",function(){return translate}),r.d(t,"n",function(){return scale}),r.d(t,"j",function(){return rotate}),r.d(t,"k",function(){return rotateX}),r.d(t,"l",function(){return rotateY}),r.d(t,"m",function(){return rotateZ}),r.d(t,"c",function(){return fromQuat}),r.d(t,"d",function(){return frustum}),r.d(t,"i",function(){return perspective}),r.d(t,"h",function(){return ortho}),r.d(t,"f",function(){return lookAt}),r.d(t,"b",function(){return equals});var n=r(16);function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function invert(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=r*s-n*a,_=r*l-i*a,b=r*u-o*a,x=n*l-i*s,w=n*u-o*s,S=i*u-o*l,E=c*g-p*d,P=c*m-h*d,C=c*y-f*d,T=p*m-h*g,k=p*y-f*g,O=h*y-f*m,A=v*O-_*k+b*T+x*C-w*P+S*E;return A?(A=1/A,e[0]=(s*O-l*k+u*T)*A,e[1]=(i*k-n*O-o*T)*A,e[2]=(g*S-m*w+y*x)*A,e[3]=(h*w-p*S-f*x)*A,e[4]=(l*C-a*O-u*P)*A,e[5]=(r*O-i*C+o*P)*A,e[6]=(m*b-d*S-y*_)*A,e[7]=(c*S-h*b+f*_)*A,e[8]=(a*k-s*C+u*E)*A,e[9]=(n*C-r*k-o*E)*A,e[10]=(d*w-g*b+y*v)*A,e[11]=(p*b-c*w-f*v)*A,e[12]=(s*P-a*T-l*E)*A,e[13]=(r*T-n*P+i*E)*A,e[14]=(g*_-d*x-m*v)*A,e[15]=(c*x-p*_+h*v)*A,e):null}function determinant(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11],f=e[12],d=e[13],g=e[14],m=e[15];return(t*a-r*o)*(p*m-h*g)-(t*s-n*o)*(c*m-h*d)+(t*l-i*o)*(c*g-p*d)+(r*s-n*a)*(u*m-h*f)-(r*l-i*a)*(u*g-p*f)+(n*l-i*s)*(u*d-c*f)}function multiply(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=r[0],b=r[1],x=r[2],w=r[3];return e[0]=_*n+b*s+x*p+w*g,e[1]=_*i+b*l+x*h+w*m,e[2]=_*o+b*u+x*f+w*y,e[3]=_*a+b*c+x*d+w*v,_=r[4],b=r[5],x=r[6],w=r[7],e[4]=_*n+b*s+x*p+w*g,e[5]=_*i+b*l+x*h+w*m,e[6]=_*o+b*u+x*f+w*y,e[7]=_*a+b*c+x*d+w*v,_=r[8],b=r[9],x=r[10],w=r[11],e[8]=_*n+b*s+x*p+w*g,e[9]=_*i+b*l+x*h+w*m,e[10]=_*o+b*u+x*f+w*y,e[11]=_*a+b*c+x*d+w*v,_=r[12],b=r[13],x=r[14],w=r[15],e[12]=_*n+b*s+x*p+w*g,e[13]=_*i+b*l+x*h+w*m,e[14]=_*o+b*u+x*f+w*y,e[15]=_*a+b*c+x*d+w*v,e}function translate(e,t,r){var n,i,o,a,s,l,u,c,p,h,f,d,g=r[0],m=r[1],y=r[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=n*g+s*m+p*y+t[12],e[13]=i*g+l*m+h*y+t[13],e[14]=o*g+u*m+f*y+t[14],e[15]=a*g+c*m+d*y+t[15]),e}function scale(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate(e,t,r,i){var o,a,s,l,u,c,p,h,f,d,g,m,y,v,_,b,x,w,S,E,P,C,T,k,O=i[0],A=i[1],I=i[2],R=Math.sqrt(O*O+A*A+I*I);return R<n.b?null:(O*=R=1/R,A*=R,I*=R,o=Math.sin(r),s=1-(a=Math.cos(r)),l=t[0],u=t[1],c=t[2],p=t[3],h=t[4],f=t[5],d=t[6],g=t[7],m=t[8],y=t[9],v=t[10],_=t[11],b=O*O*s+a,x=A*O*s+I*o,w=I*O*s-A*o,S=O*A*s-I*o,E=A*A*s+a,P=I*A*s+O*o,C=O*I*s+A*o,T=A*I*s-O*o,k=I*I*s+a,e[0]=l*b+h*x+m*w,e[1]=u*b+f*x+y*w,e[2]=c*b+d*x+v*w,e[3]=p*b+g*x+_*w,e[4]=l*S+h*E+m*P,e[5]=u*S+f*E+y*P,e[6]=c*S+d*E+v*P,e[7]=p*S+g*E+_*P,e[8]=l*C+h*T+m*k,e[9]=u*C+f*T+y*k,e[10]=c*C+d*T+v*k,e[11]=p*C+g*T+_*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rotateX(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+p*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=p*i-s*n,e[11]=h*i-l*n,e}function rotateY(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-p*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+p*i,e[11]=l*n+h*i,e}function rotateZ(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+p*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=p*i-s*n,e[7]=h*i-l*n,e}function fromQuat(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,p=n*s,h=i*a,f=i*s,d=i*l,g=o*a,m=o*s,y=o*l;return e[0]=1-p-d,e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-u-d,e[6]=f+g,e[7]=0,e[8]=h+m,e[9]=f-g,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function frustum(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function perspective(e,t,r,n,i){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}function ortho(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}function lookAt(e,t,r,i){var o,a,s,l,u,c,p,h,f,d,g=t[0],m=t[1],y=t[2],v=i[0],_=i[1],b=i[2],x=r[0],w=r[1],S=r[2];return Math.abs(g-x)<n.b&&Math.abs(m-w)<n.b&&Math.abs(y-S)<n.b?identity(e):(p=g-x,h=m-w,f=y-S,o=_*(f*=d=1/Math.sqrt(p*p+h*h+f*f))-b*(h*=d),a=b*(p*=d)-v*f,s=v*h-_*p,(d=Math.sqrt(o*o+a*a+s*s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0),l=h*s-f*a,u=f*o-p*s,c=p*a-h*o,(d=Math.sqrt(l*l+u*u+c*c))?(l*=d=1/d,u*=d,c*=d):(l=0,u=0,c=0),e[0]=o,e[1]=l,e[2]=p,e[3]=0,e[4]=a,e[5]=u,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=f,e[11]=0,e[12]=-(o*g+a*m+s*y),e[13]=-(l*g+u*m+c*y),e[14]=-(p*g+h*m+f*y),e[15]=1,e)}function equals(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],g=e[12],m=e[13],y=e[14],v=e[15],_=t[0],b=t[1],x=t[2],w=t[3],S=t[4],E=t[5],P=t[6],C=t[7],T=t[8],k=t[9],O=t[10],A=t[11],I=t[12],R=t[13],M=t[14],L=t[15];return Math.abs(r-_)<=n.b*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=n.b*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=n.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=n.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=n.b*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=n.b*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-P)<=n.b*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(c-C)<=n.b*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(p-T)<=n.b*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(h-k)<=n.b*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(f-O)<=n.b*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-A)<=n.b*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(g-I)<=n.b*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(m-R)<=n.b*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-M)<=n.b*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(v-L)<=n.b*Math.max(1,Math.abs(v),Math.abs(L))}},function(e,t,r){"use strict";var n=r(69),i=new(r(415).a)({id:"deck"}).enable();if(n.a.deck&&"6.4.0"!==n.a.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(n.a.deck.VERSION," vs ").concat("6.4.0"));n.a.deck||(i.log(0,"deck.gl ".concat("6.4.0"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),n.a.deck=n.a.deck||{VERSION:"6.4.0",version:"6.4.0",log:i}),console.table||(console.table=function(){});var o=r(7),a={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0},s=Object.keys(a).map(function(e){return"const float COORDINATE_SYSTEM_".concat(e," = ").concat(a[e],".;")}).join(""),l="".concat(s,'\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_coordinate_origin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * dy;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    float X = position.x - project_coordinate_origin.x;\n    float Y = position.y - project_coordinate_origin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'),u=r(14),c=r(43),p={LNGLAT:1,LNGLAT_EXPERIMENTAL:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},h={panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function isEqual(e,t){if(e===t)return!0;if(Array.isArray(e)){var r=e.length;if(!t||t.length!==r)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function memoize(e){var t,r={};return function(n){for(var i in n)if(!isEqual(n[i],r[i])){t=e(n),r=n;break}return t}}function assert(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var f=[0,0,0,0],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[0,0,0],y=[0,0,0],v=12,_=memoize(function calculateViewportUniforms(e){var t=e.viewport,r=e.devicePixelRatio,n=e.coordinateSystem,i=e.coordinateOrigin,o=e.wrapLongitude,s=t.zoom,l=calculateMatrixAndOffset({coordinateSystem:n,coordinateOrigin:i,coordinateZoom:s,viewport:t}),u=l.projectionCenter,c=l.viewProjectionMatrix,p=l.cameraPos,h=l.shaderCoordinateSystem,f=l.shaderCoordinateOrigin;assert(c,"Viewport missing modelViewProjectionMatrix");var d=t.getDistanceScales(),g=[t.width*r,t.height*r],y={project_uCoordinateSystem:h,project_uCenter:u,project_uWrapLongitude:o,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:g,project_uDevicePixelRatio:r,project_uFocalDistance:t.focalDistance||1,project_uPixelsPerMeter:d.pixelsPerMeter,project_uPixelsPerDegree:d.pixelsPerDegree,project_uPixelsPerUnit:d.pixelsPerMeter,project_uPixelsPerUnit2:m,project_uScale:t.scale,project_uViewProjectionMatrix:c,project_uCameraPosition:p},v=t.getDistanceScales(f);switch(h){case a.METER_OFFSETS:y.project_uPixelsPerUnit=v.pixelsPerMeter,y.project_uPixelsPerUnit2=v.pixelsPerMeter2;break;case a.LNGLAT_AUTO_OFFSET:y.project_coordinate_origin=f;case a.LNGLAT_OFFSETS:y.project_uPixelsPerUnit=v.pixelsPerDegree,y.project_uPixelsPerUnit2=v.pixelsPerDegree2}return y});function getShaderCoordinateSystem(e){switch(e){case p.LNGLAT:case p.LNGLAT_EXPERIMENTAL:default:return a.LNGLAT_AUTO_OFFSET;case p.LNGLAT_DEPRECATED:return a.LNG_LAT;case p.METER_OFFSETS:case p.METERS:return a.METER_OFFSETS;case p.LNGLAT_OFFSETS:return a.LNGLAT_OFFSETS;case p.IDENTITY:return a.IDENTITY}}function calculateMatrixAndOffset(e){var t,r=e.viewport,n=e.coordinateSystem,i=e.coordinateOrigin,o=e.coordinateZoom,s=r.viewMatrixUncentered,l=r.viewMatrix,p=r.projectionMatrix,h=r.viewProjectionMatrix,g=getShaderCoordinateSystem(n),m=i;g===a.LNGLAT_AUTO_OFFSET&&(o<v?g=a.LNG_LAT:m=[Math.fround(r.longitude),Math.fround(r.latitude)]);switch(g){case a.IDENTITY:case a.LNG_LAT:t=f;break;case a.LNGLAT_OFFSETS:case a.METER_OFFSETS:case a.LNGLAT_AUTO_OFFSET:var y=r.projectFlat(m,Math.pow(2,o));t=c.c([],[y[0],y[1],0,1],h),l=s||l,h=u.g([],p,l),h=u.g([],h,d);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:l,viewProjectionMatrix:h,projectionCenter:t,cameraPos:r.cameraPosition,shaderCoordinateSystem:g,shaderCoordinateOrigin:m}}function getUniformsFromViewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,r=e.devicePixelRatio,n=void 0===r?1:r,o=e.modelMatrix,a=void 0===o?null:o,s=e.coordinateSystem,l=void 0===s?p.LNGLAT:s,u=e.coordinateOrigin,c=void 0===u?y:u,h=e.wrapLongitude,f=void 0!==h&&h,d=e.projectionMode,m=e.positionOrigin;return assert(t),void 0!==d&&i.removed("projectionMode","coordinateSystem")(),void 0!==m&&i.removed("positionOrigin","coordinateOrigin")(),Object.assign({project_uModelMatrix:a||g},_({viewport:t,devicePixelRatio:n,coordinateSystem:l,coordinateOrigin:c,wrapLongitude:f}))}var b={};var x={name:"project",dependencies:[o.s],vs:l,getUniforms:function getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return e.viewport?getUniformsFromViewport(e):{}},deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale"},{type:"function",old:"preproject",new:"project_position"},{type:"function",old:"project",new:"project_to_clipspace"}]},w={name:"project32",dependencies:[x],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  worldPosition = vec4(projectedPosition + offset, 1.0);\n  return project_to_clipspace(worldPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, worldPosition);\n}\n"},S=o.t.fp64ify,E=o.t.fp64ifyMatrix4,P={name:"project64",dependencies:[x,o.t],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  // This is the local offset to the instance position\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_scale(position.z);\n\n  // Apply web mercator projection (depends on coordinate system imn use)\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 worldPosition64[4];\n  worldPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  worldPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  worldPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  worldPosition64[3] = vec2(1.0, 0.0);\n\n  worldPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_to_clipspace_fp64(worldPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, worldPosition\n  );\n}\n",getUniforms:function project64_getUniforms(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.project_uViewProjectionMatrix,r=e.project_uScale;if(t&&r)return C({project_uViewProjectionMatrix:t,project_uScale:r});return{}},deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]},C=memoize(function calculateUniforms(e){var t=e.project_uViewProjectionMatrix,r=e.project_uScale,n=E(t),i=S(r);return{project_uViewProjectionMatrixFP64:n,project64_uViewProjectionMatrix:n,project64_uScale:i}});var T=r(46),k=r(17);function transformVector(e,t){var r=c.c([],t,e);return c.b(r,r,1/r[3]),r}function mod(e,t){var r=e%t;return r<0?t+r:r}var O=r(34);function assert_assert(e){if(!e)throw new Error("viewport-mercator-project: assertion failed.")}var A=Math.PI,I=A/4,R=A/180,M=180/A,L=512,j=4003e4,D=1.5;function zoomToScale(e){return Math.pow(2,e)}function scaleToZoom(e){return Math.log2(e)}function lngLatToWorld(e,t){var r=Object(k.a)(e,2),n=r[0],i=r[1]*R;return[(t*=L)*(n*R+A)/(2*A),t*(A-Math.log(Math.tan(I+.5*i)))/(2*A)]}function worldToLngLat(e,t){var r=Object(k.a)(e,2),n=r[0],i=r[1],o=n/(t*=L)*(2*A)-A,a=2*(Math.atan(Math.exp(A-i/t*(2*A)))-I);return[o*M,a*M]}function getMeterZoom(e){var t=e.latitude;assert_assert(Number.isFinite(t));var r=Math.cos(t*R);return scaleToZoom(j*r)-9}function web_mercator_utils_getDistanceScales(e){var t=e.latitude,r=e.longitude,n=e.zoom,i=e.scale,o=e.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:zoomToScale(n),assert_assert(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i));var s={},l=L*i,u=Math.cos(t*R),c=l/360,p=c/u,h=l/j/u;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[c,-p,h],s.degreesPerPixel=[1/c,-1/p,1/h],a){var f=R*Math.tan(t*R)/u,d=c*f/2,g=l/j*f,m=g/p*h;s.pixelsPerDegree2=[0,-d,g],s.pixelsPerMeter2=[m,0,m]}return s}function web_mercator_utils_addMetersToLngLat(e,t){var r=Object(k.a)(e,3),n=r[0],i=r[1],o=r[2],a=Object(k.a)(t,3),s=a[0],l=a[1],u=a[2],c=web_mercator_utils_getDistanceScales({longitude:n,latitude:i,scale:1,highPrecision:!0}),p=c.pixelsPerMeter,h=c.pixelsPerMeter2,f=lngLatToWorld(e,1);f[0]+=s*(p[0]+h[0]*l),f[1]+=l*(p[1]+h[1]*l);var d=worldToLngLat(f,1),g=(o||0)+(u||0);return Number.isFinite(o)||Number.isFinite(u)?[d[0],d[1],g]:d}function getViewMatrix(e){var t=e.height,r=e.pitch,n=e.bearing,i=e.altitude,o=e.center,a=void 0===o?null:o,s=e.flipY,l=void 0!==s&&s,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return u.o(c,c,[0,0,-i]),u.n(c,c,[1,1,1/t]),u.k(c,c,-r*R),u.m(c,c,n*R),l&&u.n(c,c,[1,-1,1]),a&&u.o(c,c,T.d([],a)),c}function getProjectionParameters(e){var t=e.width,r=e.height,n=e.altitude,i=void 0===n?D:n,o=e.pitch,a=void 0===o?0:o,s=e.nearZMultiplier,l=void 0===s?1:s,u=e.farZMultiplier,c=void 0===u?1:u,p=a*R,h=Math.atan(.5/i),f=Math.sin(h)*i/Math.sin(Math.PI/2-p-h),d=Math.cos(Math.PI/2-p)*f+i;return{fov:2*Math.atan(r/2/i),aspect:t/r,focalDistance:i,near:l,far:d*c}}function getProjectionMatrix(e){var t=e.width,r=e.height,n=e.pitch,i=getProjectionParameters({width:t,height:r,altitude:e.altitude,pitch:n,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),o=i.fov,a=i.aspect,s=i.near,l=i.far;return u.i([],o,a,s,l)}function worldToPixels(e,t){var r=Object(k.a)(e,3),n=r[0],i=r[1],o=r[2],a=void 0===o?0:o;return assert_assert(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a)),transformVector(t,[n,i,a,1])}function pixelsToWorld(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(k.a)(e,3),i=n[0],o=n[1],a=n[2];if(assert_assert(Number.isFinite(i)&&Number.isFinite(o)),Number.isFinite(a))return transformVector(t,[i,o,a,1]);var s=transformVector(t,[i,o,0,1]),l=transformVector(t,[i,o,1,1]),u=s[2],c=l[2],p=u===c?0:((r||0)-u)/(c-u);return O.d([],s,l,p)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function lngLatZToWorldPosition(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=_slicedToArray(e,3),i=n[0],o=n[1],a=n[2],s=void 0===a?0:a,l=_slicedToArray(t.projectFlat(e),2);return[l[0],l[1],s*(r?web_mercator_utils_getDistanceScales({longitude:i,latitude:o,scale:t.scale}):t.getDistanceScales()).pixelsPerMeter[2]]}function normalizeParameters(e){var t=Object.assign({},e),r=e.viewport,n=e.coordinateSystem,i=e.coordinateOrigin,o=e.fromCoordinateSystem,a=e.fromCoordinateOrigin;return void 0===o&&(t.fromCoordinateSystem=n),void 0===a&&(t.fromCoordinateOrigin=i),n===p.LNGLAT&&r.zoom>=v&&(t.coordinateSystem=p.LNGLAT_OFFSETS,t.coordinateOrigin=[Math.fround(r.longitude),Math.fround(r.latitude)]),t}function getWorldPosition(e,t){var r=t.viewport,n=t.modelMatrix,i=t.coordinateSystem,o=t.coordinateOrigin,a=t.offsetMode,s=_slicedToArray(e,3),l=s[0],u=s[1],h=s[2];if(n){var f=_slicedToArray(c.c([],[l,u,h,1],n),3);l=f[0],u=f[1],h=f[2]}switch(i){case p.LNGLAT:case p.LNGLAT_DEPRECATED:return lngLatZToWorldPosition([l,u,h],r,a);case p.LNGLAT_OFFSETS:return lngLatZToWorldPosition([l+o[0],u+o[1],h+(o[2]||0)],r,a);case p.METER_OFFSETS:return lngLatZToWorldPosition(web_mercator_utils_addMetersToLngLat(o,[l,u,h]),r,a);case p.IDENTITY:default:return[l,u,h]}}function project_functions_projectPosition(e,t){var r=normalizeParameters(t),n=r.viewport,i=r.coordinateSystem,o=r.coordinateOrigin,a=r.modelMatrix,s=r.fromCoordinateSystem,l=r.fromCoordinateOrigin;switch(i){case p.LNGLAT_OFFSETS:case p.METER_OFFSETS:var u=getWorldPosition(e,{viewport:n,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:!0}),c=lngLatZToWorldPosition(o,n,!0);return T.h(u,u,c),u;case p.LNGLAT:case p.LNGLAT_DEPRECATED:case p.IDENTITY:default:return getWorldPosition(e,{viewport:n,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:!1})}}var F={name:"lighting",dependencies:[x],vs:"#define MAX_NUM_OF_LIGHTS 5\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform vec2 lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n    if (i >= lighting_numberOfLights) {\n      break;\n    }\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n",getUniforms:function lighting_getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;if(!e.lightSettings)return{};var t=e.coordinateSystem,r=e.coordinateOrigin,n=e.lightSettings,i=n.numberOfLights,o=void 0===i?1:i,a=n.lightsPosition,s=void 0===a?z:a,l=n.lightsStrength,u=void 0===l?B:l,c=n.coordinateSystem,p=n.coordinateOrigin,h=n.modelMatrix,f=void 0===h?null:h,d=n.ambientRatio,g=void 0===d?U:d,m=n.diffuseRatio,y=void 0===m?V:m,v=n.specularRatio,_=void 0===v?q:v;return{lighting_lightPositions:G({lightsPosition:s,numberOfLights:o,viewport:e.viewport,modelMatrix:f,coordinateSystem:t,coordinateOrigin:r,fromCoordinateSystem:c,fromCoordinateOrigin:p}),lighting_lightStrengths:u,lighting_ambientRatio:g,lighting_diffuseRatio:y,lighting_specularRatio:_,lighting_numberOfLights:o}},deprecations:[{type:"function",old:"getLightWeight",new:"lighting_getLightWeight",deprecated:!0}]},N={},z=[-122.45,37.75,8e3],B=[2,0],U=.4,V=.6,q=.8,G=memoize(function preprojectLightPositions(e){for(var t=e.lightsPosition,r=e.numberOfLights,n=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,a=e.coordinateOrigin,s=e.fromCoordinateSystem,l=e.fromCoordinateOrigin,u={viewport:n,modelMatrix:i,coordinateSystem:o,coordinateOrigin:a,fromCoordinateSystem:s,fromCoordinateOrigin:l},c=[],p=0;p<r;p++){var h=project_functions_projectPosition(t.slice(3*p,3*p+3),u);c[3*p]=h[0],c[3*p+1]=h[1],c[3*p+2]=h[2]}return c});!function initializeShaderModules(){Object(o.A)([o.s,o.t,x,w,P,F,o.z]),Object(o.B)([x])}();var W=r(27),H=r.n(W),X=r(9),K=r.n(X);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Z={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},Y=function(e){function LayerAttribute(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,LayerAttribute),r=this,t=!(n=_getPrototypeOf(LayerAttribute).call(this,e,i))||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(r):n;var o=i.transition,a=void 0!==o&&o,s=i.noAlloc,l=void 0!==s&&s,u=i.update,c=void 0===u?null:u,p=i.accessor,h=void 0===p?null:p,f=i.bufferLayout,d=void 0===f?null:f,g=i.defaultValue,m=void 0===g?[0,0,0,0]:g;return m=Array.isArray(m)?m:[m],Object.assign(t.userData,Z,i,{transition:a,noAlloc:l,update:c,accessor:h,defaultValue:m,bufferLayout:d}),Object.seal(t.userData),t._validateAttributeUpdaters(),t}var t,r,n;return _inherits(LayerAttribute,o["k"]),t=LayerAttribute,(r=[{key:"needsUpdate",value:function needsUpdate(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,t=void 0!==e&&e,needsRedraw=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!t,needsRedraw}},{key:"getInstanceCount",value:function getInstanceCount(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this.userData.accessor;return[this.id].concat(e||[])}},{key:"getAccessor",value:function getAccessor(){return this.userData.accessor}},{key:"supportsTransition",value:function supportsTransition(){return this.userData.transition}},{key:"getTransitionSetting",value:function getTransitionSetting(e){var t=this.userData,r=t.transition,n=t.accessor;if(!r)return null;var i=Array.isArray(n)?e[n.find(function(t){return e[t]})]:e[n];return Number.isFinite(i)&&(i={duration:i}),i&&i.duration>0?Object.assign({},r,i):null}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||e}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||e}},{key:"allocate",value:function allocate(e){var t=this.userData;if(t.isExternalBuffer||t.noAlloc)return!1;var r=this.getInstanceCount();if((0===r||r<e)&&(t.update||t.accessor)){assert(Number.isFinite(e));var n=Math.max(e,1),i=glArrayFromType(this.type||K.a.FLOAT);return this.constant=!1,this.value=new i(this.size*n),t.needsUpdate=!0,t.allocedInstances=n,!0}return!1}},{key:"updateBuffer",value:function updateBuffer(e){var t=e.numInstances,r=e.data,n=e.props,i=e.context;if(!this.needsUpdate())return!1;var o=this.userData,a=o.update,s=o.accessor,l=!0;return a?(a.call(i,this,{data:r,props:n,numInstances:t}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):s?(this._updateBufferViaStandardAccessor(r,n),this._checkAttributeArray()):l=!1,o.needsUpdate=!1,o.needsRedraw=!0,l}},{key:"setGenericValue",value:function setGenericValue(e){var t=this.userData;if(void 0===e||"function"==typeof e)return t.isExternalBuffer=!1,!1;e=this._normalizeValue(e);var r=!this.constant||!this._areValuesEqual(e,this.value);return r&&this.update({constant:!0,value:e}),t.needsRedraw=t.needsUpdate||r,t.needsUpdate=!1,t.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function setExternalBuffer(e,t){var r=this.userData;if(e){if(r.isExternalBuffer=!0,r.needsUpdate=!1,e instanceof o.b)this.externalBuffer!==e&&(this.update({constant:!1,buffer:e}),r.needsRedraw=!0);else if(this.value!==e){if(!ArrayBuffer.isView(e))throw new Error("Attribute prop must be typed array");if(r.auto&&e.length<=t*this.size)throw new Error("Attribute prop array must match length and size");var n=glArrayFromType(this.type||K.a.FLOAT);e instanceof n?this.update({constant:!1,value:e}):(i.warn("Attribute prop ".concat(this.id," is casted to ").concat(n.name))(),this.update({constant:!1,value:new n(e)})),this.value=e,r.needsRedraw=!0}return!0}return r.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function _normalizeValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.userData.defaultValue;if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return t[r]=Number.isFinite(e)?e:n[0],t;switch(this.size){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:n[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:n[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:n[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:n[0]}return t}},{key:"_areValuesEqual",value:function _areValuesEqual(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function _updateBufferViaStandardAccessor(e,t){var r=this.userData.accessor,n=this.value,i=this.size,o=t[r];assert("function"==typeof o,'accessor "'.concat(r,'" is not a function'));var a=0,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=o(c.value);this._normalizeValue(h,n,a),a+=i}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}this.update({value:n})}},{key:"_validateAttributeUpdaters",value:function _validateAttributeUpdaters(){var e=this.userData;if(!(e.noAlloc||"function"==typeof e.update||"string"==typeof e.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function _checkAttributeArray(){var e=this.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"bufferLayout",get:function get(){return this.userData.bufferLayout},set:function set(e){this.userData.bufferLayout=e}}])&&_defineProperties(t.prototype,r),n&&_defineProperties(t,n),LayerAttribute}();function glArrayFromType(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,r=void 0===t||t;switch(e){case K.a.FLOAT:return Float32Array;case K.a.UNSIGNED_SHORT:case K.a.UNSIGNED_SHORT_5_6_5:case K.a.UNSIGNED_SHORT_4_4_4_4:case K.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case K.a.UNSIGNED_INT:return Uint32Array;case K.a.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case K.a.BYTE:return Int8Array;case K.a.SHORT:return Int16Array;case K.a.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function padArrayChunk(e){var t=e.source,r=e.target,n=e.start,i=void 0===n?0:n,o=e.end,a=e.getData;o=o||r.length;var s=t.length,l=o-i;if(s>l)r.set(t.subarray(0,l),i);else if(r.set(t,i),a)for(var u=s;u<l;)for(var c=a(u,t),p=0;p<c.length;p++)r[i+u]=c[p],u++}function padArray(e){var t=e.source,r=e.target,n=e.size,i=e.getData,o=e.sourceLayout,a=e.targetLayout;if(!Array.isArray(a))return padArrayChunk({source:t,target:r,getData:i}),r;for(var s=0,l=0,u=i&&function(e,t){return i(e+l,t)},c=Math.min(o.length,a.length),p=0;p<c;p++){var h=o[p]*n,f=a[p]*n;padArrayChunk({source:t.subarray(s,s+h),target:r,start:l,end:l+f,getData:u}),s+=h,l+=f}return l<r.length&&padArrayChunk({source:[],target:r,start:l,getData:u}),r}var J={1:"float",2:"vec2",3:"vec3",4:"vec4"};function attribute_transition_utils_getShaders(e){var t=[],r=[],n=[],i=[],o=[];for(var a in e){var s=e[a],l=J[s.attribute.size];l&&(s.bufferIndex=t.length,t.push(a),r.push("attribute ".concat(l," ").concat(a,"From;")),r.push("attribute ".concat(l," ").concat(a,"To;")),n.push("uniform float ".concat(a,"Time;")),i.push("varying ".concat(l," ").concat(a,";")),o.push("".concat(a," = mix(").concat(a,"From, ").concat(a,"To,\n        ").concat(a,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(r.join("\n"),"\n").concat(n.join("\n"),"\n").concat(i.join("\n"),"\n\nvoid main(void) {\n  ").concat(o.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(i.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:t}}function getBuffers(e){var t={},r={};for(var n in e){var i=e[n],o=i.fromState,a=i.toState,s=i.buffer;t["".concat(n,"From")]=o,t["".concat(n,"To")]=a,r["".concat(n)]=s}return{sourceBuffers:t,feedbackBuffers:r}}function padBuffer(e){var t=e.fromState,r=e.toState,n=e.fromLength,i=e.toLength,a=e.fromBufferLayout,s=e.toBufferLayout,l=e.getData,u=void 0===l?function(e){return e}:l;if((a&&s||!(n>=i))&&t instanceof o.b){var c=new Float32Array(i),p=t.getData({}),h=r.value,f=r.buffer,d=r.size,g=r.constant,m=h||f.getData({}),y=g?function(e,t){return u(h,t)}:function(e,t){return u(m.subarray(e,e+d),t)};padArray({source:p,target:c,sourceLayout:a,targetLayout:s,size:r.size,getData:y}),t.setData({data:c})}}function transition_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Q={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function noop(){}var $=function(){function Transition(e){transition_classCallCheck(this,Transition),this._startTime=null,this._state=Q.NONE,this.duration=1,this.easing=function(e){return e},this.onStart=noop,this.onUpdate=noop,this.onInterrupt=noop,this.onEnd=noop,Object.assign(this,e)}var e,t,r;return e=Transition,(t=[{key:"start",value:function start(e){this.inProgress&&this.onInterrupt(this),Object.assign(this,e),this._setState(Q.PENDING)}},{key:"cancel",value:function cancel(){this.inProgress&&(this.onInterrupt(this),this._setState(Q.NONE))}},{key:"update",value:function update(e){if(this.state===Q.PENDING&&(this._startTime=e,this._setState(Q.IN_PROGRESS)),this.state===Q.IN_PROGRESS){var t=!1,r=(e-this._startTime)/this.duration;return r>=1&&(r=1,t=!0),this.time=this.easing(r),this.onUpdate(this),t&&this._setState(Q.ENDED),!0}return!1}},{key:"_setState",value:function _setState(e){if(this._state!==e)switch(this._state=e,e){case Q.PENDING:this.onStart(this);break;case Q.ENDED:this.onEnd(this)}}},{key:"state",get:function get(){return this._state}},{key:"inProgress",get:function get(){return this._state===Q.PENDING||this._state===Q.IN_PROGRESS}}])&&transition_defineProperties(e.prototype,t),r&&transition_defineProperties(e,r),Transition}();function attribute_transition_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function attribute_transition_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function noop(){},te={duration:0,easing:function easing(e){return e},onStart:ee,onEnd:ee,onInterrupt:ee},re=function(){function AttributeTransitionManager(e,t){var r=t.id;attribute_transition_manager_classCallCheck(this,AttributeTransitionManager),this.id=r,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,o.j.isSupported(e)?this.isSupported=!0:e&&i.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}var e,t,r;return e=AttributeTransitionManager,(t=[{key:"finalize",value:function finalize(){for(var e in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(e)}},{key:"update",value:function update(e){var t=e.attributes,r=e.transitions,n=void 0===r?{}:r,i=e.numInstances;if(this.opts=n,this.numInstances=i||1,this.isSupported){var o=this.attributeTransitions,a={};for(var s in t){this._updateAttribute(s,t[s])&&(a[s]=o[s])}for(var l in o){var u=t[l];u&&u.supportsTransition()||this._removeTransition(l)}if(this.transform){if(this.transform){var c=getBuffers(a),p=c.sourceBuffers,h=c.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:p,feedbackBuffers:h})}}else this._createModel()}}},{key:"hasAttribute",value:function hasAttribute(e){return e in this.attributeTransitions}},{key:"getAttributes",value:function getAttributes(){var e={};for(var t in this.attributeTransitions){var r=this.attributeTransitions[t];r.buffer&&(e[t]=r.attributeInTransition)}return e}},{key:"setCurrentTime",value:function setCurrentTime(e){if(!this.transform||0===this.numInstances)return!1;var t={},r=this.needsRedraw;for(var n in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[n];i.update(e)&&(t["".concat(n,"Time")]=i.time,r=!0)}return r&&this.transform.run({uniforms:t}),r}},{key:"_createTransition",value:function _createTransition(e,t){var r=this.attributeTransitions[e];return r?null:(r=new $({name:e,attribute:t,attributeInTransition:new Y(this.gl,t),bufferLayout:t.bufferLayout}),this.attributeTransitions[e]=r,this._invalidateModel(),r)}},{key:"_removeTransition",value:function _removeTransition(e){var t=this.attributeTransitions[e];t&&(t.buffer&&t.buffer.delete(),t._swapBuffer&&t._swapBuffer.delete(),delete this.attributeTransitions[e],this._invalidateModel())}},{key:"_updateAttribute",value:function _updateAttribute(e,t){var r=t.getTransitionSetting(this.opts);if(r){var n,i=this.attributeTransitions[e];if(i?n=t.needsRedraw():(i=this._createTransition(e,t),n=!0),n)return this._triggerTransition(i,r),!0}return!1}},{key:"_invalidateModel",value:function _invalidateModel(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function _createModel(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new o.j(this.gl,Object.assign({elementCount:this.numInstances},getBuffers(this.attributeTransitions),attribute_transition_utils_getShaders(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function _getNextTransitionStates(e,t){var r,n=e.attribute,i=n.size;r=n.constant?{constant:!0,value:n.value,size:i}:{constant:!1,buffer:n.getBuffer(),size:i,value:n.externalBuffer?null:n.value};var a=e.buffer||r,s=this.numInstances*i,l=a instanceof o.b&&a.getElementCount()||s,u=e._swapBuffer;return e._swapBuffer=e.buffer,u?u.getElementCount()<s&&u.setData({data:new Float32Array(s)}):u=new o.b(this.gl,{data:new Float32Array(s),usage:K.a.DYNAMIC_COPY}),e.attributeInTransition.update({buffer:u}),padBuffer({fromState:a,toState:r,fromLength:l,toLength:s,fromBufferLayout:e.bufferLayout,toBufferLayout:n.bufferLayout,getData:t.enter}),e.bufferLayout=n.bufferLayout,{fromState:a,toState:r,buffer:u}}},{key:"_triggerTransition",value:function _triggerTransition(e,t){assert(t&&t.duration>0),this.needsRedraw=!0;var r=Object.assign({},te,t);e.start(Object.assign({},this._getNextTransitionStates(e,t),r))}}])&&attribute_transition_manager_defineProperties(e.prototype,t),r&&attribute_transition_manager_defineProperties(e,r),AttributeTransitionManager}();function attribute_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function attribute_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function attribute_manager_createClass(e,t,r){return t&&attribute_manager_defineProperties(e.prototype,t),r&&attribute_manager_defineProperties(e,r),e}function attribute_manager_noop(){}var ne={savedMessages:null,timeStart:null,onLog:function onLog(e){var t=e.level,r=e.message;i.log(t,r)()},onUpdateStart:function onUpdateStart(e){e.level,e.numInstances;ne.savedMessages=[],ne.timeStart=new Date},onUpdate:function onUpdate(e){e.level;var t=e.message;ne.savedMessages&&ne.savedMessages.push(t)},onUpdateEnd:function onUpdateEnd(e){var t=e.level,r=e.id,n=e.numInstances,o=Math.round(new Date-ne.timeStart),a="".concat(o,"ms");i.group(t,"Updated attributes for ".concat(n," instances in ").concat(r," in ").concat(a),{collapsed:!0})();var s=!0,l=!1,u=void 0;try{for(var c,p=ne.savedMessages[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;i.log(t,h)()}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i.groupEnd(t,"Updated attributes for ".concat(n," instances in ").concat(r," in ").concat(a))(),ne.savedMessages=null}},ie=function(){function AttributeManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id,n=void 0===r?"attribute-manager":r,i=t.stats;attribute_manager_classCallCheck(this,AttributeManager),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new re(e,{id:"".concat(n,"-transitions")}),Object.seal(this)}return attribute_manager_createClass(AttributeManager,null,[{key:"setDefaultLogFunctions",value:function setDefaultLogFunctions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,r=e.onUpdateStart,n=e.onUpdate,i=e.onUpdateEnd;void 0!==t&&(ne.onLog=t||attribute_manager_noop),void 0!==r&&(ne.onUpdateStart=r||attribute_manager_noop),void 0!==n&&(ne.onUpdate=n||attribute_manager_noop),void 0!==i&&(ne.onUpdateEnd=i||attribute_manager_noop)}}]),attribute_manager_createClass(AttributeManager,[{key:"finalize",value:function finalize(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t,r&&this.id}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function add(e,t){this._add(e,t)}},{key:"addInstanced",value:function addInstanced(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function remove(e){for(var t=0;t<e.length;t++){var r=e[t];void 0!==this.attributes[r]&&(this.attributes[r].delete(),delete this.attributes[r])}}},{key:"invalidate",value:function invalidate(e){var t=this._invalidateTrigger(e);ne.onLog({level:3,message:"invalidated attributes ".concat(t," (").concat(e,") for ").concat(this.id)})}},{key:"invalidateAll",value:function invalidateAll(){for(var e in this.attributes)this.attributes[e].setNeedsUpdate();ne.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.numInstances,n=e.transitions,i=e.props,o=void 0===i?{}:i,a=e.buffers,s=void 0===a?{}:a,l=e.context,u=void 0===l?{}:l,c=!1;for(var p in ne.onUpdateStart({level:2,id:this.id,numInstances:r}),this.stats&&this.stats.timeStart("attribute updates",this.id),this.attributes){var h=this.attributes[p];h.setExternalBuffer(s[p],this.numInstances)||h.setGenericValue(o[h.getAccessor()])||h.needsUpdate()&&(c=!0,this._updateAttribute({attribute:h,numInstances:r,data:t,props:o,context:u})),this.needsRedraw|=h.needsRedraw()}c&&(this.stats&&this.stats.timeEnd("attribute updates",this.id),ne.onUpdateEnd({level:2,id:this.id,numInstances:r})),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:n})}},{key:"updateTransition",value:function updateTransition(){var e=this.attributeTransitionManager.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(e){e.clearChangedFlags;var t=this.attributes,r=this.attributeTransitionManager,n=Object.assign({},r.getAttributes());for(var i in t){var o=t[i];o.needsRedraw({clearChangedFlags:!0})&&(r.hasAttribute(i)||(n[i]=o))}return n}},{key:"getAccessors",value:function getAccessors(){return this.updateTriggers}},{key:"_add",value:function _add(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&i.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var n={};for(var o in e){var a=e[o];n[o]=new Y(this.gl,Object.assign({},a,{id:o,constant:a.constant||!1,isIndexed:a.isIndexed||a.elements,size:a.elements?1:a.size,value:a.value||null,instanced:a.instanced||r.instanced}))}Object.assign(this.attributes,n),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function _mapUpdateTriggersToAttributes(){var e=this,t={},r=function _loop(r){e.attributes[r].getUpdateTriggers().forEach(function(e){t[e]||(t[e]=[]),t[e].push(r)})};for(var n in this.attributes)r(n);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function _invalidateTrigger(e){var t=this.attributes,r=this.updateTriggers[e];if(r)r.forEach(function(e){var r=t[e];r&&r.setNeedsUpdate()});else{var n="invalidating non-existent trigger ".concat(e," for ").concat(this.id,"\n");n+="Valid triggers: ".concat(Object.keys(t).join(", ")),i.warn(n,r)()}return r}},{key:"_updateAttribute",value:function _updateAttribute(e){var t=e.attribute,r=e.numInstances,n=e.data,i=e.props,o=e.context;t.allocate(r)&&ne.onUpdate({level:3,message:"".concat(t.id," allocated ").concat(r),id:this.id});var a=Date.now();if(t.updateBuffer({numInstances:r,data:n,props:i,context:o})){this.needsRedraw=!0;var s=Math.round(Date.now()-a);ne.onUpdate({level:3,message:"".concat(t.id," updated ").concat(r," in ").concat(s,"ms")})}}}]),AttributeManager}();function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var oe=function recursiveSet(e,t,r){e&&(t.length>1?recursiveSet(e[t[0]],t.slice(1),r):e[t[0]]=r)},ae=new Map,se=function setPropOverrides(e,t,r){H.a.isReady()&&(ae.has(e)||ae.set(e,new Map),ae.get(e).set(t,r))},le=function applyPropOverrides(e){if(H.a.isReady()&&e.id){var t=ae.get(e.id);t&&t.forEach(function(t,r){var n;oe(e,r,t),"data"===r[0]&&(e.data=_arrayWithoutHoles(n=e.data)||_iterableToArray(n)||_nonIterableSpread())})}},ue=function layerEditListener(e){H.a.isReady()&&H.a.listenFor("deck.gl",e)},ce=function seerInitListener(e){H.a.isReady()&&H.a.listenFor("init",e)},pe=function initLayerInSeer(e){if(H.a.isReady()&&e){var t=[e.constructor.layerName];H.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parent?e.parent.id:void 0})}},he=function updateLayerInSeer(e){if(H.a.isReady()&&!H.a.throttle("deck.gl:".concat(e.id),1e3)){var t=logPayload(e);H.a.multiUpdate("deck.gl",e.id,t)}},fe=function removeLayerInSeer(e){H.a.isReady()&&e&&H.a.deleteItem("deck.gl",e)};function logPayload(e){var t=[{path:"objects.props",data:e.props}],r=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var n=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:n}),r.push(e.getAttributeManager().stats.getTimeString())}if(e.state.model){e.state.model.setProps({timerQueryEnabled:!0});var i=e.state.model.stats.lastFrameTime;i&&r.push("".concat((1e3*i).toFixed(0),"s"))}}return t.push({path:"badges",data:r}),t}function props_typeof(e){return(props_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function props_validateProps(e){var t=getPropTypes(e);for(var r in t){var n=t[r],i=n.validate;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function props_diffProps(e,t){var r=compareProps({newProps:e,oldProps:t,propTypes:getPropTypes(e),ignoreProps:{data:null,updateTriggers:null}}),n=diffDataProps(e,t),i=!1;return n||(i=diffUpdateTriggers(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i}}function compareProps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,r=e.oldProps,n=e.ignoreProps,i=void 0===n?{}:n,o=e.propTypes,a=void 0===o?{}:o,s=e.triggerName,l=void 0===s?"props":s;if(assert(void 0!==r&&void 0!==t,"compareProps args"),r===t)return null;if("object"!==props_typeof(t)||null===t)return"".concat(l," changed shallowly");if("object"!==props_typeof(r)||null===r)return"".concat(l," changed shallowly");for(var u in r)if(!(u in i)){if(!(u in t))return"".concat(l,".").concat(u," dropped: ").concat(r[u]," -> undefined");var c=t[u],p=r[u],h=a[u],f=h&&h.equal;if(f&&!f(c,p,h))return"".concat(l,".").concat(u," changed deeply: ").concat(p," -> ").concat(c);if(!f&&(f=c&&p&&c.equals)&&!f.call(c,p))return"".concat(l,".").concat(u," changed deeply: ").concat(p," -> ").concat(c);if(!f&&p!==c)return"".concat(l,".").concat(u," changed shallowly: ").concat(p," -> ").concat(c)}for(var d in t)if(!(d in i||d in r))return"".concat(l,".").concat(d," added: undefined -> ").concat(t[d]);return null}function diffDataProps(e,t){if(null===t)return"oldProps is null, initial diff";var r=e.dataComparator;if(r){if(!r(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}function diffUpdateTriggers(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers&&diffUpdateTrigger(e,t,"all"))return{all:!0};var r={},n=!1;for(var i in e.updateTriggers){if("all"!==i)diffUpdateTrigger(e,t,i)&&(r[i]=!0,n=r)}return n}function diffUpdateTrigger(e,t,r){var n=e.updateTriggers[r];n=null==n?{}:n;var i=t.updateTriggers[r];return compareProps({oldProps:i=null==i?{}:i,newProps:n,triggerName:r})}function getPropTypes(e){var t=e._component,r=t&&t.constructor;return r?r._propTypes:{}}function count_typeof(e){return(count_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var de="count(): argument not an object",ge="count(): argument not a container";function count_count(e){if(null===(t=e)||"object"!==count_typeof(t))throw new Error(de);var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(isPlainObject(e))return Object.keys(e).length;throw new Error(ge)}function isPlainObject(e){return null!==e&&"object"===count_typeof(e)&&e.constructor===Object}var me={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};function prop_types_typeof(e){return(prop_types_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function prop_types_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function prop_types_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function prop_types_arrayWithHoles(e){if(Array.isArray(e))return e}var ye={boolean:{validate:function validate(e,t){return!0},equal:function equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate:function validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function validate(e,t){return isArray(e)&&(3===e.length||4===e.length)},equal:function equal(e,t,r){return arrayEqual(e,t)}},accessor:{validate:function validate(e,t){var r=getTypeOf(e);return"function"===r||r===getTypeOf(t.value)},equal:function equal(e,t,r){return"function"==typeof t||arrayEqual(e,t)}},array:{validate:function validate(e,t){return t.optional&&!e||isArray(e)},equal:function equal(e,t,r){return r.compare?arrayEqual(e,t):e===t}},function:{validate:function validate(e,t){return t.optional&&!e||"function"==typeof e},equal:function equal(e,t,r){return!r.compare||e===t}}};function arrayEqual(e,t){if(e===t)return!0;if(!isArray(e)||!isArray(t))return!1;var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function parsePropTypes(e){for(var t,r,n={},i={},o={},a=Object.entries(e),s=0;s<a.length;s++){var l=(t=a[s],r=2,prop_types_arrayWithHoles(t)||prop_types_iterableToArrayLimit(t,r)||prop_types_nonIterableRest()),u=l[0],c=l[1];if(c&&c.deprecatedFor)o[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var p=parsePropType(u,c);n[u]=p,i[u]=p.value}}return{propTypes:n,defaultProps:i,deprecatedProps:o}}function parsePropType(e,t){switch(getTypeOf(t)){case"object":return normalizePropDefinition(e,t);case"array":return normalizePropDefinition(e,{type:"array",value:t,compare:!1});case"boolean":return normalizePropDefinition(e,{type:"boolean",value:t});case"number":return normalizePropDefinition(e,{type:"number",value:t});case"function":return normalizePropDefinition(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function normalizePropDefinition(e,t){return"type"in t?Object.assign({name:e},ye[t.type],t):"value"in t?Object.assign({name:e,type:getTypeOf(t.value)},t):{name:e,type:"object",value:t}}function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function getTypeOf(e){return isArray(e)?"array":null===e?"null":prop_types_typeof(e)}function createProps(){for(var e=getPropsPrototypeAndTypes(this.constructor),t=e.defaultProps,r=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),n=0;n<arguments.length;++n)Object.assign(r,arguments[n]);var i=this.constructor.layerName,o=e.deprecatedProps;return checkDeprecatedProps(i,r,o),checkDeprecatedProps(i,r.updateTriggers,o),checkDeprecatedProps(i,r.transitions,o),le(r),Object.freeze(r),r}function checkDeprecatedProps(e,t,r){if(t)for(var n in r)if(create_props_hasOwnProperty(t,n)){var o="".concat(e||"Layer",": ").concat(n),a=!0,s=!1,l=void 0;try{for(var u,c=r[n][Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;create_props_hasOwnProperty(t,p)||(t[p]=t[n])}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}i.deprecated(o,r[n].join("/"))()}}function getPropsPrototypeAndTypes(e){var t=getOwnProperty(e,"_mergedDefaultProps");return t?{defaultProps:t,propTypes:getOwnProperty(e,"_propTypes"),deprecatedProps:getOwnProperty(e,"_deprecatedProps")}:createPropsPrototypeAndTypes(e)}function createPropsPrototypeAndTypes(e){var t=e.prototype;if(!t)return{defaultProps:{}};var r=Object.getPrototypeOf(e),n=t&&getPropsPrototypeAndTypes(r)||null,i=parsePropTypes(getOwnProperty(e,"defaultProps")||{}),o=Object.assign({},n&&n.propTypes,i.propTypes),a=createPropsPrototype(i.defaultProps,n&&n.defaultProps,o,e),s=Object.assign({},n&&n.deprecatedProps,i.deprecatedProps);return e._mergedDefaultProps=a,e._propTypes=o,e._deprecatedProps=s,{propTypes:o,defaultProps:a,deprecatedProps:s}}function createPropsPrototype(e,t,r,n){var i=Object.create(null);Object.assign(i,t,e);var o=getComponentName(n);return delete e.id,Object.defineProperties(i,{id:{configurable:!1,writable:!0,value:o}}),addAsyncPropsToPropPrototype(i,r),i}function addAsyncPropsToPropPrototype(e,t){var r={},n={_asyncPropDefaultValues:{enumerable:!1,value:r},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in t){var o=t[i],a=o.name,s=o.value;o.async&&(r[a]=s,n[a]=getDescriptorForAsyncProp(a))}Object.defineProperties(e,n)}function getDescriptorForAsyncProp(e){return{configurable:!1,enumerable:!0,set:function set(t){"string"==typeof t||t instanceof Promise?this._asyncPropOriginalValues[e]=t:this._asyncPropResolvedValues[e]=t},get:function get(){if(this._asyncPropResolvedValues){if(e in this._asyncPropResolvedValues){var t=this._asyncPropResolvedValues[e];return"data"===e?t||this._asyncPropDefaultValues[e]:t}if(e in this._asyncPropOriginalValues){var r=this._component&&this._component.internalState;if(r&&r.hasAsyncProp(e))return r.getAsyncProp(e)}}return this._asyncPropDefaultValues[e]}}}function create_props_hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function getOwnProperty(e,t){return create_props_hasOwnProperty(e,t)&&e[t]}function getComponentName(e){var t=getOwnProperty(e,"layerName")||getOwnProperty(e,"componentName");return t||i.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}function component_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function component_state_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ve=Object.freeze({}),_e=function(){function ComponentState(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;component_state_classCallCheck(this,ComponentState),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=ve,this.oldAsyncProps=null}var e,t,r;return e=ComponentState,(t=[{key:"getOldProps",value:function getOldProps(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function freezeAsyncOldProps(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[e]=this.oldProps[e]}},{key:"hasAsyncProp",value:function hasAsyncProp(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function getAsyncProp(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function isAsyncPropLoading(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}},{key:"setAsyncProps",value:function setAsyncProps(e){var t=e._asyncPropResolvedValues||{},r=e._asyncPropOriginalValues||e,n=e._asyncPropDefaultValues||{};for(var i in t){var o=t[i];this._createAsyncPropData(i,o,n[i]),this._updateAsyncProp(i,o)}for(var a in r){var s=r[a];this._createAsyncPropData(a,s,n[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function _updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t)t=(0,this.layer.props.fetch)(t);t instanceof Promise?this._watchPromise(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function _didAsyncInputValueChange(e,t){var r=this.asyncProps[e];return t!==r.lastValue&&(r.lastValue=t,!0)}},{key:"_setPropValue",value:function _setPropValue(e,t){var r=this.asyncProps[e];r.value=t,r.resolvedValue=t,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount}},{key:"_setAsyncPropValue",value:function _setAsyncPropValue(e,t,r){var n=this.asyncProps[e];n&&r>=n.resolvedLoadCount&&(assert(void 0!==t),this.freezeAsyncOldProps(),t=this._postProcessValue(e,t),n.resolvedValue=t,n.resolvedLoadCount=r,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function _watchPromise(e,t){var r=this,n=this.asyncProps[e];n.pendingLoadCount++;var o=n.pendingLoadCount;t.then(function(t){return r._setAsyncPropValue(e,t,o)}).catch(function(e){return i.error(e)()})}},{key:"_postProcessValue",value:function _postProcessValue(e,t){var r=(this.component?this.component.props:{}).dataTransform;return"data"===e&&r&&(t=r(t)),t}},{key:"_createAsyncPropData",value:function _createAsyncPropData(e,t,r){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0})}}])&&component_state_defineProperties(e.prototype,t),r&&component_state_defineProperties(e,r),ComponentState}();function component_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function component_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var be=0,xe=function(){function Component(){component_classCallCheck(this,Component),this.props=createProps.apply(this,arguments),this.id=this.props.id,this.count=be++,this.lifecycle=me.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}var e,t,r;return e=Component,(t=[{key:"clone",value:function clone(e){var t=this.props,r={};for(var n in t._asyncPropDefaultValues)n in t._asyncPropResolvedValues?r[n]=t._asyncPropResolvedValues[n]:n in t._asyncPropOriginalValues&&(r[n]=t._asyncPropOriginalValues[n]);return new this.constructor(Object.assign({},t,r,e))}},{key:"_initState",value:function _initState(){this.internalState=new _e({})}},{key:"stats",get:function get(){return this.internalState.stats}}])&&component_defineProperties(e.prototype,t),r&&component_defineProperties(e,r),Component}();function layer_state_typeof(e){return(layer_state_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function layer_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_state_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function layer_state_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function layer_state_getPrototypeOf(e){return(layer_state_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function layer_state_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&layer_state_setPrototypeOf(e,t)}function layer_state_setPrototypeOf(e,t){return(layer_state_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}xe.defaultProps={};var we=function(e){function LayerState(e){var t,r,n,i=e.attributeManager,o=e.layer;return layer_state_classCallCheck(this,LayerState),r=this,(t=!(n=layer_state_getPrototypeOf(LayerState).call(this,o))||"object"!==layer_state_typeof(n)&&"function"!=typeof n?layer_state_assertThisInitialized(r):n).attributeManager=i,t.model=null,t.needsRedraw=!0,t.subLayers=null,t}var t,r,n;return layer_state_inherits(LayerState,_e),t=LayerState,(r=[{key:"layer",get:function get(){return this.component},set:function set(e){this.component=e}}])&&layer_state_defineProperties(t.prototype,r),n&&layer_state_defineProperties(t,n),LayerState}();function layer_typeof(e){return(layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function layer_slicedToArray(e,t){return layer_arrayWithHoles(e)||layer_iterableToArrayLimit(e,t)||layer_nonIterableRest()}function layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function layer_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function layer_arrayWithHoles(e){if(Array.isArray(e))return e}function layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function layer_getPrototypeOf(e){return(layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&layer_setPrototypeOf(e,t)}function layer_setPrototypeOf(e,t){return(layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Se={data:{type:"data",value:Object.freeze([]),async:!0},dataComparator:null,dataTransform:{type:"function",value:function value(e){return e},compare:!1},fetch:{type:"function",value:function value(e){return fetch(e).then(function(e){return e.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:p.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function value(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Ee=function(e){function Layer(){return layer_classCallCheck(this,Layer),e=this,!(t=layer_getPrototypeOf(Layer).apply(this,arguments))||"object"!==layer_typeof(t)&&"function"!=typeof t?layer_assertThisInitialized(e):t;var e,t}var t,r,n;return layer_inherits(Layer,xe),t=Layer,(r=[{key:"toString",value:function toString(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setLayerNeedsUpdate",value:function setLayerNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e;return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function needsUpdate(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function isPickable(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function getSingleModel(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function getAttributeManager(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function getCurrentLayer(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function getFirstObject(){var e=this.props.data,t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){return i.value}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return null}},{key:"project",value:function project(e){var t=this.context.viewport,r=layer_slicedToArray(worldToPixels(getWorldPosition(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),3),n=r[0],i=r[1],o=r[2];return 2===e.length?[n,i]:[n,i,o]}},{key:"unproject",value:function unproject(e){var t=this.context.viewport;return assert(Array.isArray(e)),t.unproject(e)}},{key:"projectPosition",value:function projectPosition(e){return assert(Array.isArray(e)),project_functions_projectPosition(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function projectFlat(e){i.deprecated("layer.projectFlat","layer.projectPosition")();var t=this.context.viewport;return assert(Array.isArray(e)),t.projectFlat(e)}},{key:"unprojectFlat",value:function unprojectFlat(e){i.deprecated("layer.unprojectFlat")();var t=this.context.viewport;return assert(Array.isArray(e)),t.unprojectFlat(e)}},{key:"use64bitProjection",value:function use64bitProjection(){if(this.props.fp64){if(this.props.coordinateSystem===p.LNGLAT_DEPRECATED)return!0;i.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function use64bitPositions(){return this.props.fp64||this.props.coordinateSystem===p.LNGLAT}},{key:"screenToDevicePixels",value:function screenToDevicePixels(e){return i.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),e*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function onHover(e){return!!this.props.onHover&&this.props.onHover(e,this.context.pickingEvent)}},{key:"onClick",value:function onClick(e){return!!this.props.onClick&&this.props.onClick(e,this.context.pickingEvent)}},{key:"nullPickingColor",value:function nullPickingColor(){return[0,0,0]}},{key:"encodePickingColor",value:function encodePickingColor(e){return assert(0==(e+1>>24&255),"index out of picking color range"),[e+1&255,e+1>>8&255,e+1>>8>>8&255]}},{key:"decodePickingColor",value:function decodePickingColor(e){assert(e instanceof Uint8Array);var t=layer_slicedToArray(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function shouldUpdateState(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function updateState(e){e.oldProps,e.props,e.context;var t=e.changeFlags,r=this.getAttributeManager();t.dataChanged&&r&&r.invalidateAll()}},{key:"finalizeState",value:function finalizeState(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.delete()}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}var o=this.getAttributeManager();o&&o.finalize()}},{key:"draw",value:function draw(e){var t=!0,r=!1,n=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.draw(e)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,r=(e.mode,t.index);return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}},{key:"invalidateAttribute",value:function invalidateAttribute(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.getAttributeManager();r&&("all"===e?(i.log(1,"updateTriggers invalidating all attributes: ".concat(t))(),r.invalidateAll()):(i.log(1,"updateTriggers invalidating attribute ".concat(e,": ").concat(t))(),r.invalidate(e)))}},{key:"updateAttributes",value:function updateAttributes(e){var t=this.getAttributeManager();if(t){var r=this.getNumInstances(e);t.update({data:e.data,numInstances:r,props:e,transitions:e.transitions,buffers:e,context:this,ignoreUnknownAttributes:!0});var n=this.getSingleModel();if(n){var i=t.getChangedAttributes({clearChangedFlags:!0});n.setAttributes(i)}}}},{key:"updateTransition",value:function updateTransition(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(e,t){for(var r=t.numInstances,n=e.value,i=e.size,o=0;o<r;o++){var a=this.encodePickingColor(o);n[o*i+0]=a[0],n[o*i+1]=a[1],n[o*i+2]=a[2]}}},{key:"_clearInstancePickingColor",value:function _clearInstancePickingColor(e){var t=this.getAttributeManager().attributes.instancePickingColors,r=t.value,n=t.size,i=this.decodePickingColor(e);r[i*n+0]=0,r[i*n+1]=0,r[i*n+2]=0,t.update({value:r})}},{key:"_clearPickingColor",value:function _clearPickingColor(e){for(var t=this.getAttributeManager().attributes.pickingColors,r=t.value,n=0;n<r.length;n+=3)r[n+0]===e[0]&&r[n+1]===e[1]&&r[n+2]===e[2]&&(r[n+0]=0,r[n+1]=0,r[n+2]=0);t.update({value:r})}},{key:"clearPickingColor",value:function clearPickingColor(e){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(e):this._clearInstancePickingColor(e)}},{key:"copyPickingColors",value:function copyPickingColors(){var e=this.getAttributeManager().attributes,t=e.pickingColors,r=e.instancePickingColors;return new Uint8ClampedArray((t||r).value)}},{key:"restorePickingColors",value:function restorePickingColors(e){var t=this.getAttributeManager().attributes,r=t.pickingColors,n=t.instancePickingColors;(r||n).update({value:e})}},{key:"getNumInstances",value:function getNumInstances(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:count_count(this.props.data)}},{key:"_initialize",value:function _initialize(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var e=this.getSingleModel();e&&(e.id=this.props.id,e.program.id="".concat(this.props.id,"-program"),e.geometry.id="".concat(this.props.id,"-geometry"))}},{key:"_update",value:function _update(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function _updateState(){var e=this._getUpdateParams();if(this.context.gl)this.updateState(e);else try{this.updateState(e)}catch(e){}this.isComposite?this._renderLayers(e):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function _finalize(){assert(this.internalState&&this.state),this.finalizeState(this.context),fe(this.id)}},{key:"drawLayer",value:function drawLayer(e){var t=this,r=e.moduleParameters,n=void 0===r?null:r,i=e.uniforms,a=void 0===i?{}:i,s=e.parameters,l=void 0===s?{}:s;a.picking_uActive||this.updateTransition(),n&&this.setModuleParameters(n);var u=this.context.animationProps;if(u){var c=!0,p=!1,h=void 0;try{for(var f,d=this.getModels()[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){f.value._setAnimationProps(u)}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}}var g=this.props.getPolygonOffset,m=g&&g(a)||[0,0];l.polygonOffset=m,Object(o.E)(this.context.gl,l,function(){t.draw({moduleParameters:n,uniforms:a,parameters:l,context:t.context})})}},{key:"pickLayer",value:function pickLayer(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function getChangeFlags(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function setChangeFlags(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var r=this.internalState.changeFlags;e.dataChanged&&!r.dataChanged&&(r.dataChanged=e.dataChanged,i.log(2,function(){return"dataChanged: ".concat(e.dataChanged," in ").concat(t.id)})()),e.updateTriggersChanged&&!r.updateTriggersChanged&&(r.updateTriggersChanged=r.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,r.updateTriggersChanged):e.updateTriggersChanged||r.updateTriggersChanged,i.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(e.updateTriggersChanged).join(", ")," in ").concat(t.id)})()),e.propsChanged&&!r.propsChanged&&(r.propsChanged=e.propsChanged,i.log(2,function(){return"propsChanged: ".concat(e.propsChanged," in ").concat(t.id)})()),e.viewportChanged&&!r.viewportChanged&&(r.viewportChanged=e.viewportChanged,i.log(3,function(){return"viewportChanged: ".concat(e.viewportChanged," in ").concat(t.id)})()),e.stateChanged&&!r.stateChanged&&(r.stateChanged=e.stateChanged,i.log(2,function(){return"stateChanged: ".concat(e.stateChanged," in ").concat(t.id)})());var n=e.dataChanged||e.updateTriggersChanged||e.propsChanged;r.propsOrDataChanged=r.propsOrDataChanged||n,r.somethingChanged=r.somethingChanged||n||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function printChangeFlags(){var e=this.internalState.changeFlags;return"".concat(e.dataChanged?"data ":"").concat(e.propsChanged?"props ":"").concat(e.updateTriggersChanged?"triggers ":"").concat(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function diffProps(e,t){var r=props_diffProps(e,t);if(r.updateTriggersChanged)for(var n in r.updateTriggersChanged)r.updateTriggersChanged[n]&&this._activeUpdateTrigger(n);return this.setChangeFlags(r)}},{key:"validateProps",value:function validateProps(){props_validateProps(this.props)}},{key:"setModuleParameters",value:function setModuleParameters(e){var t=!0,r=!1,n=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"_getUpdateParams",value:function _getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function _getNeedsRedraw(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e;var r=this.getAttributeManager(),n=r&&r.getNeedsRedraw({clearRedrawFlags:e}),i=this._modelNeedsRedraw(e);return t=t||n||i}},{key:"_modelNeedsRedraw",value:function _modelNeedsRedraw(e){var t=!1,r=!0,n=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,l=s.getNeedsRedraw({clearRedrawFlags:e});l&&"string"!=typeof l&&(l="model ".concat(s.id)),t=t||l}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}},{key:"_getAttributeManager",value:function _getAttributeManager(){return new ie(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function _initState(){assert(!this.internalState&&!this.state);var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:K.a.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new we({attributeManager:e,layer:this}),this.state={},this.state.attributeManager=e,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function _transferState(e){var t=e.state,r=e.internalState;if(assert(t&&r),this!==e){this.internalState=r,this.internalState.component=this,this.state=t,t.layer=this,this.internalState.setAsyncProps(this.props);var n=!0,i=!1,o=void 0;try{for(var a,s=this.getModels()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.userData.layer=this}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function _onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function _activeUpdateTrigger(e){this.invalidateAttribute(e)}},{key:"_updateBaseUniforms",value:function _updateBaseUniforms(){var e=this,t={opacity:"function"==typeof this.props.opacity?function(t){return Math.pow(e.props.opacity(t),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},r=!0,n=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){o.value.setUniforms(t)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setUniforms",value:function setUniforms(e){var t=!0,r=!1,n=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.setUniforms(e)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this.setNeedsRedraw(),i.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function is64bitEnabled(){return i.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}])&&layer_defineProperties(t.prototype,r),n&&layer_defineProperties(t,n),Layer}();Ee.layerName="Layer",Ee.defaultProps=Se;var Pe=2,Ce=0,Te=function getPixelRatio(e){var t=e.useDevicePixels;return assert("boolean"==typeof t,"Invalid useDevicePixels"),t&&"undefined"!=typeof window?window.devicePixelRatio:1},ke=function getGLViewport(e,t){var r=t.viewport,n=t.pixelRatio,i=e.canvas?e.canvas.clientHeight||e.canvas.height:100,o=r;return[o.x*n,(i-o.y-o.height)*n,o.width*n,o.height*n]};function clearCanvas(e,t){t.useDevicePixels;var r=e.drawingBufferWidth,n=e.drawingBufferHeight;Object(o.E)(e,{viewport:[0,0,r,n]},function(){e.clear(K.a.COLOR_BUFFER_BIT|K.a.DEPTH_BUFFER_BIT)})}function draw_layers_drawLayers(e,t){var r=t.layers,n=t.viewports,i=t.views,o=t.onViewportActive,a=t.useDevicePixels,s=t.drawPickingColors,l=void 0!==s&&s,u=t.deviceRect,c=void 0===u?null:u,p=t.parameters,h=void 0===p?{}:p,f=t.layerFilter,d=void 0===f?null:f,g=t.pass,m=void 0===g?"draw":g,y=t.redrawReason,v=void 0===y?"":y,_=t.stats;t.customRender||clearCanvas(e,{useDevicePixels:a}),n.forEach(function(t,n){var s=getViewportFromDescriptor(t),u=i&&i[s.id];o(s),drawLayersInViewport(e,{layers:r,viewport:s,view:u,useDevicePixels:a,drawPickingColors:l,deviceRect:c,parameters:h,layerFilter:d,pass:m,redrawReason:v,stats:_})})}function drawPickingBuffer(e,t){var r=t.layers,n=t.viewports,i=t.onViewportActive,a=t.useDevicePixels,s=t.pickingFBO,l=t.deviceRect,u=l.x,c=l.y,p=l.width,h=l.height,f=t.layerFilter,d=void 0===f?null:f,g=t.redrawReason,m=void 0===g?"":g;return Object(o.E)(e,{framebuffer:s,scissorTest:!0,scissor:[u,c,p,h],clearColor:[0,0,0,0]},function(){draw_layers_drawLayers(e,{layers:r,viewports:n,onViewportActive:i,useDevicePixels:a,drawPickingColors:!0,layerFilter:d,pass:"picking",redrawReason:m,parameters:{blend:!0,blendFunc:[e.ONE,e.ZERO,e.CONSTANT_ALPHA,e.ZERO],blendEquation:e.FUNC_ADD,blendColor:[0,0,0,0]}})})}function drawLayersInViewport(e,t){var r=t.layers,n=t.viewport,i=t.view,a=t.useDevicePixels,s=t.drawPickingColors,l=void 0!==s&&s,u=(t.deviceRect,t.parameters),c=void 0===u?{}:u,p=t.layerFilter,h=t.pass,f=void 0===h?"draw":h,d=t.redrawReason,g=void 0===d?"":d,m=t.stats,y=Te({useDevicePixels:a}),v=ke(e,{viewport:n,pixelRatio:y});if(i&&i.props.clear){var _=!0===i.props.clear?{color:!0,depth:!0}:i.props.clear;Object(o.E)(e,{scissorTest:!0,scissor:v},function(){return Object(o.q)(e,_)})}var b={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(o.C)(e,c||{}),r.forEach(function(t,r){var i=!t.isComposite&&t.props.visible;l&&(i=i&&t.props.pickable),i&&p&&(i=p({layer:t,viewport:n,isPicking:l})),i&&t.props.pickable&&b.pickableCount++,t.isComposite&&b.compositeCount++,i&&(b.visibleCount++,drawLayerInViewport({gl:e,layer:t,layerIndex:r,drawPickingColors:l,pixelRatio:y,glViewport:v,parameters:c}))}),Ce++,logRenderStats({renderStats:b,pass:f,redrawReason:g,stats:m})}function drawLayerInViewport(e){e.gl;var t=e.layer,r=e.layerIndex,n=e.drawPickingColors,i=e.pixelRatio,o=e.glViewport,a=e.parameters,s=Object.assign(Object.create(t.props),{viewport:t.context.viewport,pickingActive:n?1:0,devicePixelRatio:i}),l=Object.assign({},t.context.uniforms,{layerIndex:r}),u=Object.assign({},t.props.parameters||{},a);Object.assign(u,{viewport:o}),n?Object.assign(u,{blendColor:[0,0,0,(r+1)/255]}):Object.assign(s,getObjectHighlightParameters(t)),t.drawLayer({moduleParameters:s,uniforms:l,parameters:u})}function logRenderStats(e){var t=e.renderStats,r=e.pass,n=e.redrawReason,o=e.stats;if(i.priority>=Pe){var a=t.totalCount,s=t.visibleCount,l=t.compositeCount,u=t.pickableCount,c=a-l-s,p="";p+="RENDER #".concat(Ce," ").concat(s," (of ").concat(a," layers) to ").concat(r," because ").concat(n," "),i.priority>Pe&&(p+="(".concat(c," hidden, ").concat(l," composite ").concat(u," pickable)")),i.log(Pe,p)(),o&&o.increment("redraw layers",s)}}function getViewportFromDescriptor(e){return e.viewport?e.viewport:e}function getObjectHighlightParameters(e){var t=e.props,r=t.highlightedObjectIndex,n=t.highlightColor,i={pickingHighlightColor:[n[0],n[1],n[2],n[3]||255]};return Number.isInteger(r)&&(i.pickingSelectedColor=r>=0?e.encodePickingColor(r):null),i}var Oe={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function pick_layers_pickObject(e,t){for(var r=t.layers,n=t.viewports,i=t.x,o=t.y,a=t.radius,s=t.layerFilter,l=t.depth,u=void 0===l?1:l,c=t.mode,p=t.onViewportActive,h=t.pickingFBO,f=t.lastPickedInfo,d=t.useDevicePixels,g=Te({useDevicePixels:d}),m=Math.round(i*g),y=Math.round(e.canvas.height-o*g),v=Math.round(a*g),_=getPickingRect({deviceX:m,deviceY:y,deviceRadius:v,deviceWidth:h.width,deviceHeight:h.height}),b=[],x={},w=0;w<u;w++){var S=_&&drawAndSamplePickingBuffer(e,{layers:r,viewports:n,onViewportActive:p,useDevicePixels:d,pickingFBO:h,deviceRect:_,layerFilter:s,redrawReason:c}),E=S&&getClosestFromPickingBuffer(e,{pickedColors:S,layers:r,deviceX:m,deviceY:y,deviceRadius:v,deviceRect:_})||Oe;if(E.pickedColor&&w+1<u){var P=E.pickedColor[3]-1;x[P]||(x[P]=r[P].copyPickingColors()),r[P].clearPickingColor(E.pickedColor)}var C=processPickInfo({pickInfo:E,lastPickedInfo:f,mode:c,layers:r,viewports:n,x:i,y:o,deviceX:m,deviceY:y,pixelRatio:g});if(C&&C.forEach(function(e){return b.push(e)}),!E.pickedColor)break}return Object.keys(x).forEach(function(e){return r[e].restorePickingColors(x[e])}),b}function pickVisibleObjects(e,t){var r=t.layers,n=t.viewports,i=t.x,o=t.y,a=t.width,s=t.height,l=t.mode,u=t.layerFilter,c=t.onViewportActive,p=t.pickingFBO,h=t.useDevicePixels,f=Te({useDevicePixels:h}),d=Math.round(i*f),g=Math.round(e.canvas.height-o*f),m=Math.round((i+a)*f),y=Math.round(e.canvas.height-(o+s)*f),v=getUniquesFromPickingBuffer(e,{pickedColors:drawAndSamplePickingBuffer(e,{layers:r,viewports:n,onViewportActive:c,pickingFBO:p,useDevicePixels:h,deviceRect:{x:d,y:y,width:m-d,height:g-y},layerFilter:u,redrawReason:l}),layers:r}),_=new Map;return v.forEach(function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:o,width:a,height:s,pixelRatio:f};t=getLayerPickingInfo({layer:e.pickedLayer,info:t,mode:l}),_.has(t.object)||_.set(t.object,t)}),Array.from(_.values())}function drawAndSamplePickingBuffer(e,t){var r=t.layers,n=t.viewports,i=t.onViewportActive,o=t.useDevicePixels,a=t.pickingFBO,s=t.deviceRect,l=t.layerFilter,u=t.redrawReason;if(assert(s),assert(Number.isFinite(s.width)&&s.width>0,"`width` must be > 0"),assert(Number.isFinite(s.height)&&s.height>0,"`height` must be > 0"),r.filter(function(e){return e.isPickable()}).length<1)return null;drawPickingBuffer(e,{layers:r,viewports:n,onViewportActive:i,useDevicePixels:o,pickingFBO:a,deviceRect:s,layerFilter:l,redrawReason:u});var c=s.x,p=s.y,h=s.width,f=s.height,d=new Uint8Array(h*f*4);return a.readPixels({x:c,y:p,width:h,height:f,pixelArray:d}),d}function getPickingRect(e){var t=e.deviceX,r=e.deviceY,n=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight;if(!(t>=0&&r>=0&&t<i&&r<o))return null;var a=Math.max(0,t-n),s=Math.max(0,r-n);return{x:a,y:s,width:Math.min(i,t+n)-a+1,height:Math.min(o,r+n)-s+1}}function processPickInfo(e){var t=e.pickInfo,r=e.lastPickedInfo,n=e.mode,i=e.layers,o=e.viewports,a=e.x,s=e.y,l=e.deviceX,u=e.deviceY,c=e.pixelRatio,p=t.pickedColor,h=t.pickedLayer,f=t.pickedObjectIndex,d=h?[h]:[];if("hover"===n){var g=r.index,m=r.layerId,y=h&&h.props.id;if(y!==m||f!==g){if(y!==m){var v=i.find(function(e){return e.props.id===m});v&&d.unshift(v)}r.layerId=y,r.index=f,r.info=null}}var _={viewports:o}.viewports[0],b=_&&_.unproject([a,s]),x={color:null,layer:null,index:-1,picked:!1,x:a,y:s,pixel:[a,s],coordinate:b,lngLat:b,devicePixel:[l,u],pixelRatio:c},w=new Map;return d.forEach(function(e){var t=Object.assign({},x);e===h&&(t.color=p,t.index=f,t.picked=!0),t=getLayerPickingInfo({layer:e,info:t,mode:n}),e===h&&"hover"===n&&(r.info=t),t&&w.set(t.layer.id,t);var i=e.props.autoHighlight&&h===e?p:null;e.setModuleParameters({pickingSelectedColor:i})}),callLayerPickingCallbacks(w,n)}function callLayerPickingCallbacks(e,t){var r=[];return e.forEach(function(e){var n=!1;switch(t){case"click":n=e.layer.onClick(e);break;case"hover":n=e.layer.onHover(e);break;case"query":break;default:throw new Error("unknown pick type")}n||r.push(e)}),r}function getClosestFromPickingBuffer(e,t){var r=t.pickedColors,n=t.layers,o=t.deviceX,a=t.deviceY,s=t.deviceRadius,l=t.deviceRect;assert(r);for(var u=l.x,c=l.y,p=l.width,h=l.height,f=s*s,d=-1,g=0,m=0;m<h;m++){var y=m+c-a,v=y*y;if(v>f)g+=4*p;else for(var _=0;_<p;_++){if(r[g+3]-1>=0){var b=_+u-o,x=b*b+v;x<=f&&(f=x,d=g)}g+=4}}if(d>=0){var w=r[d+3]-1,S=r.slice(d,d+4),E=n[w];if(E){var P=E.decodePickingColor(S);return{pickedColor:S,pickedLayer:E,pickedObjectIndex:P}}i.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Oe}function getUniquesFromPickingBuffer(e,t){var r=t.pickedColors,n=t.layers,o=new Map;if(r)for(var a=0;a<r.length;a+=4){var s=r[a+3]-1;if(s>=0){var l=r.slice(a,a+4),u=l.join(",");if(!o.has(u)){var c=n[s];c?o.set(u,{pickedColor:l,pickedLayer:c,pickedObjectIndex:c.decodePickingColor(l)}):i.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}function getLayerPickingInfo(e){for(var t=e.layer,r=e.info,n=e.mode;t&&r;){var i=r.layer||t;r.layer=t,r=t.pickLayer({info:r,mode:n,sourceLayer:i}),t=t.parent}return r}function flatten(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.filter,n=void 0===r?function(){return!0}:r,i=t.map,o=void 0===i?function(e){return e}:i,a=t.result,s=void 0===a?[]:a;return Array.isArray(e)?flattenArray(e,n,o,s):n(e)?[o(e)]:[]}function flattenArray(e,t,r,n){for(var i=-1;++i<e.length;){var o=e[i];Array.isArray(o)?flattenArray(o,t,r,n):t(o)&&n.push(r(o))}return n}function fillArray(e){for(var t=e.target,r=e.source,n=e.start,i=void 0===n?0:n,o=e.count,a=void 0===o?1:o,s=r.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=r[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l);return t}var Ae=r(3),Ie=r(4),Re=r(44),Me=r(56),Le=function(){function Stats(e){var t=e.id;Object(Ae.a)(this,Stats),this.id=t,this.time=Object(Re.a)(),this.counters={},Object.seal(this)}return Object(Ie.a)(Stats,[{key:"addCounter",value:function addCounter(e){return this._getCounter(e),this}},{key:"bump",value:function bump(e){var t=this._getCounter(e);return t.call++,t.count++,this}},{key:"increment",value:function increment(e,t){var r=this._getCounter(e);return r.call++,r.count+=t,this}},{key:"addTimer",value:function addTimer(e){return this._getCounter(e).time=0,this}},{key:"addTime",value:function addTime(e,t){var r=this._getCounter(e);return r.time+=t,r.count++,this}},{key:"timeStart",value:function timeStart(e,t){this._getCounter(e)._startTime=Object(Re.a)()}},{key:"timeEnd",value:function timeEnd(e,t){var r=this._getCounter(e);this.addTime(e,Object(Re.a)()-r._startTime)}},{key:"reset",value:function reset(){for(var e in this.time=Object(Re.a)(),this.counters){var t=this.counters[e];t.count=0,t.time=0}return this}},{key:"hasTimeElapsed",value:function hasTimeElapsed(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(Re.a)()-this.time>1e3}},{key:"getStats",value:function getStats(){var e=(Object(Re.a)()-this.time)/1e3,t={};for(var r in this.counters){var n=this.counters[r];t[n.title]={total:n.count,fps:Math.round(n.count/e)},n.time&&(t[n.title].totalTime=Object(Me.b)(n.time),t[n.title].avgTime=Object(Me.b)(n.time/n.count))}return t}},{key:"getStatsTable",value:function getStatsTable(){var e=this.getStats();for(var t in e)0===e[t].total&&delete e[t];return e}},{key:"getStatNames",value:function getStatNames(){return Object.keys(this.counters)}},{key:"get",value:function get(e){return this._getCounter(e).count}},{key:"getCount",value:function getCount(e){return this._getCounter(e).count}},{key:"getFPS",value:function getFPS(e){var t=this._getCounter(e),r=(Object(Re.a)()-this.time)/1e3;return Math.round(t.count/r)}},{key:"getTimeString",value:function getTimeString(){return"".concat(this.id,":").concat(Object(Me.b)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function oneSecondPassed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(e)}},{key:"_getCounter",value:function _getCounter(e){var t=this.counters[e];return t||(t={title:e,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[e]=t),t}},{key:"_incrementTimer",value:function _incrementTimer(e,t,r){e.count+=r,e.totalTime+=t,e.averageTime=e.totalTime/r}}]),Stats}();function math_utils_transformVector(e,t){if(!e)return null;var r=c.c([0,0,0,0],t,e),n=1/r[3];return c.a(r,r,[n,n,n,n]),r}var je=r(19),De=r(416),Fe=r(89);function viewport_slicedToArray(e,t){return viewport_arrayWithHoles(e)||viewport_iterableToArrayLimit(e,t)||viewport_nonIterableRest()}function viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function viewport_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function viewport_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ne=Math.PI/180,ze=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Be=[0,0,0],Ue={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},Ve=function(){function Viewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};viewport_classCallCheck(this,Viewport);var t=e.id,r=void 0===t?null:t,n=e.x,i=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.width,l=void 0===s?1:s,u=e.height,c=void 0===u?1:u;this.id=r||this.constructor.displayName||"viewport",this.x=i,this.y=a,this.width=l||1,this.height=c||1,this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}var e,t,r;return e=Viewport,(t=[{key:"equals",value:function equals(e){return e instanceof Viewport&&(e.width===this.width&&e.height===this.height&&Object(je.e)(e.projectionMatrix,this.projectionMatrix)&&Object(je.e)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===t||t,n=worldToPixels(this.projectPosition(e),this.pixelProjectionMatrix),i=viewport_slicedToArray(n,2),o=i[0],a=i[1],s=r?a:this.height-a;return 2===e.length?[o,s]:[o,s,n[2]]}},{key:"unproject",value:function unproject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=t.targetZ,o=viewport_slicedToArray(e,3),a=o[0],s=o[1],l=o[2],u=n?s:this.height-s,c=i&&i*this.distanceScales.pixelsPerMeter[2],p=pixelsToWorld([a,u,l],this.pixelUnprojectionMatrix,c),h=viewport_slicedToArray(this.unprojectPosition(p),3),f=h[0],d=h[1],g=h[2];return Number.isFinite(l)?[f,d,g]:Number.isFinite(i)?[f,d,i]:[f,d]}},{key:"projectPosition",value:function projectPosition(e){var t=viewport_slicedToArray(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(e){var t=viewport_slicedToArray(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function projectFlat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?lngLatToWorld(e,t):e}},{key:"unprojectFlat",value:function unprojectFlat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?worldToLngLat(e,t):e}},{key:"getDistanceScales",value:function getDistanceScales(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?web_mercator_utils_getDistanceScales({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function getMatrices(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,t=void 0===e?null:e,r=this.viewProjectionMatrix,n=this.pixelProjectionMatrix,i=this.pixelUnprojectionMatrix;return t&&(r=u.g([],this.viewProjectionMatrix,t),n=u.g([],this.pixelProjectionMatrix,t),i=u.e([],n)),Object.assign({modelViewProjectionMatrix:r,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:n,pixelUnprojectionMatrix:i,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function containsPixel(e){var t=e.x,r=e.y,n=e.width,i=void 0===n?1:n,o=e.height,a=void 0===o?1:o;return t<this.x+this.width&&this.x<t+i&&r<this.y+this.height&&this.y<r+a}},{key:"getCameraPosition",value:function getCameraPosition(){return this.cameraPosition}},{key:"getCameraDirection",value:function getCameraDirection(){return this.cameraDirection}},{key:"getCameraUp",value:function getCameraUp(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function _addMetersToLngLat(e,t){var r=viewport_slicedToArray(e,3),n=r[0],i=r[1],o=r[2],a=void 0===o?0:o,s=viewport_slicedToArray(this._metersToLngLatDelta(t),3),l=s[0],u=s[1],c=s[2],p=void 0===c?0:c;return 2===e.length?[n+l,i+u]:[n+l,i+u,a+p]}},{key:"_metersToLngLatDelta",value:function _metersToLngLatDelta(e){var t=viewport_slicedToArray(e,3),r=t[0],n=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o),"Illegal argument to Viewport");var a=this.distanceScales,s=a.pixelsPerMeter,l=a.degreesPerPixel,u=r*s[0]*l[0],c=n*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"_createProjectionMatrix",value:function _createProjectionMatrix(e){var t=e.orthographic,r=e.fovyRadians,n=e.aspect,i=e.focalDistance,o=e.near,a=e.far;return assert(Number.isFinite(r)),t?(new De.a).orthographic({fovy:r,aspect:n,focalDistance:i,near:o,far:a}):(new De.a).perspective({fovy:r,aspect:n,near:o,far:a})}},{key:"_initViewMatrix",value:function _initViewMatrix(e){var t=e.viewMatrix,r=void 0===t?ze:t,n=e.longitude,i=void 0===n?null:n,o=e.latitude,a=void 0===o?null:o,s=e.zoom,l=void 0===s?null:s,c=e.position,p=void 0===c?null:c,h=e.modelMatrix,f=void 0===h?null:h,d=e.focalDistance,g=void 0===d?1:d,m=e.distanceScales,y=void 0===m?null:m;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?getMeterZoom({latitude:a})+Math.log2(g):0),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?web_mercator_utils_getDistanceScales({latitude:a,longitude:i,scale:this.scale}):y||Ue,this.focalDistance=g,this.distanceScales.metersPerPixel=new Fe.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new Fe.a(this.distanceScales.pixelsPerMeter),this.position=Be,this.meterOffset=Be,p&&(this.position=p,this.modelMatrix=f,this.meterOffset=f?f.transformVector(p):p),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a}),this.viewMatrixUncentered=u.n([],r,[1,-1,1]),this.viewMatrix=(new De.a).multiplyRight(this.viewMatrixUncentered).translate(new Fe.a(this.center||Be).negate())):(this.center=p,this.viewMatrixUncentered=r,this.viewMatrix=r)}},{key:"_getCenterInWorld",value:function _getCenterInWorld(e){var t=e.longitude,r=e.latitude,n=this.meterOffset,i=this.scale,o=this.distanceScales,a=this.projectFlat([t,r],i),s=new Fe.a(a[0],a[1],0);if(n){var l=new Fe.a(n).scale(o.pixelsPerMeter);s.add(l)}return s}},{key:"_initProjectionMatrix",value:function _initProjectionMatrix(e){var t=e.projectionMatrix,r=void 0===t?null:t,n=e.orthographic,i=void 0!==n&&n,o=e.fovyRadians,a=e.fovyDegrees,s=e.fovy,l=e.near,u=void 0===l?.1:l,c=e.far,p=void 0===c?1e3:c,h=e.focalDistance,f=void 0===h?1:h,d=e.orthographicFocalDistance,g=o||(a||s||75)*Ne;this.projectionMatrix=r||this._createProjectionMatrix({orthographic:i,fovyRadians:g,aspect:this.width/this.height,focalDistance:d||f,near:u,far:p})}},{key:"_initPixelMatrices",value:function _initPixelMatrices(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.g(e,e,this.projectionMatrix),u.g(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=u.e([],this.viewMatrix)||this.viewMatrix;var t,r,n,o=(t={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},r=t.viewMatrix,{eye:[(n=t.viewMatrixInverse)[12],n[13],n[14]],direction:[r[2],r[6],r[10]],up:[r[1],r[5],r[9]]}),a=o.eye,s=o.direction,l=o.up;this.cameraPosition=a,this.cameraDirection=s,this.cameraUp=l;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(c,c,[this.width/2,-this.height/2,1]),u.o(c,c,[1,-1,0]),u.g(p,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=p,this.viewportMatrix=c,this.pixelUnprojectionMatrix=u.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.warn("Pixel project matrix not invertible")()}}])&&viewport_defineProperties(e.prototype,t),r&&viewport_defineProperties(e,r),Viewport}();function layer_manager_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function layer_manager_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function layer_manager_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function layer_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Ve.displayName="Viewport";var qe=Object.seal({layerManager:null,gl:null,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,pickingEvent:null,lastPickedInfo:null,animationProps:null,userData:{}}),Ge=function layerName(e){return e instanceof Ee?"".concat(e):e?"invalid":"null"},We=function(){function LayerManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.stats,n=t.viewport,i=void 0===n?null:n;layer_manager_classCallCheck(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},qe,{layerManager:this,gl:e,shaderCache:e&&new o.o({gl:e,_cachePrograms:!0}),stats:r||new Le({id:"deck.gl"}),lastPickedInfo:{index:-1,layerId:null,info:null},viewport:i||new Ve({id:"DEFAULT-INITIAL-VIEWPORT"})}),this.layerFilter=null,this.drawPickingColors=!1,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._activateViewport=this._activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),ce(this._initSeer),ue(this._editSeer)}var e,t,r;return e=LayerManager,(t=[{key:"finalize",value:function finalize(){H.a.removeListener(this._initSeer),H.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e;return this._checkIfNeedsRedraw(t)}},{key:"needsUpdate",value:function needsUpdate(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function getLayers(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,t=void 0===e?null:e;return t?this.layers.filter(function(e){return t.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"setProps",value:function setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"useDevicePixels"in e&&(this.context.useDevicePixels=e.useDevicePixels),"layers"in e&&this.setLayers(e.layers),"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in e&&e.drawPickingColors!==this.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this.setNeedsRedraw("drawPickingColors changed"))}},{key:"setLayers",value:function setLayers(e){if(e===this.lastRenderedLayers)return i.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=flatten(e,{filter:Boolean});var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.context=this.context}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var s=this._updateLayers({oldLayers:this.layers,newLayers:e}),l=s.error,u=s.generatedLayers;if(this.layers=u,l)throw l;return this}},{key:"updateLayers",value:function updateLayers(){var e,t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(layer_manager_arrayWithoutHoles(e=this.lastRenderedLayers)||layer_manager_iterableToArray(e)||layer_manager_nonIterableSpread()))}},{key:"drawLayers",value:function drawLayers(e){var t=e.pass,r=void 0===t?"render to screen":t,n=e.viewports,i=e.views,o=e.redrawReason,a=void 0===o?"unknown reason":o,s=e.customRender,l=void 0!==s&&s,u=this.drawPickingColors,c=this.context,p=c.gl,h=c.useDevicePixels;draw_layers_drawLayers(p,{layers:this.layers,viewports:n,views:i,onViewportActive:this._activateViewport,useDevicePixels:h,drawPickingColors:u,pass:r,layerFilter:this.layerFilter,redrawReason:a,customRender:l})}},{key:"getLastPickedObject",value:function getLastPickedObject(e){var t=e.x,r=e.y,n=e.viewports,i=this.context.lastPickedInfo.info,o=i&&i.layer&&i.layer.id,a=o?this.layers.find(function(e){return e.id===o}):null,s=n[0]&&n[0].unproject([t,r]),l={x:t,y:r,coordinate:s,lngLat:s,layer:a};return a?Object.assign({},i,l):Object.assign(l,{color:null,object:null,index:-1})}},{key:"pickObject",value:function pickObject(e){var t=e.x,r=e.y,n=e.mode,i=e.radius,o=void 0===i?0:i,a=e.layerIds,s=e.viewports,l=e.depth,u=void 0===l?1:l,c=e.event,p=void 0===c?null:c,h=this.context,f=h.gl,d=h.useDevicePixels;this.context.pickingEvent=p;var g=pick_layers_pickObject(f,{x:t,y:r,radius:o,layers:this.getLayers({layerIds:a}),mode:n,layerFilter:this.layerFilter,depth:u,viewports:s,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:d});return this.context.pickingEvent=null,g}},{key:"pickObjects",value:function pickObjects(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.layerIds,a=e.viewports,s=this.context,l=s.gl,u=s.useDevicePixels;return pickVisibleObjects(l,{x:t,y:r,width:n,height:i,layers:this.getLayers({layerIds:o}),layerFilter:this.layerFilter,mode:"pickObjects",viewports:a,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),useDevicePixels:u})}},{key:"_checkIfNeedsRedraw",value:function _checkIfNeedsRedraw(e){var t=this._needsRedraw;e&&(this._needsRedraw=!1);var r=!0,n=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value.getNeedsRedraw({clearRedrawFlags:e});t=t||s}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}},{key:"_activateViewport",value:function _activateViewport(e){var t=this.context.viewport;if(!t||!e.equals(t)){i.log(4,"Viewport changed",e)(),this.context.viewport=e;var r=!0,n=!1,o=void 0;try{for(var a,s=this.layers[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;l.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(l)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}return assert(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function _getPickingBuffer(){var e=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new o.f(e),this.context.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function _updateLayers(e){var t=e.oldLayers,r=e.newLayers,n={},o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n[c.id]?i.warn("Multiple old layers with same id ".concat(Ge(c)))():n[c.id]=c}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var p=[],h=this._updateSublayersRecursively({newLayers:r,oldLayerMap:n,generatedLayers:p}),f=this._finalizeOldLayers(n);return this._needsUpdate=!1,{error:h||f,generatedLayers:p}}},{key:"_updateSublayersRecursively",value:function _updateSublayersRecursively(e){var t=e.newLayers,r=e.oldLayerMap,n=e.generatedLayers,o=null,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;p.context=this.context;var h=r[p.id];null===h&&i.warn("Multiple new layers with same id ".concat(Ge(p)))(),r[p.id]=null;var f=null;try{this._debug&&h!==p&&p.validateProps(),h?(this._transferLayerState(h,p),this._updateLayer(p),he(p)):(this._initializeLayer(p),pe(p)),n.push(p),f=p.isComposite&&p.getSubLayers()}catch(e){i.warn("error during matching of ".concat(Ge(p)),e)(),o=o||e}f&&this._updateSublayersRecursively({newLayers:f,oldLayerMap:r,generatedLayers:n})}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}},{key:"_finalizeOldLayers",value:function _finalizeOldLayers(e){var t=null;for(var r in e){var n=e[r];n&&(t=t||this._finalizeLayer(n))}return t}},{key:"_initializeLayer",value:function _initializeLayer(e){i.log(2,"initializing ".concat(Ge(e)))();var t=null;try{e._initialize(),e.lifecycle=me.INITIALIZED}catch(r){i.warn("error while initializing ".concat(Ge(e),"\n"),r)(),t=t||r}e.internalState.layer=e;var r=!0,n=!1,o=void 0;try{for(var a,s=e.getModels()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.userData.layer=e}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return t}},{key:"_transferLayerState",value:function _transferLayerState(e,t){t._transferState(e),t.lifecycle=me.MATCHED,t!==e?(i.log(4,"matched ".concat(Ge(t)),e,"->",t)(),e.lifecycle=me.AWAITING_GC):i.log(4,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function _updateLayer(e){i.log(4,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(r){i.warn("error during update of ".concat(Ge(e)),r)(),t=r}return t}},{key:"_finalizeLayer",value:function _finalizeLayer(e){assert(e.lifecycle!==me.AWAITING_FINALIZATION),e.lifecycle=me.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized ".concat(Ge(e)));try{e._finalize()}catch(r){i.warn("error during finalization of ".concat(Ge(e)),r)(),t=r}return e.lifecycle=me.FINALIZED,i.log(2,"finalizing ".concat(Ge(e)))(),t}},{key:"_initSeer",value:function _initSeer(){this.layers.forEach(function(e){pe(e),he(e)})}},{key:"_editSeer",value:function _editSeer(e){if("edit"===e.type&&"props"===e.valuePath[0]){se(e.itemKey,e.valuePath.slice(1),e.value);var t=this.layers.map(function(e){return new e.constructor(e.props)});this.updateLayers({newLayers:t})}}}])&&layer_manager_defineProperties(e.prototype,t),r&&layer_manager_defineProperties(e,r),LayerManager}();function deepEqual(e,t){return e===t||Object.keys(e).every(function(r){return Array.isArray(e[r])&&Array.isArray(t[r])?deepEqual(e[r],t[r]):e[r]===t[r]})}function positions_typeof(e){return(positions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var He=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(e){switch(positions_typeof(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(He);if(t&&t.length>=3){var r="%"===t[2],n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function positions_getPosition(e,t){return e.relative?Math.round(e.position*t):e.position}function view_typeof(e){return(view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Xe=function(){function View(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};view_classCallCheck(this,View);var t=e.id,r=void 0===t?null:t,n=e.x,i=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.width,l=void 0===s?"100%":s,u=e.height,c=void 0===u?"100%":u,p=e.projectionMatrix,h=void 0===p?null:p,f=e.fovy,d=void 0===f?75:f,g=e.near,m=void 0===g?.1:g,y=e.far,v=void 0===y?1e3:y,_=e.modelMatrix,b=void 0===_?null:_,x=e.viewportInstance,w=void 0===x?null:x,S=e.type,E=void 0===S?Ve:S;assert(!w||w instanceof Ve),this.viewportInstance=w,this.id=r||this.constructor.displayName||"view",this.type=E,this.props=Object.assign({},e,{projectionMatrix:h,fovy:d,near:m,far:v,modelMatrix:b}),this._parseDimensions({x:i,y:a,width:l,height:c}),this.equals=this.equals.bind(this),Object.seal(this)}var e,t,r;return e=View,(t=[{key:"equals",value:function equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):deepEqual(this.props,e.props))}},{key:"makeViewport",value:function makeViewport(e){var t=e.width,r=e.height,n=e.viewState;if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);var i=this.getDimensions({width:t,height:r}),o=Object.assign({viewState:n},n,this.props,i);return this._getViewport(o)}},{key:"getViewStateId",value:function getViewStateId(){switch(view_typeof(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function filterViewState(e){if(this.props.viewState&&"object"===view_typeof(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var r in this.props.viewState)"id"!==r&&(t[r]=this.props.viewState[r]);return t}return e}},{key:"getDimensions",value:function getDimensions(e){var t=e.width,r=e.height;return{x:positions_getPosition(this._x,t),y:positions_getPosition(this._y,r),width:positions_getPosition(this._width,t),height:positions_getPosition(this._height,r)}}},{key:"_getControllerProps",value:function _getControllerProps(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function _getViewport(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function _parseDimensions(e){var t=e.x,r=e.y,n=e.width,i=e.height;this._x=parsePosition(t),this._y=parsePosition(r),this._width=parsePosition(n),this._height=parsePosition(i)}}])&&view_defineProperties(e.prototype,t),r&&view_defineProperties(e,r),View}();function view_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ke=function(){function ViewManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};view_manager_classCallCheck(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}var e,t,r;return e=ViewManager,(t=[{key:"finalize",value:function finalize(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e,r=this._needsRedraw;return t&&(this._needsRedraw=!1),r}},{key:"setNeedsRedraw",value:function setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"getViewports",value:function getViewports(e){return e?this._viewports.filter(function(t){return t.containsPixel(e)}):this._viewports}},{key:"getViews",value:function getViews(){var e={};return this.views.forEach(function(t){e[t.id]=t}),e}},{key:"getView",value:function getView(e){return"string"==typeof e?this.views.find(function(t){return t.id===e}):e}},{key:"getViewState",value:function getViewState(e){var t=this.getView(e),r=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(r):r}},{key:"getViewport",value:function getViewport(e){return this._viewportMap[e]}},{key:"project",value:function project(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},r=this.getViewports(),n=r.length-1;n>=0;--n){var i=r[n];if(i.contains(e,t))return i.project(e,t)}return null}},{key:"unproject",value:function unproject(e,t){for(var r=this.getViewports(),n=r.length-1;n>=0;--n){var i=r[n];if(i.containsPixel(e,t))return i.unproject(e)}return null}},{key:"setProps",value:function setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function _update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function _setSize(e,t){assert(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function _setViews(e){e=flatten(e,{filter:Boolean}).map(function(e){return e instanceof Ve?new Xe({viewportInstance:e}):e}),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function _setViewState(e){e?(!deepEqual(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):i.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function _onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function _createController(e){return new(0,e.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function _updateController(e,t,r,n){if(e.controller){var i=Object.assign({},e.controller,t,{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height});return n?n.setProps(i):n=this._createController(i),n}return null}},{key:"_rebuildViewports",value:function _rebuildViewports(){var e=this,t=this.width,r=this.height,n=this.views,i=this.controllers;for(var o in this.controllers={},this._viewports=n.map(function(n){var o=e.getViewState(n),a=n.makeViewport({width:t,height:r,viewState:o});return e.controllers[n.id]=e._updateController(n,o,a,i[n.id]),a}),i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function _buildViewportMap(){var e=this;this._viewportMap={},this._viewports.forEach(function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)})}},{key:"_diffViews",value:function _diffViews(e,t){return e.length!==t.length||e.some(function(r,n){return!e[n].equals(t[n])})}}])&&view_manager_defineProperties(e.prototype,t),r&&view_manager_defineProperties(e,r),ViewManager}(),Ze=r(11),Ye=r(10),Je=r(12),Qe=r(18),$e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],et=function(e){function WebMercatorViewport(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,n=t.height,i=t.latitude,o=void 0===i?0:i,a=t.longitude,s=void 0===a?0:a,l=t.zoom,u=void 0===l?0:l,c=t.pitch,p=void 0===c?0:c,h=t.bearing,f=void 0===h?0:h,d=t.altitude,g=void 0===d?1.5:d,m=t.nearZMultiplier,y=t.farZMultiplier;Object(Ae.a)(this,WebMercatorViewport),r=r||1,n=n||1;var v=zoomToScale(u);g=Math.max(.75,g);var _=lngLatToWorld([s,o],v);_[2]=0;var b=getProjectionMatrix({width:r,height:n,pitch:p,bearing:f,altitude:g,nearZMultiplier:m||1/n,farZMultiplier:y||1.01}),x=getViewMatrix({height:n,center:_,pitch:p,bearing:f,altitude:g,flipY:!0});return(e=Object(Ze.a)(this,Object(Ye.a)(WebMercatorViewport).call(this,{width:r,height:n,viewMatrix:x,projectionMatrix:b}))).latitude=o,e.longitude=s,e.zoom=u,e.pitch=p,e.bearing=f,e.altitude=g,e.scale=v,e.center=_,e.pixelsPerMeter=web_mercator_utils_getDistanceScales(Object(Qe.a)(Object(Qe.a)(e))).pixelsPerMeter[2],Object.freeze(Object(Qe.a)(Object(Qe.a)(e))),e}return Object(Je.a)(WebMercatorViewport,e),Object(Ie.a)(WebMercatorViewport,[{key:"projectFlat",value:function projectFlat(e){return lngLatToWorld(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"unprojectFlat",value:function unprojectFlat(e){return worldToLngLat(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(e){var t=e.lngLat,r=pixelsToWorld(e.pos,this.pixelUnprojectionMatrix),n=lngLatToWorld(t,this.scale),i=O.a([],n,O.e([],r));return worldToLngLat(O.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function fitBounds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,n=this.height,i=fit_bounds_fitBounds(Object.assign({width:r,height:n,bounds:e},t));return new WebMercatorViewport({width:r,height:n,longitude:i.longitude,latitude:i.latitude,zoom:i.zoom})}}]),WebMercatorViewport}(function(){function Viewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.viewMatrix,i=void 0===n?$e:n,o=e.projectionMatrix,a=void 0===o?$e:o;Object(Ae.a)(this,Viewport),this.width=t||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=i,this.projectionMatrix=a;var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.g(s,s,this.projectionMatrix),u.g(s,s,this.viewMatrix),this.viewProjectionMatrix=s;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(l,l,[this.width/2,-this.height/2,1]),u.o(l,l,[1,-1,0]),u.g(l,l,this.viewProjectionMatrix);var c=u.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l);if(!c)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=l,this.pixelUnprojectionMatrix=c,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Ie.a)(Viewport,[{key:"equals",value:function equals(e){return e instanceof Viewport&&(e.width===this.width&&e.height===this.height&&u.b(e.projectionMatrix,this.projectionMatrix)&&u.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===t||t,n=worldToPixels(this.projectPosition(e),this.pixelProjectionMatrix),i=Object(k.a)(n,2),o=i[0],a=i[1],s=r?a:this.height-a;return 2===e.length?[o,s]:[o,s,n[2]]}},{key:"unproject",value:function unproject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=t.targetZ,o=Object(k.a)(e,3),a=o[0],s=o[1],l=o[2],u=n?s:this.height-s,c=i&&i*this.pixelsPerMeter,p=pixelsToWorld([a,u,l],this.pixelUnprojectionMatrix,c),h=this.unprojectPosition(p),f=Object(k.a)(h,3),d=f[0],g=f[1],m=f[2];return Number.isFinite(l)?[d,g,m]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectPosition",value:function projectPosition(e){var t=this.projectFlat(e),r=Object(k.a)(t,2);return[r[0],r[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function unprojectPosition(e){var t=this.unprojectFlat(e),r=Object(k.a)(t,2);return[r[0],r[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function projectFlat(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function unprojectFlat(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),Viewport}());function fit_bounds_fitBounds(e){var t=e.width,r=e.height,n=e.bounds,i=e.padding,o=void 0===i?0:i,a=e.offset,s=void 0===a?[0,0]:a,l=Object(k.a)(n,2),u=Object(k.a)(l[0],2),c=u[0],p=u[1],h=Object(k.a)(l[1],2),f=h[0],d=h[1];if(Number.isFinite(o)){o={top:o,bottom:o,left:o,right:o}}else assert_assert(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));var g=new et({width:t,height:r,longitude:0,latitude:0,zoom:0}),m=g.project([c,d]),y=g.project([f,p]),v=[Math.abs(y[0]-m[0]),Math.abs(y[1]-m[1])],_=[t-o.left-o.right-2*Math.abs(s[0]),r-o.top-o.bottom-2*Math.abs(s[1])];assert_assert(_[0]>0&&_[1]>0);var b=_[0]/v[0],x=_[1]/v[1],w=(o.right-o.left)/2/b,S=(o.bottom-o.top)/2/x,E=[(y[0]+m[0])/2+w,(y[1]+m[1])/2+S],P=g.unproject(E),C=g.zoom+Math.log2(Math.abs(Math.min(b,x)));return{longitude:P[0],latitude:P[1],zoom:C}}function web_mercator_viewport_typeof(e){return(web_mercator_viewport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function web_mercator_viewport_slicedToArray(e,t){return web_mercator_viewport_arrayWithHoles(e)||web_mercator_viewport_iterableToArrayLimit(e,t)||web_mercator_viewport_nonIterableRest()}function web_mercator_viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function web_mercator_viewport_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function web_mercator_viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function web_mercator_viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function web_mercator_viewport_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function web_mercator_viewport_getPrototypeOf(e){return(web_mercator_viewport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function web_mercator_viewport_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&web_mercator_viewport_setPrototypeOf(e,t)}function web_mercator_viewport_setPrototypeOf(e,t){return(web_mercator_viewport_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function web_mercator_viewport_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var tt=function(e){function WebMercatorViewport(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};web_mercator_viewport_classCallCheck(this,WebMercatorViewport);var r,n,i=t.latitude,o=void 0===i?0:i,a=t.longitude,s=void 0===a?0:a,l=t.zoom,u=void 0===l?11:l,c=t.pitch,p=void 0===c?0:c,h=t.bearing,f=void 0===h?0:h,d=t.nearZMultiplier,g=void 0===d?.1:d,m=t.farZMultiplier,y=void 0===m?10:m,v=t.orthographic,_=void 0!==v&&v,b=t.width,x=t.height,w=t.altitude,S=void 0===w?1.5:w,E=getProjectionParameters({width:b=b||1,height:x=x||1,pitch:p,altitude:S=Math.max(.75,S),nearZMultiplier:g,farZMultiplier:y}),P=E.fov,C=E.aspect,T=E.focalDistance,k=E.near,O=E.far,A=getViewMatrix({height:x,pitch:p,bearing:f,altitude:S}),I=t.position&&[t.position[0],t.position[1],0],R=Object.assign({},t,{width:b,height:x,viewMatrix:A,longitude:s,latitude:o,zoom:u,position:I,orthographic:_,fovyRadians:P,aspect:C,orthographicFocalDistance:T,near:k,far:O});return r=this,(e=!(n=web_mercator_viewport_getPrototypeOf(WebMercatorViewport).call(this,R))||"object"!==web_mercator_viewport_typeof(n)&&"function"!=typeof n?web_mercator_viewport_assertThisInitialized(r):n).latitude=o,e.longitude=s,e.zoom=u,e.pitch=p,e.bearing=f,e.altitude=S,e.orthographic=_,e.metersToLngLatDelta=e.metersToLngLatDelta.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e.addMetersToLngLat=e.addMetersToLngLat.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),Object.freeze(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e}var t,r,n;return web_mercator_viewport_inherits(WebMercatorViewport,Ve),t=WebMercatorViewport,(r=[{key:"metersToLngLatDelta",value:function metersToLngLatDelta(e){var t=web_mercator_viewport_slicedToArray(e,3),r=t[0],n=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var a=this.distanceScales,s=a.pixelsPerMeter,l=a.degreesPerPixel,u=r*s[0]*l[0],c=n*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"lngLatDeltaToMeters",value:function lngLatDeltaToMeters(e){var t=web_mercator_viewport_slicedToArray(e,3),r=t[0],n=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var a=this.distanceScales,s=a.pixelsPerDegree,l=a.metersPerPixel,u=r*s[0]*l[0],c=n*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"addMetersToLngLat",value:function addMetersToLngLat(e,t){return web_mercator_utils_addMetersToLngLat(e,t)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(e){var t=e.lngLat,r=pixelsToWorld(e.pos,this.pixelUnprojectionMatrix),n=this.projectFlat(t),i=O.a([],n,O.e([],r)),o=O.a([],this.center,i);return this.unprojectFlat(o)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function fitBounds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,n=this.height,i=fit_bounds_fitBounds(Object.assign({width:r,height:n,bounds:e},t));return new WebMercatorViewport({width:r,height:n,longitude:i.longitude,latitude:i.latitude,zoom:i.zoom})}}])&&web_mercator_viewport_defineProperties(t.prototype,r),n&&web_mercator_viewport_defineProperties(t,n),WebMercatorViewport}();function transition_interpolator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_interpolator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}tt.displayName="WebMercatorViewport";var rt=function(){function TransitionInterpolator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};transition_interpolator_classCallCheck(this,TransitionInterpolator),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var t=e,r=t.compare,n=t.extract,i=t.required;this._propsToCompare=r,this._propsToExtract=n,this._requiredProps=i}var e,t,r;return e=TransitionInterpolator,(t=[{key:"arePropsEqual",value:function arePropsEqual(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;if(!Object(je.e)(e[s],t[s]))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0}},{key:"initializeProps",value:function initializeProps(e,t){var r;if(this._propsToExtract){var n={},i={},o=!0,a=!1,s=void 0;try{for(var l,u=this._propsToExtract[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n[c]=e[c],i[c]=t[c]}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}r={start:n,end:i}}else r={start:e,end:t};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}},{key:"interpolateProps",value:function interpolateProps(e,t,r){assert(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function _checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(function(t){var r=e[t];assert(Number.isFinite(r)||Array.isArray(r),"".concat(t," is required for transition"))})}}])&&transition_interpolator_defineProperties(e.prototype,t),r&&transition_interpolator_defineProperties(e,r),TransitionInterpolator}();function linear_interpolator_typeof(e){return(linear_interpolator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function linear_interpolator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function linear_interpolator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function linear_interpolator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function linear_interpolator_getPrototypeOf(e){return(linear_interpolator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function linear_interpolator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&linear_interpolator_setPrototypeOf(e,t)}function linear_interpolator_setPrototypeOf(e,t){return(linear_interpolator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var nt=["longitude","latitude","zoom","bearing","pitch"],it=function(e){function LinearInterpolator(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt;return linear_interpolator_classCallCheck(this,LinearInterpolator),e=this,!(t=linear_interpolator_getPrototypeOf(LinearInterpolator).call(this,r))||"object"!==linear_interpolator_typeof(t)&&"function"!=typeof t?linear_interpolator_assertThisInitialized(e):t}var t,r,n;return linear_interpolator_inherits(LinearInterpolator,rt),t=LinearInterpolator,(r=[{key:"interpolateProps",value:function interpolateProps(e,t,r){var n={};for(var i in t)n[i]=Object(je.g)(e[i],t[i],r);return n}}])&&linear_interpolator_defineProperties(t.prototype,r),n&&linear_interpolator_defineProperties(t,n),LinearInterpolator}();function transition_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ot=function noop(){},at=1,st=2,lt=3,ut={transitionDuration:0,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new it,transitionInterruption:at,onTransitionStart:ot,onTransitionInterrupt:ot,onTransitionEnd:ot},ct=function(){function TransitionManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};transition_manager_classCallCheck(this,TransitionManager),assert(e),this.ControllerState=e,this.props=Object.assign({},ut,t),this.animation=null,this.propsInTransition=null,this.transition=new $,this.onViewStateChange=t.onViewStateChange,this._onTransitionFrame=this._onTransitionFrame.bind(this),this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}var e,t,r;return e=TransitionManager,(t=[{key:"finalize",value:function finalize(){cancelAnimationFrame(this.animation)}},{key:"getViewportInTransition",value:function getViewportInTransition(){return this.propsInTransition}},{key:"processViewStateChange",value:function processViewStateChange(e){var t=!1,r=this.props;if(e=Object.assign({},ut,e),this.props=e,this._shouldIgnoreViewportChange(r,e))return t;if(this._isTransitionEnabled(e)){var n=Object.assign({},r,this.transition.interruption===st?this.transition.endProps:this.propsInTransition||r);this._triggerTransition(n,e),t=!0}else this.transition.cancel();return t}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.interruption===lt||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function _triggerTransition(e,t){assert(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.animation);var r=new this.ControllerState(e),n=new this.ControllerState(t).shortestPathFrom(r),i=t.transitionInterpolator.initializeProps(e,n);this.propsInTransition={},this.transition.start({duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:i.start,endProps:i.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function _onTransitionFrame(){this.animation=requestAnimationFrame(this._onTransitionFrame),this.transition.update(Date.now())}},{key:"_onTransitionEnd",value:function _onTransitionEnd(e){var t=this;return function(r){cancelAnimationFrame(t.animation),t.propsInTransition=null,e(r)}}},{key:"_onTransitionUpdate",value:function _onTransitionUpdate(e){var t=e.interpolator,r=e.startProps,n=e.endProps,i=e.time,o=t.interpolateProps(r,n,i);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,o)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}])&&transition_manager_defineProperties(e.prototype,t),r&&transition_manager_defineProperties(e,r),TransitionManager}();function controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function controller_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function controller_arrayWithHoles(e){if(Array.isArray(e))return e}function controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function controller_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ct.defaultProps=ut;var pt={transitionDuration:0},ht=["wheel"],ft=["panstart","panmove","panend"],dt=["pinchstart","pinchmove","pinchend"],gt=["doubletap"],mt=["keydown"],yt=function(){function Controller(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};controller_classCallCheck(this,Controller),assert(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new ct(e,t),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}var e,t,r;return e=Controller,(t=[{key:"finalize",value:function finalize(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function handleEvent(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function getCenter(e){var t=this.controllerStateProps,r=t.x,n=t.y,i=e.offsetCenter;return[i.x-r,i.y-n]}},{key:"isPointInBounds",value:function isPointInBounds(e){var t=this.controllerStateProps,r=t.width,n=t.height;return e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=n}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function isDragging(){return this._state.isDragging}},{key:"setProps",value:function setProps(e){"onViewportChange"in e&&i.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,r=void 0===t||t,n=e.dragPan,o=void 0===n||n,a=e.dragRotate,s=void 0===a||a,l=e.doubleClickZoom,u=void 0===l||l,c=e.touchZoom,p=void 0===c||c,h=e.touchRotate,f=void 0!==h&&h,d=e.keyboard,g=void 0===d||d,m=Boolean(this.onViewStateChange);this.toggleEvents(ht,m&&r),this.toggleEvents(ft,m&&(o||s)),this.toggleEvents(dt,m&&(p||f)),this.toggleEvents(gt,m&&u),this.toggleEvents(mt,m&&g),this.scrollZoom=r,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=u,this.touchZoom=p,this.touchRotate=f,this.keyboard=g}},{key:"toggleEvents",value:function toggleEvents(e,t){var r=this;this.eventManager&&e.forEach(function(e){r._events[e]!==t&&(r._events[e]=t,t?r.eventManager.on(e,r.handleEvent):r.eventManager.off(e,r.handleEvent))})}},{key:"setOptions",value:function setOptions(e){return this.setProps(e)}},{key:"updateViewport",value:function updateViewport(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},e.getViewportProps(),t);if(this.controllerState!==e){var i=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:n,interactionState:r,oldViewState:i})}Object.assign(this._state,Object.assign({},e.getInteractiveState(),r)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function _onPanStart(e){var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var r=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(r,pt,{isDragging:!0})}},{key:"_onPan",value:function _onPan(e){var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function _onPanEnd(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function _onPanMove(e){if(!this.dragPan)return!1;var t=this.getCenter(e),r=this.controllerState.pan({pos:t});return this.updateViewport(r,pt,{isDragging:!0})}},{key:"_onPanRotate",value:function _onPanRotate(e){return!!this.dragRotate&&(this.invertPan?this._onPanRotateMap(e):this._onPanRotateStandard(e))}},{key:"_onPanRotateStandard",value:function _onPanRotateStandard(e){var t=e.deltaX,r=e.deltaY,n=this.controllerState.getViewportProps(),i=t/n.width,o=r/n.height,a=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(a,pt,{isDragging:!0})}},{key:"_onPanRotateMap",value:function _onPanRotateMap(e){var t,r,n=e.deltaX,i=e.deltaY,o=this.getCenter(e),a=(r=2,controller_arrayWithHoles(t=o)||controller_iterableToArrayLimit(t,r)||controller_nonIterableRest())[1],s=a-i,l=this.controllerState.getViewportProps(),u=l.width,c=l.height,p=n/u,h=0;i>0?Math.abs(c-s)>5&&(h=i/(s-c)*1.2):i<0&&s>5&&(h=1-a/s),h=Math.min(1,Math.max(-1,h));var f=this.controllerState.rotate({deltaScaleX:p,deltaScaleY:h});return this.updateViewport(f,pt,{isDragging:!0})}},{key:"_onWheel",value:function _onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var r=e.delta,n=2/(1+Math.exp(-Math.abs(.01*r)));r<0&&0!==n&&(n=1/n);var i=this.controllerState.zoom({pos:t,scale:n});return this.updateViewport(i,pt)}},{key:"_onPinchStart",value:function _onPinchStart(e){var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var r=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(r,pt,{isDragging:!0})}},{key:"_onPinch",value:function _onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.controllerState;if(this.touchZoom){var r=e.scale,n=this.getCenter(e);t=t.zoom({pos:n,scale:r})}if(this.touchRotate){var i=e.rotation,o=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(t,pt,{isDragging:!0})}},{key:"_onPinchEnd",value:function _onPinchEnd(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function _onDoubleTap(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var r=this.isFunctionKeyPressed(e),n=this.controllerState.zoom({pos:t,scale:r?.5:2});return this.updateViewport(n,this._getTransitionProps())}},{key:"_onKeyDown",value:function _onKeyDown(e){if(!this.keyboard)return!1;var t,r=this.isFunctionKeyPressed(e),n=this.controllerState;switch(e.srcEvent.keyCode){case 189:t=r?n.zoomOut().zoomOut():n.zoomOut();break;case 187:t=r?n.zoomIn().zoomIn():n.zoomIn();break;case 37:t=r?n.rotateLeft():n.moveLeft();break;case 39:t=r?n.rotateRight():n.moveRight();break;case 38:t=r?n.rotateUp():n.moveUp();break;case 40:t=r?n.rotateDown():n.moveDown();break;default:return!1}return this.updateViewport(t,this._getTransitionProps())}},{key:"_getTransitionProps",value:function _getTransitionProps(){return pt}}])&&controller_defineProperties(e.prototype,t),r&&controller_defineProperties(e,r),Controller}(),vt=6371e3,_t=function(){function SphericalCoordinates(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.phi,r=e.theta,n=e.radius,i=e.bearing,o=e.pitch,a=(e.altitude,e.radiusScale),s=void 0===a?vt:a;Object(Ae.a)(this,SphericalCoordinates),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(t)||Number.isFinite(r)?(this.phi=t||0,this.theta=r||0):(Number.isFinite(i)||Number.isFinite(o))&&(this.bearing=i||0,this.pitch=o||0),this.radius=n||1,this.radiusScale=s||1,this.check()}return Object(Ie.a)(SphericalCoordinates,[{key:"toString",value:function toString(){return this.formatString(je.c)}},{key:"formatString",value:function formatString(e){var t=e.printTypes,r=(e.printDegrees,je.f);return"".concat(t?"Spherical":"","[rho:").concat(r(this.radius),",theta:").concat(r(this.theta),",phi:").concat(r(this.phi),"]")}},{key:"equals",value:function equals(e){return Object(je.e)(this.radius,e.radius)&&Object(je.e)(this.theta,e.theta)&&Object(je.e)(this.phi,e.phi)}},{key:"exactEquals",value:function exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this.check()}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function fromLngLatZ(e){var t=Object(k.a)(e,3),r=t[0],n=t[1],i=t[2];this.radius=1+i/this.radiusScale,this.phi=Object(je.h)(n),this.theta=Object(je.h)(r)}},{key:"fromVector3",value:function fromVector3(e){return this.radius=T.c(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(je.b)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function toVector3(){return new Fe.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function makeSafe(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function get(){return 180-Object(je.d)(this.phi)},set:function set(e){this.phi=Math.PI-Object(je.h)(e)}},{key:"pitch",get:function get(){return Object(je.d)(this.theta)},set:function set(e){this.theta=Object(je.h)(e)}},{key:"longitude",get:function get(){return Object(je.d)(this.phi)}},{key:"latitude",get:function get(){return Object(je.d)(this.theta)}},{key:"lng",get:function get(){return Object(je.d)(this.phi)}},{key:"lat",get:function get(){return Object(je.d)(this.theta)}},{key:"z",get:function get(){return(this.radius-1)*this.radiusScale}}]),SphericalCoordinates}();function view_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_state_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bt={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},xt=function(){function ViewState(e){view_state_classCallCheck(this,ViewState);var t=e.width,r=e.height,n=e.position,i=void 0===n?bt.position:n;assert(Number.isFinite(t),"`width` must be supplied"),assert(Number.isFinite(r),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},e,{position:new Fe.a(i)}))}var e,t,r;return e=ViewState,(t=[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getDirection",value:function getDirection(){return new _t({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function getDirectionFromBearing(e){return new _t({bearing:e,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function shortestPathFrom(e){return this._viewportProps}},{key:"_applyConstraints",value:function _applyConstraints(e){return e}}])&&view_state_defineProperties(e.prototype,t),r&&view_state_defineProperties(e,r),ViewState}(),wt=85.05113,St=-85.05113;function normalizeViewportProps(e){var t=e.width,r=e.height,n=e.longitude,i=e.latitude,o=e.zoom,a=e.pitch,s=void 0===a?0:a,l=e.bearing,u=void 0===l?0:l;(n<-180||n>180)&&(n=mod(n+180,360)-180),(u<-180||u>180)&&(u=mod(u+180,360)-180);var c=new et({width:t,height:r,longitude:n,latitude:i,zoom:o}),p=c.project([n,wt])[1],h=c.project([n,St])[1],f=0;return h-p<r&&(o+=Math.log2(r/(h-p)),p=(c=new et({width:t,height:r,longitude:n,latitude:i,zoom:o})).project([n,wt])[1],h=c.project([n,St])[1]),p>0?f=p:h<r&&(f=h-r),f&&(i=c.unproject([t/2,r/2+f])[1]),{width:t,height:r,longitude:n,latitude:i,zoom:o,pitch:s,bearing:u}}function map_controller_typeof(e){return(map_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function map_controller_slicedToArray(e,t){return map_controller_arrayWithHoles(e)||map_controller_iterableToArrayLimit(e,t)||map_controller_nonIterableRest()}function map_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function map_controller_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function map_controller_arrayWithHoles(e){if(Array.isArray(e))return e}function map_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function map_controller_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function map_controller_createClass(e,t,r){return t&&map_controller_defineProperties(e.prototype,t),r&&map_controller_defineProperties(e,r),e}function map_controller_possibleConstructorReturn(e,t){return!t||"object"!==map_controller_typeof(t)&&"function"!=typeof t?map_controller_assertThisInitialized(e):t}function map_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function map_controller_getPrototypeOf(e){return(map_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function map_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&map_controller_setPrototypeOf(e,t)}function map_controller_setPrototypeOf(e,t){return(map_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Et={transitionDuration:300,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new it,transitionInterruption:at},Pt={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},Ct={pitch:0,bearing:0,altitude:1.5},Tt=function(e){function MapState(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,n=t.height,i=t.latitude,o=t.longitude,a=t.zoom,s=t.bearing,l=void 0===s?Ct.bearing:s,u=t.pitch,c=void 0===u?Ct.pitch:u,p=t.altitude,h=void 0===p?Ct.altitude:p,f=t.maxZoom,d=void 0===f?Pt.maxZoom:f,g=t.minZoom,m=void 0===g?Pt.minZoom:g,y=t.maxPitch,v=void 0===y?Pt.maxPitch:y,_=t.minPitch,b=void 0===_?Pt.minPitch:_,x=t.startPanLngLat,w=t.startZoomLngLat,S=t.startBearing,E=t.startPitch,P=t.startZoom;return map_controller_classCallCheck(this,MapState),assert(Number.isFinite(o),"`longitude` must be supplied"),assert(Number.isFinite(i),"`latitude` must be supplied"),assert(Number.isFinite(a),"`zoom` must be supplied"),(e=map_controller_possibleConstructorReturn(this,map_controller_getPrototypeOf(MapState).call(this,{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:l,pitch:c,altitude:h,maxZoom:d,minZoom:m,maxPitch:v,minPitch:b})))._interactiveState={startPanLngLat:x,startZoomLngLat:w,startBearing:S,startPitch:E,startZoom:P},e}return map_controller_inherits(MapState,xt),map_controller_createClass(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function pan(e){var t=e.pos,r=e.startPos,n=this._interactiveState.startPanLngLat||this._unproject(r);if(!n)return this;var i=map_controller_slicedToArray(this._calculateNewLngLat({startPanLngLat:n,pos:t}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,r=void 0===t?0:t,n=e.deltaScaleY,i=void 0===n?0:n,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var l=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:i,startBearing:a,startPitch:s}),u=l.pitch,c=l.bearing;return this._getUpdatedState({bearing:c,pitch:u})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,r=e.startPos,n=e.scale;assert(n>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(r)||this._unproject(t)),assert(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:n,startZoom:o}),s=map_controller_slicedToArray(new et(Object.assign({},this._viewportProps,{zoom:zoom})).getLocationAtPoint({lngLat:a,pos:t}),2),l=s[0],u=s[1];return this._getUpdatedState({zoom:zoom,longitude:l,latitude:u})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function moveRight(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function moveUp(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function moveDown(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function shortestPathFrom(e){var t=e.getViewportProps(),r=Object.assign({},this._viewportProps),n=r.bearing,i=r.longitude;return Math.abs(n-t.bearing)>180&&(r.bearing=n<0?n+360:n-360),Math.abs(i-t.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}},{key:"_zoomFromCenter",value:function _zoomFromCenter(e){var t=this._viewportProps,r=t.width,n=t.height;return this.zoom({pos:[r/2,n/2],scale:e})}},{key:"_panFromCenter",value:function _panFromCenter(e){var t=this._viewportProps,r=t.width,n=t.height;return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function _applyConstraints(e){var t=e.maxZoom,r=e.minZoom,n=e.zoom;e.zoom=Object(je.b)(n,r,t);var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=Object(je.b)(a,o,i),Object.assign(e,normalizeViewportProps(e)),e}},{key:"_unproject",value:function _unproject(e){var t=new et(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(e){var t=e.startPanLngLat,r=e.pos;return new et(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(e){var t=e.scale,r=e.startZoom,n=this._viewportProps,i=n.maxZoom,o=n.minZoom,a=r+Math.log2(t);return Object(je.b)(a,o,i)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(e){var t=e.deltaScaleX,r=e.deltaScaleY,n=e.startBearing,i=e.startPitch;r=Object(je.b)(r,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return r>0?l=i+r*(s-i):r<0&&(l=i-r*(a-i)),{pitch:l,bearing:n+180*t}}}]),MapState}(),kt=function(e){function MapController(e){var t;return map_controller_classCallCheck(this,MapController),(t=map_controller_possibleConstructorReturn(this,map_controller_getPrototypeOf(MapController).call(this,Tt,e))).invertPan=!0,t}return map_controller_inherits(MapController,yt),map_controller_createClass(MapController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return Et}}]),MapController}();function map_view_typeof(e){return(map_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function map_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function map_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function map_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function map_view_getPrototypeOf(e){return(map_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function map_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&map_view_setPrototypeOf(e,t)}function map_view_setPrototypeOf(e,t){return(map_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function MapView(e){return map_view_classCallCheck(this,MapView),t=this,!(r=map_view_getPrototypeOf(MapView).call(this,Object.assign({},e,{type:tt})))||"object"!==map_view_typeof(r)&&"function"!=typeof r?map_view_assertThisInitialized(t):r;var t,r}var t,r,n;return map_view_inherits(MapView,Xe),t=MapView,(r=[{key:"controller",get:function get(){return this._getControllerProps({type:kt})}}])&&map_view_defineProperties(t.prototype,r),n&&map_view_defineProperties(t,n),MapView}();function effect_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function effect_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Ot.displayName="MapView";var At=function(){function EffectManager(e){var t=e.gl,r=e.layerManager;effect_manager_classCallCheck(this,EffectManager),this.gl=t,this.layerManager=r,this._effects=[]}var e,t,r;return e=EffectManager,(t=[{key:"addEffect",value:function addEffect(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function removeEffect(e){var t=this._effects.indexOf(e);return t>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(t,1),!0)}},{key:"preDraw",value:function preDraw(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._effects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"draw",value:function draw(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._effects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"_sortEffects",value:function _sortEffects(){this._effects.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.count-t.count})}}])&&effect_manager_defineProperties(e.prototype,t),r&&effect_manager_defineProperties(e,r),EffectManager}();function effect_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function effect_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var It=0,Rt=function(){function Effect(){effect_classCallCheck(this,Effect),this.id="effect",this.count=It++,this.visible=!0,this.priority=0,this.needsRedraw=!1}var e,t,r;return e=Effect,(t=[{key:"initialize",value:function initialize(e){e.gl,e.layerManager}},{key:"finalize",value:function finalize(e){e.gl,e.layerManager}},{key:"preDraw",value:function preDraw(e){e.gl,e.layerManager}},{key:"draw",value:function draw(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}])&&effect_defineProperties(e.prototype,t),r&&effect_defineProperties(e,r),Effect}(),Mt=1,Lt=2,jt=4,Dt={mousedown:Mt,mousemove:Lt,mouseup:jt};function some(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}var Ft=null;"undefined"!=typeof document&&(function enhancePointerEventInput(e){var t=e.prototype.handler;e.prototype.handler=function handler(e){var r=this.store;e.button>0&&(some(r,function(t){return t.pointerId===e.pointerId})||r.push(e)),t.call(this,e)}}((Ft=r(401)).PointerEventInput),function enhanceMouseInput(e){e.prototype.handler=function handler(e){var t=Dt[e.type];t&Mt&&e.button>=0&&(this.pressed=!0),t&Lt&&0===e.which&&(t=jt),this.pressed&&(t&jt&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}(Ft.MouseInput));var Nt=Ft;var zt=Nt?[[Nt.Rotate,{enable:!1}],[Nt.Pinch,{enable:!1}],[Nt.Swipe,{enable:!1}],[Nt.Pan,{threshold:0,enable:!1}],[Nt.Press,{enable:!1}],[Nt.Tap,{event:"doubletap",taps:2,enable:!1}],[Nt.Tap,{enable:!1}]]:null,Bt={rotate:["pinch"]},Ut={doubletap:["tap"]},Vt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},qt=["keydown","keyup"],Gt=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Wt=["wheel","mousewheel","DOMMouseScroll"],Ht={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Xt={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Kt=r(70),Zt=-1!==Kt.b.indexOf("firefox"),Yt=Wt,Jt=function(){function WheelInput(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ae.a)(this,WheelInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.events=Yt.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent,!!Kt.a&&{passive:!1})})}return Object(Ie.a)(WheelInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function handleEvent(e){if(this.options.enable){var t=e.deltaY;Kt.c.WheelEvent&&(Zt&&e.deltaMode===Kt.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=Kt.c.devicePixelRatio),e.deltaMode===Kt.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var r={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,r)}}},{key:"_onWheel",value:function _onWheel(e,t,r){this.callback({type:"wheel",center:r,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),WheelInput}(),Qt=Gt,$t=function(){function MoveInput(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ae.a)(this,MoveInput),this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},n),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=Qt.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return Object(Ie.a)(MoveInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}(),er=qt,tr=function(){function KeyInput(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ae.a)(this,KeyInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=er.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return Object(Ie.a)(KeyInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function handleEvent(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),KeyInput}(),rr=function(){function ContextmenuInput(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ae.a)(this,ContextmenuInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return Object(Ie.a)(ContextmenuInput,[{key:"destroy",value:function destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function enableEventType(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function handleEvent(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),ContextmenuInput}(),nr=1,ir=2,or=4,ar={pointerdown:nr,pointermove:ir,pointerup:or,mousedown:nr,mousemove:ir,mouseup:or},sr=1,lr=2,ur=3,cr=0,pr=1,hr=2,fr=1,dr=2,gr=4;function whichButtons(e){var t=ar[e.srcEvent.type];if(!t)return null;var r=e.srcEvent,n=r.buttons,i=r.button,o=r.which,a=!1,s=!1,l=!1;return t===or||t===ir&&!Number.isFinite(n)?(a=o===sr,s=o===lr,l=o===ur):t===ir?(a=Boolean(n&fr),s=Boolean(n&gr),l=Boolean(n&dr)):t===nr&&(a=i===cr,s=i===pr,l=i===hr),{leftButton:a,middleButton:s,rightButton:l}}function getOffsetPosition(e,t){var r=e.srcEvent;if(!e.center&&!Number.isFinite(r.clientX))return null;var n=e.center||{x:r.clientX,y:r.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,a=i.height/t.offsetHeight;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/o,y:(n.y-i.top-t.clientTop)/a}}}var mr=function(){function EventRegistrar(e){Object(Ae.a)(this,EventRegistrar),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(Ie.a)(EventRegistrar,[{key:"isEmpty",value:function isEmpty(){return 0===this.handlers.length}},{key:"add",value:function add(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",n=this.handlers,i=this.handlersByElement;i.has(r)||i.set(r,[]);var o={type:e,handler:t,srcElement:r};n.push(o),i.get(r).push(o)}},{key:"remove",value:function remove(e,t){for(var r=this.handlers,n=this.handlersByElement,i=r.length-1;i>=0;i--){var o=r[i];if(o.type===e&&o.handler===t){r.splice(i,1);var a=n.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&n.delete(o.srcElement)}}}},{key:"handleEvent",value:function handleEvent(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),r=e.srcEvent.target;r&&r!==t.rootElement;){if(this._emit(t,r),t.handled)return;r=r.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function _emit(e,t){var r=this.handlersByElement.get(t);if(r)for(var n=!1,i=function stopPropagation(){e.handled=!0},o=function stopImmediatePropagation(){e.handled=!0,n=!0},a=0;a<r.length;a++){var s=r[a],l=s.type;if((0,s.handler)(Object.assign({},e,{type:l,stopPropagation:i,stopImmediatePropagation:o})),n)break}}},{key:"_normalizeEvent",value:function _normalizeEvent(e){var t=this.eventManager.element;return Object.assign({},e,whichButtons(e),getOffsetPosition(e,t),{handled:!1,rootElement:t})}}]),EventRegistrar}(),yr={events:null,recognizers:null,Manager:Nt?Nt.Manager:function HammerManagerMock(e){var t={},r=function chainedNoop(){return t};return t.get=function(){return null},t.set=r,t.on=r,t.off=r,t.destroy=r,t.emit=r,t},touchAction:"none"},vr=function(){function EventManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Ae.a)(this,EventManager),this.options=Object.assign({},yr,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=t.events;r&&this.on(r)}return Object(Ie.a)(EventManager,[{key:"setElement",value:function setElement(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var r=this.options,n=r.Manager;this.manager=new n(e,{touchAction:r.touchAction,recognizers:r.recognizers||zt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(Bt).forEach(function(e){var r=t.manager.get(e);r&&Bt[e].forEach(function(e){r.recognizeWith(e)})}),this.wheelInput=new Jt(e,this._onOtherEvent,{enable:!1}),this.moveInput=new $t(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tr(e,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new rr(e,this._onOtherEvent,{enable:!1});var i=!0,o=!1,a=void 0;try{for(var s,l=this.events[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=Object(k.a)(s.value,2),c=u[0],p=u[1];p.isEmpty()||(this._toggleRecognizer(p.recognizerName,!0),this.manager.on(c,p.handleEvent))}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}}},{key:"destroy",value:function destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function on(e,t,r){if("string"==typeof e)this._addEventHandler(e,t,r);else for(var n in r=t,e)this._addEventHandler(n,e[n],r)}},{key:"off",value:function off(e,t){if("string"==typeof e)this._removeEventHandler(e,t);else for(var r in e)this._removeEventHandler(r,e[r])}},{key:"_toggleRecognizer",value:function _toggleRecognizer(e,t){var r=this.manager;if(r){var n=r.get(e);if(n&&n.options.enable!==t){n.set({enable:t});var i=Ut[e];i&&!this.options.recognizers&&i.forEach(function(i){var o=r.get(i);t?(o.requireFailure(e),n.dropRequireFailure(i)):o.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function _addEventHandler(e,t,r){var n=this.manager,i=this.events,o=Xt[e]||e,a=i.get(o);a||(a=new mr(this),i.set(o,a),a.recognizerName=Ht[o]||o,n&&n.on(o,a.handleEvent)),this._toggleRecognizer(a.recognizerName,!0),a.add(e,t,r)}},{key:"_removeEventHandler",value:function _removeEventHandler(e,t){var r=this.events,n=Xt[e]||e,i=r.get(n);if(i&&(i.remove(e,t),i.isEmpty())){var o=i.recognizerName,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=r.values()[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;if(h.recognizerName===o&&!h.isEmpty()){a=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}a||this._toggleRecognizer(o,!1)}}},{key:"_onBasicInput",value:function _onBasicInput(e){var t=e.srcEvent,r=Vt[t.type];r&&this.manager.emit(r,e)}},{key:"_onOtherEvent",value:function _onOtherEvent(e){this.manager.emit(e.type,e)}}]),EventManager}();function deck_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function deck_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function deck_noop(){}var _r={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:deck_noop,onResize:deck_noop,onViewStateChange:deck_noop,onBeforeRender:deck_noop,onAfterRender:deck_noop,onLayerClick:null,onLayerHover:null,onLoad:deck_noop,getCursor:function getCursor(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},br=function(){function Deck(e){deck_classCallCheck(this,Deck),e=Object.assign({},_r,e),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.stats=new Le({id:"deck.gl"}),this._needsRedraw=!0,this.viewState=e.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.setProps(e),this.animationLoop.start()}var e,t,r;return e=Deck,(t=[{key:"finalize",value:function finalize(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy()}},{key:"setProps",value:function setProps(e){this.stats.timeStart("deck.setProps"),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(e),width:this.width,height:this.height}),r=this._getViewState(e);r&&(t.viewState=r),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.stats.timeEnd("deck.setProps")}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e;if(this.props._animate)return"Deck._animate";var r=this._needsRedraw;t&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw({clearRedrawFlags:t}),i=this.layerManager.needsRedraw({clearRedrawFlags:t});return r=r||n||i}},{key:"getViews",value:function getViews(){return this.viewManager.views}},{key:"getViewports",value:function getViewports(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function pickObject(e){var t=e.x,r=e.y,n=e.radius,i=void 0===n?0:n,o=e.layerIds,a=void 0===o?null:o;this.stats.timeStart("deck.pickObject");var s=this.layerManager.pickObject({x:t,y:r,radius:i,layerIds:a,viewports:this.getViewports({x:t,y:r}),mode:"query",depth:1});return this.stats.timeEnd("deck.pickObject"),s.length?s[0]:null}},{key:"pickMultipleObjects",value:function pickMultipleObjects(e){var t=e.x,r=e.y,n=e.radius,i=void 0===n?0:n,o=e.layerIds,a=void 0===o?null:o,s=e.depth,l=void 0===s?10:s;this.stats.timeStart("deck.pickMultipleObjects");var u=this.layerManager.pickObject({x:t,y:r,radius:i,layerIds:a,viewports:this.getViewports({x:t,y:r}),mode:"query",depth:l});return this.stats.timeEnd("deck.pickMultipleObjects"),u}},{key:"pickObjects",value:function pickObjects(e){var t=e.x,r=e.y,n=e.width,i=void 0===n?1:n,o=e.height,a=void 0===o?1:o,s=e.layerIds,l=void 0===s?null:s;this.stats.timeStart("deck.pickObjects");var u=this.layerManager.pickObjects({x:t,y:r,width:i,height:a,layerIds:l,viewports:this.getViewports({x:t,y:r,width:i,height:a})});return this.stats.timeEnd("deck.pickObjects"),u}},{key:"_createCanvas",value:function _createCanvas(e){var t=e.canvas;("string"==typeof t&&assert(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var r=e.id,n=e.style;return t.id=r,Object.assign(t.style,n),t}},{key:"_setCanvasSize",value:function _setCanvasSize(e){if(this.canvas){var t=e.width,r=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(r||0===r)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}}},{key:"_updateCanvasSize",value:function _updateCanvasSize(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function _checkForCanvasSizeChange(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,r=e.clientHeight||e.height;return(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,!0)}},{key:"_createAnimationLoop",value:function _createAnimationLoop(e){var t=this,r=e.width,n=e.height,i=e.gl,a=e.glOptions,s=e.debug,l=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new o.a({width:r,height:n,useDevicePixels:l,autoResizeDrawingBuffer:u,onCreateContext:function onCreateContext(e){return i||Object(o.r)(Object.assign({},a,e,{canvas:t.canvas,debug:s}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function _getViewState(e){return e.viewState||this.viewState}},{key:"_getViews",value:function _getViews(e){var t=e.views||[new Ot({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_pickAndCallback",value:function _pickAndCallback(e){var t=e.event.offsetCenter;if(t){var r=this.props.pickingRadius,n=this.layerManager.pickObject({x:t.x,y:t.y,radius:r,viewports:this.getViewports(t),mode:e.mode,depth:1,event:e.event});if(e.callback&&n){var i=n.find(function(e){return e.index>=0})||null;e.callback(i,n,e.event.srcEvent)}}}},{key:"_updateCursor",value:function _updateCursor(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function _updateAnimationProps(e){this.layerManager.context.animationProps=e}},{key:"_setGLContext",value:function _setGLContext(e){if(!this.layerManager){if(this.canvas||(this.canvas=e.canvas,Object(o.D)(e,{enable:!0,copyState:!0})),Object(o.C)(e,{blend:!0,blendFunc:[K.a.SRC_ALPHA,K.a.ONE_MINUS_SRC_ALPHA,K.a.ONE,K.a.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:K.a.LEQUAL}),this.props.onWebGLInitialized(e),!this.props._customRender)for(var t in this.eventManager=new vr(e.canvas,{events:{click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),h)this.eventManager.on(t,this._onEvent);this.viewManager=new Ke({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),assert(this.viewManager);var r=this.viewManager.getViewports()[0];this.layerManager=new We(e,{stats:this.stats,viewport:r}),this.effectManager=new At({gl:e,layerManager:this.layerManager});var n=!0,i=!1,a=void 0;try{for(var s,l=this.props.effects[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;this.effectManager.addEffect(u)}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function _drawLayers(e){var t=this.layerManager.context.gl;Object(o.C)(t,this.props.parameters),this.props.onBeforeRender({gl:t}),this.layerManager.drawLayers({pass:"screen",viewports:this.viewManager.getViewports(),views:this.viewManager.getViews(),redrawReason:e,drawPickingColors:this.props.drawPickingColors,customRender:Boolean(this.props._customRender)}),this.props.onAfterRender({gl:t})}},{key:"_onRendererInitialized",value:function _onRendererInitialized(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function _onRenderFrame(e){if(this.stats.oneSecondPassed()){var t=this.stats.getStatsTable();this.stats.reset(),i.table(3,t)()}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.stats.bump("fps"),this._updateAnimationProps(e);var r=this.needsRedraw({clearRedrawFlags:!0});r&&(this.stats.bump("render-fps"),this.props._customRender?this.props._customRender():this._drawLayers(r))}},{key:"_onViewStateChange",value:function _onViewStateChange(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState[e.viewId]=t,this.viewManager.setProps({viewState:t}))}},{key:"_onInteractiveStateChange",value:function _onInteractiveStateChange(e){var t=e.isDragging,r=void 0!==t&&t;r!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=r)}},{key:"_onClick",value:function _onClick(e){this._pickAndCallback({callback:this.props.onLayerClick,event:e,mode:"click"})}},{key:"_onEvent",value:function _onEvent(e){var t=h[e.type],r=e.offsetCenter;if(t&&r){var n=this.layerManager.getLastPickedObject({x:r.x,y:r.y,viewports:this.getViewports(r)}),i=n.layer,o=i&&(i[t.handler]||i.props[t.handler]),a=this.props[t.handler],s=!1;o&&(s=o.call(i,n,e)),!s&&a&&a(n,e)}}},{key:"_onPointerMove",value:function _onPointerMove(e){e.leftButton||e.rightButton||this._pickAndCallback({callback:this.props.onLayerHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function _onPointerLeave(e){this.layerManager.pickObject({x:-1,y:-1,viewports:[],radius:1,mode:"hover"}),this.props.onLayerHover&&this.props.onLayerHover(null,[],e.srcEvent)}}])&&deck_defineProperties(e.prototype,t),r&&deck_defineProperties(e,r),Deck}();function composite_layer_typeof(e){return(composite_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function composite_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function composite_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function composite_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=composite_layer_getPrototypeOf(e)););return e}function composite_layer_getPrototypeOf(e){return(composite_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function composite_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&composite_layer_setPrototypeOf(e,t)}function composite_layer_setPrototypeOf(e,t){return(composite_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}br.getPropTypes=function deck_getPropTypes(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(Rt)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.bool,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLayerClick:e.func,onLayerHover:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_animate:e.bool}},br.defaultProps=_r;var xr=function(e){function CompositeLayer(){return composite_layer_classCallCheck(this,CompositeLayer),e=this,!(t=composite_layer_getPrototypeOf(CompositeLayer).apply(this,arguments))||"object"!==composite_layer_typeof(t)&&"function"!=typeof t?composite_layer_assertThisInitialized(e):t;var e,t}var t,r,n;return composite_layer_inherits(CompositeLayer,Ee),t=CompositeLayer,(r=[{key:"getSubLayers",value:function getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function initializeState(){}},{key:"setState",value:function setState(e){_get(composite_layer_getPrototypeOf(CompositeLayer.prototype),"setState",this).call(this,e),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function getPickingInfo(e){return e.info}},{key:"renderLayers",value:function renderLayers(){return null}},{key:"shouldRenderSubLayer",value:function shouldRenderSubLayer(e,t){var r=this.props._subLayerProps;return t&&t.length||r&&r[e]}},{key:"getSubLayerClass",value:function getSubLayerClass(e,t){var r=this.props._subLayerProps;return r&&r[e]&&r[e].type||t}},{key:"getSubLayerProps",value:function getSubLayerProps(e){var t=this.props,r=t.opacity,n=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,l=t.autoHighlight,u=t.highlightColor,c=t.coordinateSystem,p=t.coordinateOrigin,h=t.wrapLongitude,f=t.positionFormat,d=t.modelMatrix,g=t._subLayerProps,m={opacity:r,pickable:n,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:p,wrapLongitude:h,positionFormat:f,modelMatrix:d};return e&&Object.assign(m,e,g&&g[e.id],{id:"".concat(this.props.id,"-").concat(e.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers)}),m}},{key:"_getAttributeManager",value:function _getAttributeManager(){return null}},{key:"_renderLayers",value:function _renderLayers(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?i.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(e=flatten(e=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=e,i.log(2,"Composite layer rendered new subLayers ".concat(this),e)());var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.parent=this}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"isComposite",get:function get(){return!0}}])&&composite_layer_defineProperties(t.prototype,r),n&&composite_layer_defineProperties(t,n),CompositeLayer}();function first_person_controller_typeof(e){return(first_person_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function first_person_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function first_person_controller_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function first_person_controller_arrayWithHoles(e){if(Array.isArray(e))return e}function first_person_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function first_person_controller_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function first_person_controller_possibleConstructorReturn(e,t){return!t||"object"!==first_person_controller_typeof(t)&&"function"!=typeof t?first_person_controller_assertThisInitialized(e):t}function first_person_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function first_person_controller_getPrototypeOf(e){return(first_person_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function first_person_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&first_person_controller_setPrototypeOf(e,t)}function first_person_controller_setPrototypeOf(e,t){return(first_person_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}xr.layerName="CompositeLayer";function ensureFinite(e,t){return Number.isFinite(e)?e:t}var wr=function(e){function FirstPersonState(e){var t,r=e.width,n=e.height,i=e.position,o=e.bearing,a=e.pitch,s=e.longitude,l=e.latitude,u=e.zoom,c=(e.syncBearing,e.bounds,e.startPanEventPosition),p=e.startPanPosition,h=e.startRotateCenter,f=e.startRotateViewport,d=e.startZoomPos,g=e.startZoom;return first_person_controller_classCallCheck(this,FirstPersonState),(t=first_person_controller_possibleConstructorReturn(this,first_person_controller_getPrototypeOf(FirstPersonState).call(this,{width:r,height:n,position:i,bearing:o,pitch:a,longitude:s,latitude:l,zoom:u})))._interactiveState={startPanEventPosition:c,startPanPosition:p,startRotateCenter:h,startRotateViewport:f,startZoomPos:d,startZoom:g},t}var t,r,n;return first_person_controller_inherits(FirstPersonState,xt),t=FirstPersonState,(r=[{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,r=this._viewportProps,n=r.translationX,i=r.translationY;return this._getUpdatedState({startPanPosition:[n,i],startPanEventPosition:t})}},{key:"pan",value:function pan(e){var t=e.pos,r=e.startPos,n=this._interactiveState.startPanEventPosition||r;if(!n)return this;var i,o,a=this._interactiveState.startPanPosition||[],s=(o=2,first_person_controller_arrayWithHoles(i=a)||first_person_controller_iterableToArrayLimit(i,o)||first_person_controller_nonIterableRest()),l=s[0],u=s[1];l=ensureFinite(l,this._viewportProps.translationX),u=ensureFinite(u,this._viewportProps.translationY);var c=t[0]-n[0],p=t[1]-n[1];return this._getUpdatedState({translationX:l+c,translationY:u-p})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,r=e.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var n=this._viewportProps,i=n.bearing,o=n.pitch;return this._getUpdatedState({bearing:i+10*t,pitch:o-10*r})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomPos:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,r=e.startPos,n=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.minZoom,a=i.maxZoom,s=i.width,l=i.height,u=(i.translationX,i.translationY,this._interactiveState.startZoomPos||r||t),c=Object(je.b)(zoom*n,o,a);t[0],u[0],t[1],u[1],u[0],u[1];return c/zoom<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function moveLeft(){var e=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:e})}},{key:"moveRight",value:function moveRight(){var e=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:e})}},{key:"moveForward",value:function moveForward(){var e=this._viewportProps.position,t=this.getDirection(),r=new Fe.a(t).normalize().scale(1);return this._getUpdatedState({position:new Fe.a(e).add(r)})}},{key:"moveBackward",value:function moveBackward(){var e=this._viewportProps.position,t=this.getDirection(),r=new Fe.a(t).normalize().scale(-1);return this._getUpdatedState({position:new Fe.a(e).add(r)})}},{key:"moveUp",value:function moveUp(){var e=this._viewportProps.position;return this._getUpdatedState({position:new Fe.a(e).add([0,0,1])})}},{key:"moveDown",value:function moveDown(){var e=this._viewportProps.position,t=e[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new Fe.a(e).add(t)})}},{key:"zoomIn",value:function zoomIn(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function zoomOut(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new FirstPersonState(Object.assign({},this._viewportProps,this._interactiveState,e))}}])&&first_person_controller_defineProperties(t.prototype,r),n&&first_person_controller_defineProperties(t,n),FirstPersonState}(),Sr=function(e){function FirstPersonController(e){return first_person_controller_classCallCheck(this,FirstPersonController),first_person_controller_possibleConstructorReturn(this,first_person_controller_getPrototypeOf(FirstPersonController).call(this,wr,e))}return first_person_controller_inherits(FirstPersonController,yt),FirstPersonController}();function first_person_view_typeof(e){return(first_person_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function first_person_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function first_person_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function first_person_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function first_person_view_getPrototypeOf(e){return(first_person_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function first_person_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&first_person_view_setPrototypeOf(e,t)}function first_person_view_setPrototypeOf(e,t){return(first_person_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function getDirectionFromBearingAndPitch(e){var t=e.bearing,r=e.pitch;return new _t({bearing:t,pitch:r}).toVector3().normalize()}function third_person_view_typeof(e){return(third_person_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function third_person_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function third_person_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function third_person_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function third_person_view_getPrototypeOf(e){return(third_person_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function third_person_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&third_person_view_setPrototypeOf(e,t)}function third_person_view_setPrototypeOf(e,t){return(third_person_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function third_person_view_getDirectionFromBearingAndPitch(e){var t=e.bearing,r=e.pitch;return new _t({bearing:t,pitch:r}).toVector3().normalize()}function orbit_viewport_typeof(e){return(orbit_viewport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_viewport_slicedToArray(e,t){return orbit_viewport_arrayWithHoles(e)||orbit_viewport_iterableToArrayLimit(e,t)||orbit_viewport_nonIterableRest()}function orbit_viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function orbit_viewport_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function orbit_viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function orbit_viewport_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function orbit_viewport_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function orbit_viewport_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function orbit_viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_viewport_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function orbit_viewport_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_viewport_getPrototypeOf(e){return(orbit_viewport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_viewport_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_viewport_setPrototypeOf(e,t)}function orbit_viewport_setPrototypeOf(e,t){return(orbit_viewport_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function FirstPersonView(){return first_person_view_classCallCheck(this,FirstPersonView),e=this,!(t=first_person_view_getPrototypeOf(FirstPersonView).apply(this,arguments))||"object"!==first_person_view_typeof(t)&&"function"!=typeof t?first_person_view_assertThisInitialized(e):t;var e,t}var t,r,n;return first_person_view_inherits(FirstPersonView,Xe),t=FirstPersonView,(r=[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,r=t.modelMatrix,n=void 0===r?null:r,i=t.bearing,o=t.up,a=void 0===o?[0,0,1]:o,s=getDirectionFromBearingAndPitch({bearing:i,pitch:89}),l=n?n.transformDirection(s):s,u=(new De.a).lookAt({eye:[0,0,0],center:l,up:a});return new Ve(Object.assign({},e,{zoom:null,viewMatrix:u}))}},{key:"controller",get:function get(){return this._getControllerProps({type:Sr})}}])&&first_person_view_defineProperties(t.prototype,r),n&&first_person_view_defineProperties(t,n),FirstPersonView}()).displayName="FirstPersonView",(function(e){function ThirdPersonView(){return third_person_view_classCallCheck(this,ThirdPersonView),e=this,!(t=third_person_view_getPrototypeOf(ThirdPersonView).apply(this,arguments))||"object"!==third_person_view_typeof(t)&&"function"!=typeof t?third_person_view_assertThisInitialized(e):t;var e,t}var t,r,n;return third_person_view_inherits(ThirdPersonView,Xe),t=ThirdPersonView,(r=[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,r=t.bearing,n=t.pitch,i=t.position,o=t.up,a=50*t.zoom,s=third_person_view_getDirectionFromBearingAndPitch({bearing:r,pitch:n}).scale(-a).multiply(new Fe.a(1,1,-1)),l=(new De.a).multiplyRight((new De.a).lookAt({eye:s,center:i,up:o}));return new Ve(Object.assign({},e,{id:this.id,zoom:null,viewMatrix:l}))}}])&&third_person_view_defineProperties(t.prototype,r),n&&third_person_view_defineProperties(t,n),ThirdPersonView}()).displayName="ThirdPersonView";var Er=Math.PI/180,Pr=function(e){function OrbitViewport(e){var t,r=e.id,n=void 0===r?"orbit-viewport":r,i=e.width,o=e.height,a=e.distance,s=e.rotationX,l=void 0===s?0:s,c=e.rotationOrbit,p=void 0===c?0:c,h=e.orbitAxis,f=void 0===h?"Z":h,d=e.lookAt,g=void 0===d?[0,0,0]:d,m=e.up,y=void 0===m?[0,1,0]:m,v=e.fov,_=void 0===v?75:v,b=e.near,x=void 0===b?1:b,w=e.far,S=void 0===w?100:w,E=e.zoom,P=void 0===E?1:E;orbit_viewport_classCallCheck(this,OrbitViewport);var C=u.k([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-l/180*Math.PI);"Z"===f?u.m(C,C,-p/180*Math.PI):u.l(C,C,-p/180*Math.PI);var T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(T,T,[P,P,P]),u.o(T,T,[-g[0],-g[1],-g[2]]);var k,O,A=u.f([],[0,0,a],[0,0,0],y),I=_*Er,R=i/o,M=u.i([],I,R,x,S);return k=this,(t=!(O=orbit_viewport_getPrototypeOf(OrbitViewport).call(this,{id:n,viewMatrix:u.g(A,A,u.g(C,C,T)),projectionMatrix:M,width:i,height:o}))||"object"!==orbit_viewport_typeof(O)&&"function"!=typeof O?orbit_viewport_assertThisInitialized(k):O).width=i,t.height=o,t.distance=a,t.rotationX=l,t.rotationOrbit=p,t.orbitAxis=f,t.lookAt=g,t.up=y,t.fov=_,t.near=x,t.far=S,t.zoom=P,t}var t,r,n;return orbit_viewport_inherits(OrbitViewport,Ve),t=OrbitViewport,(r=[{key:"project",value:function project(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==r&&r,i=orbit_viewport_slicedToArray(math_utils_transformVector(this.pixelProjectionMatrix,[].concat(orbit_viewport_arrayWithoutHoles(t=e)||orbit_viewport_iterableToArray(t)||orbit_viewport_nonIterableSpread(),[1])),3),o=i[0],a=i[1],s=i[2];return[o,n?this.height-a:a,s]}},{key:"unproject",value:function unproject(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0!==t&&t,n=orbit_viewport_slicedToArray(e,3),i=n[0],o=n[1],a=n[2],s=r?this.height-o:o;return math_utils_transformVector(this.pixelUnprojectionMatrix,[i,s,a,1])}},{key:"getDistance",value:function getDistance(e){var t=e.boundingBox,r=e.fov;return Math.max(t[0],t[1],t[2])/2/Math.tan(r/180*Math.PI/2)}},{key:"fitBounds",value:function fitBounds(e){var t=this.width,r=this.height,n=this.rotationX,i=this.rotationOrbit,o=this.orbitAxis,a=this.lookAt,s=this.up,l=this.fov;return new OrbitViewport({width:t,height:r,rotationX:n,rotationOrbit:i,orbitAxis:o,up:s,fov:l,near:this.near,far:this.far,zoom:this.zoom,lookAt:a,distance:this.getDistance({boundingBox:e,fov:l})})}}])&&orbit_viewport_defineProperties(t.prototype,r),n&&orbit_viewport_defineProperties(t,n),OrbitViewport}();function orbit_controller_typeof(e){return(orbit_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_controller_getPrototypeOf(e){return(orbit_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_controller_setPrototypeOf(e,t)}function orbit_controller_setPrototypeOf(e,t){return(orbit_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function orbit_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_controller_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function orbit_controller_createClass(e,t,r){return t&&orbit_controller_defineProperties(e.prototype,t),r&&orbit_controller_defineProperties(e,r),e}Pr.displayName="OrbitViewport";var Cr={transitionDuration:300,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new it(["zoom"]),transitionInterruption:at},Tr={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},kr={minZoom:0,maxZoom:1/0};function orbit_controller_ensureFinite(e,t){return Number.isFinite(e)?e:t}var Or=function(){function OrbitState(e){var t=e.width,r=e.height,n=e.distance,i=e.rotationX,o=e.rotationOrbit,a=e.orbitAxis,s=e.bounds,l=e.lookAt,u=e.fov,c=e.near,p=e.far,h=e.translationX,f=e.translationY,d=e.zoom,g=e.minZoom,m=e.maxZoom,y=e.startPanViewport,v=e.startPanPos,_=e.isPanning,b=e.startRotateViewport,x=e.isRotating,w=e.startZoomViewport,S=e.startZoomPos;orbit_controller_classCallCheck(this,OrbitState),assert(Number.isFinite(t),"`width` must be supplied"),assert(Number.isFinite(r),"`height` must be supplied"),assert(Number.isFinite(n),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:t,height:r,distance:n,rotationX:orbit_controller_ensureFinite(i,Tr.rotationX),rotationOrbit:orbit_controller_ensureFinite(o,Tr.rotationOrbit),orbitAxis:a,bounds:s,lookAt:l||Tr.lookAt,fov:orbit_controller_ensureFinite(u,Tr.fov),near:orbit_controller_ensureFinite(c,Tr.near),far:orbit_controller_ensureFinite(p,Tr.far),translationX:orbit_controller_ensureFinite(h,Tr.translationX),translationY:orbit_controller_ensureFinite(f,Tr.translationY),zoom:orbit_controller_ensureFinite(d,Tr.zoom),minZoom:orbit_controller_ensureFinite(g,kr.minZoom),maxZoom:orbit_controller_ensureFinite(m,kr.maxZoom)}),this._interactiveState={startPanViewport:y,startPanPos:v,isPanning:_,startRotateViewport:b,isRotating:x,startZoomViewport:w,startZoomPos:S}}return orbit_controller_createClass(OrbitState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,r=new Pr(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:t,startPanViewport:r})}},{key:"pan",value:function pan(e){var t=e.pos,r=e.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var n=this._interactiveState.startPanPos||r;assert(n,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new Pr(this._viewportProps),o=t[0]-n[0],a=t[1]-n[1],s=i.project(i.lookAt),l=i.unproject([s[0]-o,s[1]-a,s[2]]);return this._getUpdatedOrbitState({lookAt:l,isPanning:!0})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;var t=new Pr(this._viewportProps);return this._getUpdatedOrbitState({startRotateViewport:t})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,r=e.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var n=this._interactiveState.startRotateViewport||{},i=n.rotationX,o=n.rotationOrbit;i=orbit_controller_ensureFinite(i,this._viewportProps.rotationX),o=orbit_controller_ensureFinite(o,this._viewportProps.rotationOrbit);var a=Object(je.b)(i-180*r,-89.999,89.999),s=(o-180*t)%360;return this._getUpdatedOrbitState({rotationX:a,rotationOrbit:s,isRotating:!0})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"shortestPathFrom",value:function shortestPathFrom(e){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos,r=new Pr(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:r,startZoomPos:t})}},{key:"zoom",value:function zoom(e){var t=e.pos,r=e.startPos,n=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.minZoom,a=i.maxZoom,s=i.width,l=i.height,u=this._interactiveState.startZoomPos||r||t,c=this._interactiveState.startZoomViewport||new Pr(this._viewportProps),p=Object(je.b)(zoom*n,o,a),h=t[0]-u[0],f=t[1]-u[1],d=u[0]-s/2,g=l/2-u[1],m=c.project(c.lookAt),y=m[0]-d+d*p/zoom+h,v=m[1]+g-g*p/zoom-f,_=c.unproject([y,v,m[2]]);return this._getUpdatedOrbitState({lookAt:_,zoom:p})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function _getUpdatedOrbitState(e){return new OrbitState(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function _applyConstraints(e){var t=e.maxZoom,r=e.minZoom,n=e.zoom;return e.zoom=n>t?t:n,e.zoom=n<r?r:n,e}}]),OrbitState}(),Ar=function(e){function OrbitController(e){return orbit_controller_classCallCheck(this,OrbitController),t=this,!(r=orbit_controller_getPrototypeOf(OrbitController).call(this,Or,e))||"object"!==orbit_controller_typeof(r)&&"function"!=typeof r?orbit_controller_assertThisInitialized(t):r;var t,r}return orbit_controller_inherits(OrbitController,yt),orbit_controller_createClass(OrbitController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return Cr}}]),OrbitController}();function orbit_view_typeof(e){return(orbit_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_view_slicedToArray(e,t){return orbit_view_arrayWithHoles(e)||orbit_view_iterableToArrayLimit(e,t)||orbit_view_nonIterableRest()}function orbit_view_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function orbit_view_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function orbit_view_arrayWithHoles(e){if(Array.isArray(e))return e}function orbit_view_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function orbit_view_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function orbit_view_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function orbit_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function orbit_view_createClass(e,t,r){return t&&orbit_view_defineProperties(e.prototype,t),r&&orbit_view_defineProperties(e,r),e}function orbit_view_possibleConstructorReturn(e,t){return!t||"object"!==orbit_view_typeof(t)&&"function"!=typeof t?orbit_view_assertThisInitialized(e):t}function orbit_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_view_getPrototypeOf(e){return(orbit_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_view_setPrototypeOf(e,t)}function orbit_view_setPrototypeOf(e,t){return(orbit_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ir=Math.PI/180,Rr=function(e){function OrbitViewport(){return orbit_view_classCallCheck(this,OrbitViewport),orbit_view_possibleConstructorReturn(this,orbit_view_getPrototypeOf(OrbitViewport).apply(this,arguments))}return orbit_view_inherits(OrbitViewport,Ve),orbit_view_createClass(OrbitViewport,[{key:"project",value:function project(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==r&&r,i=orbit_view_slicedToArray(math_utils_transformVector(this.pixelProjectionMatrix,[].concat(orbit_view_arrayWithoutHoles(t=e)||orbit_view_iterableToArray(t)||orbit_view_nonIterableSpread(),[1])),3),o=i[0],a=i[1],s=i[2];return[o,n?this.height-a:a,s]}},{key:"unproject",value:function unproject(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0!==t&&t,n=orbit_view_slicedToArray(e,3),i=n[0],o=n[1],a=n[2],s=r?this.height-o:o;return math_utils_transformVector(this.pixelUnprojectionMatrix,[i,s,a,1])}}]),OrbitViewport}();function perspective_view_typeof(e){return(perspective_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function perspective_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function perspective_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function perspective_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function perspective_view_getPrototypeOf(e){return(perspective_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function perspective_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&perspective_view_setPrototypeOf(e,t)}function perspective_view_setPrototypeOf(e,t){return(perspective_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function OrbitView(){return orbit_view_classCallCheck(this,OrbitView),orbit_view_possibleConstructorReturn(this,orbit_view_getPrototypeOf(OrbitView).apply(this,arguments))}return orbit_view_inherits(OrbitView,Xe),orbit_view_createClass(OrbitView,[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,r=e.width||1,n=e.height||1,i=e.fov||e.fovy||t.fovy||75,o=e.near||t.near||1,a=e.far||t.far||100,s=Number.isFinite(t.aspect)?t.aspect:r/n,l=i*Ir;return new Rr({id:this.id,viewMatrix:this._getViewMatrix(e.viewState),projectionMatrix:u.i([],l,s,o,a),x:e.x,y:e.y,width:r,height:n})}},{key:"_getViewMatrix",value:function _getViewMatrix(e){var t=e.distance,r=e.rotationX,n=void 0===r?0:r,i=e.rotationOrbit,o=void 0===i?0:i,a=e.orbitAxis,s=void 0===a?"Z":a,l=e.lookAt,c=void 0===l?[0,0,0]:l,p=e.up,h=void 0===p?[0,1,0]:p,f=e.zoom,d=void 0===f?1:f,g=u.k([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-n/180*Math.PI);"Z"===s?u.m(g,g,-o/180*Math.PI):u.l(g,g,-o/180*Math.PI);var m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(m,m,[d,d,d]),u.o(m,m,[-c[0],-c[1],-c[2]]);var y=u.f([],[0,0,t],[0,0,0],h);return u.g(y,y,u.g(g,g,m)),y}},{key:"fitBounds",value:function fitBounds(e,t){var r=this.width,n=this.height,i=this.fov,o=this.near,a=this.far;return this._getViewport({width:r,height:n,fov:i,near:o,far:a})}},{key:"controller",get:function get(){return this._getControllerProps({type:Ar})}}],[{key:"getDistance",value:function getDistance(e){var t=e.boundingBox,r=e.fov;return Math.max(t[0],t[1],t[2])/2/Math.tan(r/180*Math.PI/2)}}]),OrbitView}()).displayName="OrbitView";var Mr=Math.PI/180;(function(e){function PerspectiveView(){return perspective_view_classCallCheck(this,PerspectiveView),e=this,!(t=perspective_view_getPrototypeOf(PerspectiveView).apply(this,arguments))||"object"!==perspective_view_typeof(t)&&"function"!=typeof t?perspective_view_assertThisInitialized(e):t;var e,t}var t,r,n;return perspective_view_inherits(PerspectiveView,Xe),t=PerspectiveView,(r=[{key:"_getViewport",value:function _getViewport(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.viewState,a=o.eye,s=o.lookAt,l=void 0===s?[0,0,0]:s,c=o.up,p=void 0===c?[0,1,0]:c,h=e.fovy||o.fovy||75,f=e.near||o.near||1,d=e.far||o.far||100,g=Number.isFinite(o.aspect)?o.aspect:n/i,m=h*Mr;return new Ve({id:this.id,x:t,y:r,width:n,height:i,viewMatrix:u.f([],a,l,p),projectionMatrix:u.i([],m,g,f,d)})}}])&&perspective_view_defineProperties(t.prototype,r),n&&perspective_view_defineProperties(t,n),PerspectiveView}()).displayName="PerspectiveView";var Lr=r(149);function orthographic_controller_typeof(e){return(orthographic_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orthographic_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orthographic_controller_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function orthographic_controller_possibleConstructorReturn(e,t){return!t||"object"!==orthographic_controller_typeof(t)&&"function"!=typeof t?orthographic_controller_assertThisInitialized(e):t}function orthographic_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orthographic_controller_getPrototypeOf(e){return(orthographic_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orthographic_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orthographic_controller_setPrototypeOf(e,t)}function orthographic_controller_setPrototypeOf(e,t){return(orthographic_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var jr={zoom:0,offset:[0,0],minZoom:-10,maxZoom:10},Dr=function zoom2Scale(e){return Math.pow(2,e)},Fr=function(e){function OrthographicState(e){var t,r=e.width,n=e.height,i=e.offset,o=void 0===i?jr.offset:i,a=e.zoom,s=void 0===a?jr.zoom:a,l=e.minZoom,u=void 0===l?jr.minZoom:l,c=e.maxZoom,p=void 0===c?jr.maxZoom:c,h=e.startPanPosition,f=e.startPanOffset,d=e.startZoomPosition,g=e.startZoom;return orthographic_controller_classCallCheck(this,OrthographicState),(t=orthographic_controller_possibleConstructorReturn(this,orthographic_controller_getPrototypeOf(OrthographicState).call(this,{width:r,height:n,offset:o,zoom:s,minZoom:u,maxZoom:p})))._interactiveState={startPanPosition:h,startPanOffset:f,startZoomPosition:d,startZoom:g},t}var t,r,n;return orthographic_controller_inherits(OrthographicState,xt),t=OrthographicState,(r=[{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,r=this._viewportProps.offset;return this._getUpdatedState({startPanPosition:t,startPanOffset:r})}},{key:"pan",value:function pan(e){var t=e.pos,r=this._interactiveState,n=r.startPanPosition,i=r.startPanOffset,o=new Lr.a(t).subtract(n);return this._getUpdatedState({offset:new Lr.a(i).subtract(o)})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startPanOffset:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this}},{key:"rotate",value:function rotate(e){e.deltaScaleX,e.deltaScaleY;return this}},{key:"rotateEnd",value:function rotateEnd(){return this}},{key:"_calculateNewZoom",value:function _calculateNewZoom(e){var t=e.scale,r=e.startZoom,n=this._viewportProps,i=n.maxZoom,o=n.minZoom,a=r+Math.log2(t);return Object(je.b)(a,o,i)}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomPosition:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,r=e.startPos,n=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.width,a=i.height,s=i.offset,l=this._interactiveState,u=l.startZoom,c=l.startZoomPosition;Number.isFinite(u)||(u=zoom,c=r||t);var p=this._calculateNewZoom({scale:n,startZoom:u}),h=Dr(u),f=Dr(p),d=o/2-s[0],g=a/2-s[1],m=(c[0]-d)*(f/h-1),y=(c[1]-g)*(f/h-1);return this._getUpdatedState({zoom:p,offset:[s[0]+m,s[1]+y]})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"_zoomFromCenter",value:function _zoomFromCenter(e){var t=this._viewportProps,r=t.width,n=t.height,i=t.offset;return this.zoom({pos:[r/2-i[0],n/2-i[1]],scale:e})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){var e=this._viewportProps.offset,t=[10,0];return this._getUpdatedState({offset:new Lr.a(e).add(t)})}},{key:"moveRight",value:function moveRight(){var e=this._viewportProps.offset,t=[-10,0];return this._getUpdatedState({offset:new Lr.a(e).add(t)})}},{key:"moveUp",value:function moveUp(){var e=this._viewportProps.offset,t=[0,10];return this._getUpdatedState({offset:new Lr.a(e).add(t)})}},{key:"moveDown",value:function moveDown(){var e=this._viewportProps.offset,t=[0,-10];return this._getUpdatedState({offset:new Lr.a(e).add(t)})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new OrthographicState(Object.assign({},this._viewportProps,this._interactiveState,e))}}])&&orthographic_controller_defineProperties(t.prototype,r),n&&orthographic_controller_defineProperties(t,n),OrthographicState}(),Nr=function(e){function OrthographicController(e){var t;return orthographic_controller_classCallCheck(this,OrthographicController),(t=orthographic_controller_possibleConstructorReturn(this,orthographic_controller_getPrototypeOf(OrthographicController).call(this,Fr,e))).invertPan=!0,t}return orthographic_controller_inherits(OrthographicController,yt),OrthographicController}();function orthographic_view_typeof(e){return(orthographic_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orthographic_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orthographic_view_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function orthographic_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orthographic_view_getPrototypeOf(e){return(orthographic_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orthographic_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orthographic_view_setPrototypeOf(e,t)}function orthographic_view_setPrototypeOf(e,t){return(orthographic_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function OrthographicView(){return orthographic_view_classCallCheck(this,OrthographicView),e=this,!(t=orthographic_view_getPrototypeOf(OrthographicView).apply(this,arguments))||"object"!==orthographic_view_typeof(t)&&"function"!=typeof t?orthographic_view_assertThisInitialized(e):t;var e,t}var t,r,n;return orthographic_view_inherits(OrthographicView,Xe),t=OrthographicView,(r=[{key:"_getViewport",value:function _getViewport(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.viewState,a=o.offset,s=void 0===a?[0,0]:a,l=o.zoom,u=void 0===l?0:l;n=n||1,i=i||1;var c=Math.pow(2,u),p=this.props,h=p.eye,f=void 0===h?[0,0,1]:h,d=p.lookAt,g=void 0===d?[0,0,0]:d,m=p.up,y=void 0===m?[0,1,0]:m,v=p.left,_=void 0===v?(-n/2+s[0])/c:v,b=p.top,x=void 0===b?(-i/2+s[1])/c:b,w=p.right,S=void 0===w?(n/2+s[0])/c:w,E=p.bottom,P=void 0===E?(i/2+s[1])/c:E,C=p.near,T=void 0===C?1:C,k=p.far,O=void 0===k?100:k;return new Ve({id:this.id,x:t,y:r,width:n,height:i,viewMatrix:(new De.a).lookAt({eye:f,lookAt:g,up:y}),projectionMatrix:(new De.a).ortho({left:_,right:S,bottom:P,top:x,near:T,far:O}),zoom:u})}},{key:"controller",get:function get(){return this._getControllerProps({type:Nr})}}])&&orthographic_view_defineProperties(t.prototype,r),n&&orthographic_view_defineProperties(t,n),OrthographicView}()).displayName="OrthographicView";function bin_sorter_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function bin_sorter_iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function bin_sorter_arrayWithHoles(e){if(Array.isArray(e))return e}function bin_sorter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bin_sorter_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zr=function defaultGetValue(e){return e.length},Br=function(){function BinSorter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zr;bin_sorter_classCallCheck(this,BinSorter),this.sortedBins=this.getSortedBins(e,t),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}var e,t,r;return e=BinSorter,(t=[{key:"getSortedBins",value:function getSortedBins(e,t){return e.reduce(function(e,r,n){var i=t(r.points);return null!=i&&e.push({i:Number.isFinite(r.index)?r.index:n,value:i,counts:r.points.length}),e},[]).sort(function(e,t){return e.value-t.value})}},{key:"getValueRange",value:function getValueRange(e){var t,r,n=(r=2,bin_sorter_arrayWithHoles(t=e)||bin_sorter_iterableToArrayLimit(t,r)||bin_sorter_nonIterableRest()),i=n[0],o=n[1],a=this.sortedBins.length;if(!a)return[0,0];var s=Math.ceil(i/100*(a-1)),l=Math.floor(o/100*(a-1));return[this.sortedBins[s].value,this.sortedBins[l].value]}},{key:"getMaxCount",value:function getMaxCount(){var e=0;return this.sortedBins.forEach(function(t){return e=e>t.counts?e:t.counts}),e}},{key:"getBinMap",value:function getBinMap(){return this.sortedBins.reduce(function(e,t){return Object.assign(e,(r={},n=t.i,i=t,n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r));var r,n,i},{})}}])&&bin_sorter_defineProperties(e.prototype,t),r&&bin_sorter_defineProperties(e,r),BinSorter}();function tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tesselator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tesselator_createClass(e,t,r){return t&&tesselator_defineProperties(e.prototype,t),r&&tesselator_defineProperties(e,r),e}var Ur,Vr=function(){function TypedArrayManager(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overAlloc,t=void 0===e?1:e;tesselator_classCallCheck(this,TypedArrayManager),this.overAlloc=t}return tesselator_createClass(TypedArrayManager,[{key:"allocate",value:function allocate(e,t,r){var n=r.size,i=r.type,o=r.copy,a=void 0!==o&&o,s=t*n;if(e&&s<=e.length)return e;var l=Math.max(Math.ceil(s*this.overAlloc),1),u=this._allocate(i,l);return e&&a&&u.set(e),this._release(e),u}},{key:"_allocate",value:function _allocate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array,t=arguments.length>1?arguments[1]:void 0;if(e===Uint16Array&&t>65535)throw new Error("Vertex count exceeds browser index limit");return new e(t)}},{key:"_release",value:function _release(e){}}]),TypedArrayManager}(),qr=function(){function Tesselator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tesselator_classCallCheck(this,Tesselator);var t=e.attributes,r=void 0===t?{}:t;this.typedArrayManager=new Vr,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.updateGeometry(e),Object.seal(this)}return tesselator_createClass(Tesselator,[{key:"updateGeometry",value:function updateGeometry(e){var t=e.data,r=e.getGeometry,n=e.positionFormat,i=e.fp64;this.data=t,this.getGeometry=r,this.fp64=i,this.positionSize="XY"===n?2:3,this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function updatePartialGeometry(e){e.start,e.count,e.objects}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t,r){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function getGeometrySize(e){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function _forEachGeometry(e){var t=this.data,r=this.getGeometry,n=0,i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){e(r(s.value),n++)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"_updateAttribute",value:function _updateAttribute(e){var t=e.target,r=e.size,n=e.getValue,i=this.data,o=this.bufferLayout,a=0,s=0,l=!0,u=!1,c=void 0;try{for(var p,h=i[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var f=n(p.value,s),d=o[s++];fillArray({target:t,source:f,start:a,count:d}),a+=d*r}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return t}},{key:"_rebuildGeometry",value:function _rebuildGeometry(){var e=this;if(this.data&&this.getGeometry){var t=[],r=[],n=0;this._forEachGeometry(function(t,i){var o=e.getGeometrySize(t);n+=o,r[i]=o});var i=this.attributes,o=this._attributeDefs,a=this.typedArrayManager,s=this.fp64;for(var l in o){var u=o[l];u.fp64Only&&!s||(i[l]=a.allocate(i[l],n,u))}this.indexLayout=t,this.bufferLayout=r,this.instanceCount=n;var c={vertexStart:0,indexStart:0};this._forEachGeometry(function(n,i){var o=r[i];c.geometryIndex=i,c.geometrySize=o,e.updateGeometryAttributes(n,c),c.vertexStart+=o,c.indexStart+=t[i]||0}),this.vertexCount=c.indexStart}}}]),Tesselator}();function quantizeScale(e,t,r){var n=e[1]-e[0];if(n<=0)return i.warn("quantizeScale: invalid domain, returning range[0]")(),t[0];var o=n/t.length,a=Math.floor((r-e[0])/o);return t[Math.max(Math.min(a,t.length-1),0)]}function gpu_grid_aggregator_constants_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gr={SUM:1,MEAN:2,MIN:3,MAX:4},Wr={dataChanged:!0,viewportChanged:!0,cellSizeChanged:!0},Hr={changeFlags:Wr,projectPoints:!1,useGPU:!0,fp64:!1,viewport:null,gridTransformMatrix:null,createBufferObjects:!0},Xr=[K.a.MIN,K.a.FUNC_ADD],Kr=[K.a.MAX,K.a.FUNC_ADD],Zr=[K.a.MAX,K.a.MIN],Yr=(gpu_grid_aggregator_constants_defineProperty(Ur={},Gr.SUM,K.a.FUNC_ADD),gpu_grid_aggregator_constants_defineProperty(Ur,Gr.MEAN,K.a.FUNC_ADD),gpu_grid_aggregator_constants_defineProperty(Ur,Gr.MIN,Xr),gpu_grid_aggregator_constants_defineProperty(Ur,Gr.MAX,Kr),Ur),Jr={size:1,operation:Gr.SUM,needMin:!1,needMax:!1,combineMaxMin:!1},Qr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function gpu_grid_aggregator_utils_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getFloatTexture(e,t){var r,n=t.width,i=void 0===n?1:n,a=t.height,s=void 0===a?1:a;return new o.i(e,{data:null,format:K.a.RGBA32F,type:K.a.FLOAT,border:0,mipmaps:!1,parameters:(r={},gpu_grid_aggregator_utils_defineProperty(r,K.a.TEXTURE_MAG_FILTER,K.a.NEAREST),gpu_grid_aggregator_utils_defineProperty(r,K.a.TEXTURE_MIN_FILTER,K.a.NEAREST),r),dataFormat:K.a.RGBA,width:i,height:s})}function getFramebuffer(e,t){var r=t.id,n=t.width,i=void 0===n?1:n,a=t.height,s=void 0===a?1:a,l=t.texture||getFloatTexture(e,t);return new o.f(e,{id:r,width:i,height:s,attachments:gpu_grid_aggregator_utils_defineProperty({},K.a.COLOR_ATTACHMENT0,l)})}function getFloatArray(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!e||e.length<t?new Float32Array(t).fill(r):e}function updateBuffer(e){var t=e.gl,r=e.bufferName,n=e.data,i=e.result;i[r]?i[r].subData({data:n}):i[r]=new o.b(t,n)}function gpu_grid_aggregator_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gpu_grid_aggregator_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function gpu_grid_aggregator_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function gpu_grid_aggregator_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function gpu_grid_aggregator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gpu_grid_aggregator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gpu_grid_aggregator_createClass(e,t,r){return t&&gpu_grid_aggregator_defineProperties(e.prototype,t),r&&gpu_grid_aggregator_defineProperties(e,r),e}var $r=o.t.fp64ifyMatrix4,en=function(){function GPUGridAggregator(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gpu_grid_aggregator_classCallCheck(this,GPUGridAggregator),this.id=t.id||"gpu-grid-aggregator",this.shaderCache=t.shaderCache||null,this.gl=e,this.state={weights:null,gridPositions:null,positionsBuffer:null,positions64xyLowBuffer:null,vertexCount:0,fp64:null,useGPU:null,numCol:0,numRow:0,windowSize:null,cellSize:null,weightAttributes:{},textures:{},meanTextures:{},buffers:{},framebuffers:{},maxMinFramebuffers:{},minFramebuffers:{},maxFramebuffers:{},equations:{}},this._hasGPUSupport=Object(o.w)(e)&&Object(o.v)(this.gl,o.e.BLEND_EQUATION_MINMAX,o.e.COLOR_ATTACHMENT_RGBA32F,o.e.TEXTURE_FLOAT)}return gpu_grid_aggregator_createClass(GPUGridAggregator,null,[{key:"getAggregationData",value:function getAggregationData(e){var t=e.aggregationData,r=e.maxData,n=e.pixelIndex;assert(t.length>=4*(n+1)),assert(4===r.length);var i=4*n;return{cellCount:t[i+3],cellWeight:t[i],totalCount:r[3],maxCellWieght:r[0]}}},{key:"getCellData",value:function getCellData(e){for(var t=e.countsData,r=e.size,n=void 0===r?1:r,i=[],o=[],a=0;a<t.length;a+=4){for(var s=0;s<n;s++)i.push(t[a+s]);o.push(t[a+3])}return{cellCounts:o,cellWeights:i}}}]),gpu_grid_aggregator_createClass(GPUGridAggregator,[{key:"delete",value:function _delete(){var e=this.gridAggregationModel,t=this.allAggregationModel,r=this.meanTransform,n=this.state,i=n.positionsBuffer,o=n.position64Buffer,a=n.framebuffers,s=n.maxMinFramebuffers,l=n.minFramebuffers,u=n.maxFramebuffers,c=n.meanTextures;e&&e.delete(),t&&t.delete(),r&&r.delete(),i&&i.delete(),o&&o.delete(),this.deleteResources(a),this.deleteResources(s),this.deleteResources(l),this.deleteResources(u),this.deleteResources(c)}},{key:"run",value:function run(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAggregationParams(e);assert(t),this.updateGridSize(t);var r=t.useGPU;return this._hasGPUSupport&&r?this.runAggregationOnGPU(t):(r&&i.warn("ScreenGridAggregator: GPU Aggregation not supported, falling back to CPU")(),this.runAggregationOnCPU(t))}},{key:"deleteResources",value:function deleteResources(e){for(var t in e)e[t].delete()}},{key:"getAggregationParams",value:function getAggregationParams(e){var t=Object.assign({},Hr,e),r=t.useGPU,n=t.gridTransformMatrix,i=t.viewport,o=t.weights,a=t.projectPoints,s=t.cellSize;return this.state.useGPU!==r&&(t.changeFlags=Object.assign({},t.changeFlags,Wr)),!s||this.state.cellSize&&this.state.cellSize[0]===s[0]&&this.state.cellSize[1]===s[1]||(t.changeFlags.cellSizeChanged=!0,this.setState({cellSize:s})),this.validateProps(t,e),this.setState({useGPU:r}),t.gridTransformMatrix=(a?i.viewportMatrix:n)||Qr,o&&(t.weights=this.normalizeWeightParams(o),this.setState({weights:t.weights})),t}},{key:"normalizeWeightParams",value:function normalizeWeightParams(e){var t={};for(var r in e)t[r]=Object.assign({},Jr,e[r]);return t}},{key:"setState",value:function setState(e){Object.assign(this.state,e)}},{key:"shouldTransformToGrid",value:function shouldTransformToGrid(e){var t=e.projectPoints,r=e.changeFlags;return!!(!this.state.gridPositions||r.dataChanged||t&&r.viewportChanged)}},{key:"updateGridSize",value:function updateGridSize(e){var t=e.viewport,r=e.cellSize,n=e.width||t.width,i=e.height||t.height,o=Math.ceil(n/r[0]),a=Math.ceil(i/r[1]);this.setState({numCol:o,numRow:a,windowSize:[n,i]})}},{key:"validateProps",value:function validateProps(e,t){var r=e.changeFlags,n=e.projectPoints,o=e.gridTransformMatrix;assert(r.dataChanged||r.viewportChanged||r.cellSizeChanged),assert(!r.dataChanged||t.positions&&t.weights&&(!t.projectPositions||t.viewport)&&t.cellSize),assert(!r.cellSizeChanged||t.cellSize),assert(!(r.viewportChanged&&n)||t.viewport),n&&o&&i.warn("projectPoints is true, gridTransformMatrix is ignored")()}},{key:"calculateAggregationData",value:function calculateAggregationData(e){var t=e.weights,r=e.results,n=e.cellIndex,i=e.posIndex;for(var o in t){var a=t[o],s=a.values,l=a.size,u=a.operation,c=r[o].aggregationData;assert(l>=1&&l<=3);for(var p=0;p<l;p++){var h=n+p,f=s[3*i+p];if(assert(Number.isFinite(f)),0===c[n+3])c[h]=f;else switch(u){case Gr.SUM:case Gr.MEAN:c[h]+=f;break;case Gr.MIN:c[h]=Math.min(c[h],f);break;case Gr.MAX:c[h]=Math.max(c[h],f);break;default:assert(!1)}}c[n+3]++}}},{key:"calculateMeanMaxMinData",value:function calculateMeanMaxMinData(e){var t=e.validCellIndices,r=e.results,n=e.weights;t.forEach(function(e){for(var t in r){for(var i=n[t],o=i.size,a=i.needMin,s=i.needMax,l=i.operation,u=r[t],c=u.aggregationData,p=u.minData,h=u.maxData,f=u.maxMinData,d=a||s,g=l===Gr.MEAN,m=a&&s&&n[t].combineMaxMin,y=c[e+4-1],v=0;v<o&&(d||g);v++){var _=e+v,b=c[_];g&&(c[_]/=y,b=c[_]),m?f[v]=Math.max(f[v],b):(a&&(p[v]=Math.min(p[v],b)),s&&(h[v]=Math.max(h[v],b)))}m?f[3]=Math.min(f[3],c[e+0]):(a&&(p[3]+=y),s&&(h[3]+=y))}})}},{key:"initCPUResults",value:function initCPUResults(e){var t=e.weights||this.state.weights,r=this.state,n=r.numCol,i=r.numRow,o={};for(var a in t){var s=t[a],l=s.aggregationData,u=s.minData,c=s.maxData,p=s.maxMinData,h=t[a],f=h.needMin,d=h.needMax,g=f&&d&&t[a].combineMaxMin;l=getFloatArray(l,n*i*4),g?((p=getFloatArray(p,4)).fill(-1/0,0,3),p[3]=1/0):(f&&((u=getFloatArray(u,4,1/0))[3]=0),d&&((c=getFloatArray(c,4,-1/0))[3]=0)),o[a]=Object.assign({},t[a],{aggregationData:l,minData:u,maxData:c,maxMinData:p})}return o}},{key:"runAggregationOnCPU",value:function runAggregationOnCPU(e){var t,r=e.positions,n=e.cellSize,i=e.gridTransformMatrix,o=e.viewport,a=e.projectPoints,s=e.weights,l=this.state,u=l.numCol,c=l.numRow,p=this.initCPUResults(e),h=this.shouldTransformToGrid(e),f=[];assert(h||e.changeFlags.cellSizeChanged),h?(this.setState({gridPositions:f}),t=r.length/2):(f=this.state.gridPositions,s=this.state.weights,t=f.length/2);for(var d,g=new Set,m=0;m<t;m++){var y=void 0;if(h){var v,_=[r[2*m],r[2*m+1]];y=a?o.project([_[0],_[1]]):worldToPixels([_[0],_[1],0],i).slice(0,2),(v=f).push.apply(v,gpu_grid_aggregator_arrayWithoutHoles(d=y)||gpu_grid_aggregator_iterableToArray(d)||gpu_grid_aggregator_nonIterableSpread())}else y=[f[2*m],f[2*m+1]];var b=y[0],x=y[1],w=Math.floor(b/n[0]),S=Math.floor(x/n[1]);if(w>=0&&w<u&&S>=0&&S<c){var E=4*(w+S*u);g.add(E),this.calculateAggregationData({weights:s,results:p,cellIndex:E,posIndex:m})}}return this.calculateMeanMaxMinData({validCellIndices:g,results:p,weights:s}),this.updateAggregationBuffers(e,p),p}},{key:"updateAggregationBuffers",value:function updateAggregationBuffers(e,t){if(e.createBufferObjects){var r=e.weights||this.state.weights;for(var n in t){var i=t[n],o=i.aggregationData,a=i.minData,s=i.maxData,l=i.maxMinData,u=r[n],c=u.needMin,p=u.needMax,h=c&&p&&r[n].combineMaxMin;updateBuffer({gl:this.gl,bufferName:"aggregationBuffer",data:o,result:t[n]}),h?updateBuffer({gl:this.gl,bufferName:"maxMinBuffer",data:l,result:t[n]}):(c&&updateBuffer({gl:this.gl,bufferName:"minBuffer",data:a,result:t[n]}),p&&updateBuffer({gl:this.gl,bufferName:"maxBuffer",data:s,result:t[n]}))}}}},{key:"getAggregateData",value:function getAggregateData(e){var t={},r=this.state,n=r.textures,i=r.framebuffers,o=r.maxMinFramebuffers,a=r.minFramebuffers,s=r.maxFramebuffers,l=r.weights;for(var u in l){t[u]={};var c=l[u],p=c.needMin,h=c.needMax,f=c.combineMaxMin;t[u].aggregationTexture=n[u],t[u].aggregationBuffer=i[u].readPixelsToBuffer({buffer:l[u].aggregationBuffer,type:K.a.FLOAT}),p&&h&&f?t[u].maxMinBuffer=o[u].readPixelsToBuffer({buffer:l[u].maxMinBuffer,type:K.a.FLOAT}):(p&&(t[u].minBuffer=a[u].readPixelsToBuffer({buffer:l[u].minBuffer,type:K.a.FLOAT})),h&&(t[u].maxBuffer=s[u].readPixelsToBuffer({buffer:l[u].maxBuffer,type:K.a.FLOAT})))}return t}},{key:"getAggregationModel",value:function getAggregationModel(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.gl,r=this.shaderCache;return new o.h(t,{id:"Gird-Aggregation-Model",vs:e?"#define SHADER_NAME gpu-aggregation-to-grid-vs-64\n\nattribute vec2 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform vec2 uProjectionMatrixFP64[16];\nuniform bool projectPoints;\n\nvarying vec3 vWeights;\n\nvoid project_to_pixel(vec2 pos, vec2 pos64xyLow, out vec2 pixelXY64[2]) {\n\n  vec2 result64[4];\n  vec2 position64[4];\n  position64[0] = vec2(pos.x, pos64xyLow.x);\n  position64[1] = vec2(pos.y, pos64xyLow.y);\n  position64[2] = vec2(0., 0.);\n  position64[3] = vec2(1., 0.);\n  mat4_vec4_mul_fp64(uProjectionMatrixFP64, position64,\n  result64);\n\n  pixelXY64[0] = div_fp64(result64[0], result64[3]);\n  pixelXY64[1] = div_fp64(result64[1], result64[3]);\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec2 windowPos = positions;\n  vec2 windowPos64xyLow = positions64xyLow;\n  if (projectPoints) {\n    vec2 projectedXY[2];\n    project_position_fp64(windowPos, windowPos64xyLow, projectedXY);\n    windowPos.x = projectedXY[0].x;\n    windowPos.y = projectedXY[1].x;\n    windowPos64xyLow.x = projectedXY[0].y;\n    windowPos64xyLow.y = projectedXY[1].y;\n  }\n\n  vec2 pixelXY64[2];\n  project_to_pixel(windowPos, windowPos64xyLow, pixelXY64);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  vec2 gridXY64[2];\n  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));\n  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));\n  float x = floor(gridXY64[0].x);\n  float y = floor(gridXY64[1].x);\n  vec2 pos = vec2(x, y);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n":"#define SHADER_NAME gpu-aggregation-to-grid-vs\n\nattribute vec2 positions;\nattribute vec3 weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform mat4 uProjectionMatrix;\nuniform bool projectPoints;\n\nvarying vec3 vWeights;\n\nvec2 project_to_pixel(vec4 pos) {\n  vec4 result =  uProjectionMatrix * pos;\n  return result.xy/result.w;\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec4 windowPos = vec4(positions, 0, 1.);\n  if (projectPoints) {\n    windowPos = project_position_to_clipspace(vec3(positions, 0), vec2(0, 0), vec3(0, 0, 0));\n  }\n\n  vec2 pos = project_to_pixel(windowPos);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  pos = floor(pos / cellSize);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n",fs:"#define SHADER_NAME gpu-aggregation-to-grid-fs\n\nprecision highp float;\n\nvarying vec3 vWeights;\n\nvoid main(void) {\n  gl_FragColor = vec4(vWeights, 1.0);\n}\n",modules:e?["fp64","project64"]:["project32"],shaderCache:r,vertexCount:0,drawMode:K.a.POINTS})}},{key:"getAllAggregationModel",value:function getAllAggregationModel(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.gl,t=this.shaderCache;return new o.h(e,{id:"All-Aggregation-Model",vs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-vs-64\n\nin vec2 position;\nuniform vec2 gridSize;\n\nout vec2 vTextureCoord;\nvoid main(void) {\n  // Map each position to single pixel\n  vec2 pos = vec2(-1.0, -1.0);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  float yIndex = floor(float(gl_InstanceID) / gridSize[0]);\n  float xIndex = float(gl_InstanceID) - (yIndex * gridSize[0]);\n\n  vec2 yIndexFP64 = vec2(yIndex, 0.);\n  vec2 xIndexFP64 = vec2(xIndex, 0.);\n  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);\n  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);\n\n  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);\n  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);\n\n  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);\n}\n",fs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-fs\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform bool combineMaxMin;\nout vec4 fragColor;\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  if (textureColor.a == 0.) {\n    discard;\n  }\n  fragColor.rgb = textureColor.rgb;\n  // if combineMinMax is true, use Alpha channel for first weights min value.\n  fragColor.a = combineMaxMin ? textureColor.r : textureColor.a;\n}\n",modules:["fp64"],shaderCache:t,vertexCount:1,drawMode:K.a.POINTS,isInstanced:!0,instanceCount:0,attributes:{position:new o.b(e,{size:2,data:new Float32Array([0,0])})}})}},{key:"getMeanTransform",value:function getMeanTransform(e){return this.meanTransform?this.meanTransform.update(e):this.meanTransform=new o.j(this.gl,Object.assign({},{vs:"#define SHADER_NAME gpu-aggregation-transform-mean-vs\nattribute vec4 aggregationValues;\nvarying vec4 meanValues;\n\nvoid main()\n{\n  // TODO: Use 64-bit division ?? not needed given this is aggregation ??\n  bool isCellValid = bool(aggregationValues.w > 0.);\n  // aggregationValues:  XYZ contain aggregated values, W contains count\n  meanValues.xyz = isCellValid ? aggregationValues.xyz/aggregationValues.w : vec3(0, 0, 0);\n  meanValues.w = aggregationValues.w;\n}\n",_targetTextureVarying:"meanValues"},e)),this.meanTransform}},{key:"renderAggregateData",value:function renderAggregateData(e){var t=e.cellSize,r=e.viewport,n=e.gridTransformMatrix,i=e.projectPoints,o=this.state,a=o.numCol,s=o.numRow,l=o.windowSize,u=o.maxMinFramebuffers,c=o.minFramebuffers,p=o.maxFramebuffers,h=o.weights,f=$r(n),d=[a,s],g={blend:!0,depthTest:!1,blendFunc:[K.a.ONE,K.a.ONE]},m={viewport:r},y={windowSize:l,cellSize:t,gridSize:d,uProjectionMatrix:n,uProjectionMatrixFP64:f,projectPoints:i};for(var v in h){var _=h[v],b=_.needMin,x=_.needMax,w=b&&x&&h[v].combineMaxMin;this.renderToWeightsTexture({id:v,parameters:g,moduleSettings:m,uniforms:y,gridSize:d}),w?this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Zr}),gridSize:d,minOrMaxFb:u[v],clearParams:{clearColor:[0,0,0,3.402823466e38]},combineMaxMin:w}):(b&&this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Xr}),gridSize:d,minOrMaxFb:c[v],clearParams:{clearColor:[3.402823466e38,3.402823466e38,3.402823466e38,0]},combineMaxMin:w}),x&&this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Kr}),gridSize:d,minOrMaxFb:p[v],combineMaxMin:w}))}}},{key:"renderToMaxMinTexture",value:function renderToMaxMinTexture(e){var t=e.id,r=e.parameters,n=e.gridSize,i=e.minOrMaxFb,a=e.combineMaxMin,s=e.clearParams,l=void 0===s?{}:s,u=this.state.framebuffers,c=this.gl,p=this.allAggregationModel;i.bind(),c.viewport(0,0,n[0],n[1]),Object(o.E)(c,l,function(){c.clear(c.COLOR_BUFFER_BIT)}),p.draw({parameters:r,uniforms:{uSampler:u[t].texture,gridSize:n,combineMaxMin:a}}),i.unbind()}},{key:"renderToWeightsTexture",value:function renderToWeightsTexture(e){var t=e.id,r=e.parameters,n=e.moduleSettings,i=e.uniforms,a=e.gridSize,s=this.state,l=s.framebuffers,u=s.equations,c=s.weightAttributes,p=s.weights,h=this.gl,f=this.gridAggregationModel,d=p[t].operation;l[t].bind(),h.viewport(0,0,a[0],a[1]);var g=d===Gr.MIN?[3.402823466e38,3.402823466e38,3.402823466e38,0]:[0,0,0,0];Object(o.E)(h,{clearColor:g},function(){h.clear(h.COLOR_BUFFER_BIT)});var m={weights:c[t]};if(f.draw({parameters:Object.assign({},r,{blendEquation:u[t]}),moduleSettings:n,uniforms:i,attributes:m}),l[t].unbind(),d===Gr.MEAN){var y=this.state,v=y.meanTextures,_=y.textures,b={_sourceTextures:{aggregationValues:v[t]},_targetTexture:_[t],elementCount:_[t].width*_[t].height};this.getMeanTransform(b).run({parameters:{blend:!1,depthTest:!1}}),l[t].attach(gpu_grid_aggregator_defineProperty({},K.a.COLOR_ATTACHMENT0,_[t]))}}},{key:"runAggregationOnGPU",value:function runAggregationOnGPU(e){return this.updateModels(e),this.setupFramebuffers(e),this.renderAggregateData(e),this.getAggregateData(e)}},{key:"setupFramebuffers",value:function setupFramebuffers(e){var t=this.state,r=t.numCol,n=t.numRow,i=t.textures,o=t.framebuffers,a=t.maxMinFramebuffers,s=t.minFramebuffers,l=t.maxFramebuffers,u=t.meanTextures,c=t.equations,p=t.weights,h={width:r,height:n};for(var f in p){var d=p[f],g=d.needMin,m=d.needMax,y=d.combineMaxMin,v=d.operation;i[f]=p[f].aggregationTexture||i[f]||getFloatTexture(this.gl,{id:"".concat(f,"-texture"),width:r,height:n}),i[f].resize(h);var _=i[f];v===Gr.MEAN&&(u[f]=u[f]||getFloatTexture(this.gl,{id:"".concat(f,"-mean-texture"),width:r,height:n}),u[f].resize(h),_=u[f]),o[f]?o[f].attach(gpu_grid_aggregator_defineProperty({},K.a.COLOR_ATTACHMENT0,_)):o[f]=getFramebuffer(this.gl,{id:"".concat(f,"-fb"),width:r,height:n,texture:_}),o[f].resize(h),c[f]=Yr[v],(g||m)&&(g&&m&&y?a[f]=a[f]||getFramebuffer(this.gl,{id:"".concat(f,"-maxMinFb")}):(g&&(s[f]=s[f]||getFramebuffer(this.gl,{id:"".concat(f,"-minFb")})),m&&(l[f]=l[f]||getFramebuffer(this.gl,{id:"".concat(f,"-maxFb")}))))}}},{key:"setupModels",value:function setupModels(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.gridAggregationModel&&this.gridAggregationModel.delete(),this.gridAggregationModel=this.getAggregationModel(e),this.allAggregationModel&&this.allAggregationModel.delete(),this.allAggregationModel=this.getAllAggregationModel(e)}},{key:"setupWeightAttributes",value:function setupWeightAttributes(e){var t=this.state,r=t.weightAttributes,n=t.vertexCount,i=t.weights;for(var a in i){var s=i[a].values;if(Array.isArray(s)||s.constructor===Float32Array){assert(s.length/3===n);var l=Array.isArray(s)?new Float32Array(s):s;r[a]instanceof o.b?r[a].setData(l):r[a]=new o.b(this.gl,l)}else assert(s instanceof o.b),r[a]=s}}},{key:"updateModels",value:function updateModels(e){var t=this.gl,r=e.positions,n=e.positions64xyLow,i=e.changeFlags,a=this.state,s=a.numCol,l=a.numRow,u=this.state,c=u.positionsBuffer,p=u.positions64xyLowBuffer,h={},f=!1;if(e.fp64!==this.state.fp64&&(this.setupModels(e.fp64),this.setState({fp64:e.fp64}),e.fp64&&(f=!0)),i.dataChanged||!c){c&&c.delete();var d=r.length/2;c=new o.b(t,new Float32Array(r)),f=e.fp64,Object.assign(h,{positions:c}),this.setState({positionsBuffer:c,vertexCount:d}),this.setupWeightAttributes(e),this.gridAggregationModel.setVertexCount(d)}f&&(assert(n),p&&p.delete(),p=new o.b(t,{size:2,data:new Float32Array(n)}),Object.assign(h,{positions64xyLow:p}),this.setState({positions64xyLowBuffer:p})),this.gridAggregationModel.setAttributes(h),(i.cellSizeChanged||i.viewportChanged)&&this.allAggregationModel.setInstanceCount(s*l)}}]),GPUGridAggregator}();function grid_aggregation_utils_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function grid_aggregation_utils_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function grid_aggregation_utils_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var tn=o.t.fp64LowPart,rn=6378e3;function pointToDensityGridData(e){var t=e.data,r=e.getPosition,n=e.cellSizeMeters,i=e.gpuGridAggregator,o=e.gpuAggregation,a=e.aggregationFlags,s=e.getWeight,l=void 0===s?function(e){return[1,0,0]}:s,u=e.fp64,c=void 0!==u&&u,h=e.coordinateSystem,f=void 0===h?p.LNGLAT:h,d=e.viewport,g=void 0===d?null:d,m=e.boundingBox,y=void 0===m?null:m,v={};assert(a.dataChanged||a.cellSizeChanged||a.viewportChanged),a.dataChanged&&(y=(v=parseGridData(t,r,l)).boundingBox);var _=[n,n],b=[0,0];switch(assert(f===p.LNGLAT||f===p.IDENTITY),assert(y),f){case p.LNGLAT:case p.LNGLAT_DEPRECATED:var x=getGridOffset(y,n);_=[x.xOffset,x.yOffset],b=[-180,-90];break;case p.IDENTITY:b=[-g.width/2,-g.height/2];break;default:assert(!1)}var w=getGPUAggregationParams({boundingBox:y,cellSize:_,worldOrigin:b}),S=i.run({positions:v.positions,positions64xyLow:v.positions64xyLow,weights:v.weights,cellSize:_,width:w.width,height:w.height,gridTransformMatrix:w.gridTransformMatrix,useGPU:o,changeFlags:a,fp64:c});return{countsBuffer:S.weight1.aggregationBuffer,maxCountBuffer:S.weight1.maxBuffer,countsData:S.weight1.aggregationData,maxCountData:S.weight1.maxData,gridSize:w.gridSize,gridOrigin:w.gridOrigin,cellSize:_,boundingBox:y}}function parseGridData(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;assert(e&&t);for(var n,i,o,a=[],s=[],l=[],u=1/0,c=-1/0,p=1/0,h=-1/0,f=0;f<e.length;f++){var d=t(e[f]);i=d[0],n=d[1],a.push(i,n),s.push(tn(i),tn(n));var g=r?r(e[f]):[1,0,0];Array.isArray(g)||(g=[g,0,0]),assert(3===g.length),l.push.apply(l,grid_aggregation_utils_arrayWithoutHoles(o=g)||grid_aggregation_utils_iterableToArray(o)||grid_aggregation_utils_nonIterableSpread()),Number.isFinite(n)&&Number.isFinite(i)&&(u=n<u?n:u,c=n>c?n:c,p=i<p?i:p,h=i>h?i:h)}return{positions:a,positions64xyLow:s,weights:{weight1:{size:1,operation:Gr.SUM,needMax:!0,values:l}},boundingBox:{xMin:p,xMax:h,yMin:u,yMax:c}}}function getGridOffset(e,t){return calculateGridLatLonOffset(t,(e.yMin+e.yMax)/2)}function calculateGridLatLonOffset(e,t){var r;return{yOffset:e/rn*(180/Math.PI),xOffset:(r=t,e/rn*(180/Math.PI)/Math.cos(r*Math.PI/180))}}function alignToCell(e,t){var r=e<0?-1:1,n=r<0?Math.abs(e)+t:Math.abs(e);return(n=Math.floor(n/t)*t)*r}function getGPUAggregationParams(e){var t=e.boundingBox,r=e.cellSize,n=e.worldOrigin,i=t.yMin,o=t.yMax,a=t.xMin,s=t.xMax,l=alignToCell(a-n[0],r[0])+n[0],u=alignToCell(i-n[1],r[1])+n[1],c=(new De.a).translate([-1*l,-1*u,0]),p=[l,u],h=s-a+r[0],f=o-i+r[1];return{gridOrigin:p,gridSize:[Math.ceil(h/r[0]),Math.ceil(f/r[1])],width:h,height:f,gridTransformMatrix:c}}r.d(t,"h",function(){return nn}),r.d(t,"c",function(){return br}),r.d(t,"d",function(){return Ee}),r.d(t,"b",function(){return xr}),r.d(t,"e",function(){return tt}),r.d(t,"i",function(){return i}),r.d(t,"f",function(){return en}),r.d(t,"a",function(){return Gr}),r.d(t,"g",function(){return pointToDensityGridData});var nn={BinSorter:Br,Tesselator:qr,linearScale:function linearScale(e,t,r){return(r-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]},getLinearScale:function getLinearScale(e,t){return function(r){return(r-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}},quantizeScale:quantizeScale,getQuantizeScale:function getQuantizeScale(e,t){return function(r){return quantizeScale(e,t,r)}},defaultColorRange:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],flattenVertices:function flattenVertices(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.result,n=void 0===r?[]:r,i=t.dimensions,o=void 0===i?3:i,a=-1,s=0;++a<e.length;){var l=e[a];Array.isArray(l)||ArrayBuffer.isView(l)?flattenVertices(l,{result:n,dimensions:o}):s<o&&(n.push(l),s++)}return s>0&&s<o&&n.push(0),n},fillArray:fillArray}},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return o});var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI},function(e,t,r){"use strict";function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}r.d(t,"a",function(){return _slicedToArray})},function(e,t,r){"use strict";function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",function(){return _assertThisInitialized})},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return checkNumber}),r.d(t,"f",function(){return formatValue}),r.d(t,"h",function(){return radians}),r.d(t,"d",function(){return degrees}),r.d(t,"b",function(){return clamp}),r.d(t,"g",function(){return lerp}),r.d(t,"e",function(){return equals});var n={};function checkNumber(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function round(e){return Math.round(e/n.EPSILON)*n.EPSILON}function formatValue(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,r=void 0===t?n.precision||4:t;return e=round(e),parseFloat(e.toPrecision(r))}function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function map(e,t){if(isArray(e)){for(var r=(i=e).clone?i.clone():new Array(i),n=0;n<r.length;++n)r[n]=t(r[n],n,r);return r}var i;return t(e)}function radians(e){return map(e,function(e){return e/180*Math.PI})}function degrees(e){return map(e,function(e){return 180*e/Math.PI})}function clamp(e,t,r){return map(e,function(e){return Math.max(t,Math.min(r,e))})}function lerp(e,t,r){return isArray(e)?e.map(function(e,n){return lerp(e,t[n],r)}):r*t+(1-r)*e}function equals(e,t){if(isArray(e)&&isArray(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!equals(e[r],t[r]))return!1;return!0}return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}n.EPSILON=1e-12,n.debug=!0,n.precision=4,n.printTypes=!1,n.printDegrees=!1,n.printRowMajor=!0},function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(18),u=r(29),c=r(47),p=r(8),h=r(40),f=r(6),d=r(5),g=function(e){function Buffer(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,Buffer),(t=Object(o.a)(this,Object(a.a)(Buffer).call(this,e,r))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),t.target=r.target||(t.gl.webgl2?36662:34962),t._initialize(r),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(Buffer,e),Object(i.a)(Buffer,[{key:"getElementCount",value:function getElementCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerElement(e))}},{key:"getVertexCount",value:function getVertexCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerVertex(e))}},{key:"initialize",value:function initialize(e){return this._initialize(e)}},{key:"setProps",value:function setProps(e){return"data"in e&&this.setData(e),this}},{key:"setAccessor",value:function setAccessor(e){return this.accessor=e,this}},{key:"reallocate",value:function reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function setData(e){return this.initialize(e)}},{key:"subData",value:function subData(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,r=t.data,n=t.offset,i=void 0===n?0:n,o=t.srcOffset,a=void 0===o?0:o,s=e.byteLength||e.length;Object(d.a)(r);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==a||void 0!==s?(Object(p.d)(this.gl),this.gl.bufferSubData(this.target,i,r,a,s)):this.gl.bufferSubData(l,i,r),this.gl.bindBuffer(l,null),this.debugData=null,this.accessor.type||this.setAccessor(new c.a(this.accessor,{type:Object(h.b)(r)})),this}},{key:"copyData",value:function copyData(e){var t=e.sourceBuffer,r=e.readOffset,n=void 0===r?0:r,i=e.writeOffset,o=void 0===i?0:i,a=e.size,s=this.gl;return Object(p.d)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,r=void 0===t?null:t,n=e.srcByteOffset,i=void 0===n?0:n,o=e.dstOffset,a=void 0===o?0:o,s=e.length,l=void 0===s?0:s;Object(p.d)(this.gl);var u,c,f=Object(h.c)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(i),m=a;r?u=(c=r.length)-m:c=m+(u=Math.min(g,l||g));var y=Math.min(g,u);return l=l||y,Object(d.a)(l<=y),r=r||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,r,a,l),this.gl.bindBuffer(36662,null),r}},{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=void 0===n?this.accessor&&this.accessor.index:n,o=e.offset,a=void 0===o?0:o,s=e.size;return 35345===r||35982===r?void 0!==s?this.gl.bindBufferRange(r,i,this.handle,a,s):(Object(d.a)(0===a),this.gl.bindBufferBase(r,i,this.handle)):this.gl.bindBuffer(r,this.handle),this}},{key:"unbind",value:function unbind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=void 0===n?this.accessor&&this.accessor.index:n;return 35345===r||35982===r?this.gl.bindBufferBase(r,i,null):this.gl.bindBuffer(r,null),this}},{key:"getDebugData",value:function getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function invalidateDebugData(){this.debugData=null}},{key:"_initialize",value:function _initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e.bytes&&f.g.deprecated("bytes","byteLength");var t=e.byteLength||e.bytes||0;return this.usage=e.usage||35044,this.setAccessor(new c.a(e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(t)}},{key:"_setData",value:function _setData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(ArrayBuffer.isView(e));var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,e,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=e.slice(0,10),this.byteLength=e.byteLength,this.bytesUsed=e.byteLength;var n=Object(h.b)(e);return Object(d.a)(n),this.setAccessor(new c.a(this.accessor,{type:n})),this}},{key:"_setByteLength",value:function _setByteLength(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(e>=0);var r=e;0===e&&(r=new Float32Array(0));var n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=null,this.byteLength=e,this.bytesUsed=e,this}},{key:"_getTarget",value:function _getTarget(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function _getAvailableElementCount(e){var t=e/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_createHandle",value:function _createHandle(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function _getParameter(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"updateAccessor",value:function updateAccessor(e){return f.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new c.a(this.accessor,e),this}},{key:"setByteLength",value:function setByteLength(e){return f.g.deprecated("setByteLength","reallocate"),this.reallocate(e)}},{key:"data",get:function get(){f.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function get(){return f.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),Buffer}(u.a)},function(e,t,r){"use strict";function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}r.d(t,"a",function(){return _toConsumableArray})},function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return i}),r.d(t,"a",function(){return o});var n={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=n.window||n.self||n.global,o=n.global||n.self||n.window}).call(this,r(28))},function(e,t,r){"use strict";r.r(t);var n=r(184),i=r.n(n)()(null);t.default=i},function(e,t,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var r={}.hasOwnProperty;function classNames(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var o=classNames.apply(null,n);o&&e.push(o)}else if("object"===i)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(n=function(){return classNames}.apply(t,[]))||(e.exports=n)}()},function(e,t,r){"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(e){return typeof e}:function _typeof2(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(e){return _typeof2(e)}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}r.d(t,"a",function(){return _typeof})},function(e,t,r){"use strict";r.d(t,"b",function(){return setParameters}),r.d(t,"c",function(){return withParameters});var n=r(17),i=r(21),o=r(64),a=r(51);r.d(t,"a",function(){return a.c});var s=r(6),l=r(5),u={framebuffer:function framebuffer(e,t){var r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:function blend(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function blendColor(e,t){return e.blendColor.apply(e,Object(i.a)(t))},blendEquation:function blendEquation(e,t){t=isArray(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(i.a)(t))},blendFunc:function blendFunc(e,t){t=isArray(t)&&2===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,e.blendFuncSeparate.apply(e,Object(i.a)(t))},clearColor:function clearColor(e,t){return e.clearColor.apply(e,Object(i.a)(t))},clearDepth:function clearDepth(e,t){return e.clearDepth(t)},clearStencil:function clearStencil(e,t){return e.clearStencil(t)},colorMask:function colorMask(e,t){return e.colorMask.apply(e,Object(i.a)(t))},cull:function cull(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function cullFace(e,t){return e.cullFace(t)},depthTest:function depthTest(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function depthFunc(e,t){return e.depthFunc(t)},depthMask:function depthMask(e,t){return e.depthMask(t)},depthRange:function depthRange(e,t){return e.depthRange.apply(e,Object(i.a)(t))},dither:function dither(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function derivativeHint(e,t){e.hint(35723,t)},frontFace:function frontFace(e,t){return e.frontFace(t)},mipmapHint:function mipmapHint(e,t){return e.hint(33170,t)},lineWidth:function lineWidth(e,t){return e.lineWidth(t)},polygonOffsetFill:function polygonOffsetFill(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function polygonOffset(e,t){return e.polygonOffset.apply(e,Object(i.a)(t))},sampleCoverage:function sampleCoverage(e,t){return e.sampleCoverage.apply(e,Object(i.a)(t))},scissorTest:function scissorTest(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function scissor(e,t){return e.scissor.apply(e,Object(i.a)(t))},stencilTest:function stencilTest(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function stencilMask(e,t){var r=t=isArray(t)?t:[t,t],i=Object(n.a)(r,2),o=i[0],a=i[1];e.stencilMaskSeparate(1028,o),e.stencilMaskSeparate(1029,a)},stencilFunc:function stencilFunc(e,t){var r=t=isArray(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,o=Object(n.a)(r,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],p=o[5];e.stencilFuncSeparate(1028,a,s,l),e.stencilFuncSeparate(1029,u,c,p)},stencilOp:function stencilOp(e,t){var r=t=isArray(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,o=Object(n.a)(r,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],p=o[5];e.stencilOpSeparate(1028,a,s,l),e.stencilOpSeparate(1029,u,c,p)},viewport:function viewport(e,t){return e.viewport.apply(e,Object(i.a)(t))}};function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function setParameters(e,t){for(var r in Object(a.d)(e,t),t){var n=u[r];n&&n(e,t[r],r)}}function withParameters(e,t,r){if(Object(s.d)(t))return r(e);var n,i=t.nocatch,a=void 0===i||i;if(Object(l.a)(!t.frameBuffer),Object(o.c)(e),setParameters(e,t),a)n=r(e),Object(o.b)(e);else try{n=r(e)}finally{Object(o.b)(e)}return n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,o=new Map,a=function isReady(){return i&&window.__SEER_INITIALIZED__},s=function throttle(e,t){var r=o.get(e),n=Date.now();return!!(r&&n-r<t)||(o.set(e,n),!1)},l=function replacer(e){return function(t,r){if(!r||"object"!==(void 0===r?"undefined":n(r))||!e.has(r))return e.add(r),Object.prototype.toString.call(r).slice(8,-1).includes("Array")?Array.prototype.slice.call(r,0,20):r}},u=function send(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&a()){var r=new Set,n=JSON.stringify(t,l(r));try{window.postMessage({type:e,payload:n,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},c=new Map,p=function listener(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,r=t.type,n=t.payload,i=c.get(r);i&&i.forEach(function(e){return e(n)})}},h=function init(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",p),window.__SEER_LISTENER__=!0)};t.default={send:u,throttle:s,isReady:a,list:function list(e,t){return u("LIST",{key:e,data:t})},listItem:function listItem(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:e,itemKey:t,data:r})},updateItem:function updateItem(e,t,r,n){return u("UPDATE_ITEM",{key:e,itemKey:t,path:r,data:n})},multiUpdate:function multiUpdate(e,t,r){return u("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:r})},deleteItem:function deleteItem(e,t){return u("DELETE_ITEM",{key:e,itemKey:t})},addLog:function addLog(e,t,r){return u("ADD_LOG",{key:e,itemKey:t,msg:r})},listeners:c,listenFor:function listenFor(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||h(),c.get(e).push(t)}},removeListener:function removeListener(e){c.forEach(function(t,r){c.set(r,t.filter(function(t){return t!==e}))})},init:h,clean:function clean(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",p),delete window.__SEER_LISTENER__)}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(3),i=r(4),o=r(117),a=r(8),s=r(6),l=r(5),u="Resource subclass must define virtual methods",c=function(){function Resource(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,Resource),Object(a.e)(e);var r=t.id,i=t.userData,o=void 0===i?{}:i;this.gl=e,this.id=r||Object(s.i)(this.constructor.name),this.userData=o,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(Resource,[{key:"toString",value:function toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function _delete(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),r&&t&&r.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function bind(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function unbind(){this.bind(null)}},{key:"getParameter",value:function getParameter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(a.j)(this.gl,e),Object(l.a)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var n=Object(a.n)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var i=r.webgl1,o="webgl2"in r?r.webgl2:r.webgl1;return n?o:i}}return this._getParameter(e,t)}},{key:"getParameters",value:function getParameters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,n=t.keys,i=this.constructor.PARAMETERS||{},o=Object(a.n)(this.gl),s={},l=r||Object.keys(i),u=!0,c=!1,p=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value,g=i[d];if(g&&(!("webgl2"in g)||o)&&(!("extension"in g)||this.gl.getExtension(g.extension))){var m=n?Object(a.i)(this.gl,d):d;s[m]=this.getParameter(d,e),n&&"GLenum"===g.type&&(s[m]=Object(a.i)(this.gl,s[m]))}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return s}},{key:"setParameter",value:function setParameter(e,t){e=Object(a.j)(this.gl,e),Object(l.a)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var n=Object(a.n)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=Object(a.j)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function setParameters(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function stubRemovedMethods(e,t,r){return Object(s.h)(this,e,t,r)}},{key:"initialize",value:function initialize(e){}},{key:"_createHandle",value:function _createHandle(){throw new Error(u)}},{key:"_deleteHandle",value:function _deleteHandle(){throw new Error(u)}},{key:"_bindHandle",value:function _bindHandle(){throw new Error(u)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){throw new Error(u)}},{key:"_getParameter",value:function _getParameter(e,t){throw new Error(u)}},{key:"_setParameter",value:function _setParameter(e,t){throw new Error(u)}},{key:"_context",value:function _context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function _addStats(){var e=this.constructor.name,t=o.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{created:0,active:0},t.resourceMap[e].created++,t.resourceMap[e].active++}},{key:"_removeStats",value:function _removeStats(){var e=this.constructor.name;o.default.stats.resourceMap[e].active--}},{key:"handle",get:function get(){return this._handle}}]),Resource}()},function(e,t,r){"use strict";r.r(t),r.d(t,"version",function(){return De}),r.d(t,"Collection",function(){return c}),r.d(t,"Iterable",function(){return Ne}),r.d(t,"Seq",function(){return P}),r.d(t,"Map",function(){return Y}),r.d(t,"OrderedMap",function(){return ge}),r.d(t,"List",function(){return ue}),r.d(t,"Stack",function(){return ye}),r.d(t,"Set",function(){return xe}),r.d(t,"OrderedSet",function(){return Oe}),r.d(t,"Record",function(){return Re}),r.d(t,"Range",function(){return Pe}),r.d(t,"Repeat",function(){return je}),r.d(t,"is",function(){return is}),r.d(t,"fromJS",function(){return fromJS}),r.d(t,"hash",function(){return hash}),r.d(t,"isImmutable",function(){return isImmutable}),r.d(t,"isCollection",function(){return isCollection}),r.d(t,"isKeyed",function(){return isKeyed}),r.d(t,"isIndexed",function(){return isIndexed}),r.d(t,"isAssociative",function(){return isAssociative}),r.d(t,"isOrdered",function(){return isOrdered}),r.d(t,"isValueObject",function(){return isValueObject}),r.d(t,"get",function(){return get}),r.d(t,"getIn",function(){return getIn}),r.d(t,"has",function(){return has}),r.d(t,"hasIn",function(){return hasIn}),r.d(t,"merge",function(){return merge$1}),r.d(t,"mergeDeep",function(){return mergeDeep}),r.d(t,"mergeWith",function(){return mergeWith$1}),r.d(t,"mergeDeepWith",function(){return mergeDeepWith}),r.d(t,"remove",function(){return remove}),r.d(t,"removeIn",function(){return removeIn}),r.d(t,"set",function(){return set}),r.d(t,"setIn",function(){return setIn}),r.d(t,"update",function(){return update}),r.d(t,"updateIn",function(){return updateIn});var n=5,i=1<<n,o=i-1,a={};function SetRef(e){e&&(e.value=!0)}function OwnerID(){}function ensureSize(e){return void 0===e.size&&(e.size=e.__iterate(returnTrue)),e.size}function wrapIndex(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?ensureSize(e)+t:t}function returnTrue(){return!0}function wholeSlice(e,t,r){return(0===e&&!isNeg(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function resolveBegin(e,t){return resolveIndex(e,t,0)}function resolveEnd(e,t){return resolveIndex(e,t,t)}function resolveIndex(e,t,r){return void 0===e?r:isNeg(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function isNeg(e){return e<0||0===e&&1/e==-1/0}var s="@@__IMMUTABLE_ITERABLE__@@";function isCollection(e){return Boolean(e&&e[s])}var l="@@__IMMUTABLE_KEYED__@@";function isKeyed(e){return Boolean(e&&e[l])}var u="@@__IMMUTABLE_INDEXED__@@";function isIndexed(e){return Boolean(e&&e[u])}function isAssociative(e){return isKeyed(e)||isIndexed(e)}var c=function Collection(e){return isCollection(e)?e:P(e)},p=function(e){function KeyedCollection(e){return isKeyed(e)?e:C(e)}return e&&(KeyedCollection.__proto__=e),KeyedCollection.prototype=Object.create(e&&e.prototype),KeyedCollection.prototype.constructor=KeyedCollection,KeyedCollection}(c),h=function(e){function IndexedCollection(e){return isIndexed(e)?e:T(e)}return e&&(IndexedCollection.__proto__=e),IndexedCollection.prototype=Object.create(e&&e.prototype),IndexedCollection.prototype.constructor=IndexedCollection,IndexedCollection}(c),f=function(e){function SetCollection(e){return isCollection(e)&&!isAssociative(e)?e:k(e)}return e&&(SetCollection.__proto__=e),SetCollection.prototype=Object.create(e&&e.prototype),SetCollection.prototype.constructor=SetCollection,SetCollection}(c);c.Keyed=p,c.Indexed=h,c.Set=f;var d="@@__IMMUTABLE_SEQ__@@";function isSeq(e){return Boolean(e&&e[d])}var g="@@__IMMUTABLE_RECORD__@@";function isRecord(e){return Boolean(e&&e[g])}function isImmutable(e){return isCollection(e)||isRecord(e)}var m="@@__IMMUTABLE_ORDERED__@@";function isOrdered(e){return Boolean(e&&e[m])}var y=0,v=1,_=2,b="function"==typeof Symbol&&Symbol.iterator,x="@@iterator",w=b||x,S=function Iterator(e){this.next=e};function iteratorValue(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function iteratorDone(){return{value:void 0,done:!0}}function hasIterator(e){return!!getIteratorFn(e)}function isIterator(e){return e&&"function"==typeof e.next}function getIterator(e){var t=getIteratorFn(e);return t&&t.call(e)}function getIteratorFn(e){var t=e&&(b&&e[b]||e[x]);if("function"==typeof t)return t}S.prototype.toString=function toString(){return"[Iterator]"},S.KEYS=y,S.VALUES=v,S.ENTRIES=_,S.prototype.inspect=S.prototype.toSource=function(){return this.toString()},S.prototype[w]=function(){return this};var E=Object.prototype.hasOwnProperty;function isArrayLike(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var P=function(e){function Seq(e){return null==e?emptySequence():isImmutable(e)?e.toSeq():seqFromValue(e)}return e&&(Seq.__proto__=e),Seq.prototype=Object.create(e&&e.prototype),Seq.prototype.constructor=Seq,Seq.prototype.toSeq=function toSeq(){return this},Seq.prototype.toString=function toString(){return this.__toString("Seq {","}")},Seq.prototype.cacheResult=function cacheResult(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Seq.prototype.__iterate=function __iterate(e,t){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[t?n-++i:i++];if(!1===e(o[1],o[0],this))break}return i}return this.__iterateUncached(e,t)},Seq.prototype.__iterator=function __iterator(e,t){var r=this._cache;if(r){var n=r.length,i=0;return new S(function(){if(i===n)return{value:void 0,done:!0};var o=r[t?n-++i:i++];return iteratorValue(e,o[0],o[1])})}return this.__iteratorUncached(e,t)},Seq}(c),C=function(e){function KeyedSeq(e){return null==e?emptySequence().toKeyedSeq():isCollection(e)?isKeyed(e)?e.toSeq():e.fromEntrySeq():isRecord(e)?e.toSeq():keyedSeqFromValue(e)}return e&&(KeyedSeq.__proto__=e),KeyedSeq.prototype=Object.create(e&&e.prototype),KeyedSeq.prototype.constructor=KeyedSeq,KeyedSeq.prototype.toKeyedSeq=function toKeyedSeq(){return this},KeyedSeq}(P),T=function(e){function IndexedSeq(e){return null==e?emptySequence():isCollection(e)?isKeyed(e)?e.entrySeq():e.toIndexedSeq():isRecord(e)?e.toSeq().entrySeq():indexedSeqFromValue(e)}return e&&(IndexedSeq.__proto__=e),IndexedSeq.prototype=Object.create(e&&e.prototype),IndexedSeq.prototype.constructor=IndexedSeq,IndexedSeq.of=function of(){return IndexedSeq(arguments)},IndexedSeq.prototype.toIndexedSeq=function toIndexedSeq(){return this},IndexedSeq.prototype.toString=function toString(){return this.__toString("Seq [","]")},IndexedSeq}(P),k=function(e){function SetSeq(e){return(isCollection(e)&&!isAssociative(e)?e:T(e)).toSetSeq()}return e&&(SetSeq.__proto__=e),SetSeq.prototype=Object.create(e&&e.prototype),SetSeq.prototype.constructor=SetSeq,SetSeq.of=function of(){return SetSeq(arguments)},SetSeq.prototype.toSetSeq=function toSetSeq(){return this},SetSeq}(P);P.isSeq=isSeq,P.Keyed=C,P.Set=k,P.Indexed=T,P.prototype[d]=!0;var O=function(e){function ArraySeq(e){this._array=e,this.size=e.length}return e&&(ArraySeq.__proto__=e),ArraySeq.prototype=Object.create(e&&e.prototype),ArraySeq.prototype.constructor=ArraySeq,ArraySeq.prototype.get=function get(e,t){return this.has(e)?this._array[wrapIndex(this,e)]:t},ArraySeq.prototype.__iterate=function __iterate(e,t){for(var r=this._array,n=r.length,i=0;i!==n;){var o=t?n-++i:i++;if(!1===e(r[o],o,this))break}return i},ArraySeq.prototype.__iterator=function __iterator(e,t){var r=this._array,n=r.length,i=0;return new S(function(){if(i===n)return{value:void 0,done:!0};var o=t?n-++i:i++;return iteratorValue(e,o,r[o])})},ArraySeq}(T),A=function(e){function ObjectSeq(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}return e&&(ObjectSeq.__proto__=e),ObjectSeq.prototype=Object.create(e&&e.prototype),ObjectSeq.prototype.constructor=ObjectSeq,ObjectSeq.prototype.get=function get(e,t){return void 0===t||this.has(e)?this._object[e]:t},ObjectSeq.prototype.has=function has(e){return E.call(this._object,e)},ObjectSeq.prototype.__iterate=function __iterate(e,t){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var a=n[t?i-++o:o++];if(!1===e(r[a],a,this))break}return o},ObjectSeq.prototype.__iterator=function __iterator(e,t){var r=this._object,n=this._keys,i=n.length,o=0;return new S(function(){if(o===i)return{value:void 0,done:!0};var a=n[t?i-++o:o++];return iteratorValue(e,a,r[a])})},ObjectSeq}(C);A.prototype[m]=!0;var I,R=function(e){function CollectionSeq(e){this._collection=e,this.size=e.length||e.size}return e&&(CollectionSeq.__proto__=e),CollectionSeq.prototype=Object.create(e&&e.prototype),CollectionSeq.prototype.constructor=CollectionSeq,CollectionSeq.prototype.__iterateUncached=function __iterateUncached(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=getIterator(this._collection),n=0;if(isIterator(r))for(var i;!(i=r.next()).done&&!1!==e(i.value,n++,this););return n},CollectionSeq.prototype.__iteratorUncached=function __iteratorUncached(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=getIterator(this._collection);if(!isIterator(r))return new S(iteratorDone);var n=0;return new S(function(){var t=r.next();return t.done?t:iteratorValue(e,n++,t.value)})},CollectionSeq}(T);function emptySequence(){return I||(I=new O([]))}function keyedSeqFromValue(e){var t=Array.isArray(e)?new O(e):hasIterator(e)?new R(e):void 0;if(t)return t.fromEntrySeq();if("object"==typeof e)return new A(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function indexedSeqFromValue(e){var t=maybeIndexedSeqFromValue(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function seqFromValue(e){var t=maybeIndexedSeqFromValue(e);if(t)return t;if("object"==typeof e)return new A(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}function maybeIndexedSeqFromValue(e){return isArrayLike(e)?new O(e):hasIterator(e)?new R(e):void 0}var M="@@__IMMUTABLE_MAP__@@";function isMap(e){return Boolean(e&&e[M])}function isOrderedMap(e){return isMap(e)&&isOrdered(e)}function isValueObject(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function is(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(isValueObject(e)&&isValueObject(t)&&e.equals(t))}var L="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function imul(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function smi(e){return e>>>1&1073741824|3221225471&e}var j=Object.prototype.valueOf;function hash(e){switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return hashNumber(e);case"string":return e.length>V?cachedHashString(e):hashString(e);case"object":case"function":return null===e?1108378658:"function"==typeof e.hashCode?smi(e.hashCode(e)):(e.valueOf!==j&&"function"==typeof e.valueOf&&(e=e.valueOf(e)),hashJSObj(e));case"undefined":return 1108378659;default:if("function"==typeof e.toString)return hashString(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function hashNumber(e){if(e!=e||e===1/0)return 0;var t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return smi(t)}function cachedHashString(e){var t=W[e];return void 0===t&&(t=hashString(e),G===q&&(G=0,W={}),G++,W[e]=t),t}function hashString(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return smi(t)}function hashJSObj(e){var t;if(z&&void 0!==(t=N.get(e)))return t;if(void 0!==(t=e[U]))return t;if(!F){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[U]))return t;if(void 0!==(t=getIENodeHash(e)))return t}if(t=++B,1073741824&B&&(B=0),z)N.set(e,t);else{if(void 0!==D&&!1===D(e))throw new Error("Non-extensible objects are not allowed as keys.");if(F)Object.defineProperty(e,U,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[U]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[U]=t}}return t}var D=Object.isExtensible,F=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function getIENodeHash(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}var N,z="function"==typeof WeakMap;z&&(N=new WeakMap);var B=0,U="__immutablehash__";"function"==typeof Symbol&&(U=Symbol(U));var V=16,q=255,G=0,W={},H=function(e){function ToKeyedSequence(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(ToKeyedSequence.__proto__=e),ToKeyedSequence.prototype=Object.create(e&&e.prototype),ToKeyedSequence.prototype.constructor=ToKeyedSequence,ToKeyedSequence.prototype.get=function get(e,t){return this._iter.get(e,t)},ToKeyedSequence.prototype.has=function has(e){return this._iter.has(e)},ToKeyedSequence.prototype.valueSeq=function valueSeq(){return this._iter.valueSeq()},ToKeyedSequence.prototype.reverse=function reverse(){var e=this,t=reverseFactory(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},ToKeyedSequence.prototype.map=function map(e,t){var r=this,n=mapFactory(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},ToKeyedSequence.prototype.__iterate=function __iterate(e,t){var r=this;return this._iter.__iterate(function(t,n){return e(t,n,r)},t)},ToKeyedSequence.prototype.__iterator=function __iterator(e,t){return this._iter.__iterator(e,t)},ToKeyedSequence}(C);H.prototype[m]=!0;var X=function(e){function ToIndexedSequence(e){this._iter=e,this.size=e.size}return e&&(ToIndexedSequence.__proto__=e),ToIndexedSequence.prototype=Object.create(e&&e.prototype),ToIndexedSequence.prototype.constructor=ToIndexedSequence,ToIndexedSequence.prototype.includes=function includes(e){return this._iter.includes(e)},ToIndexedSequence.prototype.__iterate=function __iterate(e,t){var r=this,n=0;return t&&ensureSize(this),this._iter.__iterate(function(i){return e(i,t?r.size-++n:n++,r)},t)},ToIndexedSequence.prototype.__iterator=function __iterator(e,t){var r=this,n=this._iter.__iterator(v,t),i=0;return t&&ensureSize(this),new S(function(){var o=n.next();return o.done?o:iteratorValue(e,t?r.size-++i:i++,o.value,o)})},ToIndexedSequence}(T),K=function(e){function ToSetSequence(e){this._iter=e,this.size=e.size}return e&&(ToSetSequence.__proto__=e),ToSetSequence.prototype=Object.create(e&&e.prototype),ToSetSequence.prototype.constructor=ToSetSequence,ToSetSequence.prototype.has=function has(e){return this._iter.includes(e)},ToSetSequence.prototype.__iterate=function __iterate(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},ToSetSequence.prototype.__iterator=function __iterator(e,t){var r=this._iter.__iterator(v,t);return new S(function(){var t=r.next();return t.done?t:iteratorValue(e,t.value,t.value,t)})},ToSetSequence}(k),Z=function(e){function FromEntriesSequence(e){this._iter=e,this.size=e.size}return e&&(FromEntriesSequence.__proto__=e),FromEntriesSequence.prototype=Object.create(e&&e.prototype),FromEntriesSequence.prototype.constructor=FromEntriesSequence,FromEntriesSequence.prototype.entrySeq=function entrySeq(){return this._iter.toSeq()},FromEntriesSequence.prototype.__iterate=function __iterate(e,t){var r=this;return this._iter.__iterate(function(t){if(t){validateEntry(t);var n=isCollection(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},FromEntriesSequence.prototype.__iterator=function __iterator(e,t){var r=this._iter.__iterator(v,t);return new S(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){validateEntry(n);var i=isCollection(n);return iteratorValue(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}})},FromEntriesSequence}(C);function flipFactory(e){var t=makeSequence(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=cacheResultThrough,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===_){var n=e.__iterator(t,r);return new S(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===v?y:v,r)},t}function mapFactory(e,t,r){var n=makeSequence(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var o=e.get(n,a);return o===a?i:t.call(r,o,n,e)},n.__iterateUncached=function(n,i){var o=this;return e.__iterate(function(e,i,a){return!1!==n(t.call(r,e,i,a),i,o)},i)},n.__iteratorUncached=function(n,i){var o=e.__iterator(_,i);return new S(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return iteratorValue(n,s,t.call(r,a[1],s,e),i)})},n}function reverseFactory(e,t){var r=this,n=makeSequence(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=flipFactory(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=cacheResultThrough,n.__iterate=function(r,n){var i=this,o=0;return n&&ensureSize(e),e.__iterate(function(e,a){return r(e,t?a:n?i.size-++o:o++,i)},!n)},n.__iterator=function(n,i){var o=0;i&&ensureSize(e);var a=e.__iterator(_,!i);return new S(function(){var e=a.next();if(e.done)return e;var s=e.value;return iteratorValue(n,t?s[0]:i?r.size-++o:o++,s[1],e)})},n}function filterFactory(e,t,r,n){var i=makeSequence(e);return n&&(i.has=function(n){var i=e.get(n,a);return i!==a&&!!t.call(r,i,n,e)},i.get=function(n,i){var o=e.get(n,a);return o!==a&&t.call(r,o,n,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate(function(e,o,l){if(t.call(r,e,o,l))return s++,i(e,n?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(_,o),s=0;return new S(function(){for(;;){var o=a.next();if(o.done)return o;var l=o.value,u=l[0],c=l[1];if(t.call(r,c,u,e))return iteratorValue(i,n?u:s++,c,o)}})},i}function countByFactory(e,t,r){var n=Y().asMutable();return e.__iterate(function(i,o){n.update(t.call(r,i,o,e),0,function(e){return e+1})}),n.asImmutable()}function groupByFactory(e,t,r){var n=isKeyed(e),i=(isOrdered(e)?ge():Y()).asMutable();e.__iterate(function(o,a){i.update(t.call(r,o,a,e),function(e){return(e=e||[]).push(n?[a,o]:o),e})});var o=collectionClass(e);return i.map(function(t){return reify(e,o(t))}).asImmutable()}function sliceFactory(e,t,r,n){var i=e.size;if(wholeSlice(t,r,i))return e;var o=resolveBegin(t,i),a=resolveEnd(r,i);if(o!=o||a!=a)return sliceFactory(e.toSeq().cacheResult(),t,r,n);var s,l=a-o;l==l&&(s=l<0?0:l);var u=makeSequence(e);return u.size=0===s?s:e.size&&s||void 0,!n&&isSeq(e)&&s>=0&&(u.get=function(t,r){return(t=wrapIndex(this,t))>=0&&t<s?e.get(t+o,r):r}),u.__iterateUncached=function(t,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,l=!0,u=0;return e.__iterate(function(e,r){if(!l||!(l=a++<o))return u++,!1!==t(e,n?r:u-1,i)&&u!==s}),u},u.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);if(0===s)return new S(iteratorDone);var i=e.__iterator(t,r),a=0,l=0;return new S(function(){for(;a++<o;)i.next();if(++l>s)return{value:void 0,done:!0};var e=i.next();return n||t===v||e.done?e:iteratorValue(t,l-1,t===y?void 0:e.value[1],e)})},u}function takeWhileFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return e.__iterate(function(e,i,s){return t.call(r,e,i,s)&&++a&&n(e,i,o)}),a},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var a=e.__iterator(_,i),s=!0;return new S(function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var i=e.value,l=i[0],u=i[1];return t.call(r,u,l,o)?n===_?e:iteratorValue(n,l,u,e):(s=!1,{value:void 0,done:!0})})},n}function skipWhileFactory(e,t,r,n){var i=makeSequence(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,l=0;return e.__iterate(function(e,o,u){if(!s||!(s=t.call(r,e,o,u)))return l++,i(e,n?o:l-1,a)}),l},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(_,o),l=!0,u=0;return new S(function(){var e,o,c;do{if((e=s.next()).done)return n||i===v?e:iteratorValue(i,u++,i===y?void 0:e.value[1],e);var p=e.value;o=p[0],c=p[1],l&&(l=t.call(r,c,o,a))}while(l);return i===_?e:iteratorValue(i,o,c,e)})},i}function concatFactory(e,t){var r=isKeyed(e),n=[e].concat(t).map(function(e){return isCollection(e)?r&&(e=p(e)):e=r?keyedSeqFromValue(e):indexedSeqFromValue(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===n.length)return e;if(1===n.length){var i=n[0];if(i===e||r&&isKeyed(i)||isIndexed(e)&&isIndexed(i))return i}var o=new O(n);return r?o=o.toKeyedSeq():isIndexed(e)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),o}function flattenFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;return function flatDeep(e,l){e.__iterate(function(e,o){return(!t||l<t)&&isCollection(e)?flatDeep(e,l+1):(a++,!1===i(e,r?o:a-1,n)&&(s=!0)),!s},o)}(e,0),a},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(n,i),a=[],s=0;return new S(function(){for(;o;){var e=o.next();if(!1===e.done){var l=e.value;if(n===_&&(l=l[1]),t&&!(a.length<t)||!isCollection(l))return r?e:iteratorValue(n,s++,l,e);a.push(o),o=l.__iterator(n,i)}else o=a.pop()}return{value:void 0,done:!0}})},n}function flatMapFactory(e,t,r){var n=collectionClass(e);return e.toSeq().map(function(i,o){return n(t.call(r,i,o,e))}).flatten(!0)}function interposeFactory(e,t){var r=makeSequence(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return e.__iterate(function(e){return(!o||!1!==r(t,o++,i))&&!1!==r(e,o++,i)},n),o},r.__iteratorUncached=function(r,n){var i,o=e.__iterator(v,n),a=0;return new S(function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?iteratorValue(r,a++,t):iteratorValue(r,a++,i.value,i)})},r}function sortFactory(e,t,r){t||(t=defaultComparator);var n=isKeyed(e),i=0,o=e.toSeq().map(function(t,n){return[n,t,i++,r?r(t,n,e):t]}).valueSeq().toArray();return o.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),n?C(o):isIndexed(e)?T(o):k(o)}function maxFactory(e,t,r){if(t||(t=defaultComparator),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return maxCompare(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return maxCompare(t,e,r)?r:e})}function maxCompare(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function zipWithFactory(e,t,r,n){var i=makeSequence(e),o=new O(r).map(function(e){return e.size});return i.size=n?o.max():o.min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(v,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=c(e),getIterator(i?e.reverse():e)}),a=0,s=!1;return new S(function(){var r;return s||(r=o.map(function(e){return e.next()}),s=n?r.every(function(e){return e.done}):r.some(function(e){return e.done})),s?{value:void 0,done:!0}:iteratorValue(e,a++,t.apply(null,r.map(function(e){return e.value})))})},i}function reify(e,t){return e===t?e:isSeq(e)?t:e.constructor(t)}function validateEntry(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function collectionClass(e){return isKeyed(e)?p:isIndexed(e)?h:f}function makeSequence(e){return Object.create((isKeyed(e)?C:isIndexed(e)?T:k).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):P.prototype.cacheResult.call(this)}function defaultComparator(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function arrCopy(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function invariant(e,t){if(!e)throw new Error(t)}function assertNotInfinite(e){invariant(e!==1/0,"Cannot perform this action with an infinite size.")}function coerceKeyPath(e){if(isArrayLike(e)&&"string"!=typeof e)return e;if(isOrdered(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}function isPlainObj(e){return e&&("function"!=typeof e.constructor||"Object"===e.constructor.name)}function isDataStructure(e){return"object"==typeof e&&(isImmutable(e)||Array.isArray(e)||isPlainObj(e))}function quoteString(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function has(e,t){return isImmutable(e)?e.has(t):isDataStructure(e)&&E.call(e,t)}function get(e,t,r){return isImmutable(e)?e.get(t,r):has(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function shallowCopy(e){if(Array.isArray(e))return arrCopy(e);var t={};for(var r in e)E.call(e,r)&&(t[r]=e[r]);return t}function remove(e,t){if(!isDataStructure(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(isImmutable(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!E.call(e,t))return e;var r=shallowCopy(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function set(e,t,r){if(!isDataStructure(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(isImmutable(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(E.call(e,t)&&r===e[t])return e;var n=shallowCopy(e);return n[t]=r,n}function updateIn(e,t,r,n){n||(n=r,r=void 0);var i=updateInDeeply(isImmutable(e),e,coerceKeyPath(t),0,r,n);return i===a?r:i}function updateInDeeply(e,t,r,n,i,o){var s=t===a;if(n===r.length){var l=s?i:t,u=o(l);return u===l?t:u}if(!s&&!isDataStructure(t))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(quoteString)+"]: "+t);var c=r[n],p=s?a:get(t,c,a),h=updateInDeeply(p===a?e:isImmutable(p),p,r,n+1,i,o);return h===p?t:h===a?remove(t,c):set(s?e?emptyMap():{}:t,c,h)}function setIn(e,t,r){return updateIn(e,t,a,function(){return r})}function setIn$1(e,t){return setIn(this,e,t)}function removeIn(e,t){return updateIn(e,t,function(){return a})}function deleteIn(e){return removeIn(this,e)}function update(e,t,r,n){return updateIn(e,[t],r,n)}function update$1(e,t,r){return 1===arguments.length?e(this):update(this,e,t,r)}function updateIn$1(e,t,r){return updateIn(this,e,t,r)}function merge(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return mergeIntoKeyedWith(this,e)}function mergeWith(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return mergeIntoKeyedWith(this,t,e)}function mergeIntoKeyedWith(e,t,r){for(var n=[],i=0;i<t.length;i++){var o=p(t[i]);0!==o.size&&n.push(o)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var t=r?function(t,n){update(e,n,a,function(e){return e===a?t:r(e,t,n)})}:function(t,r){e.set(r,t)},i=0;i<n.length;i++)n[i].forEach(t)}):e.constructor(n[0])}function merge$1(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeWithSources(e,t)}function mergeWith$1(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return mergeWithSources(t,r,e)}function mergeDeep(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeDeepWithSources(e,t)}function mergeDeepWith(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return mergeDeepWithSources(t,r,e)}function mergeDeepWithSources(e,t,r){return mergeWithSources(e,t,deepMergerWith(r))}function mergeWithSources(e,t,r){if(!isDataStructure(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(isImmutable(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),i=e,o=n?h:p,a=n?function(t){i===e&&(i=shallowCopy(i)),i.push(t)}:function(t,n){var o=E.call(i,n),a=o&&r?r(i[n],t,n):t;o&&a===i[n]||(i===e&&(i=shallowCopy(i)),i[n]=a)},s=0;s<t.length;s++)o(t[s]).forEach(a);return i}function deepMergerWith(e){return function deepMerger(t,r,n){return isDataStructure(t)&&isDataStructure(r)?mergeWithSources(t,[r],deepMerger):e?e(t,r,n):r}}function mergeDeep$1(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return mergeDeepWithSources(this,e)}function mergeDeepWith$1(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeDeepWithSources(this,t,e)}function mergeIn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return updateIn(this,e,emptyMap(),function(e){return mergeWithSources(e,t)})}function mergeDeepIn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return updateIn(this,e,emptyMap(),function(e){return mergeDeepWithSources(e,t)})}function withMutations(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function asMutable(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)}function asImmutable(){return this.__ensureOwner()}function wasAltered(){return this.__altered}X.prototype.cacheResult=H.prototype.cacheResult=K.prototype.cacheResult=Z.prototype.cacheResult=cacheResultThrough;var Y=function(e){function Map(t){return null==t?emptyMap():isMap(t)&&!isOrdered(t)?t:emptyMap().withMutations(function(r){var n=e(t);assertNotInfinite(n.size),n.forEach(function(e,t){return r.set(t,e)})})}return e&&(Map.__proto__=e),Map.prototype=Object.create(e&&e.prototype),Map.prototype.constructor=Map,Map.of=function of(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return emptyMap().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},Map.prototype.toString=function toString(){return this.__toString("Map {","}")},Map.prototype.get=function get(e,t){return this._root?this._root.get(0,void 0,e,t):t},Map.prototype.set=function set(e,t){return updateMap(this,e,t)},Map.prototype.remove=function remove(e){return updateMap(this,e,a)},Map.prototype.deleteAll=function deleteAll(e){var t=c(e);return 0===t.size?this:this.withMutations(function(e){t.forEach(function(t){return e.remove(t)})})},Map.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):emptyMap()},Map.prototype.sort=function sort(e){return ge(sortFactory(this,e))},Map.prototype.sortBy=function sortBy(e,t){return ge(sortFactory(this,t,e))},Map.prototype.map=function map(e,t){return this.withMutations(function(r){r.forEach(function(n,i){r.set(i,e.call(t,n,i,r))})})},Map.prototype.__iterator=function __iterator(e,t){return new ie(this,e,t)},Map.prototype.__iterate=function __iterate(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},Map.prototype.__ensureOwner=function __ensureOwner(e){return e===this.__ownerID?this:e?makeMap(this.size,this._root,e,this.__hash):0===this.size?emptyMap():(this.__ownerID=e,this.__altered=!1,this)},Map}(p);Y.isMap=isMap;var J=Y.prototype;J[M]=!0,J.delete=J.remove,J.removeAll=J.deleteAll,J.setIn=setIn$1,J.removeIn=J.deleteIn=deleteIn,J.update=update$1,J.updateIn=updateIn$1,J.merge=J.concat=merge,J.mergeWith=mergeWith,J.mergeDeep=mergeDeep$1,J.mergeDeepWith=mergeDeepWith$1,J.mergeIn=mergeIn,J.mergeDeepIn=mergeDeepIn,J.withMutations=withMutations,J.wasAltered=wasAltered,J.asImmutable=asImmutable,J["@@transducer/init"]=J.asMutable=asMutable,J["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},J["@@transducer/result"]=function(e){return e.asImmutable()};var Q=function ArrayMapNode(e,t){this.ownerID=e,this.entries=t};Q.prototype.get=function get(e,t,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(is(r,i[o][0]))return i[o][1];return n},Q.prototype.update=function update(e,t,r,n,i,o,s){for(var l=i===a,u=this.entries,c=0,p=u.length;c<p&&!is(n,u[c][0]);c++);var h=c<p;if(h?u[c][1]===i:l)return this;if(SetRef(s),(l||!h)&&SetRef(o),!l||1!==u.length){if(!h&&!l&&u.length>=oe)return createNodes(e,u,n,i);var f=e&&e===this.ownerID,d=f?u:arrCopy(u);return h?l?c===p-1?d.pop():d[c]=d.pop():d[c]=[n,i]:d.push([n,i]),f?(this.entries=d,this):new Q(e,d)}};var $=function BitmapIndexedNode(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};$.prototype.get=function get(e,t,r,i){void 0===t&&(t=hash(r));var a=1<<((0===e?t:t>>>e)&o),s=this.bitmap;return 0==(s&a)?i:this.nodes[popCount(s&a-1)].get(e+n,t,r,i)},$.prototype.update=function update(e,t,r,i,s,l,u){void 0===r&&(r=hash(i));var c=(0===t?r:r>>>t)&o,p=1<<c,h=this.bitmap,f=0!=(h&p);if(!f&&s===a)return this;var d=popCount(h&p-1),g=this.nodes,m=f?g[d]:void 0,y=updateNode(m,e,t+n,r,i,s,l,u);if(y===m)return this;if(!f&&y&&g.length>=ae)return expandNodes(e,g,h,c,y);if(f&&!y&&2===g.length&&isLeafNode(g[1^d]))return g[1^d];if(f&&y&&1===g.length&&isLeafNode(y))return y;var v=e&&e===this.ownerID,_=f?y?h:h^p:h|p,b=f?y?setAt(g,d,y,v):spliceOut(g,d,v):spliceIn(g,d,y,v);return v?(this.bitmap=_,this.nodes=b,this):new $(e,_,b)};var ee=function HashArrayMapNode(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};ee.prototype.get=function get(e,t,r,i){void 0===t&&(t=hash(r));var a=(0===e?t:t>>>e)&o,s=this.nodes[a];return s?s.get(e+n,t,r,i):i},ee.prototype.update=function update(e,t,r,i,s,l,u){void 0===r&&(r=hash(i));var c=(0===t?r:r>>>t)&o,p=s===a,h=this.nodes,f=h[c];if(p&&!f)return this;var d=updateNode(f,e,t+n,r,i,s,l,u);if(d===f)return this;var g=this.count;if(f){if(!d&&--g<se)return packNodes(e,h,g,c)}else g++;var m=e&&e===this.ownerID,y=setAt(h,c,d,m);return m?(this.count=g,this.nodes=y,this):new ee(e,g,y)};var te=function HashCollisionNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};te.prototype.get=function get(e,t,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(is(r,i[o][0]))return i[o][1];return n},te.prototype.update=function update(e,t,r,n,i,o,s){void 0===r&&(r=hash(n));var l=i===a;if(r!==this.keyHash)return l?this:(SetRef(s),SetRef(o),mergeIntoNode(this,e,t,r,[n,i]));for(var u=this.entries,c=0,p=u.length;c<p&&!is(n,u[c][0]);c++);var h=c<p;if(h?u[c][1]===i:l)return this;if(SetRef(s),(l||!h)&&SetRef(o),l&&2===p)return new re(e,this.keyHash,u[1^c]);var f=e&&e===this.ownerID,d=f?u:arrCopy(u);return h?l?c===p-1?d.pop():d[c]=d.pop():d[c]=[n,i]:d.push([n,i]),f?(this.entries=d,this):new te(e,this.keyHash,d)};var re=function ValueNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};re.prototype.get=function get(e,t,r,n){return is(r,this.entry[0])?this.entry[1]:n},re.prototype.update=function update(e,t,r,n,i,o,s){var l=i===a,u=is(n,this.entry[0]);return(u?i===this.entry[1]:l)?this:(SetRef(s),l?void SetRef(o):u?e&&e===this.ownerID?(this.entry[1]=i,this):new re(e,this.keyHash,[n,i]):(SetRef(o),mergeIntoNode(this,e,t,hash(n),[n,i])))},Q.prototype.iterate=te.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},$.prototype.iterate=ee.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[t?i-n:n];if(o&&!1===o.iterate(e,t))return!1}},re.prototype.iterate=function(e,t){return e(this.entry)};var ne,ie=function(e){function MapIterator(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&mapIteratorFrame(e._root)}return e&&(MapIterator.__proto__=e),MapIterator.prototype=Object.create(e&&e.prototype),MapIterator.prototype.constructor=MapIterator,MapIterator.prototype.next=function next(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,i=void 0;if(r.entry){if(0===n)return mapIteratorValue(e,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return mapIteratorValue(e,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return mapIteratorValue(e,o.entry);t=this._stack=mapIteratorFrame(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},MapIterator}(S);function mapIteratorValue(e,t){return iteratorValue(e,t[0],t[1])}function mapIteratorFrame(e,t){return{node:e,index:0,__prev:t}}function makeMap(e,t,r,n){var i=Object.create(J);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyMap(){return ne||(ne=makeMap(0))}function updateMap(e,t,r){var n,i;if(e._root){var o={value:!1},s={value:!1};if(n=updateNode(e._root,e.__ownerID,0,void 0,t,r,o,s),!s.value)return e;i=e.size+(o.value?r===a?-1:1:0)}else{if(r===a)return e;i=1,n=new Q(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?makeMap(i,n):emptyMap()}function updateNode(e,t,r,n,i,o,s,l){return e?e.update(t,r,n,i,o,s,l):o===a?e:(SetRef(l),SetRef(s),new re(t,n,[i,o]))}function isLeafNode(e){return e.constructor===re||e.constructor===te}function mergeIntoNode(e,t,r,i,a){if(e.keyHash===i)return new te(t,i,[e.entry,a]);var s,l=(0===r?e.keyHash:e.keyHash>>>r)&o,u=(0===r?i:i>>>r)&o,c=l===u?[mergeIntoNode(e,t,r+n,i,a)]:(s=new re(t,i,a),l<u?[e,s]:[s,e]);return new $(t,1<<l|1<<u,c)}function createNodes(e,t,r,n){e||(e=new OwnerID);for(var i=new re(e,hash(r),[r,n]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}function packNodes(e,t,r,n){for(var i=0,o=0,a=new Array(r),s=0,l=1,u=t.length;s<u;s++,l<<=1){var c=t[s];void 0!==c&&s!==n&&(i|=l,a[o++]=c)}return new $(e,i,a)}function expandNodes(e,t,r,n,o){for(var a=0,s=new Array(i),l=0;0!==r;l++,r>>>=1)s[l]=1&r?t[a++]:void 0;return s[n]=o,new ee(e,a+1,s)}function popCount(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function setAt(e,t,r,n){var i=n?e:arrCopy(e);return i[t]=r,i}function spliceIn(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=r,a=-1):o[s]=e[s+a];return o}function spliceOut(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),o=0,a=0;a<n;a++)a===t&&(o=1),i[a]=e[a+o];return i}var oe=i/4,ae=i/2,se=i/4,le="@@__IMMUTABLE_LIST__@@";function isList(e){return Boolean(e&&e[le])}var ue=function(e){function List(t){var r=emptyList();if(null==t)return r;if(isList(t))return t;var o=e(t),a=o.size;return 0===a?r:(assertNotInfinite(a),a>0&&a<i?makeList(0,a,n,null,new pe(o.toArray())):r.withMutations(function(e){e.setSize(a),o.forEach(function(t,r){return e.set(r,t)})}))}return e&&(List.__proto__=e),List.prototype=Object.create(e&&e.prototype),List.prototype.constructor=List,List.of=function of(){return this(arguments)},List.prototype.toString=function toString(){return this.__toString("List [","]")},List.prototype.get=function get(e,t){if((e=wrapIndex(this,e))>=0&&e<this.size){var r=listNodeFor(this,e+=this._origin);return r&&r.array[e&o]}return t},List.prototype.set=function set(e,t){return updateList(this,e,t)},List.prototype.remove=function remove(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},List.prototype.insert=function insert(e,t){return this.splice(e,0,t)},List.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=n,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):emptyList()},List.prototype.push=function push(){var e=arguments,t=this.size;return this.withMutations(function(r){setListBounds(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},List.prototype.pop=function pop(){return setListBounds(this,0,-1)},List.prototype.unshift=function unshift(){var e=arguments;return this.withMutations(function(t){setListBounds(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},List.prototype.shift=function shift(){return setListBounds(this,1)},List.prototype.concat=function concat(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var i=t[n],o=e("string"!=typeof i&&hasIterator(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){r.forEach(function(t){return t.forEach(function(t){return e.push(t)})})}):this.constructor(r[0])},List.prototype.setSize=function setSize(e){return setListBounds(this,0,e)},List.prototype.map=function map(e,t){var r=this;return this.withMutations(function(n){for(var i=0;i<r.size;i++)n.set(i,e.call(t,n.get(i),i,n))})},List.prototype.slice=function slice(e,t){var r=this.size;return wholeSlice(e,t,r)?this:setListBounds(this,resolveBegin(e,r),resolveEnd(t,r))},List.prototype.__iterator=function __iterator(e,t){var r=t?this.size:0,n=iterateList(this,t);return new S(function(){var i=n();return i===fe?{value:void 0,done:!0}:iteratorValue(e,t?--r:r++,i)})},List.prototype.__iterate=function __iterate(e,t){for(var r,n=t?this.size:0,i=iterateList(this,t);(r=i())!==fe&&!1!==e(r,t?--n:n++,this););return n},List.prototype.__ensureOwner=function __ensureOwner(e){return e===this.__ownerID?this:e?makeList(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?emptyList():(this.__ownerID=e,this.__altered=!1,this)},List}(h);ue.isList=isList;var ce=ue.prototype;ce[le]=!0,ce.delete=ce.remove,ce.merge=ce.concat,ce.setIn=setIn$1,ce.deleteIn=ce.removeIn=deleteIn,ce.update=update$1,ce.updateIn=updateIn$1,ce.mergeIn=mergeIn,ce.mergeDeepIn=mergeDeepIn,ce.withMutations=withMutations,ce.wasAltered=wasAltered,ce.asImmutable=asImmutable,ce["@@transducer/init"]=ce.asMutable=asMutable,ce["@@transducer/step"]=function(e,t){return e.push(t)},ce["@@transducer/result"]=function(e){return e.asImmutable()};var pe=function VNode(e,t){this.array=e,this.ownerID=t};pe.prototype.removeBefore=function removeBefore(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var i=r>>>t&o;if(i>=this.array.length)return new pe([],e);var a,s=0===i;if(t>0){var l=this.array[i];if((a=l&&l.removeBefore(e,t-n,r))===l&&s)return this}if(s&&!a)return this;var u=editableVNode(this,e);if(!s)for(var c=0;c<i;c++)u.array[c]=void 0;return a&&(u.array[i]=a),u},pe.prototype.removeAfter=function removeAfter(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var i,a=r-1>>>t&o;if(a>=this.array.length)return this;if(t>0){var s=this.array[a];if((i=s&&s.removeAfter(e,t-n,r))===s&&a===this.array.length-1)return this}var l=editableVNode(this,e);return l.array.splice(a+1),i&&(l.array[a]=i),l};var he,fe={};function iterateList(e,t){var r=e._origin,o=e._capacity,a=getTailOffset(o),s=e._tail;return iterateNodeOrLeaf(e._root,e._level,0);function iterateNodeOrLeaf(e,t,r){return 0===t?iterateLeaf(e,r):iterateNode(e,t,r)}function iterateLeaf(e,n){var l=n===a?s&&s.array:e&&e.array,u=n>r?0:r-n,c=o-n;return c>i&&(c=i),function(){if(u===c)return fe;var e=t?--c:u++;return l&&l[e]}}function iterateNode(e,a,s){var l,u=e&&e.array,c=s>r?0:r-s>>a,p=1+(o-s>>a);return p>i&&(p=i),function(){for(;;){if(l){var e=l();if(e!==fe)return e;l=null}if(c===p)return fe;var r=t?--p:c++;l=iterateNodeOrLeaf(u&&u[r],a-n,s+(r<<a))}}}}function makeList(e,t,r,n,i,o,a){var s=Object.create(ce);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function emptyList(){return he||(he=makeList(0,0,n))}function updateList(e,t,r){if((t=wrapIndex(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?setListBounds(e,t).set(0,r):setListBounds(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,i=e._root,o={value:!1};return t>=getTailOffset(e._capacity)?n=updateVNode(n,e.__ownerID,0,t,r,o):i=updateVNode(i,e.__ownerID,e._level,t,r,o),o.value?e.__ownerID?(e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e):makeList(e._origin,e._capacity,e._level,i,n):e}function updateVNode(e,t,r,i,a,s){var l,u=i>>>r&o,c=e&&u<e.array.length;if(!c&&void 0===a)return e;if(r>0){var p=e&&e.array[u],h=updateVNode(p,t,r-n,i,a,s);return h===p?e:((l=editableVNode(e,t)).array[u]=h,l)}return c&&e.array[u]===a?e:(s&&SetRef(s),l=editableVNode(e,t),void 0===a&&u===l.array.length-1?l.array.pop():l.array[u]=a,l)}function editableVNode(e,t){return t&&e&&t===e.ownerID?e:new pe(e?e.array.slice():[],t)}function listNodeFor(e,t){if(t>=getTailOffset(e._capacity))return e._tail;if(t<1<<e._level+n){for(var r=e._root,i=e._level;r&&i>0;)r=r.array[t>>>i&o],i-=n;return r}}function setListBounds(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var i=e.__ownerID||new OwnerID,a=e._origin,s=e._capacity,l=a+t,u=void 0===r?s:r<0?s+r:a+r;if(l===a&&u===s)return e;if(l>=u)return e.clear();for(var c=e._level,p=e._root,h=0;l+h<0;)p=new pe(p&&p.array.length?[void 0,p]:[],i),h+=1<<(c+=n);h&&(l+=h,a+=h,u+=h,s+=h);for(var f=getTailOffset(s),d=getTailOffset(u);d>=1<<c+n;)p=new pe(p&&p.array.length?[p]:[],i),c+=n;var g=e._tail,m=d<f?listNodeFor(e,u-1):d>f?new pe([],i):g;if(g&&d>f&&l<s&&g.array.length){for(var y=p=editableVNode(p,i),v=c;v>n;v-=n){var _=f>>>v&o;y=y.array[_]=editableVNode(y.array[_],i)}y.array[f>>>n&o]=g}if(u<s&&(m=m&&m.removeAfter(i,0,u)),l>=d)l-=d,u-=d,c=n,p=null,m=m&&m.removeBefore(i,0,l);else if(l>a||d<f){for(h=0;p;){var b=l>>>c&o;if(b!==d>>>c&o)break;b&&(h+=(1<<c)*b),c-=n,p=p.array[b]}p&&l>a&&(p=p.removeBefore(i,c,l-h)),p&&d<f&&(p=p.removeAfter(i,c,d-h)),h&&(l-=h,u-=h)}return e.__ownerID?(e.size=u-l,e._origin=l,e._capacity=u,e._level=c,e._root=p,e._tail=m,e.__hash=void 0,e.__altered=!0,e):makeList(l,u,c,p,m)}function getTailOffset(e){return e<i?0:e-1>>>n<<n}var de,ge=function(e){function OrderedMap(e){return null==e?emptyOrderedMap():isOrderedMap(e)?e:emptyOrderedMap().withMutations(function(t){var r=p(e);assertNotInfinite(r.size),r.forEach(function(e,r){return t.set(r,e)})})}return e&&(OrderedMap.__proto__=e),OrderedMap.prototype=Object.create(e&&e.prototype),OrderedMap.prototype.constructor=OrderedMap,OrderedMap.of=function of(){return this(arguments)},OrderedMap.prototype.toString=function toString(){return this.__toString("OrderedMap {","}")},OrderedMap.prototype.get=function get(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},OrderedMap.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):emptyOrderedMap()},OrderedMap.prototype.set=function set(e,t){return updateOrderedMap(this,e,t)},OrderedMap.prototype.remove=function remove(e){return updateOrderedMap(this,e,a)},OrderedMap.prototype.wasAltered=function wasAltered(){return this._map.wasAltered()||this._list.wasAltered()},OrderedMap.prototype.__iterate=function __iterate(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},OrderedMap.prototype.__iterator=function __iterator(e,t){return this._list.fromEntrySeq().__iterator(e,t)},OrderedMap.prototype.__ensureOwner=function __ensureOwner(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?makeOrderedMap(t,r,e,this.__hash):0===this.size?emptyOrderedMap():(this.__ownerID=e,this._map=t,this._list=r,this)},OrderedMap}(Y);function makeOrderedMap(e,t,r,n){var i=Object.create(ge.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function emptyOrderedMap(){return de||(de=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(e,t,r){var n,o,s=e._map,l=e._list,u=s.get(t),c=void 0!==u;if(r===a){if(!c)return e;l.size>=i&&l.size>=2*s.size?(n=(o=l.filter(function(e,t){return void 0!==e&&u!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=s.remove(t),o=u===l.size-1?l.pop():l.set(u,void 0))}else if(c){if(r===l.get(u)[1])return e;n=s,o=l.set(u,[t,r])}else n=s.set(t,l.size),o=l.set(l.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e):makeOrderedMap(n,o)}ge.isOrderedMap=isOrderedMap,ge.prototype[m]=!0,ge.prototype.delete=ge.prototype.remove;var me="@@__IMMUTABLE_STACK__@@";function isStack(e){return Boolean(e&&e[me])}var ye=function(e){function Stack(e){return null==e?emptyStack():isStack(e)?e:emptyStack().pushAll(e)}return e&&(Stack.__proto__=e),Stack.prototype=Object.create(e&&e.prototype),Stack.prototype.constructor=Stack,Stack.of=function of(){return this(arguments)},Stack.prototype.toString=function toString(){return this.__toString("Stack [","]")},Stack.prototype.get=function get(e,t){var r=this._head;for(e=wrapIndex(this,e);r&&e--;)r=r.next;return r?r.value:t},Stack.prototype.peek=function peek(){return this._head&&this._head.value},Stack.prototype.push=function push(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):makeStack(t,r)},Stack.prototype.pushAll=function pushAll(t){if(0===(t=e(t)).size)return this;if(0===this.size&&isStack(t))return t;assertNotInfinite(t.size);var r=this.size,n=this._head;return t.__iterate(function(e){r++,n={value:e,next:n}},!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):makeStack(r,n)},Stack.prototype.pop=function pop(){return this.slice(1)},Stack.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):emptyStack()},Stack.prototype.slice=function slice(t,r){if(wholeSlice(t,r,this.size))return this;var n=resolveBegin(t,this.size);if(resolveEnd(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):makeStack(i,o)},Stack.prototype.__ensureOwner=function __ensureOwner(e){return e===this.__ownerID?this:e?makeStack(this.size,this._head,e,this.__hash):0===this.size?emptyStack():(this.__ownerID=e,this.__altered=!1,this)},Stack.prototype.__iterate=function __iterate(e,t){var r=this;if(t)return new O(this.toArray()).__iterate(function(t,n){return e(t,n,r)},t);for(var n=0,i=this._head;i&&!1!==e(i.value,n++,this);)i=i.next;return n},Stack.prototype.__iterator=function __iterator(e,t){if(t)return new O(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new S(function(){if(n){var t=n.value;return n=n.next,iteratorValue(e,r++,t)}return{value:void 0,done:!0}})},Stack}(h);ye.isStack=isStack;var ve,_e=ye.prototype;function makeStack(e,t,r,n){var i=Object.create(_e);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyStack(){return ve||(ve=makeStack(0))}_e[me]=!0,_e.shift=_e.pop,_e.unshift=_e.push,_e.unshiftAll=_e.pushAll,_e.withMutations=withMutations,_e.wasAltered=wasAltered,_e.asImmutable=asImmutable,_e["@@transducer/init"]=_e.asMutable=asMutable,_e["@@transducer/step"]=function(e,t){return e.unshift(t)},_e["@@transducer/result"]=function(e){return e.asImmutable()};var be="@@__IMMUTABLE_SET__@@";function isSet(e){return Boolean(e&&e[be])}function isOrderedSet(e){return isSet(e)&&isOrdered(e)}function deepEqual(e,t){if(e===t)return!0;if(!isCollection(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||isKeyed(e)!==isKeyed(t)||isIndexed(e)!==isIndexed(t)||isOrdered(e)!==isOrdered(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!isAssociative(e);if(isOrdered(e)){var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&is(i[1],e)&&(r||is(i[0],t))})&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var s=!0,l=t.__iterate(function(t,n){if(r?!e.has(t):i?!is(t,e.get(n,a)):!is(e.get(n,a),t))return s=!1,!1});return s&&e.size===l}function mixin(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function toJS(e){if(!e||"object"!=typeof e)return e;if(!isCollection(e)){if(!isDataStructure(e))return e;e=P(e)}if(isKeyed(e)){var t={};return e.__iterate(function(e,r){t[r]=toJS(e)}),t}var r=[];return e.__iterate(function(e){r.push(toJS(e))}),r}var xe=function(e){function Set(t){return null==t?emptySet():isSet(t)&&!isOrdered(t)?t:emptySet().withMutations(function(r){var n=e(t);assertNotInfinite(n.size),n.forEach(function(e){return r.add(e)})})}return e&&(Set.__proto__=e),Set.prototype=Object.create(e&&e.prototype),Set.prototype.constructor=Set,Set.of=function of(){return this(arguments)},Set.fromKeys=function fromKeys(e){return this(p(e).keySeq())},Set.intersect=function intersect(e){return(e=c(e).toArray()).length?Se.intersect.apply(Set(e.pop()),e):emptySet()},Set.union=function union(e){return(e=c(e).toArray()).length?Se.union.apply(Set(e.pop()),e):emptySet()},Set.prototype.toString=function toString(){return this.__toString("Set {","}")},Set.prototype.has=function has(e){return this._map.has(e)},Set.prototype.add=function add(e){return updateSet(this,this._map.set(e,e))},Set.prototype.remove=function remove(e){return updateSet(this,this._map.remove(e))},Set.prototype.clear=function clear(){return updateSet(this,this._map.clear())},Set.prototype.map=function map(e,t){var r=this,n=[],i=[];return this.forEach(function(o){var a=e.call(t,o,o,r);a!==o&&(n.push(o),i.push(a))}),this.withMutations(function(e){n.forEach(function(t){return e.remove(t)}),i.forEach(function(t){return e.add(t)})})},Set.prototype.union=function union(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(r){for(var n=0;n<t.length;n++)e(t[n]).forEach(function(e){return r.add(e)})}):this.constructor(t[0])},Set.prototype.intersect=function intersect(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},Set.prototype.subtract=function subtract(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},Set.prototype.sort=function sort(e){return Oe(sortFactory(this,e))},Set.prototype.sortBy=function sortBy(e,t){return Oe(sortFactory(this,t,e))},Set.prototype.wasAltered=function wasAltered(){return this._map.wasAltered()},Set.prototype.__iterate=function __iterate(e,t){var r=this;return this._map.__iterate(function(t){return e(t,t,r)},t)},Set.prototype.__iterator=function __iterator(e,t){return this._map.__iterator(e,t)},Set.prototype.__ensureOwner=function __ensureOwner(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},Set}(f);xe.isSet=isSet;var we,Se=xe.prototype;function updateSet(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function makeSet(e,t){var r=Object.create(Se);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptySet(){return we||(we=makeSet(emptyMap()))}Se[be]=!0,Se.delete=Se.remove,Se.merge=Se.concat=Se.union,Se.withMutations=withMutations,Se.asImmutable=asImmutable,Se["@@transducer/init"]=Se.asMutable=asMutable,Se["@@transducer/step"]=function(e,t){return e.add(t)},Se["@@transducer/result"]=function(e){return e.asImmutable()},Se.__empty=emptySet,Se.__make=makeSet;var Ee,Pe=function(e){function Range(e,t,r){if(!(this instanceof Range))return new Range(e,t,r);if(invariant(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(Ee)return Ee;Ee=this}}return e&&(Range.__proto__=e),Range.prototype=Object.create(e&&e.prototype),Range.prototype.constructor=Range,Range.prototype.toString=function toString(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Range.prototype.get=function get(e,t){return this.has(e)?this._start+wrapIndex(this,e)*this._step:t},Range.prototype.includes=function includes(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Range.prototype.slice=function slice(e,t){return wholeSlice(e,t,this.size)?this:(e=resolveBegin(e,this.size),(t=resolveEnd(t,this.size))<=e?new Range(0,0):new Range(this.get(e,this._end),this.get(t,this._end),this._step))},Range.prototype.indexOf=function indexOf(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},Range.prototype.lastIndexOf=function lastIndexOf(e){return this.indexOf(e)},Range.prototype.__iterate=function __iterate(e,t){for(var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==e(i,t?r-++o:o++,this);)i+=t?-n:n;return o},Range.prototype.__iterator=function __iterator(e,t){var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;return new S(function(){if(o===r)return{value:void 0,done:!0};var a=i;return i+=t?-n:n,iteratorValue(e,t?r-++o:o++,a)})},Range.prototype.equals=function equals(e){return e instanceof Range?this._start===e._start&&this._end===e._end&&this._step===e._step:deepEqual(this,e)},Range}(T);function getIn(e,t,r){for(var n=coerceKeyPath(t),i=0;i!==n.length;)if((e=get(e,n[i++],a))===a)return r;return e}function getIn$1(e,t){return getIn(this,e,t)}function hasIn(e,t){return getIn(e,t,a)!==a}function toObject(){assertNotInfinite(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e}c.isIterable=isCollection,c.isKeyed=isKeyed,c.isIndexed=isIndexed,c.isAssociative=isAssociative,c.isOrdered=isOrdered,c.Iterator=S,mixin(c,{toArray:function toArray(){assertNotInfinite(this.size);var e=new Array(this.size||0),t=isKeyed(this),r=0;return this.__iterate(function(n,i){e[r++]=t?[i,n]:n}),e},toIndexedSeq:function toIndexedSeq(){return new X(this)},toJS:function toJS$1(){return toJS(this)},toKeyedSeq:function toKeyedSeq(){return new H(this,!0)},toMap:function toMap(){return Y(this.toKeyedSeq())},toObject:toObject,toOrderedMap:function toOrderedMap(){return ge(this.toKeyedSeq())},toOrderedSet:function toOrderedSet(){return Oe(isKeyed(this)?this.valueSeq():this)},toSet:function toSet(){return xe(isKeyed(this)?this.valueSeq():this)},toSetSeq:function toSetSeq(){return new K(this)},toSeq:function toSeq(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function toStack(){return ye(isKeyed(this)?this.valueSeq():this)},toList:function toList(){return ue(isKeyed(this)?this.valueSeq():this)},toString:function toString(){return"[Collection]"},__toString:function __toString(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function concat(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return reify(this,concatFactory(this,e))},includes:function includes(e){return this.some(function(t){return is(t,e)})},entries:function entries(){return this.__iterator(_)},every:function every(e,t){assertNotInfinite(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!e.call(t,n,i,o))return r=!1,!1}),r},filter:function filter(e,t){return reify(this,filterFactory(this,e,t,!0))},find:function find(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function forEach(e,t){return assertNotInfinite(this.size),this.__iterate(t?e.bind(t):e)},join:function join(e){assertNotInfinite(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""}),t},keys:function keys(){return this.__iterator(y)},map:function map(e,t){return reify(this,mapFactory(this,e,t))},reduce:function reduce$1(e,t,r){return reduce(this,e,t,r,arguments.length<2,!1)},reduceRight:function reduceRight(e,t,r){return reduce(this,e,t,r,arguments.length<2,!0)},reverse:function reverse(){return reify(this,reverseFactory(this,!0))},slice:function slice(e,t){return reify(this,sliceFactory(this,e,t,!0))},some:function some(e,t){return!this.every(not(e),t)},sort:function sort(e){return reify(this,sortFactory(this,e))},values:function values(){return this.__iterator(v)},butLast:function butLast(){return this.slice(0,-1)},isEmpty:function isEmpty(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function count(e,t){return ensureSize(e?this.toSeq().filter(e,t):this)},countBy:function countBy(e,t){return countByFactory(this,e,t)},equals:function equals(e){return deepEqual(this,e)},entrySeq:function entrySeq(){var e=this;if(e._cache)return new O(e._cache);var t=e.toSeq().map(entryMapper).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function filterNot(e,t){return this.filter(not(e),t)},findEntry:function findEntry(e,t,r){var n=r;return this.__iterate(function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1}),n},findKey:function findKey(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function findLast(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function findLastEntry(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function findLastKey(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function first(e){return this.find(returnTrue,null,e)},flatMap:function flatMap(e,t){return reify(this,flatMapFactory(this,e,t))},flatten:function flatten(e){return reify(this,flattenFactory(this,e,!0))},fromEntrySeq:function fromEntrySeq(){return new Z(this)},get:function get(e,t){return this.find(function(t,r){return is(r,e)},void 0,t)},getIn:getIn$1,groupBy:function groupBy(e,t){return groupByFactory(this,e,t)},has:function has(e){return this.get(e,a)!==a},hasIn:function hasIn$1(e){return hasIn(this,e)},isSubset:function isSubset(e){return e="function"==typeof e.includes?e:c(e),this.every(function(t){return e.includes(t)})},isSuperset:function isSuperset(e){return(e="function"==typeof e.isSubset?e:c(e)).isSubset(this)},keyOf:function keyOf(e){return this.findKey(function(t){return is(t,e)})},keySeq:function keySeq(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function last(e){return this.toSeq().reverse().first(e)},lastKeyOf:function lastKeyOf(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function max(e){return maxFactory(this,e)},maxBy:function maxBy(e,t){return maxFactory(this,t,e)},min:function min(e){return maxFactory(this,e?neg(e):defaultNegComparator)},minBy:function minBy(e,t){return maxFactory(this,t?neg(t):defaultNegComparator,e)},rest:function rest(){return this.slice(1)},skip:function skip(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function skipLast(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function skipWhile(e,t){return reify(this,skipWhileFactory(this,e,t,!0))},skipUntil:function skipUntil(e,t){return this.skipWhile(not(e),t)},sortBy:function sortBy(e,t){return reify(this,sortFactory(this,t,e))},take:function take(e){return this.slice(0,Math.max(0,e))},takeLast:function takeLast(e){return this.slice(-Math.max(0,e))},takeWhile:function takeWhile(e,t){return reify(this,takeWhileFactory(this,e,t))},takeUntil:function takeUntil(e,t){return this.takeWhile(not(e),t)},update:function update(e){return e(this)},valueSeq:function valueSeq(){return this.toIndexedSeq()},hashCode:function hashCode(){return this.__hash||(this.__hash=hashCollection(this))}});var Ce=c.prototype;Ce[s]=!0,Ce[w]=Ce.values,Ce.toJSON=Ce.toArray,Ce.__toStringMapper=quoteString,Ce.inspect=Ce.toSource=function(){return this.toString()},Ce.chain=Ce.flatMap,Ce.contains=Ce.includes,mixin(p,{flip:function flip(){return reify(this,flipFactory(this))},mapEntries:function mapEntries(e,t){var r=this,n=0;return reify(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function mapKeys(e,t){var r=this;return reify(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r)}).flip())}});var Te=p.prototype;Te[l]=!0,Te[w]=Ce.entries,Te.toJSON=toObject,Te.__toStringMapper=function(e,t){return quoteString(t)+": "+quoteString(e)},mixin(h,{toKeyedSeq:function toKeyedSeq(){return new H(this,!1)},filter:function filter(e,t){return reify(this,filterFactory(this,e,t,!1))},findIndex:function findIndex(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function indexOf(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function lastIndexOf(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function reverse(){return reify(this,reverseFactory(this,!1))},slice:function slice(e,t){return reify(this,sliceFactory(this,e,t,!1))},splice:function splice(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=resolveBegin(e,e<0?this.count():this.size);var n=this.slice(0,e);return reify(this,1===r?n:n.concat(arrCopy(arguments,2),this.slice(e+t)))},findLastIndex:function findLastIndex(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function first(e){return this.get(0,e)},flatten:function flatten(e){return reify(this,flattenFactory(this,e,!1))},get:function get(e,t){return(e=wrapIndex(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function has(e){return(e=wrapIndex(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function interpose(e){return reify(this,interposeFactory(this,e))},interleave:function interleave(){var e=[this].concat(arrCopy(arguments)),t=zipWithFactory(this.toSeq(),T.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),reify(this,r)},keySeq:function keySeq(){return Pe(0,this.size)},last:function last(e){return this.get(-1,e)},skipWhile:function skipWhile(e,t){return reify(this,skipWhileFactory(this,e,t,!1))},zip:function zip(){return reify(this,zipWithFactory(this,defaultZipper,[this].concat(arrCopy(arguments))))},zipAll:function zipAll(){return reify(this,zipWithFactory(this,defaultZipper,[this].concat(arrCopy(arguments)),!0))},zipWith:function zipWith(e){var t=arrCopy(arguments);return t[0]=this,reify(this,zipWithFactory(this,e,t))}});var ke=h.prototype;function reduce(e,t,r,n,i,o){return assertNotInfinite(e.size),e.__iterate(function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)},o),r}function keyMapper(e,t){return t}function entryMapper(e,t){return[t,e]}function not(e){return function(){return!e.apply(this,arguments)}}function neg(e){return function(){return-e.apply(this,arguments)}}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(e,t){return e<t?1:e>t?-1:0}function hashCollection(e){if(e.size===1/0)return 0;var t=isOrdered(e),r=isKeyed(e),n=t?1:0;return murmurHashOfSize(e.__iterate(r?t?function(e,t){n=31*n+hashMerge(hash(e),hash(t))|0}:function(e,t){n=n+hashMerge(hash(e),hash(t))|0}:t?function(e){n=31*n+hash(e)|0}:function(e){n=n+hash(e)|0}),n)}function murmurHashOfSize(e,t){return t=L(t,3432918353),t=L(t<<15|t>>>-15,461845907),t=L(t<<13|t>>>-13,5),t=L((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=smi((t=L(t^t>>>13,3266489909))^t>>>16)}function hashMerge(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}ke[u]=!0,ke[m]=!0,mixin(f,{get:function get(e,t){return this.has(e)?e:t},includes:function includes(e){return this.has(e)},keySeq:function keySeq(){return this.valueSeq()}}),f.prototype.has=Ce.includes,f.prototype.contains=f.prototype.includes,mixin(C,p.prototype),mixin(T,h.prototype),mixin(k,f.prototype);var Oe=function(e){function OrderedSet(e){return null==e?emptyOrderedSet():isOrderedSet(e)?e:emptyOrderedSet().withMutations(function(t){var r=f(e);assertNotInfinite(r.size),r.forEach(function(e){return t.add(e)})})}return e&&(OrderedSet.__proto__=e),OrderedSet.prototype=Object.create(e&&e.prototype),OrderedSet.prototype.constructor=OrderedSet,OrderedSet.of=function of(){return this(arguments)},OrderedSet.fromKeys=function fromKeys(e){return this(p(e).keySeq())},OrderedSet.prototype.toString=function toString(){return this.__toString("OrderedSet {","}")},OrderedSet}(xe);Oe.isOrderedSet=isOrderedSet;var Ae,Ie=Oe.prototype;function makeOrderedSet(e,t){var r=Object.create(Ie);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptyOrderedSet(){return Ae||(Ae=makeOrderedSet(emptyOrderedMap()))}Ie[m]=!0,Ie.zip=ke.zip,Ie.zipWith=ke.zipWith,Ie.__empty=emptyOrderedSet,Ie.__make=makeOrderedSet;var Re=function Record(e,t){var r,n=function Record(o){var a=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(e),l=i._indices={};i._name=t,i._keys=s,i._defaultValues=e;for(var u=0;u<s.length;u++){var c=s[u];l[c]=u,i[c]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+recordName(this)+' with property "'+c+'" since that property name is part of the Record API.'):setProp(i,c)}}this.__ownerID=void 0,this._values=ue().withMutations(function(e){e.setSize(a._keys.length),p(o).forEach(function(t,r){e.set(a._indices[r],t===a._defaultValues[r]?void 0:t)})})},i=n.prototype=Object.create(Me);return i.constructor=n,t&&(n.displayName=t),n};Re.prototype.toString=function toString(){for(var e,t=recordName(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)t+=(n?", ":"")+(e=r[n])+": "+quoteString(this.get(e));return t+" }"},Re.prototype.equals=function equals(e){return this===e||e&&this._keys===e._keys&&recordSeq(this).equals(recordSeq(e))},Re.prototype.hashCode=function hashCode(){return recordSeq(this).hashCode()},Re.prototype.has=function has(e){return this._indices.hasOwnProperty(e)},Re.prototype.get=function get(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},Re.prototype.set=function set(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return makeRecord(this,r)}return this},Re.prototype.remove=function remove(e){return this.set(e)},Re.prototype.clear=function clear(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:makeRecord(this,e)},Re.prototype.wasAltered=function wasAltered(){return this._values.wasAltered()},Re.prototype.toSeq=function toSeq(){return recordSeq(this)},Re.prototype.toJS=function toJS$1(){return toJS(this)},Re.prototype.entries=function entries(){return this.__iterator(_)},Re.prototype.__iterator=function __iterator(e,t){return recordSeq(this).__iterator(e,t)},Re.prototype.__iterate=function __iterate(e,t){return recordSeq(this).__iterate(e,t)},Re.prototype.__ensureOwner=function __ensureOwner(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?makeRecord(this,t,e):(this.__ownerID=e,this._values=t,this)},Re.isRecord=isRecord,Re.getDescriptiveName=recordName;var Me=Re.prototype;function makeRecord(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function recordName(e){return e.constructor.displayName||e.constructor.name||"Record"}function recordSeq(e){return keyedSeqFromValue(e._keys.map(function(t){return[t,e.get(t)]}))}function setProp(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}Me[g]=!0,Me.delete=Me.remove,Me.deleteIn=Me.removeIn=deleteIn,Me.getIn=getIn$1,Me.hasIn=Ce.hasIn,Me.merge=merge,Me.mergeWith=mergeWith,Me.mergeIn=mergeIn,Me.mergeDeep=mergeDeep$1,Me.mergeDeepWith=mergeDeepWith$1,Me.mergeDeepIn=mergeDeepIn,Me.setIn=setIn$1,Me.update=update$1,Me.updateIn=updateIn$1,Me.withMutations=withMutations,Me.asMutable=asMutable,Me.asImmutable=asImmutable,Me[w]=Me.entries,Me.toJSON=Me.toObject=Ce.toObject,Me.inspect=Me.toSource=function(){return this.toString()};var Le,je=function(e){function Repeat(e,t){if(!(this instanceof Repeat))return new Repeat(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Le)return Le;Le=this}}return e&&(Repeat.__proto__=e),Repeat.prototype=Object.create(e&&e.prototype),Repeat.prototype.constructor=Repeat,Repeat.prototype.toString=function toString(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Repeat.prototype.get=function get(e,t){return this.has(e)?this._value:t},Repeat.prototype.includes=function includes(e){return is(this._value,e)},Repeat.prototype.slice=function slice(e,t){var r=this.size;return wholeSlice(e,t,r)?this:new Repeat(this._value,resolveEnd(t,r)-resolveBegin(e,r))},Repeat.prototype.reverse=function reverse(){return this},Repeat.prototype.indexOf=function indexOf(e){return is(this._value,e)?0:-1},Repeat.prototype.lastIndexOf=function lastIndexOf(e){return is(this._value,e)?this.size:-1},Repeat.prototype.__iterate=function __iterate(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},Repeat.prototype.__iterator=function __iterator(e,t){var r=this,n=this.size,i=0;return new S(function(){return i===n?{value:void 0,done:!0}:iteratorValue(e,t?n-++i:i++,r._value)})},Repeat.prototype.equals=function equals(e){return e instanceof Repeat?is(this._value,e._value):deepEqual(e)},Repeat}(T);function fromJS(e,t){return fromJSWith([],t||defaultConverter,e,"",t&&t.length>2?[]:void 0,{"":e})}function fromJSWith(e,t,r,n,i,o){var a=Array.isArray(r)?T:isPlainObj(r)?C:null;if(a){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),i&&""!==n&&i.push(n);var s=t.call(o,n,a(r).map(function(n,o){return fromJSWith(e,t,n,o,i,r)}),i&&i.slice());return e.pop(),i&&i.pop(),s}return r}function defaultConverter(e,t){return isKeyed(t)?t.toMap():t.toList()}var De="4.0.0-rc.11",Fe={version:De,Collection:c,Iterable:c,Seq:P,Map:Y,OrderedMap:ge,List:ue,Stack:ye,Set:xe,OrderedSet:Oe,Record:Re,Range:Pe,Repeat:je,is:is,fromJS:fromJS,hash:hash,isImmutable:isImmutable,isCollection:isCollection,isKeyed:isKeyed,isIndexed:isIndexed,isAssociative:isAssociative,isOrdered:isOrdered,isValueObject:isValueObject,isSeq:isSeq,isList:isList,isMap:isMap,isOrderedMap:isOrderedMap,isStack:isStack,isSet:isSet,isOrderedSet:isOrderedSet,isRecord:isRecord,get:get,getIn:getIn,has:has,hasIn:hasIn,merge:merge$1,mergeDeep:mergeDeep,mergeWith:mergeWith$1,mergeDeepWith:mergeDeepWith,remove:remove,removeIn:removeIn,set:set,setIn:setIn,update:update,updateIn:updateIn},Ne=c;t.default=Fe},function(t,r,n){"use strict";var i=n(2),o=n.n(i),a=n(1),s=n.n(a),l=n(195),u=n.n(l),p=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var g={accesskey:"accessKey",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",for:"htmlFor",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"},m={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"",quot:""},y=["style","script"],v=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,_=/mailto:/i,x=/\n{2,}$/,w=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,S=/^ *> ?/gm,E=/^ {2,}\n/,P=/^(?:( *[-*_]) *){3,}(?:\n *)+\n/,C=/^\s*(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n?/,T=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,O=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,A=/^(?:\n *)*\n/,I=/\r\n?/g,R=/^\[\^(.*)\](:.*)\n/,M=/^\[\^(.*)\]/,L=/\f/g,D=/^\s*?\[(x|\s)\]/,F=/^ *(#{1,6}) *([^\n]+)\n{0,2}/,N=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,z=/^ *<([A-Za-z][^ >\/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/,B=/&([a-z]+);/g,U=/^<!--.*?-->/,V=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,q=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,G=/^\{.*\}$/,W=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,H=/^<([^ >]+@[^ >]+)>/,X=/^<([^ >]+:\/[^ >]+)>/,K=/ *\n+$/,Z=/(?:^|\n)( *)$/,Y=/-([a-z])?/gi,J=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,Q=/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/,$=/^\[([^\]]*)\]:\s*(\S+)\s*("([^"]*)")?/,ee=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,te=/^\[([^\]]*)\] ?\[([^\]]*)\]/,re=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,ne=/\t/g,ie=/(^ *\||\| *$)/g,oe=/^ *:-+: *$/,ae=/^ *:-+ *$/,se=/^ *-+: *$/,le=/ *\| */,ue=/^([*_])\1((?:[^`~()[\]<>]*?|(?:.*?([`~]).*?\3.*?)*|(?:.*?\([^)]*?\).*?)*|(?:.*?\[[^\]]*?\].*?)*|(?:.*?<.*?>.*?)*|[^\1]*?)\1?)\1{2}/,ce=/^([*_])((?:[^`~()[\]<>]*?|(?:.*?([`~]).*?\3.*?)*|(?:.*?\([^)]*?\).*?)*|(?:.*?\[[^\]]*?\].*?)*|(?:.*?<.*?>.*?)*|[^\1]*?))\1/,pe=/^~~((?:.*?([`~]).*?\2.*?)*|(?:.*?<.*?>.*?)*|.+?)~~/,he=/^\\([^0-9A-Za-z\s])/,fe=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,de=/(^\n+|(\n|\s)+$)/g,ge=/^([ \t]*)/,me=/\\([^0-9A-Z\s])/gi,ye=/^( *)((?:[*+-]|\d+\.)) +/,ve=/( *)((?:[*+-]|\d+\.)) +[^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*(\n|$)/gm,_e=/^( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) (?!(?:[*+-]|\d+\.) ))\n*|\s*\n*$)/,be=/^\[((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*)\]\(\s*<?((?:[^\s\\]|\\.)*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/,xe=/^!\[((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*)\]\(\s*<?((?:[^\s\\]|\\.)*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/,we=[w,T,C,F,N,z,U,q,ve,_e,J,Q];function containsBlockSyntax(e){return we.some(function(t){return t.test(e)})}function slugify(e){return e.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function parseTableAlignCapture(e){return se.test(e)?"right":oe.test(e)?"center":ae.test(e)?"left":null}function parseTableHeader(e,t,r){return e[1].replace(ie,"").trim().split(le).map(function(e){return t(e,r)})}function parseTableAlign(e){return e[2].replace(ie,"").trim().split(le).map(parseTableAlignCapture)}function parseTableCells(e,t,r){return e[3].replace(ie,"").trim().split("\n").map(function(e){return e.replace(ie,"").split(le).map(function(e){return t(e.trim(),r)})})}function parseTable(e,t,r){r.inline=!0;var n=parseTableHeader(e,t,r),i=parseTableAlign(e),o=parseTableCells(e,t,r);return r.inline=!1,{align:i,cells:o,header:n,type:"table"}}function getTableStyle(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function normalizeAttributeKey(e){return-1!==e.indexOf("-")&&null===e.match(V)&&(e=e.replace(Y,function(e,t){return t.toUpperCase()})),e}function attributeValueToJSXPropValue(e,t){return"style"===e?t.split(/;\s?/).reduce(function(e,t){var r=t.slice(0,t.indexOf(":")),n=r.replace(/(-[a-z])/g,function(e){return e[1].toUpperCase()});return e[n]=t.slice(r.length+1).trim(),e},{}):(t.match(G)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}function normalizeWhitespace(e){return e.replace(I,"\n").replace(L,"").replace(ne,"    ")}function parserFor(e){function b(r,n){for(var i=[],o="";r;)for(var a=0;a<t.length;){var s=t[a],l=e[s],u=l.match(r,n,o);if(u){var c=u[0];r=r.substring(c.length);var p=l.parse(u,b,n);null==p.type&&(p.type=s),i.push(p),o=c;break}a++}return i}var t=Object.keys(e);return t.sort(function(t,r){var n=e[t].order,i=e[r].order;return n===i?t<r?-1:1:n-i}),function(e,t){return b(normalizeWhitespace(e),t)}}function inlineRegex(e){return function(t,r){return r.inline?e.exec(t):null}}function simpleInlineRegex(e){return function(t,r){return r.inline||r.simple?e.exec(t):null}}function blockRegex(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function anyScopeRegex(e){return function(t){return e.exec(t)}}function reactFor(e){return function b(t,r){if(r=r||{},Array.isArray(t)){for(var n=r.key,i=[],o=!1,a=0;a<t.length;a++){r.key=a;var s=b(t[a],r),l="string"==typeof s;l&&o?i[i.length-1]+=s:i.push(s),o=l}return r.key=n,i}return e(t,b,r)}}function sanitizeUrl(e){try{if(decodeURIComponent(e).match(/^\s*javascript:/i))return null}catch(e){return null}return e}function unescapeUrl(e){return e.replace(me,"$1")}function parseInline(e,t,r){var n=r.inline||!1,i=r.simple||!1;r.inline=!0,r.simple=!0;var o=e(t,r);return r.inline=n,r.simple=i,o}function parseSimpleInline(e,t,r){var n=r.inline||!1,i=r.simple||!1;r.inline=!1,r.simple=!0;var o=e(t,r);return r.inline=n,r.simple=i,o}function parseBlock(e,t,r){return r.inline=!1,e(t+"\n\n",r)}function parseCaptureInline(e,t,r){return{content:parseInline(t,e[1],r)}}function captureNothing(){return{}}function renderNothing(){return null}function ruleOutput(e){return function(t,r,n){return e[t.type].react(t,r,n)}}function cx(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function get(e,t,r){for(var n=e,i=t.split(".");i.length&&void 0!==(n=n[i[0]]);)i.shift();return n||r}function getTag(e,t){var r=get(t,e);return r?"function"==typeof r||"object"===(void 0===r?"undefined":h(r))&&"render"in r?r:get(t,e+".component",e):e}var Se=1,Ee=2,Pe=3,Ce=4,Te=5;function compiler(t,r){function d(e,t){for(var i=get(r.overrides,e+".props",{}),o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return n.apply(void 0,[getTag(e,r.overrides),p({},i,t,{className:cx(t&&t.className,i.className)||void 0})].concat(a))}function c(e){var t=!1;r.forceInline?t=!0:!r.forceBlock&&(t=!1===re.test(e));var n=h(l(t?e:e.replace(de,"")+"\n\n",{inline:t})),i=void 0;return n.length>1?i=d(t?"span":"div",null,n):1===n.length?"string"==typeof(i=n[0])&&(i=d("span",null,i)):i=d("span",null),i}function e(e){var t=e.match(v);return t?t.reduce(function(e,t,r){var n=t.indexOf("=");if(-1!==n){var i=normalizeAttributeKey(t.slice(0,n)).trim(),o=u()(t.slice(n+1).trim()),a=g[i]||i,l=e[a]=attributeValueToJSXPropValue(i,o);(z.test(l)||q.test(l))&&(e[a]=s.a.cloneElement(c(l.trim()),{key:r}))}else e[g[t]||t]=!0;return e},{}):void 0}(r=r||{}).overrides=r.overrides||{},r.slugify=r.slugify||slugify;var n=r.createElement||s.a.createElement;var i=[],o={},a={blockQuote:{match:blockRegex(w),order:Ee,parse:function d(e,t,r){return{content:t(e[0].replace(S,""),r)}},react:function e(t,r,n){return d("blockquote",{key:n.key},r(t.content,n))}},breakLine:{match:anyScopeRegex(E),order:Ee,parse:captureNothing,react:function e(t,r,n){return d("br",{key:n.key})}},breakThematic:{match:blockRegex(P),order:Ee,parse:captureNothing,react:function e(t,r,n){return d("hr",{key:n.key})}},codeBlock:{match:blockRegex(T),order:Se,parse:function c(e){return{content:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),lang:void 0}},react:function e(t,r,n){return d("pre",{key:n.key},d("code",{className:t.lang?"lang-"+t.lang:""},t.content))}},codeFenced:{match:blockRegex(C),order:Se,parse:function b(e){return{content:e[3],lang:e[2]||void 0,type:"codeBlock"}}},codeInline:{match:simpleInlineRegex(O),order:Ce,parse:function b(e){return{content:e[2]}},react:function e(t,r,n){return d("code",{key:n.key},t.content)}},footnote:{match:blockRegex(R),order:Se,parse:function b(e){return i.push({footnote:e[2],identifier:e[1]}),{}},react:renderNothing},footnoteReference:{match:inlineRegex(M),order:Ee,parse:function b(e){return{content:e[1],target:"#"+e[1]}},react:function e(t,r,n){return d("a",{key:n.key,href:sanitizeUrl(t.target)},d("sup",{key:n.key},t.content))}},gfmTask:{match:inlineRegex(D),order:Ee,parse:function b(e){return{completed:"x"===e[1].toLowerCase()}},react:function e(t,r,n){return d("input",{checked:t.completed,key:n.key,readOnly:!0,type:"checkbox"})}},heading:{match:blockRegex(F),order:Ee,parse:function e(t,n,i){return{content:parseInline(n,t[2],i),id:r.slugify(t[2]),level:t[1].length}},react:function f(e,t,r){return d("h"+e.level,{id:e.id,key:r.key},t(e.content,r))}},headingSetext:{match:blockRegex(N),order:Se,parse:function d(e,t,r){return{content:parseInline(t,e[1],r),level:"="===e[2]?1:2,type:"heading"}}},htmlBlock:{match:anyScopeRegex(z),order:Ee,parse:function k(t,r,n){var i=t[3].match(ge)[1],o=new RegExp("^"+i,"gm"),a=t[3].replace(o,""),s=containsBlockSyntax(a)?parseBlock:parseInline,l=-1!==y.indexOf(t[1]);return{attrs:e(t[2]),content:l?t[3]:s(r,a,n),noInnerParse:l,tag:t[1]}},react:function e(t,r,n){return d(t.tag,p({key:n.key},t.attrs),t.noInnerParse?t.content:r(t.content,n))}},htmlComment:{match:anyScopeRegex(U),order:Ee,parse:function a(){return{}},react:renderNothing},htmlSelfClosing:{match:anyScopeRegex(q),order:Ee,parse:function b(t){return{attrs:e(t[2]||""),tag:t[1]}},react:function e(t,r,n){return d(t.tag,p({},t.attrs,{key:n.key}))}},image:{match:simpleInlineRegex(xe),order:Ee,parse:function b(e){return{alt:e[1],target:unescapeUrl(e[2]),title:e[3]}},react:function e(t,r,n){return d("img",{key:n.key,alt:t.alt||void 0,title:t.title||void 0,src:sanitizeUrl(t.target)})}},link:{match:inlineRegex(be),order:Ce,parse:function d(e,t,r){return{content:parseSimpleInline(t,e[1],r),target:unescapeUrl(e[2]),title:e[3]}},react:function e(t,r,n){return d("a",{key:n.key,href:sanitizeUrl(t.target),title:t.title},r(t.content,n))}},linkAngleBraceStyleDetector:{match:inlineRegex(X),order:Se,parse:function b(e){return{content:[{content:e[1],type:"text"}],target:e[1],type:"link"}}},linkBareUrlDetector:{match:inlineRegex(W),order:Se,parse:function b(e){return{content:[{content:e[1],type:"text"}],target:e[1],title:void 0,type:"link"}}},linkMailtoDetector:{match:inlineRegex(H),order:Se,parse:function d(e){var t=e[1],r=e[1];return _.test(r)||(r="mailto:"+r),{content:[{content:t.replace("mailto:",""),type:"text"}],target:r,type:"link"}}},list:{match:function f(e,t,r){var n=Z.exec(r),i=t._list||!t.inline;return n&&i?(e=n[1]+e,_e.exec(e)):null},order:Ee,parse:function j(e,t,r){var n=e[2],i=n.length>1,o=i?+n:void 0,a=e[0].replace(x,"\n").match(ve),s=!1;return{items:a.map(function(e,n){var i=ye.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),l=e.replace(o,"").replace(ye,""),u=n===a.length-1,c=-1!==l.indexOf("\n\n")||u&&s;s=c;var p,h=r.inline,f=r._list;r._list=!0,c?(r.inline=!1,p=l.replace(K,"\n\n")):(r.inline=!0,p=l.replace(K,""));var d=t(p,r);return r.inline=h,r._list=f,d}),ordered:i,start:o}},react:function f(e,t,r){return d(e.ordered?"ol":"ul",{key:r.key,start:e.start},e.items.map(function(e,n){return d("li",{key:n},t(e,r))}))}},newlineCoalescer:{match:blockRegex(A),order:Ce,parse:captureNothing,react:function a(){return"\n"}},paragraph:{match:blockRegex(Q),order:Ce,parse:parseCaptureInline,react:function e(t,r,n){return d("p",{key:n.key},r(t.content,n))}},ref:{match:inlineRegex($),order:Se,parse:function b(e){return o[e[1]]={target:e[2],title:e[4]},{}},react:renderNothing},refImage:{match:simpleInlineRegex(ee),order:Se,parse:function b(e){return{alt:e[1]||void 0,ref:e[2]}},react:function e(t,r,n){return d("img",{key:n.key,alt:t.alt,src:sanitizeUrl(o[t.ref].target),title:o[t.ref].title})}},refLink:{match:inlineRegex(te),order:Se,parse:function d(e,t,r){return{content:t(e[1],r),ref:e[2]}},react:function e(t,r,n){return d("a",{key:n.key,href:sanitizeUrl(o[t.ref].target),title:o[t.ref].title},r(t.content,n))}},table:{match:blockRegex(J),order:Ee,parse:parseTable,react:function f(e,t,r){return d("table",{key:r.key},d("thead",null,d("tr",null,e.header.map(function(n,i){return d("th",{key:i,style:getTableStyle(e,i)},t(n,r))}))),d("tbody",null,e.cells.map(function(n,i){return d("tr",{key:i},n.map(function(n,i){return d("td",{key:i,style:getTableStyle(e,i)},t(n,r))}))})))}},text:{match:anyScopeRegex(fe),order:Te,parse:function b(e){return{content:e[0].replace(B,function(e,t){return m[t]?m[t]:e})}},react:function b(e){return e.content}},textBolded:{match:simpleInlineRegex(ue),order:Pe,parse:function d(e,t,r){return{content:t(e[2],r)}},react:function e(t,r,n){return d("strong",{key:n.key},r(t.content,n))}},textEmphasized:{match:simpleInlineRegex(ce),order:Ce,parse:function d(e,t,r){return{content:t(e[2],r)}},react:function e(t,r,n){return d("em",{key:n.key},r(t.content,n))}},textEscaped:{match:simpleInlineRegex(he),order:Ee,parse:function b(e){return{content:e[1],type:"text"}}},textStrikethroughed:{match:simpleInlineRegex(pe),order:Ce,parse:parseCaptureInline,react:function e(t,r,n){return d("del",{key:n.key},r(t.content,n))}}},l=parserFor(a),h=reactFor(ruleOutput(a)),I=c(t);return i.length&&I.props.children.push(d("footer",null,i.map(function(e){return d("div",{id:e.identifier,key:e.identifier},e.identifier,h(l(e.footnote,{inline:!0})))}))),I}var ke=n(119),Oe=n(57),Ae=n(77),Ie=n(13),Re=n(76);function MarkdownHeadingRenderer(e){var t=e.classes,r=e.level,n=e.children;return s.a.createElement("div",{className:t.spacing},s.a.createElement(Re.a,{level:r},n))}MarkdownHeadingRenderer.propTypes={classes:o.a.object.isRequired,level:o.a.oneOf([1,2,3,4,5,6]).isRequired,children:o.a.node};var Me=Object(Ie.a)(function styles(e){return{spacing:{marginBottom:e.space[2]}}})(MarkdownHeadingRenderer),Le=n(24),je=n.n(Le);function ListRenderer(e){var t=e.classes,r=e.ordered,n=e.children,i=r?"ol":"ul",o=je()(t.list,r&&t.ordered);return s.a.createElement(i,{className:o},a.Children.map(n,function(e){return Object(a.cloneElement)(e,{className:t.li})}))}ListRenderer.propTypes={classes:o.a.object.isRequired,ordered:o.a.bool,children:o.a.node.isRequired},ListRenderer.defaultProps={ordered:!1};var De=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontFamily;return{list:{marginTop:0,marginBottom:t[2],paddingLeft:t[3],fontSize:"inherit"},ordered:{listStyleType:"decimal"},li:{color:r.base,fontFamily:n.base,fontSize:"inherit",lineHeight:1.5,listStyleType:"inherit"}}})(ListRenderer);function BlockquoteRenderer(e){var t=e.classes,r=e.className,n=e.children,i=je()(t.blockquote,r);return s.a.createElement("blockquote",{className:i},n)}BlockquoteRenderer.propTypes={classes:o.a.object.isRequired,className:o.a.string,children:o.a.node.isRequired};var Fe=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontSize,i=e.fontFamily;return{blockquote:{margin:[[t[2],t[4]]],padding:0,color:r.base,fontFamily:i.base,fontSize:n.base,lineHeight:1.5}}})(BlockquoteRenderer);function PreRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("pre",{className:t.pre},r)}PreRenderer.propTypes={classes:o.a.object.isRequired,children:o.a.node.isRequired};var Ne=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontSize,i=e.fontFamily,o=e.borderRadius;return{pre:{fontFamily:i.base,fontSize:n.small,lineHeight:1.5,color:r.base,whiteSpace:"pre",backgroundColor:r.codeBackground,padding:[[t[1],t[2]]],border:[[1,r.border,"solid"]],borderRadius:o,marginTop:0,marginBottom:t[2]}}})(PreRenderer),ze=n(81),Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function CheckboxRenderer_objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function CheckboxRenderer(e){var t=e.classes,r=CheckboxRenderer_objectWithoutProperties(e,["classes"]);return s.a.createElement("input",Be({},r,{type:"checkbox",className:t.input}))}CheckboxRenderer.propTypes={classes:o.a.object.isRequired};var Ue=Object(Ie.a)(function styles(){return{input:{isolate:!1,display:"inline-block",verticalAlign:"middle"}}})(CheckboxRenderer);function HrRenderer(e){var t=e.classes;return s.a.createElement("hr",{className:t.hr})}HrRenderer.propTypes={classes:o.a.object.isRequired};var Ve=Object(Ie.a)(function styles(e){var t=e.space;return{hr:{borderBottom:[[1,e.color.border,"solid"]],marginTop:0,marginBottom:t[2]}}})(HrRenderer);function DetailsRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("details",{className:t.details},r)}DetailsRenderer.propTypes={classes:o.a.object.isRequired,children:o.a.node.isRequired};var qe=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontSize,i=e.fontFamily;return{details:{marginBottom:t[2],fontFamily:i.base,fontSize:n.base,color:r.base}}})(DetailsRenderer);function DetailsSummaryRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("summary",{className:t.summary},r)}DetailsSummaryRenderer.propTypes={classes:o.a.object.isRequired,children:o.a.node.isRequired};var Ge=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontSize,i=e.fontFamily;return{summary:{marginBottom:t[1],fontFamily:i.base,fontSize:n.base,color:r.base,cursor:"pointer","&:focus":{isolate:!1,outline:[[1,"dotted",r.linkHover]],outlineOffset:2}}}})(DetailsSummaryRenderer);function TableRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("table",{className:t.table},r)}TableRenderer.propTypes={classes:o.a.object.isRequired,children:o.a.node.isRequired};var We=Object(Ie.a)(function styles(e){return{table:{marginTop:0,marginBottom:e.space[2],borderCollapse:"collapse"}}})(TableRenderer);function TableHeadRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("thead",{className:t.thead},r)}TableHeadRenderer.propTypes={classes:o.a.object.isRequired,children:o.a.node.isRequired};var He=Object(Ie.a)(function styles(e){return{thead:{borderBottom:[[1,e.color.border,"solid"]]}}})(TableHeadRenderer);function TableBodyRenderer(e){var t=e.children;return s.a.createElement("tbody",null,t)}TableBodyRenderer.propTypes={children:o.a.node.isRequired};var Xe=TableBodyRenderer;function TableRowRenderer(e){var t=e.children;return s.a.createElement("tr",null,t)}TableRowRenderer.propTypes={children:o.a.node.isRequired};var Ke=TableRowRenderer;function TableCellRenderer(e){var t=e.classes,r=e.header,n=e.children;return r?s.a.createElement("th",{className:t.th},n):s.a.createElement("td",{className:t.td},n)}TableCellRenderer.propTypes={classes:o.a.object.isRequired,header:o.a.bool,children:o.a.node.isRequired},TableCellRenderer.defaultProps={header:!1};var Ze=Object(Ie.a)(function styles(e){var t=e.space,r=e.color,n=e.fontSize,i=e.fontFamily;return{td:{padding:[[t[0],t[2],t[0],0]],fontFamily:i.base,fontSize:n.base,color:r.base,lineHeight:1.5},th:{composes:"$td",fontWeight:"bold"}}})(TableCellRenderer),Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};n(319);var Je={a:{component:ke.a},h1:{component:Me,props:{level:1}},h2:{component:Me,props:{level:2}},h3:{component:Me,props:{level:3}},h4:{component:Me,props:{level:4}},h5:{component:Me,props:{level:5}},h6:{component:Me,props:{level:6}},p:{component:Ae.a,props:{semantic:"p"}},em:{component:Oe.a,props:{semantic:"em"}},strong:{component:Oe.a,props:{semantic:"strong"}},ul:{component:De},ol:{component:De,props:{ordered:!0}},blockquote:{component:Fe},code:{component:ze.a},pre:{component:Ne},input:{component:Ue},hr:{component:Ve},table:{component:We},thead:{component:He},th:{component:Ze,props:{header:!0}},tbody:{component:Xe},tr:{component:Ke},td:{component:Ze},details:{component:qe},summary:{component:Ge}},Qe=Ye({},Je,{p:{component:Oe.a}});function Markdown_Markdown(e){return compiler(e.text,{overrides:e.inline?Qe:Je,forceBlock:!0})}Markdown_Markdown.propTypes={text:o.a.string.isRequired,inline:o.a.bool};var $e=Markdown_Markdown;n.d(r,"a",function(){return $e})},function(e,t,r){"use strict";r.d(t,"d",function(){return s}),r.d(t,"c",function(){return p}),r.d(t,"b",function(){return f}),r.d(t,"a",function(){return d});var n=r(3),i=r(22),o=r(63),a=null,s=function headlessGL(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!o.a)try{s=r(389),a=r(390)}catch(e){}var l=function DummyType(){Object(n.a)(this,DummyType)},u=a||i.a,c=u.WebGLRenderingContext,p=void 0===c?l:c,h=(u.WebGLProgram,u.WebGLShader,u.WebGLBuffer),f=void 0===h?l:h;u.WebGLFramebuffer,u.WebGLRenderbuffer,u.WebGLTexture,u.WebGLUniformLocation,u.WebGLActiveInfo,u.WebGLShaderPrecisionFormat;var d=function getWebGL2RenderingContext(){return i.a.WebGL2RenderingContext||function WebGL2RenderingContextNotSupported(){Object(n.a)(this,WebGL2RenderingContextNotSupported)}}();(function getImage(){return i.a.Image||function ImageNotSupported(){Object(n.a)(this,ImageNotSupported)}})()},function(e,t,r){"use strict";r.d(t,"b",function(){return getKeyValue}),r.d(t,"a",function(){return getKey}),r.d(t,"c",function(){return glKey});var n=r(5),i=r(37);function getKeyValue(e,t){if("string"!=typeof t)return t;var r=Number(t);if(!isNaN(r))return r;var i=e[t=t.replace(/^.*\./,"")];return Object(n.a)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function getKey(e,t){for(var r in t=Number(t),e)if(e[r]===t)return"GL.".concat(r);return String(t)}function glKey(e,t){return void 0===t&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),getKey(e,t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return add}),r.d(t,"f",function(){return scale}),r.d(t,"c",function(){return length}),r.d(t,"e",function(){return negate}),r.d(t,"b",function(){return cross}),r.d(t,"d",function(){return lerp}),r.d(t,"h",function(){return transformMat4}),r.d(t,"g",function(){return a});var n=r(16);function add(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function scale(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function length(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}function cross(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function lerp(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function transformMat4(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}var i,o,a=function subtract(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e};i=new n.a(2),n.a!=Float32Array&&(i[0]=0,i[1]=0),o=i},function(e,t,r){"use strict";(function(e){var n=!("[object process]"===Object.prototype.toString.call(e.process)&&!e.process.browser)?r(224):null;t.a=n}).call(this,r(28))},,function(e,t,r){"use strict";var n=r(415);t.a=new n.a({id:"luma"}).enable()},function(e,t){e.exports=function requireInRuntime(e,t){if(!(t in e))throw new Error('require() statements can be added only by editing a Markdown example file: require("'+t+'")');return e[t]}},function(e,t){e.exports=function evalInContext(e,t,r){return new Function("require","state","setState",e+r).bind(null,t)}},function(e,t,r){"use strict";r.d(t,"b",function(){return getGLTypeFromTypedArray}),r.d(t,"c",function(){return getTypedArrayFromGLType}),r.d(t,"a",function(){return flipRows}),r.d(t,"d",function(){return scalePixels});var n="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n)}}function getTypedArrayFromGLType(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,r=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function flipRows(e){var t=e.data,r=e.width,n=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=r*o;a=a||new Uint8Array(s);for(var l=0;l<n/2;++l){var u=l*s,c=(n-l-1)*s;a.set(t.subarray(u,u+s)),t.copyWithin(u,c,c+s),t.set(a,c)}}function scalePixels(e){for(var t=e.data,r=e.width,n=e.height,i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var l=0;l<i;l++)for(var u=0;u<4;u++)a[4*(s*i+l)+u]=t[4*(2*s*r+2*l)+u];return{data:a,width:i,height:o}}},function(e,t,r){"use strict";r.d(t,"c",function(){return unquote}),r.d(t,"a",function(){return getType}),r.d(t,"b",function(){return showSpaces});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function unquote(e){return e&&e.replace(/^['"]|['"]$/g,"")}function getType(e){return e.flowType?"union"===e.flowType.name&&e.flowType.elements.every(function(e){return"literal"===e.name})?n({},e.flowType,{name:"enum",value:e.flowType.elements}):e.flowType:e.type}function showSpaces(e){return e&&e.replace(/^\s|\s$/g,"")}},function(e,t,r){"use strict";(function(e,n){r.d(t,"b",function(){return a}),r.d(t,"a",function(){return s});var i=r(25),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===n?"undefined":Object(i.a)(n))&&n},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,r(28),r(58))},function(e,t,r){"use strict";r.d(t,"a",function(){return multiply}),r.d(t,"b",function(){return scale}),r.d(t,"c",function(){return transformMat4});var n=r(16);function multiply(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function scale(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function transformMat4(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}var i,o;i=new n.a(4),n.a!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),o=i},function(e,t,r){"use strict";r.d(t,"a",function(){return getTimestamp});var n=r(54),i=r(42);function getTimestamp(){if(!n.b){var e=i.a.hrtime();return e[0]+e[1]/1e6}return i.b.performance?i.b.performance.now():Date.now()}getTimestamp()},function(e,t,r){"use strict";r.d(t,"a",function(){return v});var n,i=r(3),o=r(11),a=r(10),s=r(4),l=r(12),u=r(0),c=r(29),p=r(20),h=r(26),f=r(8),d=r(6),g=r(5),m=[9729,9728],y=(n={},Object(u.a)(n,6407,{dataFormat:6407,types:[5121,33635]}),Object(u.a)(n,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(u.a)(n,6406,{dataFormat:6406,types:[5121]}),Object(u.a)(n,6409,{dataFormat:6409,types:[5121]}),Object(u.a)(n,6410,{dataFormat:6410,types:[5121]}),Object(u.a)(n,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(u.a)(n,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(u.a)(n,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(u.a)(n,34836,{dataFormat:6408,types:[5126],gl2:!0}),n);function isFormatSupported(e,t){var r=y[t];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var n=Object(f.n)(e)&&r.gl2||r.gl1;return"string"==typeof n?e.getExtension(n):n}function isLinearFilteringSupported(e,t){var r=y[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var v=function(e){function Texture(e,t){var r;Object(i.a)(this,Texture);var n=t.id,s=void 0===n?Object(d.i)("texture"):n,l=t.handle,u=t.target;return(r=Object(o.a)(this,Object(a.a)(Texture).call(this,e,{id:s,handle:l}))).target=u,r.hasFloatTexture=e.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return Object(l.a)(Texture,e),Object(s.a)(Texture,null,[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format,n=t.linearFiltering,i=!0;return r&&(i=(i=i&&isFormatSupported(e,r))&&(!n||isLinearFilteringSupported(e,r))),i}}]),Object(s.a)(Texture,[{key:"toString",value:function toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.pixels,n=void 0===r?null:r,i=e.format,o=void 0===i?6408:i,a=e.type,s=void 0===a?5121:a,l=e.border,c=void 0===l?0:l,p=e.recreate,h=void 0!==p&&p,f=e.parameters,g=void 0===f?{}:f,m=e.pixelStore,y=void 0===m?{}:m,v=e.textureUnit,_=void 0===v?void 0:v,b=e.unpackFlipY,x=void 0===b||b,w=e.mipmaps,S=void 0===w||w;t||(t=n);var E=e.width,P=e.height,C=e.dataFormat,T=this._deduceParameters({format:o,type:s,dataFormat:C,compressed:!1,data:t,width:E,height:P});E=T.width,P=T.height,C=T.dataFormat,this.width=E,this.height=P,this.format=o,this.type=s,this.dataFormat=C,this.border=c,this.textureUnit=_,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var k=Object(u.a)({},37440,x),O=Object.assign({},k,y);this._isNPOT()&&S&&(d.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),S=!1,this._updateForNPOT(g)),this.mipmaps=S,this.setImageData({data:t,width:E,height:P,format:o,type:s,dataFormat:C,border:c,mipmaps:S,parameters:O}),S&&this.generateMipmap(),this.setParameters(g),h&&(this.data=t)}},{key:"resize",value:function resize(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function generateMipmap(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function setImageData(e){var t=e.target,r=void 0===t?this.target:t,n=e.pixels,i=void 0===n?null:n,o=e.data,a=void 0===o?null:o,s=e.width,l=void 0===s?this.width:s,u=e.height,c=void 0===u?this.height:u,p=e.level,d=void 0===p?0:p,m=e.format,y=void 0===m?this.format:m,v=e.type,_=void 0===v?this.type:v,b=e.dataFormat,x=void 0===b?this.dataFormat:b,w=e.offset,S=void 0===w?0:w,E=e.border,P=void 0===E?this.border:E,C=e.compressed,T=void 0!==C&&C,k=e.parameters,O=void 0===k?{}:k;a||(a=i);var A=this._deduceParameters({format:y,type:_,dataFormat:x,compressed:T,data:a,width:l,height:c});_=A.type,x=A.dataFormat,T=A.compressed,l=A.width,c=A.height;var I=this.gl;I.bindTexture(this.target,this.handle);var R,M=this._getDataType({data:a,compressed:T});a=M.data,R=M.dataType,Object(h.c)(this.gl,O,function(){switch(R){case"null":I.texImage2D(r,d,y,l,c,P,x,_,a);break;case"typed-array":I.texImage2D(r,d,y,l,c,P,x,_,a,S);break;case"buffer":Object(f.d)(I),I.bindBuffer(35052,a.handle||a),I.texImage2D(r,d,y,l,c,P,x,_,S),I.bindBuffer(35052,null);break;case"browser-object":Object(f.n)(I)?I.texImage2D(r,d,y,l,c,P,x,_,a):I.texImage2D(r,d,y,x,_,a);break;case"compressed":I.compressedTexImage2D(r,d,y,l,c,P,a);break;default:Object(g.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function setSubImageData(e){var t=this,r=e.target,n=void 0===r?this.target:r,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,l=e.x,u=void 0===l?0:l,c=e.y,d=void 0===c?0:c,g=e.width,m=void 0===g?this.width:g,y=e.height,v=void 0===y?this.height:y,_=e.level,b=void 0===_?0:_,x=e.format,w=void 0===x?this.format:x,S=e.type,E=void 0===S?this.type:S,P=e.dataFormat,C=void 0===P?this.dataFormat:P,T=e.compressed,k=void 0!==T&&T,O=e.offset,A=void 0===O?0:O,I=e.border,R=(void 0===I&&this.border,e.parameters),M=void 0===R?{}:R,L=this._deduceParameters({format:w,type:E,dataFormat:C,compressed:k,data:s,width:m,height:v});if(E=L.type,C=L.dataFormat,k=L.compressed,m=L.width,v=L.height,s||(s=o),s&&s.data){var j=s;s=j.data,m=j.shape[0],v=j.shape[1]}s instanceof p.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,M,function(){k?t.gl.compressedTexSubImage2D(n,b,u,d,m,v,w,s):null===s?t.gl.texSubImage2D(n,b,u,d,m,v,C,E,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(n,b,u,d,m,v,C,E,s,A):s instanceof f.b?(Object(f.d)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(n,b,u,d,m,v,C,E,A),t.gl.bindBuffer(35052,null)):Object(f.n)(t.gl)?t.gl.texSubImage2D(n,b,u,d,m,v,C,E,s):t.gl.texSubImage2D(n,b,u,d,C,E,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function copyFramebuffer(e){var t=e.target,r=(void 0===t&&this.target,e.framebuffer),n=e.x,i=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.width,l=e.height,u=e.level,c=void 0===u?0:u,p=e.internalFormat,h=void 0===p?6408:p,f=e.border,d=void 0===f?0:f;r&&r.bind(),this.bind(0),this.gl.copyTexImage2D(this.target,c,h,i,a,s,l,d),this.unbind(),r&&r.unbind()}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(33984+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function unbind(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function _getDataType(e){var t=e.data,r=e.compressed;return void 0!==r&&r?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof p.a?{data:t.handle,dataType:"buffer"}:t instanceof f.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function setImage3D(e){var t=e.level,r=void 0===t?0:t,n=e.internalformat,i=void 0===n?6408:n,o=e.width,a=e.height,s=e.depth,l=void 0===s?1:s,u=e.border,c=void 0===u?0:u,h=e.format,f=e.type,d=void 0===f?5121:f,g=e.offset,m=void 0===g?0:g,y=e.pixels;return ArrayBuffer.isView(y)?(this.gl.texImage3D(this.target,r,i,o,a,l,c,h,d,y),this):(y instanceof p.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,r,i,o,a,l,c,h,d,m)),this)}},{key:"_deduceParameters",value:function _deduceParameters(e){var t=e.format,r=e.data,n=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,l=y[t];o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed;var u=this._deduceImageSize(r,n,i);return{dataFormat:o,type:a,compressed:s,width:n=u.width,height:i=u.height,format:t,data:r}}},{key:"_deduceImageSize",value:function _deduceImageSize(e,t,r){var n;return n="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},Object(g.a)(n,"Could not deduced texture size"),Object(g.a)(void 0===t||n.width===t,"Deduced texture width does not match supplied width"),Object(g.a)(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function _getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function _setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(g.a)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function _isNPOT(){return!(Object(f.n)(this.gl)||Object(d.f)(this.width)&&Object(d.f)(this.height))}},{key:"_updateForNPOT",value:function _updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function _getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===m.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),Texture}(c.a)},function(e,t,r){"use strict";r.d(t,"c",function(){return length}),r.d(t,"d",function(){return negate}),r.d(t,"b",function(){return cross}),r.d(t,"i",function(){return transformMat4}),r.d(t,"e",function(){return rotateX}),r.d(t,"f",function(){return rotateY}),r.d(t,"g",function(){return rotateZ}),r.d(t,"a",function(){return angle}),r.d(t,"h",function(){return a});var n=r(16);function length(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function fromValues(e,t,r){var i=new n.a(3);return i[0]=e,i[1]=t,i[2]=r,i}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function normalize(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function transformMat4(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function rotateX(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function rotateY(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function rotateZ(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function angle(e,t){var r=fromValues(e[0],e[1],e[2]),n=fromValues(t[0],t[1],t[2]);normalize(r,r),normalize(n,n);var i=dot(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}var i,o,a=function subtract(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e};i=new n.a(3),n.a!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),o=i},function(e,t,r){"use strict";var n=r(114);function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function construct_construct(e,t,r){return(construct_construct=isNativeReflectConstruct()?Reflect.construct:function _construct(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&Object(n.a)(o,r.prototype),o}).apply(null,arguments)}var i=r(3),o=r(4),a=r(40),s=r(37),l=r(5);r.d(t,"a",function(){return c});var u={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},c=function(){function Accessor(){var e=this;Object(i.a)(this,Accessor);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return Object(o.a)(Accessor,null,[{key:"getBytesPerElement",value:function getBytesPerElement(e){return Object(a.c)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function getBytesPerVertex(e){return Object(l.a)(e.size),Object(a.c)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function resolve(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return construct_construct(Accessor,[u].concat(t))}}]),Object(o.a)(Accessor,[{key:"toString",value:function toString(){return JSON.stringify(this)}},{key:"_assign",value:function _assign(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.type&&(this.type!==e.type&&s.a.warn("accessor type mismatch"),this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size!==e.size&&s.a.warn("accessor size mismatch"),this.size=e.size),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.instanced&&(s.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(s.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=e.isInstanced?1:0),void 0!==e.index&&(this.index=e.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function get(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function get(){return Accessor.getBytesPerVertex(this)}}]),Accessor}()},function(e,t,r){var n=r(158),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(3),i=r(11),o=r(10),a=r(4),s=r(12),l=r(18),u=r(45),c=r(8),p=function(e){function Texture2D(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,Texture2D),Object(c.e)(e),(t=Object(i.a)(this,Object(o.a)(Texture2D).call(this,e,Object.assign({},r,{target:3553})))).initialize(r),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(Texture2D,e),Object(a.a)(Texture2D,null,[{key:"isSupported",value:function isSupported(e,t){return u.a.isSupported(e,t)}}]),Object(a.a)(Texture2D,[{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function unbind(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(33984+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}}]),Texture2D}(u.a)},function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"d",function(){return setParameters}),r.d(t,"b",function(){return getParameters}),r.d(t,"c",function(){return resetParameters});var n,i,o,a=r(21),s=r(0),l=r(8),u=(r(5),n={},Object(s.a)(n,3042,!1),Object(s.a)(n,32773,new Float32Array([0,0,0,0])),Object(s.a)(n,32777,32774),Object(s.a)(n,34877,32774),Object(s.a)(n,32969,1),Object(s.a)(n,32968,0),Object(s.a)(n,32971,1),Object(s.a)(n,32970,0),Object(s.a)(n,3106,new Float32Array([0,0,0,0])),Object(s.a)(n,3107,[!0,!0,!0,!0]),Object(s.a)(n,2884,!1),Object(s.a)(n,2885,1029),Object(s.a)(n,2929,!1),Object(s.a)(n,2931,1),Object(s.a)(n,2932,513),Object(s.a)(n,2928,new Float32Array([0,1])),Object(s.a)(n,2930,!0),Object(s.a)(n,3024,!0),Object(s.a)(n,36006,null),Object(s.a)(n,2886,2305),Object(s.a)(n,33170,4352),Object(s.a)(n,2849,1),Object(s.a)(n,32823,!1),Object(s.a)(n,32824,0),Object(s.a)(n,10752,0),Object(s.a)(n,32938,1),Object(s.a)(n,32939,!1),Object(s.a)(n,3089,!1),Object(s.a)(n,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(n,2960,!1),Object(s.a)(n,2961,0),Object(s.a)(n,2968,4294967295),Object(s.a)(n,36005,4294967295),Object(s.a)(n,2962,519),Object(s.a)(n,2967,0),Object(s.a)(n,2963,4294967295),Object(s.a)(n,34816,519),Object(s.a)(n,36003,0),Object(s.a)(n,36004,4294967295),Object(s.a)(n,2964,7680),Object(s.a)(n,2965,7680),Object(s.a)(n,2966,7680),Object(s.a)(n,34817,7680),Object(s.a)(n,34818,7680),Object(s.a)(n,34819,7680),Object(s.a)(n,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(n,3333,4),Object(s.a)(n,3317,4),Object(s.a)(n,37440,!1),Object(s.a)(n,37441,!1),Object(s.a)(n,37443,37444),Object(s.a)(n,35723,4352),Object(s.a)(n,36010,null),Object(s.a)(n,35977,!1),Object(s.a)(n,3330,0),Object(s.a)(n,3332,0),Object(s.a)(n,3331,0),Object(s.a)(n,3314,0),Object(s.a)(n,32878,0),Object(s.a)(n,3316,0),Object(s.a)(n,3315,0),Object(s.a)(n,32877,0),n),c=function enable(e,t,r){return t?e.enable(r):e.disable(r)},p=function hint(e,t,r){return e.hint(r,t)},h=function pixelStorei(e,t,r){return e.pixelStorei(r,t)},f=(i={},Object(s.a)(i,3042,c),Object(s.a)(i,32773,function(e,t){return e.blendColor.apply(e,Object(a.a)(t))}),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,function(e,t){return e.clearColor.apply(e,Object(a.a)(t))}),Object(s.a)(i,3107,function(e,t){return e.colorMask.apply(e,Object(a.a)(t))}),Object(s.a)(i,2884,c),Object(s.a)(i,2885,function(e,t){return e.cullFace(t)}),Object(s.a)(i,2929,c),Object(s.a)(i,2931,function(e,t){return e.clearDepth(t)}),Object(s.a)(i,2932,function(e,t){return e.depthFunc(t)}),Object(s.a)(i,2928,function(e,t){return e.depthRange.apply(e,Object(a.a)(t))}),Object(s.a)(i,2930,function(e,t){return e.depthMask(t)}),Object(s.a)(i,3024,c),Object(s.a)(i,35723,p),Object(s.a)(i,36006,function drawFramebuffer(e,t){var r=Object(l.n)(e)?36009:36160;return e.bindFramebuffer(r,t)}),Object(s.a)(i,2886,function(e,t){return e.frontFace(t)}),Object(s.a)(i,33170,p),Object(s.a)(i,2849,function(e,t){return e.lineWidth(t)}),Object(s.a)(i,32823,c),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,c),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,c),Object(s.a)(i,3088,function(e,t){return e.scissor.apply(e,Object(a.a)(t))}),Object(s.a)(i,2960,c),Object(s.a)(i,2961,function(e,t){return e.clearStencil(t)}),Object(s.a)(i,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),Object(s.a)(i,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,function(e,t){return e.viewport.apply(e,Object(a.a)(t))}),Object(s.a)(i,3333,h),Object(s.a)(i,3317,h),Object(s.a)(i,37440,h),Object(s.a)(i,37441,h),Object(s.a)(i,37443,h),Object(s.a)(i,3330,h),Object(s.a)(i,3332,h),Object(s.a)(i,3331,h),Object(s.a)(i,36010,function readFramebuffer(e,t){return e.bindFramebuffer(36008,t)}),Object(s.a)(i,3314,h),Object(s.a)(i,32878,h),Object(s.a)(i,3316,h),Object(s.a)(i,3315,h),Object(s.a)(i,32877,h),i),d={blendEquation:function blendEquation(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function blendFunc(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function polygonOffset(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function sampleCoverage(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function stencilFuncFront(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function stencilFuncBack(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function stencilOpFront(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function stencilOpBack(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},g=function isEnabled(e,t){return e.isEnabled(t)},m=(o={},Object(s.a)(o,3042,g),Object(s.a)(o,2884,g),Object(s.a)(o,2929,g),Object(s.a)(o,3024,g),Object(s.a)(o,32823,g),Object(s.a)(o,32926,g),Object(s.a)(o,32928,g),Object(s.a)(o,3089,g),Object(s.a)(o,2960,g),Object(s.a)(o,35977,g),o);function setParameters(e,t){var r={};for(var n in t){var i=Number(n),o=f[n];o&&("string"==typeof o?r[o]=!0:o(e,t[n],i))}var a=e.state&&e.state.cache;if(a){var s=Object.assign({},a,t);for(var l in r){(0,d[l])(e,s)}}}function getParameter(e,t){var r=m[t];return r?r(e,Number(t)):e.getParameter(Number(t))}function getParameters(e,t){t=t||u;var r=Array.isArray(t)?t:Object.keys(t),n={},i=!0,o=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;n[c]=getParameter(e,c)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n}function resetParameters(e){setParameters(e,Object.assign({},u,{}))}},function(e,t,r){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}(),e.exports=r(225)},function(e,t){e.exports=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return o});var n=r(112),i="2.1.0",o=Object(n.a)()},function(e,t,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function isBuffer(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var n=r(391),i=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a="foo"===function foo(){}.name;function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=e.exports=ok,l=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(n.isFunction(e)){if(a)return e.name;var t=e.toString().match(l);return t&&t[1]}}function truncate(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function inspect(e){if(a||!n.isFunction(e))return n.inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function fail(e,t,r,n,i){throw new s.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",s.ok)}function _deepEqual(e,t,r,i){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(n.isDate(e)&&n.isDate(t))return e.getTime()===t.getTime();if(n.isRegExp(e)&&n.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),objEquiv(e,t,r,i))}return r?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t,r,i){if(null==e||null==t)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=isArguments(e),s=isArguments(t);if(a&&!s||!a&&s)return!1;if(a)return _deepEqual(e=o.call(e),t=o.call(t),r);var l,c,p=u(e),h=u(t);if(p.length!==h.length)return!1;for(p.sort(),h.sort(),c=p.length-1;c>=0;c--)if(p[c]!==h[c])return!1;for(c=p.length-1;c>=0;c--)if(!_deepEqual(e[l=p[c]],t[l],r,i))return!1;return!0}function expectedException(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _tryBlock(e){var t;try{e()}catch(e){t=e}return t}function _throws(e,t,r,i){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),o=_tryBlock(t),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!o&&fail(o,r,"Missing expected exception"+i);var a="string"==typeof i,s=!e&&o&&!r;if((!e&&n.isError(o)&&a&&expectedException(o,r)||s)&&fail(o,r,"Got unwanted exception"+i),e&&o&&r&&!expectedException(o,r)||!e&&o)throw o}s.AssertionError=function AssertionError(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=truncate(inspect((t=this).actual),128)+" "+t.operator+" "+truncate(inspect(t.expected),128),this.generatedMessage=!0);var r=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,o=getName(r),a=i.indexOf("\n"+o);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},n.inherits(s.AssertionError,Error),s.fail=fail,s.ok=ok,s.equal=function equal(e,t,r){e!=t&&fail(e,t,r,"==",s.equal)},s.notEqual=function notEqual(e,t,r){e==t&&fail(e,t,r,"!=",s.notEqual)},s.deepEqual=function deepEqual(e,t,r){_deepEqual(e,t,!1)||fail(e,t,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function deepStrictEqual(e,t,r){_deepEqual(e,t,!0)||fail(e,t,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function notDeepEqual(e,t,r){_deepEqual(e,t,!1)&&fail(e,t,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function notDeepStrictEqual(e,t,r){_deepEqual(e,t,!0)&&fail(e,t,r,"notDeepStrictEqual",notDeepStrictEqual)},s.strictEqual=function strictEqual(e,t,r){e!==t&&fail(e,t,r,"===",s.strictEqual)},s.notStrictEqual=function notStrictEqual(e,t,r){e===t&&fail(e,t,r,"!==",s.notStrictEqual)},s.throws=function(e,t,r){_throws(!0,e,t,r)},s.doesNotThrow=function(e,t,r){_throws(!1,e,t,r)},s.ifError=function(e){if(e)throw e};var u=Object.keys||function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t}}).call(this,r(28))},function(e,t,r){"use strict";function formatTime(e){return e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s")}function leftPad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function formatImage(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));var o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}r.d(t,"b",function(){return formatTime}),r.d(t,"c",function(){return leftPad}),r.d(t,"a",function(){return formatImage})},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13),l=r(24),u=r.n(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function TextRenderer(e){var t,r=e.classes,n=e.semantic,o=e.size,a=e.color,s=e.underlined,l=e.children,p=_objectWithoutProperties(e,["classes","semantic","size","color","underlined","children"]),h=n||"span",f=u()(r.text,r[o+"Size"],r[a+"Color"],(_defineProperty(t={},r[n],n),_defineProperty(t,r.isUnderlined,s),t));return i.a.createElement(h,c({},p,{className:f}),l)}TextRenderer.propTypes={classes:a.a.object.isRequired,semantic:a.a.oneOf(["em","strong"]),size:a.a.oneOf(["inherit","small","base","text"]),color:a.a.oneOf(["base","light"]),underlined:a.a.bool,children:a.a.node.isRequired},TextRenderer.defaultProps={size:"inherit",color:"base",underlined:!1};var p=Object(s.a)(function styles(e){var t=e.fontFamily,r=e.fontSize,n=e.color;return{text:{fontFamily:t.base},inheritSize:{fontSize:"inherit"},smallSize:{fontSize:r.small},baseSize:{fontSize:r.base},textSize:{fontSize:r.text},baseColor:{color:n.base},lightColor:{color:n.light},em:{fontStyle:"italic"},strong:{fontWeight:"bold"},isUnderlined:{borderBottom:[[1,"dotted",n.lightest]]}}})(TextRenderer);r.d(t,"a",function(){return p})},function(e,t){var r,n,i=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var o,a=[],s=!1,l=-1;function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):l=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++l<t;)o&&o[l].run();l=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t){e.exports=function isObjectLike(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(133),i=r(137);e.exports=function isArrayLike(e){return null!=e&&i(e.length)&&!n(e)}},function(e,t,r){"use strict";r.d(t,"c",function(){return isWebGL}),r.d(t,"d",function(){return isWebGL2}),r.d(t,"b",function(){return assertWebGLContext}),r.d(t,"a",function(){return assertWebGL2Context});var n=r(32),i=r(5),o=34962,a=32874,s="Invalid WebGLRenderingContext",l="Requires WebGL2";function isWebGL(e){return Boolean(e&&(e instanceof n.c||e.ARRAY_BUFFER===o))}function isWebGL2(e){return Boolean(e&&(e instanceof n.a||e.TEXTURE_BINDING_3D===a))}function assertWebGLContext(e){Object(i.a)(isWebGL(e),s)}function assertWebGL2Context(e){Object(i.a)(isWebGL2(e),l)}},function(e,t,r){"use strict";(function(e){var n=r(25),i=r(208),o=!("object"===(void 0===e?"undefined":Object(n.a)(e))&&"[object process]"===String(e)&&!e.browser)||i.a;t.a=o}).call(this,r(58))},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return trackContextState}),r.d(t,"c",function(){return pushContextState}),r.d(t,"b",function(){return popContextState});var n=r(3),i=r(4),o=r(0),a=r(51),s=r(5),l=function deepEqual(e,t){var r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},u={enable:function enable(e,t){return e(Object(o.a)({},t,!0))},disable:function disable(e,t){return e(Object(o.a)({},t,!1))},pixelStorei:function pixelStorei(e,t,r){return e(Object(o.a)({},t,r))},hint:function hint(e,t,r){return e(Object(o.a)({},t,r))},bindFramebuffer:function bindFramebuffer(e,t,r){var n;switch(t){case 36160:return e((n={},Object(o.a)(n,36006,r),Object(o.a)(n,36010,r),n));case 36009:return e(Object(o.a)({},36006,r));case 36008:return e(Object(o.a)({},36010,r));default:return null}},blendColor:function blendColor(e,t,r,n,i){return e(Object(o.a)({},32773,new Float32Array([t,r,n,i])))},blendEquation:function blendEquation(e,t){var r;return e((r={},Object(o.a)(r,32777,t),Object(o.a)(r,34877,t),r))},blendEquationSeparate:function blendEquationSeparate(e,t,r){var n;return e((n={},Object(o.a)(n,32777,t),Object(o.a)(n,34877,r),n))},blendFunc:function blendFunc(e,t,r){var n;return e((n={},Object(o.a)(n,32969,t),Object(o.a)(n,32968,r),Object(o.a)(n,32971,t),Object(o.a)(n,32970,r),n))},blendFuncSeparate:function blendFuncSeparate(e,t,r,n,i){var a;return e((a={},Object(o.a)(a,32969,t),Object(o.a)(a,32968,r),Object(o.a)(a,32971,n),Object(o.a)(a,32970,i),a))},clearColor:function clearColor(e,t,r,n,i){return e(Object(o.a)({},3106,new Float32Array([t,r,n,i])))},clearDepth:function clearDepth(e,t){return e(Object(o.a)({},2931,t))},clearStencil:function clearStencil(e,t){return e(Object(o.a)({},2961,t))},colorMask:function colorMask(e,t,r,n,i){return e(Object(o.a)({},3107,[t,r,n,i]))},cullFace:function cullFace(e,t){return e(Object(o.a)({},2885,t))},depthFunc:function depthFunc(e,t){return e(Object(o.a)({},2932,t))},depthRange:function depthRange(e,t,r){return e(Object(o.a)({},2928,new Float32Array([t,r])))},depthMask:function depthMask(e,t){return e(Object(o.a)({},2930,t))},frontFace:function frontFace(e,t){return e(Object(o.a)({},2886,t))},lineWidth:function lineWidth(e,t){return e(Object(o.a)({},2849,t))},polygonOffset:function polygonOffset(e,t,r){var n;return e((n={},Object(o.a)(n,32824,t),Object(o.a)(n,10752,r),n))},sampleCoverage:function sampleCoverage(e,t,r){var n;return e((n={},Object(o.a)(n,32938,t),Object(o.a)(n,32939,r),n))},scissor:function scissor(e,t,r,n,i){return e(Object(o.a)({},3088,new Int32Array([t,r,n,i])))},stencilMask:function stencilMask(e,t){var r;return e((r={},Object(o.a)(r,2968,t),Object(o.a)(r,36005,t),r))},stencilMaskSeparate:function stencilMaskSeparate(e,t,r){return e(Object(o.a)({},1028===t?2968:36005,r))},stencilFunc:function stencilFunc(e,t,r,n){var i;return e((i={},Object(o.a)(i,2962,t),Object(o.a)(i,2967,r),Object(o.a)(i,2963,n),Object(o.a)(i,34816,t),Object(o.a)(i,36003,r),Object(o.a)(i,36004,n),i))},stencilFuncSeparate:function stencilFuncSeparate(e,t,r,n,i){var a;return e((a={},Object(o.a)(a,1028===t?2962:34816,r),Object(o.a)(a,1028===t?2967:36003,n),Object(o.a)(a,1028===t?2963:36004,i),a))},stencilOp:function stencilOp(e,t,r,n){var i;return e((i={},Object(o.a)(i,2964,t),Object(o.a)(i,2965,r),Object(o.a)(i,2966,n),Object(o.a)(i,34817,t),Object(o.a)(i,34818,r),Object(o.a)(i,34819,n),i))},stencilOpSeparate:function stencilOpSeparate(e,t,r,n,i){var a;return e((a={},Object(o.a)(a,1028===t?2964:34817,r),Object(o.a)(a,1028===t?2965:34818,n),Object(o.a)(a,1028===t?2966:34819,i),a))},viewport:function viewport(e,t,r,n,i){return e(Object(o.a)({},2978,new Int32Array([t,r,n,i])))}};function installGetterOverride(e,t){var r=e[t].bind(e);e[t]=function get(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=r.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:r.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function installSetterSpy(e,t,r){var n=e[t].bind(e);e[t]=function set(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s,l=r.apply(void 0,[e.state._updateCache].concat(o)),u=l.valueChanged,c=l.oldValue;u&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(o)),n.apply(void 0,o));return c},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var c=function(){function GLState(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.copyState,i=void 0!==r&&r,o=t.log,s=void 0===o?function(){}:o;Object(n.a)(this,GLState),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=i?Object(a.b)(e):Object.assign({},a.a),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(GLState,[{key:"push",value:function push(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function pop(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(a.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function _updateCache(e){var t,r=!1,n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)Object(s.a)(void 0!==i),l(e[i],this.cache[i])||(r=!0,t=this.cache[i],!n||i in n||(n[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:r,oldValue:t}}}]),GLState}();function trackContextState(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enable,i=void 0===n||n,o=r.copyState;if(Object(s.a)(void 0!==o),!t.state){var a=void 0!==e?e:window;for(var l in a.polyfillContext&&a.polyfillContext(t),t.state=new c(t,{copyState:o,enable:i}),u){installSetterSpy(t,l,u[l])}installGetterOverride(t,"getParameter"),installGetterOverride(t,"isEnabled")}return t.state.enable=i,t}function pushContextState(e){e.state||trackContextState(e,{copyState:!1}),e.state.push()}function popContextState(e){Object(s.a)(e.state),e.state.pop()}}).call(this,r(28))},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13);function TypeRenderer(e){var t=e.classes,r=e.children;return i.a.createElement("span",{className:t.type},r)}TypeRenderer.propTypes={classes:a.a.object.isRequired,children:a.a.node.isRequired};var l=Object(s.a)(function styles(e){var t=e.fontFamily,r=e.fontSize,n=e.color;return{type:{fontFamily:t.monospace,fontSize:r.small,color:n.type}}})(TypeRenderer);r.d(t,"a",function(){return l})},function(e,t,r){var n=r(268),i=r(273);e.exports=function getNative(e,t){var r=i(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(95),i=r(269),o=r(270),a="[object Null]",s="[object Undefined]",l=n?n.toStringTag:void 0;e.exports=function baseGetTag(e){return null==e?void 0===e?s:a:l&&l in Object(e)?i(e):o(e)}},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13),l=r(24),u=r.n(l);function NameRenderer(e){var t,r,n,o=e.classes,a=e.children,s=e.deprecated,l=u()(o.name,(t={},r=o.isDeprecated,n=s,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t));return i.a.createElement("code",{className:l},a)}NameRenderer.propTypes={classes:a.a.object.isRequired,children:a.a.node.isRequired,deprecated:a.a.bool};var c=Object(s.a)(function styles(e){var t=e.fontFamily,r=e.fontSize,n=e.color;return{name:{fontFamily:t.monospace,fontSize:r.small,color:n.name},isDeprecated:{color:n.light,textDecoration:"line-through"}}})(NameRenderer);r.d(t,"a",function(){return c})},function(e,t,r){"use strict";(function(e,n){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",function(){return i});"object"!==(void 0===e?"undefined":_typeof(e))||"[object process]"!==String(e)||e.browser,"undefined"!=typeof window&&window;var i=void 0!==n?n:window;"undefined"!=typeof document&&document}).call(this,r(58),r(28))},function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return o});var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:e,o=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var a={get passive(){o=!0}};i.addEventListener("test",a,a),i.removeEventListener("test",a,a)}catch(e){}}).call(this,r(28))},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),a=_interopRequireDefault(r(59)),s=_interopRequireDefault(r(129)),l=_interopRequireDefault(r(91));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function StyleRule(e,t,r){_classCallCheck(this,StyleRule),this.type="style",this.isProcessed=!1;var n=r.sheet,i=r.Renderer,o=r.selector;this.key=e,this.options=r,this.style=t,o&&(this.selectorText=o),this.renderer=n?n.renderer:new i}return o(StyleRule,[{key:"prop",value:function prop(e,t){if(void 0===t)return this.style[e];if(this.style[e]===t)return this;var r=null==(t=this.options.jss.plugins.onChangeValue(t,e,this))||!1===t,n=e in this.style;if(r&&!n)return this;var i=r&&n;if(i?delete this.style[e]:this.style[e]=t,this.renderable)return i?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,t),this;var o=this.options.sheet;return o&&o.attached&&(0,a.default)(!1,'Rule is not linked. Missing sheet option "link: true".'),this}},{key:"applyTo",value:function applyTo(e){var t=this.toJSON();for(var r in t)this.renderer.setProperty(e,r,t[r]);return this}},{key:"toJSON",value:function toJSON(){var e={};for(var t in this.style){var r=this.style[t];"object"!==(void 0===r?"undefined":i(r))?e[t]=r:Array.isArray(r)&&(e[t]=(0,l.default)(r))}return e}},{key:"toString",value:function toString(e){var t=this.options.sheet,r=!!t&&t.options.link?n({},e,{allowEmpty:!0}):e;return(0,s.default)(this.selector,this.style,r)}},{key:"selector",set:function set(e){if(e!==this.selectorText&&(this.selectorText=e,this.renderable&&!this.renderer.setSelector(this.renderable,e)&&this.renderable)){var t=this.renderer.replaceRule(this.renderable,this);t&&(this.renderable=t)}},get:function get(){return this.selectorText}}]),StyleRule}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(404);function randomPosition(e){return Array.isArray(e)?coordInBBox(e):e&&e.bbox?coordInBBox(e.bbox):[360*rnd(),180*rnd()]}function rnd(){return Math.random()-.5}function coordInBBox(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}t.randomPosition=randomPosition,t.randomPoint=function randomPoint(e,t){void 0===t&&(t={}),null==e&&(e=1);for(var r=[],i=0;i<e;i++)r.push(n.point(randomPosition(t.bbox)));return n.featureCollection(r)},t.randomPolygon=function randomPolygon(e,t){void 0===t&&(t={}),null==e&&(e=1),n.isNumber(t.num_vertices)&&void 0!==t.num_vertices||(t.num_vertices=10),n.isNumber(t.max_radial_length)&&void 0!==t.max_radial_length||(t.max_radial_length=10);for(var r=[],i=function(e){var i,o=[],a=Array.apply(null,new Array(t.num_vertices+1)).map(Math.random);a.forEach(function(e,t,r){r[t]=t>0?e+r[t-1]:e}),a.forEach(function(e){e=2*e*Math.PI/a[a.length-1];var r=Math.random();o.push([r*(t.max_radial_length||10)*Math.sin(e),r*(t.max_radial_length||10)*Math.cos(e)])}),o[o.length-1]=o[0],o=o.map((i=randomPosition(t.bbox),function(e){return[e[0]+i[0],e[1]+i[1]]})),r.push(n.polygon([o]))},o=0;o<e;o++)i();return n.featureCollection(r)},t.randomLineString=function randomLineString(e,t){if(void 0===t&&(t={}),t=t||{},!n.isObject(t))throw new Error("options is invalid");var r=t.bbox,i=t.num_vertices,o=t.max_length,a=t.max_rotation;null==e&&(e=1),(!n.isNumber(i)||void 0===i||i<2)&&(i=10),n.isNumber(o)&&void 0!==o||(o=1e-4),n.isNumber(a)&&void 0!==a||(a=Math.PI/8);for(var s=[],l=0;l<e;l++){for(var u=[randomPosition(r)],c=0;c<i-1;c++){var p=(0===c?2*Math.random()*Math.PI:Math.tan((u[c][1]-u[c-1][1])/(u[c][0]-u[c-1][0])))+(Math.random()-.5)*a*2,h=Math.random()*o;u.push([u[c][0]+h*Math.cos(p),u[c][1]+h*Math.sin(p)])}s.push(n.lineString(u))}return n.featureCollection(s)}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(18),u=r(45),c=r(5),p=[34069,34070,34071,34072,34073,34074],h=function(e){function TextureCube(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,TextureCube),(t=Object(o.a)(this,Object(a.a)(TextureCube).call(this,e,Object.assign({},r,{target:34067})))).initialize(r),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(TextureCube,e),Object(i.a)(TextureCube,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,r=void 0===t?6408:t,n=e.mipmaps,i=void 0===n||n,o=e.width,a=void 0===o?1:o,s=e.height,l=void 0===s?1:s,u=e.type,p=void 0===u?5121:u,h=e.dataFormat,f=this._deduceParameters({format:r,type:p,dataFormat:h});p=f.type,h=f.dataFormat;var d=this._deduceImageSize({data:e[34069],width:a,height:l});a=d.width,l=d.height,Object(c.a)(a===l),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function subImage(e){var t=e.face,r=e.data,n=e.x,i=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,l=void 0===s?0:s;return this._subImage({target:t,data:r,x:i,y:a,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function setCubeMapImageData(e){var t=e.width,r=e.height,n=e.pixels,i=e.data,o=e.border,a=void 0===o?0:o,s=e.format,l=void 0===s?6408:s,u=e.type,c=void 0===u?5121:u,h=(e.generateMipmap,this.gl);if(n=n||i,this.bind(),this.width||this.height)for(var f=0;f<p.length;f++){var d=p[f];h.texImage2D(d,0,l,t,r,a,l,c,n[d])}else for(var g=0;g<p.length;g++){var m=p[g];h.texImage2D(m,0,l,l,c,n[m])}}},{key:"bind",value:function bind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==e&&this.gl.activeTexture(33984+e),this.gl.bindTexture(34067,this.handle),e}},{key:"unbind",value:function unbind(){return this.gl.bindTexture(34067,null),this}}]),TextureCube}(u.a);h.FACES=p},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(115),u=r(19),c=function assert(e,t){if(!e)throw new Error(t)},p=function(e){function Vector(){return Object(n.a)(this,Vector),Object(o.a)(this,Object(a.a)(Vector).apply(this,arguments))}return Object(s.a)(Vector,e),Object(i.a)(Vector,[{key:"len",value:function len(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function magnitude(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function lengthSquared(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function distance(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function distanceSquared(e){for(var t=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-e[r];t+=n*n}return Object(u.a)(t)}},{key:"dot",value:function dot(e){for(var t=0,r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return Object(u.a)(t)}},{key:"normalize",value:function normalize(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function subtract(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function multiply(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function divide(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function scale(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function scaleAndAdd(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=this[r]*t+e[r];return this.check()}},{key:"lengthSq",value:function lengthSq(){return this.lengthSquared()}},{key:"distanceTo",value:function distanceTo(e){return this.distance(e)}},{key:"distanceToSquared",value:function distanceToSquared(e){return this.distanceSquared(e)}},{key:"getComponent",value:function getComponent(e){return c(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(u.a)(this[e])}},{key:"setComponent",value:function setComponent(e,t){return c(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function addVectors(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function subVectors(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function multiplyVectors(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function get(){return this[0]},set:function set(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function get(){return this[1]},set:function set(e){return this[1]=Object(u.a)(e)}}]),Vector}(l.a)},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(24),l=r.n(s),u=r(13),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function HeadingRenderer(e){var t=e.classes,r=e.level,n=e.children,o=_objectWithoutProperties(e,["classes","level","children"]),a="h"+r,s=l()(t.heading,t["heading"+r]);return i.a.createElement(a,c({},o,{className:s}),n)}HeadingRenderer.propTypes={classes:a.a.object.isRequired,level:a.a.oneOf([1,2,3,4,5,6]).isRequired,children:a.a.node};var p=Object(u.a)(function styles(e){var t=e.color,r=e.fontFamily,n=e.fontSize;return{heading:{margin:0,color:t.base,fontFamily:r.base,fontWeight:"normal"},heading1:{fontSize:n.h1},heading2:{fontSize:n.h2},heading3:{fontSize:n.h3},heading4:{fontSize:n.h4},heading5:{fontSize:n.h5,fontWeight:"bold"},heading6:{fontSize:n.h6,fontStyle:"italic"}}})(HeadingRenderer);r.d(t,"a",function(){return p})},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13);function ParaRenderer(e){var t=e.classes,r=e.semantic,n=e.children,o=r||"div";return i.a.createElement(o,{className:t.para},n)}ParaRenderer.propTypes={classes:a.a.object.isRequired,semantic:a.a.oneOf(["p"]),children:a.a.node.isRequired};var l=Object(s.a)(function styles(e){var t=e.space,r=e.color,n=e.fontFamily;return{para:{marginTop:0,marginBottom:t[2],color:r.base,fontFamily:n.base,fontSize:"inherit",lineHeight:1.5}}})(ParaRenderer);r.d(t,"a",function(){return l})},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13),l=r(31),u=r(68),c=r(65),p=r(88),h=r.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function ArgumentRenderer(e){var t=e.classes,r=e.name,n=e.type,o=e.description,a=e.returns,s=e.block,p=_objectWithoutProperties(e,["classes","name","type","description","returns","block"]),d=n&&"OptionalType"===n.type,g=p.default;return d&&(n=n.expression),i.a.createElement(h.a,f({className:s&&t.block},p),a&&"Returns",r&&i.a.createElement("span",null,i.a.createElement(u.a,null,r),n&&":"),n&&i.a.createElement(c.a,null,n.name,d&&"?",!!g&&"="+g),n&&o&&"  ",o&&i.a.createElement(l.a,{text:""+o,inline:!0}))}ArgumentRenderer.propTypes={classes:a.a.object.isRequired,name:a.a.string,type:a.a.object,default:a.a.string,description:a.a.string,returns:a.a.bool,block:a.a.bool};var d=Object(s.a)(function styles(e){return{block:{marginBottom:e.space[2]}}})(ArgumentRenderer);r.d(t,"a",function(){return d})},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(31),l=r(196),u=r.n(l),c=function plural(e,t){return 1===e.length?t:t+"s"},p=function list(e){return e.map(function(e){return e.description}).join(", ")},h=function paragraphs(e){return e.map(function(e){return e.description}).join("\n\n")},f={deprecated:function deprecated(e){return"**Deprecated:** "+e[0].description},see:function see(e){return h(e)},link:function link(e){return h(e)},author:function author(e){return c(e,"Author")+": "+p(e)},version:function version(e){return"Version: "+e[0].description},since:function since(e){return"Since: "+e[0].description}};function getMarkdown(e){return u()(f,function(t,r){return e[r]&&t(e[r])}).filter(Boolean).join("\n\n")}function JsDoc(e){var t=getMarkdown(e);return t?i.a.createElement(s.a,{text:t}):null}JsDoc.propTypes={deprecated:a.a.array,see:a.a.array,link:a.a.array,author:a.a.array,version:a.a.array,since:a.a.array},r.d(t,"a",function(){return JsDoc})},function(e,t,r){var n=r(174),i=r(175),o=r(99),a=r(49),s=r(61),l=r(100),u=r(98),c=r(101),p="[object Map]",h="[object Set]",f=Object.prototype.hasOwnProperty;e.exports=function isEmpty(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||o(e)))return!e.length;var t=i(e);if(t==p||t==h)return!e.size;if(u(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(24),l=r.n(s),u=r(13);function CodeRenderer(e){var t=e.classes,r=e.className,n=e.children,o=l()(r,t.code);return r&&-1!==r.indexOf("lang-")?i.a.createElement("code",{className:o,dangerouslySetInnerHTML:{__html:n}}):i.a.createElement("code",{className:o},n)}CodeRenderer.propTypes={classes:a.a.object.isRequired,className:a.a.string,children:a.a.node.isRequired};var c=Object(u.a)(function styles(e){return{code:{fontFamily:e.fontFamily.monospace,fontSize:"inherit",color:"inherit",background:"transparent",whiteSpace:"inherit"}}})(CodeRenderer);r.d(t,"a",function(){return c})},function(e,t,r){"use strict";var n=r(120);r.d(t,"e",function(){return n.default});r(23);var i=r(86);r.d(t,"a",function(){return i.default});r(121);var o=r(122);r.d(t,"d",function(){return o.default});var a=r(123);r.d(t,"c",function(){return a.default});var s=r(85);r.d(t,"b",function(){return s.default});r(143),r(124),r(125),r(126),r(127),r(128)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=_interopRequireDefault(r(92)),a=_interopRequireDefault(r(155)),s=_interopRequireDefault(r(72)),l=_interopRequireDefault(r(238));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function RuleList(e){var t=this;_classCallCheck(this,RuleList),this.map={},this.raw={},this.index=[],this.update=function(e,r){var n=t.options,i=n.jss.plugins,o=n.sheet;if("string"==typeof e)i.onUpdate(r,t.get(e),o);else for(var a=0;a<t.index.length;a++)i.onUpdate(e,t.index[a],o)},this.options=e,this.classes=e.classes}return i(RuleList,[{key:"add",value:function add(e,t,r){var i=this.options,a=i.parent,u=i.sheet,c=i.jss,p=i.Renderer,h=i.generateClassName;!(r=n({classes:this.classes,parent:a,sheet:u,jss:c,Renderer:p,generateClassName:h},r)).selector&&this.classes[e]&&(r.selector="."+(0,l.default)(this.classes[e])),this.raw[e]=t;var f=(0,o.default)(e,t,r),d=void 0;!r.selector&&f instanceof s.default&&(d=h(f,u),f.selector="."+(0,l.default)(d)),this.register(f,d);var g=void 0===r.index?this.index.length:r.index;return this.index.splice(g,0,f),f}},{key:"get",value:function get(e){return this.map[e]}},{key:"remove",value:function remove(e){this.unregister(e),this.index.splice(this.indexOf(e),1)}},{key:"indexOf",value:function indexOf(e){return this.index.indexOf(e)}},{key:"process",value:function process(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)}},{key:"register",value:function register(e,t){this.map[e.key]=e,e instanceof s.default&&(this.map[e.selector]=e,t&&(this.classes[e.key]=t))}},{key:"unregister",value:function unregister(e){delete this.map[e.key],e instanceof s.default&&(delete this.map[e.selector],delete this.classes[e.key])}},{key:"link",value:function link(e){for(var t=this.options.sheet.renderer.getUnescapedKeysMap(this.index),r=0;r<e.length;r++){var n=e[r],i=this.options.sheet.renderer.getKey(n);t[i]&&(i=t[i]);var o=this.map[i];o&&(0,a.default)(o,n)}}},{key:"toString",value:function toString(e){for(var t="",r=this.options.sheet,n=!!r&&r.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||n)&&(t&&(t+="\n"),t+=o)}return t}}]),RuleList}();t.default=u},function(e,t){e.exports=function eq(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){"use strict";r.r(t);var n=r(52),i=r(1),o=r(23),a=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r;function Marker(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_container",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_marker",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_onDragEnd",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_onDragEnd",function(){t.props.onDragEnd(t._marker.getLngLat())}),t}r=e,(t=Marker).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=Marker.prototype;return s.componentDidMount=function componentDidMount(){var e=this.props,t=e.element,r=e.longitude,i=e.latitude,o=e.offset,s=e.draggable,l=e.onDragEnd;this._container=document.createElement("div"),Object(n.render)(t,this._container);var u=new a.a.Marker(this._container,{draggable:s,offset:o});u.setLngLat([r,i]).addTo(this._map),l&&u.on("dragend",this._onDragEnd),this._marker=u},s.componentDidUpdate=function componentDidUpdate(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&(this._marker.setLngLat([this.props.longitude,this.props.latitude]),Object(n.render)(this.props.element,this._container))},s.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&(this._marker.remove(),Object(n.unmountComponentAtNode)(this._container))},s.getMarker=function getMarker(){return this._marker},s.render=function render(){var e=this;return Object(i.createElement)(o.default.Consumer,{},function(t){return t&&(e._map=t),null})},Marker}(i.PureComponent);_defineProperty(s,"displayName","Marker"),_defineProperty(s,"defaultProps",{offset:null,draggable:!1}),t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(30),o=r(23);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var a=new i.Map,s=function diff(e,t){void 0===e&&(e=a),void 0===t&&(t=a);var r=new Set([].concat(_toConsumableArray(e.keySeq().toArray()),_toConsumableArray(t.keySeq().toArray())));return Array.from(r).reduce(function(r,n){var o=e.get(n);return Object(i.is)(t.get(n),o)||r.push([n,o]),r},[])},l=function queryRenderedFeatures(e,t,r,n){var i={layers:[t]};if(n){var o=[[r[0]-n,r[1]-n],[r[0]+n,r[1]+n]];return e.queryRenderedFeatures(o,i)}return e.queryRenderedFeatures(r,i)};function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){var t,r;function Layer(t){var r;if(_defineProperty(_assertThisInitialized(_assertThisInitialized(r=e.call(this,t)||this)),"_id",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onClick",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onHover",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onEnter",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onLeave",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onClick",function(e){if(r.props.onClick){var t=r.props.onClick,n=[e.point.x,e.point.y];t(_extends({},e,{features:l(r._map,r._id,n,r.props.radius)}))}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onHover",function(e){if(r.props.onHover){var t=r.props.onHover,n=[e.point.x,e.point.y];t(_extends({},e,{features:l(r._map,r._id,n,r.props.radius)}))}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onEnter",function(e){if(r.props.onEnter){var t=r.props.onEnter,n=[e.point.x,e.point.y];t(_extends({},e,{features:l(r._map,r._id,n,r.props.radius)}))}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onLeave",function(e){if(r.props.onLeave){var t=r.props.onLeave,n=[e.point.x,e.point.y];t(_extends({},e,{features:l(r._map,r._id,n,r.props.radius)}))}}),!Object(i.isImmutable)(t.layer))throw new Error("Provided layer prop is not an Immutable object");return r._id=t.id||t.layer.get("id",""),r}r=e,(t=Layer).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=Layer.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.layer,n=t.before,i=r.toJS();n&&e.getLayer(n)?e.addLayer(i,n):e.addLayer(i),e.on("click",this._id,this._onClick),e.on("mousemove",this._id,this._onHover),e.on("mouseenter",this._id,this._onEnter),e.on("mouseleave",this._id,this._onLeave)},a.componentDidUpdate=function componentDidUpdate(e){var t=this,r=this.props.layer,n=e.layer;if(this.props.before!==e.before&&this._map.moveLayer(r.get("id"),this.props.before),!Object(i.is)(r,n)){var o=r.get("paint"),a=n.get("paint");Object(i.is)(o,a)||s(o,a).forEach(function(e){var r=e[0],n=e[1],o=Object(i.isImmutable)(n)?n.toJS():n;t._map.setPaintProperty(t._id,r,o)});var l=r.get("layout"),u=n.get("layout");Object(i.is)(l,u)||s(l,u).forEach(function(e){var r=e[0],n=e[1],o=Object(i.isImmutable)(n)?n.toJS():n;t._map.setLayoutProperty(t._id,r,o)});var c=r.get("filter"),p=n.get("filter");c?Object(i.is)(c,p)||this._map.setFilter(this._id,c.toJS()):this._map.setFilter(this._id,void 0)}},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&(this._map.off("click",this._id,this._onClick),this._map.off("mousemove",this._id,this._onHover),this._map.off("mouseenter",this._id,this._onEnter),this._map.off("mouseleave",this._id,this._onLeave),this._map.removeLayer(this._id))},a.render=function render(){var e=this;return Object(n.createElement)(o.default.Consumer,{},function(t){return t&&(e._map=t),null})},Layer}(n.PureComponent);_defineProperty(u,"displayName","Layer"),_defineProperty(u,"defaultProps",{radius:0});t.default=u},function(e,t,r){"use strict";var n=r(144),i=r(188),o=r.n(i),a=r(189),s=r.n(a),l=r(190),u=r.n(l),c=r(191),p=r.n(c),h=r(192),f=r.n(h),d=r(193),g=r.n(d),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y=Object(n.create)({createGenerateClassName:function createGenerateClassName(){var e=0;return function(t){return"rsg--"+t.key+"-"+e++}},plugins:[o()(),s()({reset:m({},{animation:"none 0s ease 0s 1 normal none running","backface-visibility":"visible",background:"transparent none repeat 0 0 / auto auto padding-box border-box scroll",border:"medium none currentColor","border-image":"none","border-radius":"0",bottom:"auto","box-shadow":"none",clear:"none",clip:"auto",columns:"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule":"medium none currentColor","column-span":"1","column-width":"auto",content:"normal","counter-increment":"none","counter-reset":"none",float:"none",height:"auto",hyphens:"none",left:"auto",margin:"0","max-height":"none","max-width":"none","min-height":"0","min-width":"0",opacity:"1",outline:"medium none invert",overflow:"visible","overflow-x":"visible","overflow-y":"visible",padding:"0","page-break-after":"auto","page-break-before":"auto","page-break-inside":"auto",perspective:"none","perspective-origin":"50% 50%",position:"static",right:"auto","table-layout":"auto","text-decoration":"none",top:"auto",transform:"none","transform-origin":"50% 50% 0","transform-style":"flat",transition:"none 0s ease 0s","unicode-bidi":"normal","vertical-align":"baseline",width:"auto","z-index":"auto"},{boxSizing:"border-box",color:"inherit",font:"inherit",fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"})}),u()(),p()(),f()(),g()()]});t.a=y},function(e,t,r){var n=r(1),i=r(2);function Group(e){var t=n.Children.toArray(e.children),r=t,i=e.separator,o=n.isValidElement(i);return t.length>1&&(r=[t.shift()],t.forEach(function(e,t){if(o){var a="separator-"+(e.key||t);i=n.cloneElement(i,{key:a})}return r.push(i,e)})),n.createElement(e.inline?"span":"div",{className:e.className},r)}Group.propTypes={children:i.node,inline:i.bool,separator:i.node,className:i.string},Group.defaultProps={separator:" "},e.exports=Group},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(75),u=r(19),c=r(46),p=[0,0,0],h=function(e){function Vector3(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n.a)(this,Vector3),e=Object(o.a)(this,Object(a.a)(Vector3).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,r,i),e}return Object(s.a)(Vector3,e),Object(i.a)(Vector3,[{key:"angle",value:function angle(e){return c.a(this,e)}},{key:"cross",value:function cross(e){return c.b(this,this,e),this.check()}},{key:"rotateX",value:function rotateX(e){var t=e.radians,r=e.origin,n=void 0===r?p:r;return c.e(this,this,n,t),this.check()}},{key:"rotateY",value:function rotateY(e){var t=e.radians,r=e.origin,n=void 0===r?p:r;return c.f(this,this,n,t),this.check()}},{key:"rotateZ",value:function rotateZ(e){var t=e.radians,r=e.origin,n=void 0===r?p:r;return c.g(this,this,n,t),this.check()}},{key:"operation",value:function operation(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function get(){return 3}},{key:"z",get:function get(){return this[2]},set:function set(e){return this[2]=Object(u.a)(e)}}]),Vector3}(l.a)},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toCssValue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return e;var r="";if(Array.isArray(e[0]))for(var i=0;i<e.length&&"!important"!==e[i];i++)r&&(r+=", "),r+=n(e[i]," ");else r=n(e,", ");t||"!important"!==e[e.length-1]||(r+=" !important");return r};var n=function join(e,t){for(var r="",n=0;n<e.length&&"!important"!==e[n];n++)r&&(r+=t),r+=e[n];return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function createRule(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed",t=arguments[1],r=arguments[2],a=r.jss,s=(0,o.default)(t),l=a.plugins.onCreateRule(e,s,r);if(l)return l;"@"===e[0]&&(0,n.default)(!1,"[JSS] Unknown at-rule %s",e);return new i.default(e,s,r)};var n=_interopRequireDefault(r(59)),i=_interopRequireDefault(r(72)),o=_interopRequireDefault(r(235));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){var n=r(258),i=r(259),o=r(260),a=r(261),s=r(262);function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=n,ListCache.prototype.delete=i,ListCache.prototype.get=o,ListCache.prototype.has=a,ListCache.prototype.set=s,e.exports=ListCache},function(e,t,r){var n=r(84);e.exports=function assocIndexOf(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(48).Symbol;e.exports=n},function(e,t,r){var n=r(66)(Object,"create");e.exports=n},function(e,t,r){var n=r(282);e.exports=function getMapData(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t){var r=Object.prototype;e.exports=function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(294),i=r(60),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,r){(function(e){var n=r(48),i=r(296),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l}).call(this,r(136)(e))},function(e,t,r){var n=r(298),i=r(299),o=r(300),a=o&&o.isTypedArray,s=a?i(a):n;e.exports=s},function(e,t,r){var n=r(168),i=r(174),o=r(61);e.exports=function keys(e){return o(e)?n(e):i(e)}},function(e,t,r){var n=r(67),i=r(60),o="[object Symbol]";e.exports=function isSymbol(e){return"symbol"==typeof e||i(e)&&n(e)==o}},function(e,t,r){var n=r(103),i=1/0;e.exports=function toKey(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,r){"use strict";r.d(t,"a",function(){return cloneTextureFrom});var n=r(50),i=r(74),o=r(108),a=r(55),s=r.n(a);function cloneTextureFrom(e,t){s()(e instanceof n.a||e instanceof i.a||e instanceof o.a);var r=e.constructor,a=e.gl,l=e.width,u=e.height,c=e.format,p=e.type,h=e.dataFormat,f=e.border,d=e.mipmaps;return new r(a,Object.assign({width:l,height:u,format:c,type:p,dataFormat:h,border:f,mipmaps:d},t))}},function(e,t,r){"use strict";r.d(t,"a",function(){return isOldIE});var n=r(22);function isOldIE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.b.navigator||{},r=e.userAgent||t.userAgent||"",i=-1!==r.indexOf("MSIE "),o=-1!==r.indexOf("Trident/");return i||o}},function(e,t,r){"use strict";r.d(t,"a",function(){return stubRemovedMethods});var n=r(37);function stubRemovedMethods(e,t,r,i){var o="See luma.gl ".concat(r," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);i.forEach(function(e){a.methodName||(a[e]=function(){throw n.a.removed("Calling removed method ".concat(t,".").concat(e,": "),o),new Error(e)})})}},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(3),i=r(11),o=r(10),a=r(4),s=r(12),l=r(18),u=r(8),c=r(26),p=r(45),h=r(20),f=function(e){function Texture3D(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,Texture3D),Object(u.d)(e),(t=Object(i.a)(this,Object(o.a)(Texture3D).call(this,e,Object.assign({},r,{target:r.target||32879})))).width=null,t.height=null,t.depth=null,Object.seal(Object(l.a)(Object(l.a)(t))),t.setImageData(r),r.generateMipmap&&t.generateMipmap(),t}return Object(s.a)(Texture3D,e),Object(a.a)(Texture3D,null,[{key:"isSupported",value:function isSupported(e){return Object(u.n)(e)}}]),Object(a.a)(Texture3D,[{key:"initialize",value:function initialize(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var r=this.opts,n=r.pixels,i=r.settings;i&&(Object(c.c)(i,function(){n&&e.setImage3D(e.opts)}),this.setParameters(t))}},{key:"setImage3D",value:function setImage3D(e){var t=e.level,r=void 0===t?0:t,n=e.internalformat,i=void 0===n?6408:n,o=e.width,a=e.height,s=e.depth,l=void 0===s?1:s,u=e.border,c=void 0===u?0:u,p=e.format,f=e.type,d=void 0===f?5121:f,g=e.offset,m=void 0===g?0:g,y=e.pixels;ArrayBuffer.isView(y)?this.gl.texImage3D(this.target,r,i,o,a,l,c,p,d,y):y instanceof h.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,r,i,o,a,l,c,p,d,m),this.gl.bindBuffer(35052,y.handle))}}]),Texture3D}(p.a)},function(e,t,r){"use strict";r.r(t),r.d(t,"version",function(){return ne}),r.d(t,"parse",function(){return parse}),r.d(t,"parseExpressionAt",function(){return parseExpressionAt}),r.d(t,"tokenizer",function(){return tokenizer}),r.d(t,"parse_dammit",function(){return ee}),r.d(t,"LooseParser",function(){return te}),r.d(t,"pluginsLoose",function(){return re}),r.d(t,"addLooseExports",function(){return addLooseExports}),r.d(t,"Parser",function(){return A}),r.d(t,"plugins",function(){return O}),r.d(t,"defaultOptions",function(){return k}),r.d(t,"Position",function(){return C}),r.d(t,"SourceLocation",function(){return T}),r.d(t,"getLineInfo",function(){return getLineInfo}),r.d(t,"Node",function(){return q}),r.d(t,"TokenType",function(){return f}),r.d(t,"tokTypes",function(){return y}),r.d(t,"keywordTypes",function(){return m}),r.d(t,"TokContext",function(){return W}),r.d(t,"tokContexts",function(){return H}),r.d(t,"isIdentifierChar",function(){return isIdentifierChar}),r.d(t,"isIdentifierStart",function(){return isIdentifierStart}),r.d(t,"Token",function(){return J}),r.d(t,"isNewLine",function(){return isNewLine}),r.d(t,"lineBreak",function(){return v}),r.d(t,"lineBreakG",function(){return _}),r.d(t,"nonASCIIwhitespace",function(){return b});var n={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:i,6:i+" const class extends export import super"},a=/^in(stanceof)?$/,s="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",l="---------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+s+"]"),c=new RegExp("["+s+l+"]");s=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function isInAstralSet(e,t){for(var r=65536,n=0;n<t.length;n+=2){if((r+=t[n])>e)return!1;if((r+=t[n+1])>=e)return!0}}function isIdentifierStart(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&isInAstralSet(e,p)))}function isIdentifierChar(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&(isInAstralSet(e,p)||isInAstralSet(e,h)))))}var f=function TokenType(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function binop(e,t){return new f(e,{beforeExpr:!0,binop:t})}var d={beforeExpr:!0},g={startsExpr:!0},m={};function kw(e,t){return void 0===t&&(t={}),t.keyword=e,m[e]=new f(e,t)}var y={num:new f("num",g),regexp:new f("regexp",g),string:new f("string",g),name:new f("name",g),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",d),semi:new f(";",d),colon:new f(":",d),dot:new f("."),question:new f("?",d),arrow:new f("=>",d),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",d),backQuote:new f("`",g),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new f("**",{beforeExpr:!0}),_break:kw("break"),_case:kw("case",d),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",d),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",d),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",g),_if:kw("if"),_return:kw("return",d),_switch:kw("switch"),_throw:kw("throw",d),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",g),_super:kw("super",g),_class:kw("class",g),_extends:kw("extends",d),_export:kw("export"),_import:kw("import"),_null:kw("null",g),_true:kw("true",g),_false:kw("false",g),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},v=/\r\n?|\n|\u2028|\u2029/,_=new RegExp(v.source,"g");function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var b=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,x=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,w=Object.prototype,S=w.hasOwnProperty,E=w.toString;function has(e,t){return S.call(e,t)}var P=Array.isArray||function(e){return"[object Array]"===E.call(e)},C=function Position(e,t){this.line=e,this.column=t};C.prototype.offset=function offset(e){return new C(this.line,this.column+e)};var T=function SourceLocation(e,t,r){this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile)};function getLineInfo(e,t){for(var r=1,n=0;;){_.lastIndex=n;var i=_.exec(e);if(!(i&&i.index<t))return new C(r,t-n);++r,n=i.index+i[0].length}}var k={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};function getOptions(e){var t={};for(var r in k)t[r]=e&&has(e,r)?e[r]:k[r];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),P(t.onToken)){var n=t.onToken;t.onToken=function(e){return n.push(e)}}return P(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(r,n,i,o,a,s){var l={type:r?"Block":"Line",value:n,start:i,end:o};e.locations&&(l.loc=new T(this,a,s)),e.ranges&&(l.range=[i,o]),t.push(l)}}var O={};function keywordRegexp(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var A=function Parser(e,t,r){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=keywordRegexp(o[e.ecmaVersion>=6?6:5]);var i="";if(!e.allowReserved){for(var a=e.ecmaVersion;!(i=n[a]);a--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=keywordRegexp(i);var s=(i?i+" ":"")+n.strict;this.reservedWordsStrict=keywordRegexp(s),this.reservedWordsStrictBind=keywordRegexp(s+" "+n.strictBind),this.input=String(t),this.containsEsc=!1,this.loadPlugins(e.plugins),r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(v).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};A.prototype.isKeyword=function isKeyword(e){return this.keywords.test(e)},A.prototype.isReservedWord=function isReservedWord(e){return this.reservedWords.test(e)},A.prototype.extend=function extend(e,t){this[e]=t(this[e])},A.prototype.loadPlugins=function loadPlugins(e){for(var t in e){var r=O[t];if(!r)throw new Error("Plugin '"+t+"' not found");r(this,e[t])}},A.prototype.parse=function parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var I=A.prototype,R=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}I.strictDirective=function(e){for(;;){x.lastIndex=e,e+=x.exec(this.input)[0].length;var t=R.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},I.eat=function(e){return this.type===e&&(this.next(),!0)},I.isContextual=function(e){return this.type===y.name&&this.value===e&&!this.containsEsc},I.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},I.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},I.canInsertSemicolon=function(){return this.type===y.eof||this.type===y.braceR||v.test(this.input.slice(this.lastTokEnd,this.start))},I.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},I.semicolon=function(){this.eat(y.semi)||this.insertSemicolon()||this.unexpected()},I.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},I.expect=function(e){this.eat(e)||this.unexpected()},I.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},I.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},I.checkExpressionErrors=function(e,t){if(!e)return!1;var r=e.shorthandAssign,n=e.doubleProto;if(!t)return r>=0||n>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},I.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},I.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var M=A.prototype;M.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==y.eof;){var r=this.parseStatement(!0,!0,t);e.body.push(r)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var L={kind:"loop"},j={kind:"switch"};M.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;x.lastIndex=this.pos;var e=x.exec(this.input),t=this.pos+e[0].length,r=this.input.charCodeAt(t);if(91===r||123===r)return!0;if(isIdentifierStart(r,!0)){for(var n=t+1;isIdentifierChar(this.input.charCodeAt(n),!0);)++n;var i=this.input.slice(t,n);if(!a.test(i))return!0}return!1},M.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;x.lastIndex=this.pos;var e=x.exec(this.input),t=this.pos+e[0].length;return!(v.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&isIdentifierChar(this.input.charAt(t+8)))},M.parseStatement=function(e,t,r){var n,i=this.type,o=this.startNode();switch(this.isLet()&&(i=y._var,n="let"),i){case y._break:case y._continue:return this.parseBreakContinueStatement(o,i.keyword);case y._debugger:return this.parseDebuggerStatement(o);case y._do:return this.parseDoStatement(o);case y._for:return this.parseForStatement(o);case y._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1);case y._class:return e||this.unexpected(),this.parseClass(o,!0);case y._if:return this.parseIfStatement(o);case y._return:return this.parseReturnStatement(o);case y._switch:return this.parseSwitchStatement(o);case y._throw:return this.parseThrowStatement(o);case y._try:return this.parseTryStatement(o);case y._const:case y._var:return n=n||this.value,e||"var"===n||this.unexpected(),this.parseVarStatement(o,n);case y._while:return this.parseWhileStatement(o);case y._with:return this.parseWithStatement(o);case y.braceL:return this.parseBlock();case y.semi:return this.parseEmptyStatement(o);case y._export:case y._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===y._import?this.parseImport(o):this.parseExport(o,r);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(o,!0);var a=this.value,s=this.parseExpression();return i===y.name&&"Identifier"===s.type&&this.eat(y.colon)?this.parseLabeledStatement(o,a,s):this.parseExpressionStatement(o,s)}},M.parseBreakContinueStatement=function(e,t){var r="break"===t;this.next(),this.eat(y.semi)||this.insertSemicolon()?e.label=null:this.type!==y.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(e.label&&r)break}}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},M.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},M.parseDoStatement=function(e){return this.next(),this.labels.push(L),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(y._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(y.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},M.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(L),this.enterLexicalScope(),this.expect(y.parenL),this.type===y.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var r=this.isLet();if(this.type===y._var||this.type===y._const||r){var n=this.startNode(),i=r?"let":this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,"VariableDeclaration"),!(this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==i&&n.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,n)):(this.options.ecmaVersion>=9&&(this.type===y._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,n))}var o=new DestructuringErrors,a=this.parseExpression(!0,o);return this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===y._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},M.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},M.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===y._function),e.alternate=this.eat(y._else)?this.parseStatement(!this.strict&&this.type===y._function):null,this.finishNode(e,"IfStatement")},M.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(y.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},M.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(y.braceL),this.labels.push(j),this.enterLexicalScope();for(var r=!1;this.type!==y.braceR;)if(this.type===y._case||this.type===y._default){var n=this.type===y._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(y.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},M.parseThrowStatement=function(e){return this.next(),v.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var D=[];M.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===y._catch){var t=this.startNode();this.next(),this.eat(y.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(y.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(y._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},M.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},M.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(L),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},M.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},M.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},M.parseLabeledStatement=function(e,t,r){for(var n=0,i=this.labels;n<i.length;n+=1){i[n].name===t&&this.raise(r.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===y._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var s=this.labels[a];if(s.statementStart!==e.start)break;s.statementStart=this.start,s.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},M.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},M.parseBlock=function(e){void 0===e&&(e=!0);var t=this.startNode();for(t.body=[],this.expect(y.braceL),e&&this.enterLexicalScope();!this.eat(y.braceR);){var r=this.parseStatement(!0);t.body.push(r)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},M.parseFor=function(e,t){return e.init=t,this.expect(y.semi),e.test=this.type===y.semi?null:this.parseExpression(),this.expect(y.semi),e.update=this.type===y.parenR?null:this.parseExpression(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},M.parseForIn=function(e,t){var r=this.type===y._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===r&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===r?this.parseExpression():this.parseMaybeAssign(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,r)},M.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r;;){var n=this.startNode();if(this.parseVarId(n,r),this.eat(y.eq)?n.init=this.parseMaybeAssign(t):"const"!==r||this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||t&&(this.type===y._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(y.comma))break}return e},M.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},M.parseFunction=function(e,t,r,n){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(e.generator=this.eat(y.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&&(e.id="nullableID"===t&&this.type!==y.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?"let":"var"));var i=this.inGenerator,o=this.inAsync,a=this.yieldPos,s=this.awaitPos,l=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===y.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r),this.inGenerator=i,this.inAsync=o,this.yieldPos=a,this.awaitPos=s,this.inFunction=l,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},M.parseFunctionParams=function(e){this.expect(y.parenL),e.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},M.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),n=!1;for(r.body=[],this.expect(y.braceL);!this.eat(y.braceR);){var i=this.parseClassMember(r);i&&"MethodDefinition"===i.type&&"constructor"===i.kind&&(n&&this.raise(i.start,"Duplicate constructor in the same class"),n=!0)}return e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},M.parseClassMember=function(e){var t=this;if(this.eat(y.semi))return null;var r=this.startNode(),n=function(e,n){void 0===n&&(n=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===y.parenL||n&&t.canInsertSemicolon())||(r.key&&t.unexpected(),r.computed=!1,r.key=t.startNodeAt(i,o),r.key.name=e,t.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=n("static");var i=this.eat(y.star),o=!1;i||(this.options.ecmaVersion>=8&&n("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(y.star)):n("get")?r.kind="get":n("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var a=r.key;return r.computed||r.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?r.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),r.kind="constructor"),this.parseClassMethod(e,r,i,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},M.parseClassMethod=function(e,t,r,n){t.value=this.parseMethod(r,n),e.body.push(this.finishNode(t,"MethodDefinition"))},M.parseClassId=function(e,t){e.id=this.type===y.name?this.parseIdent():!0===t?this.unexpected():null},M.parseClassSuper=function(e){e.superClass=this.eat(y._extends)?this.parseExprSubscripts():null},M.parseExport=function(e,t){if(this.next(),this.eat(y.star))return this.expectContextual("from"),this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(y._default)){var r;if(this.checkExport(t,"default",this.lastTokStart),this.type===y._function||(r=this.isAsyncFunction())){var n=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(n,"nullableID",!1,r)}else if(this.type===y._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},M.checkExport=function(e,t,r){e&&(has(e,t)&&this.raiseRecoverable(r,"Duplicate export '"+t+"'"),e[t]=!0)},M.checkPatternExport=function(e,t){var r=t.type;if("Identifier"===r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===r)for(var n=0,i=t.properties;n<i.length;n+=1){var o=i[n];this.checkPatternExport(e,o)}else if("ArrayPattern"===r)for(var a=0,s=t.elements;a<s.length;a+=1){var l=s[a];l&&this.checkPatternExport(e,l)}else"Property"===r?this.checkPatternExport(e,t.value):"AssignmentPattern"===r?this.checkPatternExport(e,t.left):"RestElement"===r?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(e,t.expression)},M.checkVariableExport=function(e,t){if(e)for(var r=0,n=t;r<n.length;r+=1){var i=n[r];this.checkPatternExport(e,i.id)}},M.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},M.parseExportSpecifiers=function(e){var t=[],r=!0;for(this.expect(y.braceL);!this.eat(y.braceR);){if(r)r=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(e,n.exported.name,n.exported.start),t.push(this.finishNode(n,"ExportSpecifier"))}return t},M.parseImport=function(e){return this.next(),this.type===y.string?(e.specifiers=D,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},M.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===y.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(y.comma))return e}if(this.type===y.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(y.braceL);!this.eat(y.braceR);){if(t)t=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportSpecifier"))}return e},M.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},M.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var F=A.prototype;F.toAssignable=function(e,t,r){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var n=0,i=e.properties;n<i.length;n+=1){var o=i[n];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return e},F.toAssignableList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];i&&this.toAssignable(i,t)}if(r){var o=e[r-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},F.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},F.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==y.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},F.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case y.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(y.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case y.braceL:return this.parseObj(!0)}return this.parseIdent()},F.parseBindingList=function(e,t,r){for(var n=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(y.comma),t&&this.type===y.comma)n.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===y.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),n.push(o),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),n.push(a)}return n},F.parseBindingListItem=function(e){return e},F.parseMaybeDefault=function(e,t,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(y.eq))return r;var n=this.startNodeAt(e,t);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},F.checkLVal=function(e,t,r){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(has(r,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),r[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,i=e.properties;n<i.length;n+=1){var o=i[n];this.checkLVal(o,t,r)}break;case"Property":this.checkLVal(e.value,t,r);break;case"ArrayPattern":for(var a=0,s=e.elements;a<s.length;a+=1){var l=s[a];l&&this.checkLVal(l,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var N=A.prototype;N.checkPropClash=function(e,t,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n,i=e.key;switch(i.type){case"Identifier":n=i.name;break;case"Literal":n=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===o&&(t.proto&&(r&&r.doubleProto<0?r.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[n="$"+n];if(a)("init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[n]={init:!1,get:!1,set:!1};a[o]=!0}}},N.parseExpression=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===y.comma){var o=this.startNodeAt(r,n);for(o.expressions=[i];this.eat(y.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},N.parseMaybeAssign=function(e,t,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var n=!1,i=-1,o=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,n=!0);var a=this.start,s=this.startLoc;this.type!==y.parenL&&this.type!==y.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(r&&(l=r.call(this,l,a,s)),this.type.isAssign){var u=this.startNodeAt(a,s);return u.operator=this.value,u.left=this.type===y.eq?this.toAssignable(l,!1,t):l,n||DestructuringErrors.call(t),t.shorthandAssign=-1,this.checkLVal(l),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return n&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),l},N.parseMaybeConditional=function(e,t){var r=this.start,n=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(y.question)){var o=this.startNodeAt(r,n);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(y.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},N.parseExprOps=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===r&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,r,n,-1,e)},N.parseExprOp=function(e,t,r,n,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==y._in)&&o>n){var a=this.type===y.logicalOR||this.type===y.logicalAND,s=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,o,i),p=this.buildBinary(t,r,e,c,s,a);return this.parseExprOp(p,t,r,n,i)}return e},N.buildBinary=function(e,t,r,n,i,o){var a=this.startNodeAt(e,t);return a.left=r,a.operator=i,a.right=n,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},N.parseMaybeUnary=function(e,t){var r,n=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===y.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,r=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(n,i);s.operator=this.value,s.prefix=!1,s.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(y.starstar)?this.buildBinary(n,i,r,this.parseMaybeUnary(null,!1),"**",!1):r},N.parseExprSubscripts=function(e){var t=this.start,r=this.startLoc,n=this.parseExprAtom(e),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return n;var o=this.parseSubscripts(n,t,r);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},N.parseSubscripts=function(e,t,r,n){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=this.eat(y.bracketL))||this.eat(y.dot)){var a=this.startNodeAt(t,r);a.object=e,a.property=o?this.parseExpression():this.parseIdent(!0),a.computed=!!o,o&&this.expect(y.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!n&&this.eat(y.parenL)){var s=new DestructuringErrors,l=this.yieldPos,u=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var c=this.parseExprList(y.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=u,this.parseArrowExpression(this.startNodeAt(t,r),c,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos;var p=this.startNodeAt(t,r);p.callee=e,p.arguments=c,e=this.finishNode(p,"CallExpression")}else{if(this.type!==y.backQuote)return e;var h=this.startNodeAt(t,r);h.tag=e,h.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(h,"TaggedTemplateExpression")}},N.parseExprAtom=function(e){var t,r=this.potentialArrowAt===this.start;switch(this.type){case y._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),t=this.startNode(),this.next(),this.type!==y.dot&&this.type!==y.bracketL&&this.type!==y.parenL&&this.unexpected(),this.finishNode(t,"Super");case y._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case y.name:var n=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(this.type!==y.name);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(y._function))return this.parseFunction(this.startNodeAt(n,i),!1,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(y.arrow))return this.parseArrowExpression(this.startNodeAt(n,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===y.name&&!o)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(y.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,i),[a],!0)}return a;case y.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case y.num:case y.string:return this.parseLiteral(this.value);case y._null:case y._true:case y._false:return(t=this.startNode()).value=this.type===y._null?null:this.type===y._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case y.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case y.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(y.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case y.braceL:return this.parseObj(!1,e);case y._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case y._class:return this.parseClass(this.startNode(),!1);case y._new:return this.parseNew();case y.backQuote:return this.parseTemplate();default:this.unexpected()}},N.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},N.parseParenExpression=function(){this.expect(y.parenL);var e=this.parseExpression();return this.expect(y.parenR),e},N.parseParenAndDistinguishExpression=function(e){var t,r=this.start,n=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,l=[],u=!0,c=!1,p=new DestructuringErrors,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==y.parenR;){if(u?u=!1:this.expect(y.comma),i&&this.afterTrailingComma(y.parenR,!0)){c=!0;break}if(this.type===y.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var d=this.start,g=this.startLoc;if(this.expect(y.parenR),e&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(r,n,l);l.length&&!c||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((t=this.startNodeAt(a,s)).expressions=l,this.finishNodeAt(t,"SequenceExpression",d,g)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,n);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},N.parseParenItem=function(e){return e},N.parseParenArrowList=function(e,t,r){return this.parseArrowExpression(this.startNodeAt(e,t),r)};var z=[];N.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(y.dot)){e.meta=t;var r=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||r)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),this.eat(y.parenL)?e.arguments=this.parseExprList(y.parenR,this.options.ecmaVersion>=8,!1):e.arguments=z,this.finishNode(e,"NewExpression")},N.parseTemplateElement=function(e){var t=e.isTagged,r=this.startNode();return this.type===y.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===y.backQuote,this.finishNode(r,"TemplateElement")},N.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var r=this.startNode();this.next(),r.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(r.quasis=[n];!n.tail;)this.type===y.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(y.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(y.braceR),r.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(r,"TemplateLiteral")},N.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===y.name||this.type===y.num||this.type===y.string||this.type===y.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===y.star)&&!v.test(this.input.slice(this.lastTokEnd,this.start))},N.parseObj=function(e,t){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(y.braceR);){if(n)n=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),r.properties.push(o)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},N.parseProperty=function(e,t){var r,n,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(y.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===y.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===y.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(r=this.eat(y.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(n=!0,r=this.options.ecmaVersion>=9&&this.eat(y.star),this.parsePropertyName(a,t)):n=!1,this.parsePropertyValue(a,e,r,n,i,o,t,s),this.finishNode(a,"Property")},N.parsePropertyValue=function(e,t,r,n,i,o,a,s){if((r||n)&&this.type===y.colon&&this.unexpected(),this.eat(y.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===y.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(r,n);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===y.comma||this.type===y.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===y.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(r||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},N.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(y.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(y.bracketR),e.key;e.computed=!1}return e.key=this.type===y.num||this.type===y.string?this.parseExprAtom():this.parseIdent(!0)},N.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},N.parseMethod=function(e,t){var r=this.startNode(),n=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.inGenerator=r.generator,this.inAsync=r.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(y.parenL),r.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.inGenerator=n,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(r,"FunctionExpression")},N.parseArrowExpression=function(e,t,r){var n=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=n,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},N.parseFunctionBody=function(e,t){var r=t&&this.type!==y.braceL,n=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);n&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!n&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=n},N.isSimpleParamList=function(e){for(var t=0,r=e;t<r.length;t+=1){if("Identifier"!==r[t].type)return!1}return!0},N.checkParams=function(e,t){for(var r={},n=0,i=e.params;n<i.length;n+=1){var o=i[n];this.checkLVal(o,"var",t?null:r)}},N.parseExprList=function(e,t,r,n){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(y.comma),t&&this.afterTrailingComma(e))break;var a=void 0;r&&this.type===y.comma?a=null:this.type===y.ellipsis?(a=this.parseSpread(n),n&&this.type===y.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),i.push(a)}return i},N.checkUnreserved=function(e){var t=e.start,r=e.end,n=e.name;(this.inGenerator&&"yield"===n&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+n+"' is reserved"))},N.parseIdent=function(e,t){var r=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===y.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(r,"Identifier"),e||this.checkUnreserved(r),r},N.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===y.semi||this.canInsertSemicolon()||this.type!==y.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(y.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},N.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var B=A.prototype;B.raise=function(e,t){var r=getLineInfo(this.input,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n},B.raiseRecoverable=B.raise,B.curPosition=function(){if(this.options.locations)return new C(this.curLine,this.pos-this.lineStart)};var U=A.prototype,V=Object.assign||function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var o=i[n];for(var a in o)has(o,a)&&(e[a]=o[a])}return e};U.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},U.exitFunctionScope=function(){this.scopeStack.pop()},U.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),V(t.parentLexical,e.lexical,e.parentLexical)},U.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];V(t.childVar,e.var,e.childVar)},U.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.parentLexical,e)},U.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.var,e)&&!has(t.childVar,e)},U.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},U.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var q=function Node(e,t,r){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new T(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},G=A.prototype;function finishNodeAt(e,t,r,n){return e.type=t,e.end=r,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=r),e}G.startNode=function(){return new q(this,this.start,this.startLoc)},G.startNodeAt=function(e,t){return new q(this,e,t)},G.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},G.finishNodeAt=function(e,t,r,n){return finishNodeAt.call(this,e,t,r,n)};var W=function TokContext(e,t,r,n,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=n,this.generator=!!i},H={b_stat:new W("{",!1),b_expr:new W("{",!0),b_tmpl:new W("${",!1),p_stat:new W("(",!1),p_expr:new W("(",!0),q_tmpl:new W("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new W("function",!1),f_expr:new W("function",!0),f_expr_gen:new W("function",!0,!1,null,!0),f_gen:new W("function",!1,!1,null,!0)},X=A.prototype;X.initialContext=function(){return[H.b_stat]},X.braceIsBlock=function(e){var t=this.curContext();return t===H.f_expr||t===H.f_stat||(e!==y.colon||t!==H.b_stat&&t!==H.b_expr?e===y._return||e===y.name&&this.exprAllowed?v.test(this.input.slice(this.lastTokEnd,this.start)):e===y._else||e===y.semi||e===y.eof||e===y.parenR||e===y.arrow||(e===y.braceL?t===H.b_stat:e!==y._var&&e!==y.name&&!this.exprAllowed):!t.isExpr)},X.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},X.updateContext=function(e){var t,r=this.type;r.keyword&&e===y.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},y.parenR.updateContext=y.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===H.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},y.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?H.b_stat:H.b_expr),this.exprAllowed=!0},y.dollarBraceL.updateContext=function(){this.context.push(H.b_tmpl),this.exprAllowed=!0},y.parenL.updateContext=function(e){var t=e===y._if||e===y._for||e===y._with||e===y._while;this.context.push(t?H.p_stat:H.p_expr),this.exprAllowed=!0},y.incDec.updateContext=function(){},y._function.updateContext=y._class.updateContext=function(e){e.beforeExpr&&e!==y.semi&&e!==y._else&&(e!==y.colon&&e!==y.braceL||this.curContext()!==H.b_stat)?this.context.push(H.f_expr):this.context.push(H.f_stat),this.exprAllowed=!1},y.backQuote.updateContext=function(){this.curContext()===H.q_tmpl?this.context.pop():this.context.push(H.q_tmpl),this.exprAllowed=!1},y.star.updateContext=function(e){if(e===y._function){var t=this.context.length-1;this.context[t]===H.f_expr?this.context[t]=H.f_expr_gen:this.context[t]=H.f_gen}this.exprAllowed=!0},y.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==y.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var K={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(K.$LONE,K.General_Category),K.gc=K.General_Category,K.sc=K.Script_Extensions=K.scx=K.Script;var Z=A.prototype,Y=function RegExpValidationState(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function codePointToString$1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function isSyntaxCharacter(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return e>=48&&e<=57}function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function isOctalDigit(e){return e>=48&&e<=55}Y.prototype.reset=function reset(e,t,r){var n=-1!==r.indexOf("u");this.start=0|e,this.source=t+"",this.flags=r,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},Y.prototype.raise=function raise(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Y.prototype.at=function at(e){var t=this.source,r=t.length;if(e>=r)return-1;var n=t.charCodeAt(e);return!this.switchU||n<=55295||n>=57344||e+1>=r?n:(n<<10)+t.charCodeAt(e+1)-56613888},Y.prototype.nextIndex=function nextIndex(e){var t=this.source,r=t.length;if(e>=r)return r;var n=t.charCodeAt(e);return!this.switchU||n<=55295||n>=57344||e+1>=r?e+1:e+2},Y.prototype.current=function current(){return this.at(this.pos)},Y.prototype.lookahead=function lookahead(){return this.at(this.nextIndex(this.pos))},Y.prototype.advance=function advance(){this.pos=this.nextIndex(this.pos)},Y.prototype.eat=function eat(e){return this.current()===e&&(this.advance(),!0)},Z.validateRegExpFlags=function(e){for(var t=e.validFlags,r=e.flags,n=0;n<r.length;n++){var i=r.charAt(n);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),r.indexOf(i,n+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Z.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Z.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,r=e.backReferenceNames;t<r.length;t+=1){var n=r[t];-1===e.groupNames.indexOf(n)&&e.raise("Invalid named capture referenced")}},Z.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Z.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Z.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Z.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!r,!0}return e.pos=t,!1},Z.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Z.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Z.regexp_eatBracedQuantifier=function(e,t){var r=e.pos;if(e.eat(123)){var n=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=r}return!1},Z.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Z.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Z.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Z.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Z.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Z.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Z.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},Z.regexp_eatPatternCharacters=function(e){for(var t=e.pos,r=0;-1!==(r=e.current())&&!isSyntaxCharacter(r);)e.advance();return e.pos!==t},Z.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Z.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Z.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Z.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString$1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString$1(e.lastIntValue);return!0}return!1},Z.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),isRegExpIdentifierStart(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Z.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),isRegExpIdentifierPart(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Z.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Z.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var r=e.lastIntValue;if(e.switchU)return r>e.maxBackReference&&(e.maxBackReference=r),!0;if(r<=e.numCapturingParens)return!0;e.pos=t}return!1},Z.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Z.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Z.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Z.regexp_eatZero=function(e){return 48===e.current()&&!isDecimalDigit(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Z.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Z.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Z.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,r=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(n-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=r}return!1},Z.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Z.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Z.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Z.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var r=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,r,n),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Z.regexp_validateUnicodePropertyNameAndValue=function(e,t,r){K.hasOwnProperty(t)&&-1!==K[t].indexOf(r)||e.raise("Invalid property name")},Z.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===K.$LONE.indexOf(t)&&e.raise("Invalid property name")},Z.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Z.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Z.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Z.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Z.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var r=e.lastIntValue;!e.switchU||-1!==t&&-1!==r||e.raise("Invalid character class"),-1!==t&&-1!==r&&t>r&&e.raise("Range out of order in character class")}}},Z.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var r=e.current();(99===r||isOctalDigit(r))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},Z.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Z.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!isDecimalDigit(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Z.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Z.regexp_eatDecimalDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;isDecimalDigit(r=e.current());)e.lastIntValue=10*e.lastIntValue+(r-48),e.advance();return e.pos!==t},Z.regexp_eatHexDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;isHexDigit(r=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(r),e.advance();return e.pos!==t},Z.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var r=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*r+e.lastIntValue:e.lastIntValue=8*t+r}else e.lastIntValue=t;return!0}return!1},Z.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Z.regexp_eatFixedHexDigits=function(e,t){var r=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var i=e.current();if(!isHexDigit(i))return e.pos=r,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(i),e.advance()}return!0};var J=function Token(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new T(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Q=A.prototype;function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Q.next=function(){this.options.onToken&&this.options.onToken(new J(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Q.getToken=function(){return this.next(),new J(this)},"undefined"!=typeof Symbol&&(Q[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===y.eof,value:t}}}}),Q.curContext=function(){return this.context[this.context.length-1]},Q.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(y.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Q.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Q.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Q.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),r=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(_.lastIndex=r;(e=_.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,n),r,this.pos,t,this.curPosition())},Q.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition())},Q.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&b.test(String.fromCharCode(e))))break e;++this.pos}}},Q.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},Q.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(y.ellipsis)):(++this.pos,this.finishToken(y.dot))},Q.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(y.assign,2):this.finishOp(y.slash,1)},Q.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),r=1,n=42===e?y.star:y.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++r,n=y.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(y.assign,r+1):this.finishOp(n,r)},Q.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?y.logicalOR:y.logicalAND,2):61===t?this.finishOp(y.assign,2):this.finishOp(124===e?y.bitwiseOR:y.bitwiseAND,1)},Q.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(y.assign,2):this.finishOp(y.bitwiseXOR,1)},Q.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!v.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(y.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(y.assign,2):this.finishOp(y.plusMin,1)},Q.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(y.assign,r+1):this.finishOp(y.bitShift,r)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(y.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Q.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(y.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(y.arrow)):this.finishOp(61===e?y.eq:y.prefix,1)},Q.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(y.parenL);case 41:return++this.pos,this.finishToken(y.parenR);case 59:return++this.pos,this.finishToken(y.semi);case 44:return++this.pos,this.finishToken(y.comma);case 91:return++this.pos,this.finishToken(y.bracketL);case 93:return++this.pos,this.finishToken(y.bracketR);case 123:return++this.pos,this.finishToken(y.braceL);case 125:return++this.pos,this.finishToken(y.braceR);case 58:return++this.pos,this.finishToken(y.colon);case 63:return++this.pos,this.finishToken(y.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(y.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(y.prefix,1)}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},Q.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)},Q.readRegexp=function(){for(var e,t,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(v.test(n)&&this.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===n)t=!0;else if("]"===n&&t)t=!1;else if("/"===n&&!t)break;e="\\"===n}++this.pos}var i=this.input.slice(r,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new Y(this));s.reset(r,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(y.regexp,{pattern:i,flags:a,value:l})},Q.readInt=function(e,t){for(var r=this.pos,n=0,i=0,o=null==t?1/0:t;i<o;++i){var a=this.input.charCodeAt(this.pos),s=void 0;if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,n=n*e+s}return this.pos===r||null!=t&&this.pos-r!==t?null:n},Q.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(y.num,t)},Q.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var r=this.pos-t>=2&&48===this.input.charCodeAt(t);r&&this.strict&&this.raise(t,"Invalid number"),r&&/[89]/.test(this.input.slice(t,this.pos))&&(r=!1);var n=this.input.charCodeAt(this.pos);46!==n||r||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||r||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=r?parseInt(i,8):parseFloat(i);return this.finishToken(y.num,o)},Q.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Q.readString=function(e){for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):(isNewLine(n,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(y.string,t)};var $={};Q.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==$)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Q.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $;this.raise(e,t)},Q.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==y.template&&this.type!==y.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(y.template,e)):36===r?(this.pos+=2,this.finishToken(y.dollarBraceL)):(++this.pos,this.finishToken(y.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Q.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(y.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Q.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);return n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return String.fromCharCode(t)}},Q.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,"Bad character escape sequence"),r},Q.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(isIdentifierChar(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(a,n)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=codePointToString(a),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},Q.readWord=function(){var e=this.readWord1(),t=y.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=m[e]),this.finishToken(t,e)};var ee,te,re,ne="5.7.3";function parse(e,t){return new A(t,e).parse()}function parseExpressionAt(e,t,r){var n=new A(r,e,t);return n.nextToken(),n.parseExpression()}function tokenizer(e,t){return new A(t,e)}function addLooseExports(e,t,r){ee=e,te=t,re=r}},function(e,t,r){var n=r(360)(r(361));e.exports=n},function(e,t){e.exports={HOMEPAGE:"https://react-styleguidist.js.org/",BUGS:"https://github.com/styleguidist/react-styleguidist/issues",DOCS_CONFIG:"https://react-styleguidist.js.org/docs/configuration.html",DOCS_COMPONENTS:"https://react-styleguidist.js.org/docs/components.html",DOCS_WEBPACK:"https://react-styleguidist.js.org/docs/webpack.html",DOCS_DOCUMENTING:"https://react-styleguidist.js.org/docs/documenting.html",DOCS_THIRDPARTIES:"https://react-styleguidist.js.org/docs/thirdparties.html"}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return isBrowser});var n=r(25),i=r(113);function isBrowser(){return!("object"===(void 0===e?"undefined":Object(n.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,r(58))},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return isElectron});var n=r(25);function isElectron(t){if("undefined"!=typeof window&&"object"===Object(n.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(n.a)(e.versions)&&Boolean(e.versions.electron))return!0;var r="object"===("undefined"==typeof navigator?"undefined":Object(n.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||r;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,r(58))},function(e,t,r){"use strict";function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"a",function(){return _setPrototypeOf})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(19);var u=function(e){function MathArray(){return Object(n.a)(this,MathArray),Object(o.a)(this,Object(a.a)(MathArray).apply(this,arguments))}return Object(s.a)(MathArray,e),Object(i.a)(MathArray,[{key:"clone",value:function clone(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function copy(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function set(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function fromArray(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}},{key:"toString",value:function toString(){return this.formatString(l.c)}},{key:"formatString",value:function formatString(e){for(var t="",r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+Object(l.f)(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function toArray(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}},{key:"toFloat32Array",value:function toFloat32Array(){return new Float32Array(this)}},{key:"equals",value:function equals(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(l.e)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function exactEquals(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function negate(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function inverse(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function lerp(e,t,r){void 0===r&&(r=t,t=e,e=this);for(var n=0;n<this.ELEMENTS;++n){var i=e[n];this[n]=i+r*(t[n]-i)}return this.check()}},{key:"min",value:function min(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function max(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function clamp(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}},{key:"validate",value:function validate(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(e[r]);return t}},{key:"check",value:function check(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(l.c.debug&&!this.validate(e))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function sub(e){return this.subtract(e)}},{key:"setScalar",value:function setScalar(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function addScalar(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function subScalar(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.scale(e)}},{key:"divideScalar",value:function divideScalar(e){return this.scale(1/e)}},{key:"clampScalar",value:function clampScalar(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}}]),MathArray}(function _extendableBuiltin(e){function ExtendableBuiltin(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return ExtendableBuiltin.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,e):ExtendableBuiltin.__proto__=e,ExtendableBuiltin}(Array))},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(78),l=r(76),u=r(13),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function ArgumentsRenderer(e){var t=e.classes,r=e.args,n=e.heading;return 0===r.length?null:i.a.createElement("div",{className:t.root},n&&i.a.createElement("div",{className:t.headingWrapper},i.a.createElement(l.a,{level:5},"Arguments")),r.map(function(e){return i.a.createElement(s.a,c({key:e.name},e))}))}ArgumentsRenderer.propTypes={classes:a.a.object.isRequired,args:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,type:a.a.object,description:a.a.string})).isRequired,heading:a.a.bool};var p=Object(u.a)(function styles(e){var t=e.space;return{root:{marginBottom:t[2],fontSize:"inherit"},headingWrapper:{marginBottom:t[0]}}})(ArgumentsRenderer);r.d(t,"a",function(){return p})},function(e,t,r){"use strict";r.r(t);var n=r(63),i=r(22),o=r(37);r(183);r.d(t,"global",function(){return i.a});if(i.a.luma&&"6.4.0"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat("6.4.0"));i.a.luma||(n.a&&o.a.log(0,"luma.gl ".concat("6.4.0"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:"6.4.0",version:"6.4.0",log:o.a,stats:{},globals:{modules:{},nodeIO:{}}});t.default=i.a.luma},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(13);function TableRenderer(e){var t=e.classes,r=e.columns,n=e.rows,o=e.getRowKey;return i.a.createElement("table",{className:t.table},i.a.createElement("thead",{className:t.tableHead},i.a.createElement("tr",null,r.map(function(e){var r=e.caption;return i.a.createElement("th",{key:r,className:t.cellHeading},r)}))),i.a.createElement("tbody",null,n.map(function(e){return i.a.createElement("tr",{key:o(e)},r.map(function(r,n){var o=r.render;return i.a.createElement("td",{key:n,className:t.cell},o(e))}))})))}TableRenderer.propTypes={classes:a.a.object.isRequired,columns:a.a.arrayOf(a.a.shape({caption:a.a.string.isRequired,render:a.a.func.isRequired})).isRequired,rows:a.a.arrayOf(a.a.object).isRequired,getRowKey:a.a.func.isRequired};var l=Object(s.a)(function styles(e){var t=e.space,r=e.color,n=e.fontFamily,i=e.fontSize;return{table:{width:"100%",borderCollapse:"collapse",marginBottom:t[4]},tableHead:{borderBottom:[[1,r.border,"solid"]]},cellHeading:{color:r.base,paddingRight:t[2],paddingBottom:t[1],textAlign:"left",fontFamily:n.base,fontWeight:"bold",fontSize:i.small,whiteSpace:"nowrap"},cell:{color:r.base,paddingRight:t[2],paddingTop:t[1],paddingBottom:t[1],verticalAlign:"top",fontFamily:n.base,fontSize:i.small,"&:last-child":{isolate:!1,width:"99%",paddingRight:0},"& p:last-child":{isolate:!1,marginBottom:0}}}})(TableRenderer);r.d(t,"a",function(){return l})},function(e,t,r){"use strict";var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(24),l=r.n(s),u=r(13),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function LinkRenderer(e){var t=e.classes,r=e.children,n=_objectWithoutProperties(e,["classes","children"]);return i.a.createElement("a",c({},n,{className:l()(t.link,n.className)}),r)}LinkRenderer.propTypes={children:a.a.node,className:a.a.string,classes:a.a.object.isRequired};var p=Object(u.a)(function styles(e){var t=e.color;return{link:{"&, &:link, &:visited":{fontSize:"inherit",color:t.link,textDecoration:"none"},"&:hover, &:active":{isolate:!1,color:t.linkHover,cursor:"pointer"}}}})(LinkRenderer);r.d(t,"a",function(){return p})},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(30),o=r(86),a=r(23),s=r(35),l=r(185),u=r.n(l),c=r(186),p=r.n(c);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t,r;function MapGL(t){var r;return _defineProperty(_assertThisInitialized(_assertThisInitialized(r=e.call(this,t)||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_container",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onViewportChange",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"state",{loaded:!1}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_onViewportChange",function(e){if(e.originalEvent){var t=r._map,n=t.getCenter(),i=n.lng,o={latitude:n.lat,longitude:i,zoom:t.getZoom(),pitch:t.getPitch(),bearing:t.getBearing()};r.props.onViewportChange(o)}}),s.a&&(s.a.accessToken=t.accessToken),r}r=e,(t=MapGL).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l=MapGL.prototype;return l.componentDidMount=function componentDidMount(){var e=this;if(s.a){var t=Object(i.isImmutable)(this.props.mapStyle)?this.props.mapStyle.toJS():this.props.mapStyle,r=new s.a.Map({container:this._container,style:t,interactive:!!this.props.onViewportChange,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,pitch:this.props.pitch,bearing:this.props.bearing,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,hash:this.props.hash,bearingSnap:this.props.bearingSnap,pitchWithRotate:this.props.pitchWithRotate,attributionControl:this.props.attributionControl,logoPosition:this.props.logoPosition,failIfMajorPerformanceCaveat:this.props.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.props.preserveDrawingBuffer,refreshExpiredTiles:this.props.refreshExpiredTiles,maxBounds:this.props.maxBounds,scrollZoom:this.props.scrollZoom,boxZoom:this.props.boxZoom,dragRotate:this.props.dragRotate,dragPan:this.props.dragPan,keyboard:this.props.keyboard,doubleClickZoom:this.props.doubleClickZoom,trackResize:this.props.trackResize,renderWorldCopies:this.props.renderWorldCopies,maxTileCacheSize:this.props.maxTileCacheSize,localIdeographFontFamily:this.props.localIdeographFontFamily,transformRequest:this.props.transformRequest,collectResourceTiming:this.props.collectResourceTiming});r.on("styledata",function(){return e.setState({loaded:!0})}),r.once("load",function(){e.setState({loaded:!0},e.props.onLoad)}),this.props.onViewportChange&&(r.on("dragend",this._onViewportChange),r.on("zoomend",this._onViewportChange),r.on("rotateend",this._onViewportChange),r.on("pitchend",this._onViewportChange),r.on("boxzoomend",this._onViewportChange)),u.a.forEach(function(t){var n="on"+p()(t);e.props[n]&&r.on(t,e.props[n])}),this.props.cursorStyle&&(r.getCanvas().style.cursor=this.props.cursorStyle),this._map=r}},l.componentDidUpdate=function componentDidUpdate(e){this._updateMapViewport(e,this.props),this._updateMapStyle(e,this.props),!e.cursorStyle!==this.props.cursorStyle&&(this._map.getCanvas().style.cursor=this.props.cursorStyle)},l.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.remove()},l.getMap=function getMap(){return this._map},l._updateMapStyle=function _updateMapStyle(e,t){var r=this,n=t.mapStyle,o=e.mapStyle;Object(i.isImmutable)(n)?n.equals(o)||this._map.setStyle(n.toJS()):n!==o&&this.setState({loaded:!1},function(){return r._map.setStyle(n)})},l._updateMapViewport=function _updateMapViewport(e,t){var r=this._map,n=r.getCenter();(t.latitude!==e.latitude&&t.latitude!==n.lat||t.longitude!==e.longitude&&t.longitude!==n.lng||t.zoom!==e.zoom&&t.zoom!==r.getZoom()||t.pitch!==e.pitch&&t.pitch!==r.getPitch()||t.bearing!==e.bearing&&t.bearing!==r.getBearing())&&r.flyTo({center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing})},l.render=function render(){var e=this,t=this.state.loaded,r=this.props,i=r.className,s=r.style,l=n.Children.toArray(this.props.children).filter(Boolean).reduce(function(e,t){return t.type===o.default?e.layerChildren.push(t):e.otherChildren.push(t),e},{layerChildren:[],otherChildren:[]}),u=l.layerChildren,c=l.otherChildren,p=u.slice(1).map(function(e){return e.props.layer.get("id")}).reverse(),h=u.reverse().map(function(e,t){return Object(n.cloneElement)(e,{before:e.props.before||p[t-1]})}),f=c.concat(h);return Object(n.createElement)(a.default.Provider,{value:this._map},Object(n.createElement)("div",{ref:function ref(t){return e._container=t},style:s,className:i},t&&n.Children.map(f,function(e){var t=e.key,r=e.type,i=e.props;return Object(n.createElement)(r,_extends({},i,{key:t}))})))},MapGL}(n.PureComponent);_defineProperty(h,"displayName","MapGL"),_defineProperty(h,"defaultProps",{children:null,className:null,style:null,mapStyle:"mapbox://styles/mapbox/light-v8",accessToken:null,bearing:0,pitch:0,minZoom:0,maxZoom:22,maxBounds:null,hash:!1,bearingSnap:7,pitchWithRotate:!0,attributionControl:!0,logoPosition:"bottom-left",failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,boxZoom:!0,scrollZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,trackResize:!0,renderWorldCopies:!0,maxTileCacheSize:null,onViewportChange:null,onLoad:null,localIdeographFontFamily:null,transformRequest:null,collectResourceTiming:!1,cursorStyle:null}),t.default=h},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(e){var t,r;function CustomLayer(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_id",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_layer",void 0),t}r=e,(t=CustomLayer).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=CustomLayer.prototype;return o.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.layer,n=t.before;n&&e.getLayer(n)?e.addLayer(r,n):e.addLayer(r),this._id=r.id,this._layer=r},o.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&this._map.removeLayer(this._id)},o.getLayer=function getLayer(){return this._layer},o.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},CustomLayer}(n.PureComponent);_defineProperty(o,"displayName","CustomLayer"),t.default=o},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(30),o=r(23);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function Source(t){var r;if(_defineProperty(_assertThisInitialized(_assertThisInitialized(r=e.call(this,t)||this)),"_map",void 0),!Object(i.isImmutable)(t.source))throw new Error("Provided source prop is not an Immutable object");return r}r=e,(t=Source).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=Source.prototype;return a.componentDidMount=function componentDidMount(){var e=this.props,t=e.id,r=e.source;this._map.addSource(t,r.toJS())},a.componentDidUpdate=function componentDidUpdate(e){var t=this.props.source,r=e.source;if(!t.equals(r)){var n=this.props.id,o=t.get("type");if("geojson"===o){var a=t.get("data");Object(i.isImmutable)(a)&&!a.equals(r.get("data"))&&this._map.getSource(n).setData(a.toJS())}else if("vector"===o){var s=this._map.getStyle(),l=t.get("tiles");Object(i.isImmutable)(l)&&!l.equals(r.get("tiles"))&&(s.sources[n].tiles=l.toJS(),this._map.setStyle(s))}else this._map.removeSource(n),this._map.addSource(n,t.toJS())}},a.componentWillUnmount=function componentWillUnmount(){var e=this,t=this.props.id;if(this._map&&this._map.getStyle()&&this._map.getSource(t)){var r=this._map.getStyle().layers;r&&r.filter(function(e){return e.source===t}).forEach(function(t){return e._map.removeLayer(t.id)}),this._map.removeSource(t)}},a.render=function render(){var e=this;return Object(n.createElement)(o.default.Consumer,{},function(t){return t&&(e._map=t),null})},Source}(n.PureComponent);_defineProperty(a,"displayName","Source"),t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(52),i=r(1),o=r(23),a=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r;function Popup(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_popup",void 0),t}r=e,(t=Popup).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=Popup.prototype;return s.componentDidMount=function componentDidMount(){var e=this.props,t=e.element,r=e.longitude,i=e.latitude,o=e.offset,s=e.closeButton,l=e.closeOnClick,u=e.onClose,c=e.anchor,p=document.createElement("div");Object(n.render)(t,p);var h=new a.a.Popup({offset:o,closeButton:s,closeOnClick:l,anchor:c});h.setLngLat([r,i]).addTo(this._map),h.setDOMContent(p),u&&h.on("close",u),this._popup=h},s.componentDidUpdate=function componentDidUpdate(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&this._popup.setLngLat([this.props.longitude,this.props.latitude])},s.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._popup.remove()},s.getPopup=function getPopup(){return this._popup},s.render=function render(){var e=this;return Object(i.createElement)(o.default.Consumer,{},function(t){return t&&(e._map=t),null})},Popup}(i.PureComponent);_defineProperty(s,"displayName","Popup"),_defineProperty(s,"defaultProps",{closeButton:!0,closeOnClick:!0,onClose:null,anchor:null,offset:null}),t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23),o=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function AttributionControl(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_control",void 0),t}r=e,(t=AttributionControl).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=AttributionControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.compact,n=t.customAttribution,i=t.position,a=new o.a.AttributionControl({compact:r,customAttribution:n});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},AttributionControl}(n.PureComponent);_defineProperty(a,"defaultProps",{position:"bottom-right"}),t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23),o=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function FullscreenControl(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_control",void 0),t}r=e,(t=FullscreenControl).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=FullscreenControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.container,n=t.position,i=new o.a.FullscreenControl({container:r});e.addControl(i,n),this._control=i},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},FullscreenControl}(n.PureComponent);_defineProperty(a,"defaultProps",{position:"top-right"}),t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23),o=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function GeolocateControl(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_control",void 0),t}r=e,(t=GeolocateControl).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=GeolocateControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.positionOptions,n=t.fitBoundsOptions,i=t.trackUserLocation,a=t.showUserLocation,s=t.position,l=new o.a.GeolocateControl({positionOptions:r,fitBoundsOptions:n,trackUserLocation:i,showUserLocation:a});e.addControl(l,s),this._control=l},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},GeolocateControl}(n.PureComponent);_defineProperty(a,"defaultProps",{positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0}),t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23),o=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function NavigationControl(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_control",void 0),t}r=e,(t=NavigationControl).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=NavigationControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.showCompass,n=t.showZoom,i=t.position,a=new o.a.NavigationControl({showCompass:r,showZoom:n});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},NavigationControl}(n.PureComponent);_defineProperty(a,"defaultProps",{position:"top-right"}),t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(23),o=r(35);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t,r;function ScaleControl(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(t=e.call.apply(e,[this].concat(n))||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_control",void 0),t}r=e,(t=ScaleControl).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=ScaleControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,r=t.maxWidth,n=t.unit,i=t.position,a=new o.a.ScaleControl({maxWidth:r,unit:n});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(n.createElement)(i.default.Consumer,{},function(t){return t&&(e._map=t),null})},ScaleControl}(n.PureComponent);_defineProperty(a,"defaultProps",{position:"bottom-right",unit:"metric"}),t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toCss(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";if(!t)return i;var o=r.indent,a=void 0===o?0:o,s=t.fallbacks;if(a++,s)if(Array.isArray(s))for(var l=0;l<s.length;l++){var u=s[l];for(var c in u){var p=u[c];null!=p&&(i+="\n"+indentStr(c+": "+(0,n.default)(p)+";",a))}}else for(var h in s){var f=s[h];null!=f&&(i+="\n"+indentStr(h+": "+(0,n.default)(f)+";",a))}for(var d in t){var g=t[d];null!=g&&"fallbacks"!==d&&(i+="\n"+indentStr(d+": "+(0,n.default)(g)+";",a))}return i||r.allowEmpty?i=indentStr(e+" {"+i+"\n",--a)+indentStr("}",a):i};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(91));function indentStr(e,t){for(var r="",n=0;n<t;n++)r+="  ";return r+e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(153));t.default=new n.default},function(e,t,r){var n=r(93),i=r(263),o=r(264),a=r(265),s=r(266),l=r(267);function Stack(e){var t=this.__data__=new n(e);this.size=t.size}Stack.prototype.clear=i,Stack.prototype.delete=o,Stack.prototype.get=a,Stack.prototype.has=s,Stack.prototype.set=l,e.exports=Stack},function(e,t,r){var n=r(66)(r(48),"Map");e.exports=n},function(e,t,r){var n=r(67),i=r(53),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function isFunction(e){if(!i(e))return!1;var t=n(e);return t==a||t==s||t==o||t==l}},function(e,t,r){var n=r(274),i=r(281),o=r(283),a=r(284),s=r(285);function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=n,MapCache.prototype.delete=i,MapCache.prototype.get=o,MapCache.prototype.has=a,MapCache.prototype.set=s,e.exports=MapCache},function(e,t,r){var n=r(161);e.exports=function baseAssignValue(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r=9007199254740991;e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,t){var i=typeof e;return!!(t=null==t?r:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function identity(e){return e}},function(e,t,r){var n=r(321),i=r(345),o=r(139),a=r(49),s=r(352);e.exports=function baseIteratee(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):n(e):s(e)}},function(e,t,r){var n=r(49),i=r(103),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function isKey(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=_interopRequireDefault(r(1)),o=_interopRequireDefault(r(2));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var a=function IconBase(e,t){var r=e.children,o=e.color,a=e.size,s=e.style,l=e.width,u=e.height,c=_objectWithoutProperties(e,["children","color","size","style","width","height"]),p=t.reactIconBase,h=void 0===p?{}:p,f=a||h.size||"1em";return i.default.createElement("svg",n({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:u||f,width:l||f},h,c,{style:n({verticalAlign:"middle",color:o||h.color},h.style||{},s)}))};a.propTypes={color:o.default.string,size:o.default.oneOfType([o.default.string,o.default.number]),width:o.default.oneOfType([o.default.string,o.default.number]),height:o.default.oneOfType([o.default.string,o.default.number]),style:o.default.object},a.contextTypes={reactIconBase:o.default.shape(a.propTypes)},t.default=a,e.exports=t.default},function(e,t,r){"use strict";function sortKD(e,t,r,n,i,o){if(i-n<=r)return;const a=n+i>>1;sort_select(e,t,a,n,i,o%2),sortKD(e,t,r,n,a-1,o+1),sortKD(e,t,r,a+1,i,o+1)}function sort_select(e,t,r,n,i,o){for(;i>n;){if(i-n>600){const a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);sort_select(e,t,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}const a=t[2*r+o];let s=n,l=i;for(swapItem(e,t,n,r),t[2*i+o]>a&&swapItem(e,t,n,i);s<l;){for(swapItem(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*n+o]===a?swapItem(e,t,n,l):swapItem(e,t,++l,i),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function swapItem(e,t,r,n){swap(e,r,n),swap(t,2*r,2*n),swap(t,2*r+1,2*n+1)}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function range(e,t,r,n,i,o,a){const s=[0,e.length-1,0],l=[];let u,c;for(;s.length;){const p=s.pop(),h=s.pop(),f=s.pop();if(h-f<=a){for(let a=f;a<=h;a++)u=t[2*a],c=t[2*a+1],u>=r&&u<=i&&c>=n&&c<=o&&l.push(e[a]);continue}const d=Math.floor((f+h)/2);u=t[2*d],c=t[2*d+1],u>=r&&u<=i&&c>=n&&c<=o&&l.push(e[d]);const g=(p+1)%2;(0===p?r<=u:n<=c)&&(s.push(f),s.push(d-1),s.push(g)),(0===p?i>=u:o>=c)&&(s.push(d+1),s.push(h),s.push(g))}return l}function within(e,t,r,n,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o){for(let i=p;i<=c;i++)sqDist(t[2*i],t[2*i+1],r,n)<=l&&s.push(e[i]);continue}const h=Math.floor((p+c)/2),f=t[2*h],d=t[2*h+1];sqDist(f,d,r,n)<=l&&s.push(e[h]);const g=(u+1)%2;(0===u?r-i<=f:n-i<=d)&&(a.push(p),a.push(h-1),a.push(g)),(0===u?r+i>=f:n+i>=d)&&(a.push(h+1),a.push(c),a.push(g))}return s}function sqDist(e,t,r,n){const i=e-r,o=t-n;return i*i+o*o}r.r(t);const n=e=>e[0],i=e=>e[1];class o{constructor(e,t=n,r=i,o=64,a=Float64Array){this.nodeSize=o,this.points=e;const s=e.length<65536?Uint16Array:Uint32Array,l=this.ids=new s(e.length),u=this.coords=new a(2*e.length);for(let n=0;n<e.length;n++)l[n]=n,u[2*n]=t(e[n]),u[2*n+1]=r(e[n]);sortKD(l,u,o,0,l.length-1,0)}range(e,t,r,n){return range(this.ids,this.coords,e,t,r,n,this.nodeSize)}within(e,t,r){return within(this.ids,this.coords,e,t,r,this.nodeSize)}}const a={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:e=>e};class s{constructor(e){this.options=extend(Object.create(a),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:r,maxZoom:n,nodeSize:i}=this.options;t&&console.time("total time");const a=`prepare ${e.length} points`;t&&console.time(a),this.points=e;let s=[];for(let t=0;t<e.length;t++)e[t].geometry&&s.push(createPointCluster(e[t],t));this.trees[n+1]=new o(s,supercluster_getX,supercluster_getY,i,Float32Array),t&&console.timeEnd(a);for(let e=n;e>=r;e--){const r=+Date.now();s=this._cluster(s,e),this.trees[e]=new o(s,supercluster_getX,supercluster_getY,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,s.length,+Date.now()-r)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,n,180,o],t),a=this.getClusters([-180,n,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(lngX(r),latY(o),lngX(i),latY(n)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?getClusterJSON(t):this.points[t.index])}return l}getChildren(e){const t=e>>5,r=e%32,n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const o=i.points[t];if(!o)throw new Error(n);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const r=i.points[t];r.parentId===e&&l.push(r.numPoints?getClusterJSON(r):this.points[r.index])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){t=t||10,r=r||0;const n=[];return this._appendLeaves(n,e,t,r,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(r-s)/i,u=(r+1+s)/i,c={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,u),n.points,t,r,i,c),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,u),n.points,i,r,i,c),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,u),n.points,-1,r,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=e%32-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,r,n,i):i<n?i++:e.push(t),e.length===r)break}return i}_addTileFeatures(e,t,r,n,i,o){for(const a of e){const e=t[a],s={type:1,geometry:[[Math.round(this.options.extent*(e.x*i-r)),Math.round(this.options.extent*(e.y*i-n))]],tags:e.numPoints?getClusterProperties(e):this.points[e.index].properties},l=e.numPoints?e.id:this.points[e.index].id;void 0!==l&&(s.id=l),o.features.push(s)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))}_cluster(e,t){const r=[],{radius:n,extent:i,reduce:o}=this.options,a=n/(i*Math.pow(2,t));for(let n=0;n<e.length;n++){const i=e[n];if(i.zoom<=t)continue;i.zoom=t;const s=this.trees[t+1],l=s.within(i.x,i.y,a);let u=i.numPoints||1,c=i.x*u,p=i.y*u;const h=o?this._map(i,!0):null,f=(n<<5)+(t+1);for(const e of l){const r=s.points[e];if(r.zoom<=t)continue;r.zoom=t;const n=r.numPoints||1;c+=r.x*n,p+=r.y*n,u+=n,r.parentId=f,o&&o(h,this._map(r))}1===u?r.push(i):(i.parentId=f,r.push(createCluster(c/u,p/u,f,u,h)))}return r}_map(e,t){if(e.numPoints)return t?extend({},e.properties):e.properties;const r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?extend({},n):n}}function createCluster(e,t,r,n,i){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function createPointCluster(e,t){const[r,n]=e.geometry.coordinates;return{x:lngX(r),y:latY(n),zoom:1/0,index:t,parentId:-1}}function getClusterJSON(e){return{type:"Feature",id:e.id,properties:getClusterProperties(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),yLat(e.y)]}};var t}function getClusterProperties(e){const t=e.numPoints,r=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?`${Math.round(t/100)/10}k`:t;return extend(extend({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function lngX(e){return e/360+.5}function latY(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function yLat(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function extend(e,t){for(const r in t)e[r]=t[r];return e}function supercluster_getX(e){return e.x}function supercluster_getY(e){return e.y}var l=r(1),u=r(85),c=r(23),p=function point(e,t){return void 0===t&&(t={}),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:e}}},h=function childrenKeys(e){return l.Children.toArray(e).map(function(e){return e.key})},f=function shallowCompareChildren(e,t){if(l.Children.count(e)!==l.Children.count(t))return!1;var r=h(e),n=new Set(h(t));return r.every(function(e){return n.has(e)})};function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=parseInt(l.version,10),g=function(e){var t,r;function Cluster(t){var r;return _defineProperty(_assertThisInitialized(_assertThisInitialized(r=e.call(this,t)||this)),"_map",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_cluster",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_recalculate",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_createCluster",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_createCluster",function(e){var t=e.minZoom,n=e.maxZoom,i=e.radius,o=e.extent,a=e.nodeSize,u=e.children,c=e.innerRef,h=new s({minZoom:t,maxZoom:n,radius:i,extent:o,nodeSize:a}),f=l.Children.map(u,function(e){return p([e.props.longitude,e.props.latitude],e)});h.load(f),r._cluster=h,c&&c(r._cluster)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"_recalculate",function(){var e=r._map.getZoom(),t=r._map.getBounds().toArray(),n=t[0].concat(t[1]),i=r._cluster.getClusters(n,Math.floor(e));r.setState(function(){return{clusters:i}})}),r.state={clusters:[]},r}r=e,(t=Cluster).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=Cluster.prototype;return n.componentDidMount=function componentDidMount(){this._createCluster(this.props),this._recalculate(),this._map.on("moveend",this._recalculate)},n.componentDidUpdate=function componentDidUpdate(e){(e.minZoom!==this.props.minZoom||e.maxZoom!==this.props.maxZoom||e.radius!==this.props.radius||e.extent!==this.props.extent||e.nodeSize!==this.props.nodeSize||!f(e.children,this.props.children))&&(this._createCluster(this.props),this._recalculate())},n.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._map.off("moveend",this._recalculate)},n.render=function render(){var e=this;return Object(l.createElement)(c.default.Consumer,{},function(t){if(t&&(e._map=t),0===e.state.clusters.length)return null;var r,n=e.state.clusters.map(function(t){if(t.properties.cluster){var r=t.geometry.coordinates,n=r[0],i=r[1];return Object(l.createElement)(u.default,{longitude:n,latitude:i,element:Object(l.createElement)(e.props.element,t),key:"cluster-"+t.properties.cluster_id})}var o=t.properties,a=o.type,s=o.key,c=o.props;return Object(l.createElement)(a,_extends({key:s},c))});return d<16?l.createElement.apply(void 0,["div",{}].concat(_arrayWithoutHoles(r=n)||_iterableToArray(r)||_nonIterableSpread())):n})},Cluster}(l.PureComponent);_defineProperty(g,"displayName","Cluster"),_defineProperty(g,"defaultProps",{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64});t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.createGenerateClassName=t.sheets=t.RuleList=t.SheetsManager=t.SheetsRegistry=t.toCssValue=t.getDynamicStyles=void 0;var n=r(233);Object.defineProperty(t,"getDynamicStyles",{enumerable:!0,get:function get(){return _interopRequireDefault(n).default}});var i=r(91);Object.defineProperty(t,"toCssValue",{enumerable:!0,get:function get(){return _interopRequireDefault(i).default}});var o=r(153);Object.defineProperty(t,"SheetsRegistry",{enumerable:!0,get:function get(){return _interopRequireDefault(o).default}});var a=r(234);Object.defineProperty(t,"SheetsManager",{enumerable:!0,get:function get(){return _interopRequireDefault(a).default}});var s=r(83);Object.defineProperty(t,"RuleList",{enumerable:!0,get:function get(){return _interopRequireDefault(s).default}});var l=r(130);Object.defineProperty(t,"sheets",{enumerable:!0,get:function get(){return _interopRequireDefault(l).default}});var u=r(156);Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function get(){return _interopRequireDefault(u).default}});var c=_interopRequireDefault(r(240));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p=t.create=function create(e){return new c.default(e)};t.default=p()},function(e,t,r){var n=r(134),i="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(memoize.Cache||n),r}memoize.Cache=n,e.exports=memoize},function(e,t,r){var n=r(178);e.exports=function get(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},function(e,t,r){var n=r(257),i=r(307)(function(e,t,r){n(e,t,r)});e.exports=i},function(e,t,r){var n=r(365);e.exports=function isNaN(e){return n(e)&&e!=+e}},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(3),i=r(4),o=r(11),a=r(10),s=r(12),l=r(75),u=r(34),c=function(e){function Vector2(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(n.a)(this,Vector2),e=Object(o.a)(this,Object(a.a)(Vector2).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,r),e}return Object(s.a)(Vector2,e),Object(i.a)(Vector2,[{key:"cross",value:function cross(e){return u.b(this,this,e),this.check()}},{key:"horizontalAngle",value:function horizontalAngle(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function verticalAngle(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function operation(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function get(){return 2}}]),Vector2}(l.a)},function(e,t){function cssWithMappingToString(e,t){var r,n,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var a=(r=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+n)+" */"),s=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[i].concat(s).concat([a]).join("\n")}return[i].join("\n")}e.exports=function(e){var t=[];return t.toString=function toString(){return this.map(function(t){var r=cssWithMappingToString(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,c=0,p=[],h=r(216);function addStylesToDom(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(addStyle(n.parts[a],t))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(addStyle(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:s}}}}function listToStyles(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function insertStyleElement(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),p.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertAt.before,r);r.insertBefore(t,i)}}function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function createStyleElement(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=getNonce();r&&(e.attrs.nonce=r)}return addAttrs(t,e.attrs),insertStyleElement(e,t),t}function createLinkElement(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",addAttrs(t,e.attrs),insertStyleElement(e,t),t}function addAttrs(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function getNonce(){return r.nc}function addStyle(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;r=u||(u=createStyleElement(t)),n=applyToSingletonTag.bind(null,r,a,!1),i=applyToSingletonTag.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=createLinkElement(t),n=updateLink.bind(null,r,t),i=function(){removeStyleElement(r),r.href&&URL.revokeObjectURL(r.href)}):(r=createStyleElement(t),n=applyToTag.bind(null,r),i=function(){removeStyleElement(r)});return n(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=listToStyles(e,t);return addStylesToDom(r,t),function update(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(s=o[a.id]).refs--,n.push(s)}e&&addStylesToDom(listToStyles(e,t),t);for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var f,d=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")});function applyToSingletonTag(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function applyToTag(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function updateLink(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=h(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,s=toObject(e),l=1;l<arguments.length;l++){for(var u in r=Object(arguments[l]))i.call(r,u)&&(s[u]=r[u]);if(n){a=n(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function SheetsRegistry(){_classCallCheck(this,SheetsRegistry),this.registry=[]}return n(SheetsRegistry,[{key:"add",value:function add(e){var t=this.registry,r=e.options.index;if(-1===t.indexOf(e))if(0===t.length||r>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>r)return void t.splice(n,0,e)}},{key:"reset",value:function reset(){this.registry=[]}},{key:"remove",value:function remove(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)}},{key:"toString",value:function toString(e){return this.registry.filter(function(e){return e.attached}).map(function(t){return t.toString(e)}).join("\n")}},{key:"index",get:function get(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),SheetsRegistry}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(236));t.default=function(e){return e&&e[n.default]&&e===e[n.default]()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function linkRule(e,t){e.renderable=t,e.rules&&t.cssRules&&e.rules.link(t.cssRules)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(59)),i=(_interopRequireDefault(r(157)),_interopRequireDefault(r(239)));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=0;return function(t,r){(e+=1)>1e10&&(0,n.default)(!1,"[JSS] You might have a memory leak. Rule counter is at %s.",e);var o="c",a="";return r&&(o=r.options.classNamePrefix||"c",null!=r.options.jss.id&&(a+=r.options.jss.id)),""+o+i.default+a+e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=_interopRequireDefault(r(155)),a=_interopRequireDefault(r(83));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function StyleSheet(e,t){var r=this;for(var i in _classCallCheck(this,StyleSheet),this.update=function(e,t){return"string"==typeof e?r.rules.update(e,t):r.rules.update(e),r},this.attached=!1,this.deployed=!1,this.linked=!1,this.classes={},this.options=n({},t,{sheet:this,parent:this,classes:this.classes}),this.renderer=new t.Renderer(this),this.rules=new a.default(this.options),e)this.rules.add(i,e[i]);this.rules.process()}return i(StyleSheet,[{key:"attach",value:function attach(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function detach(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function addRule(e,t,r){var n=this.queue;this.attached&&!n&&(this.queue=[]);var i=this.rules.add(e,t,r);return this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(n?n.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)}},{key:"insertRule",value:function insertRule(e){var t=this.renderer.insertRule(e);t&&this.options.link&&(0,o.default)(e,t)}},{key:"addRules",value:function addRules(e,t){var r=[];for(var n in e)r.push(this.addRule(n,e[n],t));return r}},{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"deleteRule",value:function deleteRule(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!this.attached||!t.renderable||this.renderer.deleteRule(t.renderable))}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"deploy",value:function deploy(){return this.renderer.deploy(),this.deployed=!0,this}},{key:"link",value:function link(){var e=this.renderer.getRules();return e&&this.rules.link(e),this.linked=!0,this}},{key:"toString",value:function toString(e){return this.rules.toString(e)}}]),StyleSheet}();t.default=s},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(28))},function(e,t){var r=Function.prototype.toString;e.exports=function toSource(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(135),i=r(84);e.exports=function assignMergeValue(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(66),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,r){var n=r(286)();e.exports=n},function(e,t,r){var n=r(48).Uint8Array;e.exports=n},function(e,t,r){var n=r(165)(Object.getPrototypeOf,Object);e.exports=n},function(e,t){e.exports=function overArg(e,t){return function(r){return e(t(r))}}},function(e,t){e.exports=function safeGet(e,t){if("__proto__"!=t)return e[t]}},function(e,t,r){var n=r(168),i=r(305),o=r(61);e.exports=function keysIn(e){return o(e)?n(e,!0):i(e)}},function(e,t,r){var n=r(304),i=r(99),o=r(49),a=r(100),s=r(138),l=r(101),u=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var r=o(e),c=!r&&i(e),p=!r&&!c&&a(e),h=!r&&!c&&!p&&l(e),f=r||c||p||h,d=f?n(e.length,String):[],g=d.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||p&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PropsRenderer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react_group__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(88),react_group__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_group__WEBPACK_IMPORTED_MODULE_2__),javascript_stringify__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(194),javascript_stringify__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(javascript_stringify__WEBPACK_IMPORTED_MODULE_3__),rsg_components_Arguments__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(116),rsg_components_Argument__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(78),rsg_components_Code__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81),rsg_components_JsDoc__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(79),rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(31),rsg_components_Name__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68),rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(65),rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(57),rsg_components_Para__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77),rsg_components_Table__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(118),_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(41),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function renderType(e){if(!e)return"unknown";var t=e.name;switch(t){case"arrayOf":return e.value.name+"[]";case"objectOf":return"{"+renderType(e.value)+"}";case"instanceOf":return e.value;default:return t}}function renderFlowType(e){if(!e)return"unknown";var t=e.name,r=e.raw,n=e.value;switch(t){case"enum":return t;case"literal":return n;case"signature":return renderComplexType(e.type,r);case"union":case"tuple":return renderComplexType(t,r);default:return r||t}}function renderComplexType(e,t){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",underlined:!0,title:t},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__.a,null,e))}function renderEnum(e){if(!Array.isArray(Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e).value))return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e).value);var t=Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e).value.map(function(e){var t=e.value;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_6__.a,{key:t},Object(_util__WEBPACK_IMPORTED_MODULE_14__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_14__.c)(t)))});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,"One of:"," ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_group__WEBPACK_IMPORTED_MODULE_2___default.a,{separator:", ",inline:!0},t))}function renderShape(e){var t=[];for(var r in e){var n=e[r],i=renderDefault(n),o=n.description;t.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{key:r},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Name__WEBPACK_IMPORTED_MODULE_9__.a,null,r),": ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__.a,null,renderType(n)),i&&"  ",i,o&&"  ",o&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_8__.a,{text:o,inline:!0})))}return t}var defaultValueBlacklist=["null","undefined"];function renderDefault(prop){if(prop.defaultValue){if(prop.type||prop.flowType){var propName=prop.type?prop.type.name:prop.flowType.type;if(defaultValueBlacklist.indexOf(prop.defaultValue.value)>-1)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_6__.a,null,Object(_util__WEBPACK_IMPORTED_MODULE_14__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_14__.c)(prop.defaultValue.value)));if("func"===propName||"function"===propName)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",color:"light",underlined:!0,title:Object(_util__WEBPACK_IMPORTED_MODULE_14__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_14__.c)(prop.defaultValue.value))},"Function");if("shape"===propName||"object"===propName)try{var object=eval("("+prop.defaultValue.value+")");return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",color:"light",underlined:!0,title:javascript_stringify__WEBPACK_IMPORTED_MODULE_3___default()(object,null,2)},"Shape")}catch(e){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",color:"light",underlined:!0,title:prop.defaultValue.value},"Shape")}}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_6__.a,null,Object(_util__WEBPACK_IMPORTED_MODULE_14__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_14__.c)(prop.defaultValue.value)))}return prop.required?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_11__.a,{size:"small",color:"light"},"Required"):""}function renderDescription(e){var t=e.description,r=e.tags,n=void 0===r?{}:r,i=renderExtra(e),o=[].concat(_toConsumableArray(n.arg||[]),_toConsumableArray(n.argument||[]),_toConsumableArray(n.param||[])),a=n.return&&n.return[0]||n.returns&&n.returns[0];return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,t&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_8__.a,{text:t}),i&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Para__WEBPACK_IMPORTED_MODULE_12__.a,null,i),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_JsDoc__WEBPACK_IMPORTED_MODULE_7__.a,n),o.length>0&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Arguments__WEBPACK_IMPORTED_MODULE_4__.a,{args:o,heading:!0}),a&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Argument__WEBPACK_IMPORTED_MODULE_5__.a,_extends({},a,{returns:!0})))}function renderExtra(e){var t=Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e);if(!t)return null;switch(t.name){case"enum":return renderEnum(e);case"union":return renderUnion(e);case"shape":return renderShape(e.type.value);case"arrayOf":case"objectOf":return"shape"===t.value.name?renderShape(e.type.value.value):null;default:return null}}function renderUnion(e){var t=Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e);if(!Array.isArray(t.value))return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,t.value);var r=t.value.map(function(e,t){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__.a,{key:e.name+"-"+t},renderType(e))});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,"One of type:"," ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_group__WEBPACK_IMPORTED_MODULE_2___default.a,{separator:", ",inline:!0},r))}function renderName(e){var t=e.name,r=e.tags,n=void 0===r?{}:r;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Name__WEBPACK_IMPORTED_MODULE_9__.a,{deprecated:!!n.deprecated},t)}function renderTypeColumn(e){return e.flowType?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__.a,null,renderFlowType(Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e))):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_10__.a,null,renderType(Object(_util__WEBPACK_IMPORTED_MODULE_14__.a)(e)))}function getRowKey(e){return e.name}var columns=[{caption:"Prop name",render:renderName},{caption:"Type",render:renderTypeColumn},{caption:"Default",render:renderDefault},{caption:"Description",render:renderDescription}];function PropsRenderer(e){var t=e.props;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(rsg_components_Table__WEBPACK_IMPORTED_MODULE_13__.a,{columns:columns,rows:t,getRowKey:getRowKey})}PropsRenderer.propTypes={props:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array.isRequired}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(316),i=r(317),o=r(318);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,n){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(t,r),i=(e=createBuffer(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(Buffer.isBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&o(t.data))return fromArrayLike(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,i);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function read(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=r;o<s;o++)if(read(e,o)===read(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var c=!0,p=0;p<l;p++)if(read(e,o+p)!==read(t,p)){c=!1;break}if(c)return o}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p<=r)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=p}return decodeCodePointsArray(n)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!Buffer.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,r,n,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),u=e.slice(t,r),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function includes(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function write(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=a)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=a));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,i,o){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function checkIEEE754(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,o){return o||checkIEEE754(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,o){return o||checkIEEE754(e,0,r,8),i.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function slice(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer.prototype;else{var i=t-e;r=new Buffer(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Buffer.prototype.readUIntLE=function readUIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},Buffer.prototype.readUIntBE=function readUIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function readIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},Buffer.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeIntBE=function writeIntBE(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function copy(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Buffer.prototype.fill=function fill(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}function base64ToBytes(e){return n.toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(28))},function(e,t){e.exports=function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},function(e,t,r){var n=r(323),i=r(60);e.exports=function baseIsEqual(e,t,r,o,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!=e&&t!=t:n(e,t,r,o,baseIsEqual,a))}},function(e,t,r){var n=r(324),i=r(327),o=r(328),a=1,s=2;e.exports=function equalArrays(e,t,r,l,u,c){var p=r&a,h=e.length,f=t.length;if(h!=f&&!(p&&f>h))return!1;var d=c.get(e);if(d&&c.get(t))return d==t;var g=-1,m=!0,y=r&s?new n:void 0;for(c.set(e,t),c.set(t,e);++g<h;){var v=e[g],_=t[g];if(l)var b=p?l(_,v,g,t,e,c):l(v,_,g,e,t,c);if(void 0!==b){if(b)continue;m=!1;break}if(y){if(!i(t,function(e,t){if(!o(y,t)&&(v===e||u(v,e,r,l,c)))return y.push(t)})){m=!1;break}}else if(v!==_&&!u(v,_,r,l,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},function(e,t,r){var n=r(98),i=r(339),o=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){var n=r(340),i=r(132),o=r(341),a=r(342),s=r(343),l=r(67),u=r(159),c=u(n),p=u(i),h=u(o),f=u(a),d=u(s),g=l;(n&&"[object DataView]"!=g(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case c:return"[object DataView]";case p:return"[object Map]";case h:return"[object Promise]";case f:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=g},function(e,t,r){var n=r(53);e.exports=function isStrictComparable(e){return e==e&&!n(e)}},function(e,t){e.exports=function matchesStrictComparable(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},function(e,t,r){var n=r(179),i=r(104);e.exports=function baseGet(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[i(t[r++])];return r&&r==o?e:void 0}},function(e,t,r){var n=r(49),i=r(141),o=r(346),a=r(180);e.exports=function castPath(e,t){return n(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,r){var n=r(348);e.exports=function toString(e){return null==e?"":n(e)}},function(e,t,r){var n=r(53),i=r(359),o=r(182),a="Expected a function",s=Math.max,l=Math.min;e.exports=function debounce(e,t,r){var u,c,p,h,f,d,g=0,m=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError(a);function invokeFunc(t){var r=u,n=c;return u=c=void 0,g=t,h=e.apply(n,r)}function leadingEdge(e){return g=e,f=setTimeout(timerExpired,t),m?invokeFunc(e):h}function remainingWait(e){var r=t-(e-d);return y?l(r,p-(e-g)):r}function shouldInvoke(e){var r=e-d;return void 0===d||r>=t||r<0||y&&e-g>=p}function timerExpired(){var e=i();if(shouldInvoke(e))return trailingEdge(e);f=setTimeout(timerExpired,remainingWait(e))}function trailingEdge(e){return f=void 0,v&&u?invokeFunc(e):(u=c=void 0,h)}function debounced(){var e=i(),r=shouldInvoke(e);if(u=arguments,c=this,d=e,r){if(void 0===f)return leadingEdge(d);if(y)return f=setTimeout(timerExpired,t),invokeFunc(d)}return void 0===f&&(f=setTimeout(timerExpired,t)),h}return t=o(t)||0,n(r)&&(m=!!r.leading,p=(y="maxWait"in r)?s(o(r.maxWait)||0,t):p,v="trailing"in r?!!r.trailing:v),debounced.cancel=function cancel(){void 0!==f&&clearTimeout(f),g=0,u=d=c=f=void 0},debounced.flush=function flush(){return void 0===f?h:trailingEdge(i())},debounced}},function(e,t,r){var n=r(53),i=r(103),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function toNumber(e){if("number"==typeof e)return e;if(i(e))return o;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=l.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):s.test(e)?o:+e}},function(e,t,r){"use strict";(function(e){var t,n=r(0),i=r(209);function assert(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function isWebGL2(e){return e&&!0}function getExtensionData(e,t){return{webgl2:isWebGL2(e),ext:e.getExtension(t)}}var o=(t={},Object(n.a)(t,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function createVertexArray(){assert(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function deleteVertexArray(){},bindVertexArray:function bindVertexArray(){},isVertexArray:function isVertexArray(){return!1}}),Object(n.a)(t,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function vertexAttribDivisor(e,t){assert(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function drawElementsInstanced(){},drawArraysInstanced:function drawArraysInstanced(){}}),Object(n.a)(t,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function drawBuffers(){assert(!1)}}),Object(n.a)(t,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function createQuery(){assert(!1)},deleteQuery:function deleteQuery(){assert(!1)},beginQuery:function beginQuery(){assert(!1)},endQuery:function endQuery(){},getQuery:function getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter:function getQueryParameter(e,t){return this.getQueryObject(e,t)},queryCounter:function queryCounter(){},getQueryObject:function getQueryObject(){}}),Object(n.a)(t,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(n.a)(t,"OVERRIDES",{readBuffer:function readBuffer(e,t,r){isWebGL2(e)&&t(r)},getVertexAttrib:function getVertexAttrib(e,t,r,n){var i,o=getExtensionData(e,"ANGLE_instanced_arrays"),a=o.webgl2,s=o.ext;switch(n){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:t(r,n)},getProgramParameter:function getProgramParameter(e,t,r,n){if(!isWebGL2(e))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return t(r,n)},getInternalformatParameter:function getInternalformatParameter(e,t,r,n,i){if(!isWebGL2(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter:function getTexParameter(e,t,r,n){switch(n){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;n=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(r,n)},getParameter:i.a,hint:function hint(e,t,r,n){return t(r,n)}}),t);function initializeExtensions(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.luma[s]=e.getExtension(s)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}function polyfillExtension(e,t){var r=t.extension,n=t.target,i=t.target2,a=o[r];assert(a);var s=a.meta,l=(void 0===s?{}:s).suffix,u=void 0===l?"":l,c=e.getExtension(r);Object.keys(a).forEach(function(t){var r="".concat(t).concat(u),o=null;"meta"===t||"function"==typeof e[t]||(c&&"function"==typeof c[r]?o=function polyfill(){return c[r].apply(c,arguments)}:"function"==typeof a[t]&&(o=a[t].bind(n))),o&&(n[t]=o,i[t]=o)})}function installOverrides(e,t){var r=t.target,n=t.target2,i=o.OVERRIDES;Object.keys(i).forEach(function(t){if("function"==typeof i[t]){var o=e[t]?e[t].bind(e):function(){},a=i[t].bind(null,e,o);r[t]=a,n[t]=a}})}(void 0!==e?e:window).polyfillContext=function polyfillContext(e){if(e.luma=e.luma||{},initializeExtensions(e),!e.luma.polyfilled){for(var t in o)"overrides"!==t&&polyfillExtension(e,{extension:t,target:e.luma,target2:e});installOverrides(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}}).call(this,r(28))},function(e,t,r){"use strict";t.__esModule=!0;var n=_interopRequireDefault(r(1)),i=_interopRequireDefault(r(218));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createContext||i.default,e.exports=t.default},function(e,t){e.exports=["resize","remove","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading"]},function(e,t){e.exports=function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,r){"use strict";function symbolObservablePonyfill(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",function(){return symbolObservablePonyfill})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.default=function jssGlobal(){return{onCreateRule:function onCreateRule(e,t,r){if(e===a)return new l(e,t,r);if("@"===e[0]&&e.substr(0,s.length)===s)return new u(e,t,r);var n=r.parent;n&&("global"!==n.type&&"global"!==n.options.parent.type||(r.global=!0));r.global&&(r.selector=e);return null},onProcessRule:function onProcessRule(e){if("style"!==e.type)return;handleNestedGlobalContainerRule(e),handlePrefixedGlobalRule(e)}}};var o=r(144);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="@global",s="@global ",l=function(){function GlobalContainerRule(e,t,r){for(var i in _classCallCheck(this,GlobalContainerRule),this.type="global",this.key=e,this.options=r,this.rules=new o.RuleList(n({},r,{parent:this})),t)this.rules.add(i,t[i],{selector:i});this.rules.process()}return i(GlobalContainerRule,[{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"addRule",value:function addRule(e,t,r){var n=this.rules.add(e,t,r);return this.options.jss.plugins.onProcessRule(n),n}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"toString",value:function toString(){return this.rules.toString()}}]),GlobalContainerRule}(),u=function(){function GlobalPrefixedRule(e,t,r){_classCallCheck(this,GlobalPrefixedRule),this.name=e,this.options=r;var i=e.substr(s.length);this.rule=r.jss.createRule(i,t,n({},r,{parent:this,selector:i}))}return i(GlobalPrefixedRule,[{key:"toString",value:function toString(e){return this.rule.toString(e)}}]),GlobalPrefixedRule}(),c=/\s*,\s*/g;function addScope(e,t){for(var r=e.split(c),n="",i=0;i<r.length;i++)n+=t+" "+r[i].trim(),r[i+1]&&(n+=", ");return n}function handleNestedGlobalContainerRule(e){var t=e.options,r=e.style,i=r[a];if(i){for(var o in i)t.sheet.addRule(o,i[o],n({},t,{selector:addScope(o,e.selector)}));delete r[a]}}function handlePrefixedGlobalRule(e){var t=e.options,r=e.style;for(var i in r)if(i.substr(0,a.length)===a){var o=addScope(i.substr(a.length),e.selector);t.sheet.addRule(o,r[i],n({},t,{selector:o})),delete r[i]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function jssIsolate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,r=[],n=void 0,i=void 0,o=function setSelector(){i.selector=r.join(",\n")},a=h(o);return{onProcessRule:function onProcessRule(o,l){if(!l||l===n||"style"!==o.type)return;if(!p(o,l,e))return;i||(n=o.options.jss.createStyleSheet(null,s),i=n.addRule("reset",u(e.reset)),n.attach());var c=o.selector;-1===r.indexOf(c)&&(r.push(c),t=a())},onProcessSheet:function onProcessSheet(){!t&&r.length&&o()}}};var o=_interopRequireDefault(r(253)),a=_interopRequireDefault(r(254));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s={meta:"jss-isolate",index:-1/0,link:!0},l={inherited:o.default,all:a.default},u=function getStyle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inherited";if("string"==typeof e)return l[e];if("object"===(void 0===e?"undefined":i(e))){if(Array.isArray(e)){var t=e[0],r=e[1];return n({},l[t],r)}return n({},o.default,e)}return o.default},c={keyframes:!0,conditional:!0},p=function shouldIsolate(e,t,r){var n=e.options.parent;if(n&&c[n.type])return!1;var i=null==r.isolate||r.isolate;return null!=t.options.isolate&&(i=t.options.isolate),null!=e.style.isolate&&(i=e.style.isolate,delete e.style.isolate),"string"==typeof i?i===e.key:i},h=function createDebounced(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=Date.now();return function(){var n=Date.now();return!(n-r<t)&&(r=n,e(),!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function jssNested(){function getReplaceRef(e){return function(t,r){var n=e.getRule(r);return n?n.selector:((0,i.default)(!1,"[JSS] Could not find the referenced rule %s in %s.",r,e.options.meta||e),r)}}var e=function hasAnd(e){return-1!==e.indexOf("&")};function replaceParentRefs(t,r){for(var n=r.split(o),i=t.split(o),s="",l=0;l<n.length;l++)for(var u=n[l],c=0;c<i.length;c++){var p=i[c];s&&(s+=", "),s+=e(p)?p.replace(a,u):u+" "+p}return s}function getOptions(e,t,r){if(r)return n({},r,{index:r.index+1});var i=e.options.nestingLevel;return i=void 0===i?1:i+1,n({},e.options,{nestingLevel:i,index:t.indexOf(e)+1})}return{onProcessStyle:function onProcessStyle(t,r){if("style"!==r.type)return t;var i=r.options.parent,o=void 0,a=void 0;for(var l in t){var u=e(l),c="@"===l[0];if(u||c){if(o=getOptions(r,i,o),u){var p=replaceParentRefs(l,r.selector);a||(a=getReplaceRef(i)),p=p.replace(s,a),i.addRule(p,t[l],n({},o,{selector:p}))}else c&&i.addRule(l,null,o).addRule(r.key,t[l],{selector:r.selector});delete t[l]}}return t}}};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(59));var o=/\s*,\s*/g,a=/&/g,s=/\$([\w-]+)/g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function camelCase(){return{onProcessStyle:function onProcessStyle(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=convertCase(e[t]);return e}return convertCase(e)},onChangeValue:function onChangeValue(e,t,r){var i=(0,n.default)(t);return t===i?e:(r.prop(i,e),null)}}};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(255));function convertCase(e){var t={};for(var r in e)t[(0,n.default)(r)]=e[r];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(convertCase):t.fallbacks=convertCase(e.fallbacks)),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function addCamelCasedVersion(e){var t=/(-[a-z])/g,r=function replace(e){return e[1].toUpperCase()},n={};for(var i in e)n[i]=e[i],n[i.replace(t,r)]=e[i];return n}t.default=function defaultUnit(){var e=addCamelCasedVersion(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{onProcessStyle:function onProcessStyle(t,r){if("style"!==r.type)return t;for(var n in t)t[n]=iterate(n,t[n],e);return t},onChangeValue:function onChangeValue(t,r){return iterate(r,t,e)}}};var i=addCamelCasedVersion(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(256)).default);function iterate(e,t,r){if(!t)return t;var o=t,a=void 0===t?"undefined":n(t);switch("object"===a&&Array.isArray(t)&&(a="array"),a){case"object":if("fallbacks"===e){for(var s in t)t[s]=iterate(s,t[s],r);break}for(var l in t)t[l]=iterate(e+"-"+l,t[l],r);break;case"array":for(var u=0;u<t.length;u++)t[u]=iterate(e,t[u],r);break;case"number":0!==t&&(o=t+(r[e]||i[e]||""))}return o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function jssCompose(){return{onProcessStyle:function onProcessStyle(e,t){return e.composes?(registerClass(t,e.composes),delete e.composes,e):e}}};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(59));function registerClass(e,t){if(!t)return!0;if(Array.isArray(t)){for(var r=0;r<t.length;r++){if(!registerClass(e,t[r]))return!1}return!0}if(t.indexOf(" ")>-1)return registerClass(e,t.split(" "));var i=e.options.parent;if("$"===t[0]){var o=i.getRule(t.substr(1));return o?o===e?((0,n.default)(!1,"[JSS] Cyclic composition detected. \r\n%s",e),!1):(i.classes[e.key]+=" "+i.classes[o.key],!0):((0,n.default)(!1,"[JSS] Referenced rule is not defined. \r\n%s",e),!1)}return e.options.parent.classes[e.key]+=" "+t,!0}},function(e,t,r){(function(t){e.exports=function(){var e=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'",'"':'\\"',"\\":"\\\\"};function escapeChar(e){var t=r[e];return t||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}var n={};"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ").map(function(e){n[e]=!0});var i=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function isValidVariableName(e){return!n[e]&&i.test(e)}function toGlobalVariable(e){return"Function("+stringify("return this;")+")()"}function toPath(e){for(var t="",r=0;r<e.length;r++)isValidVariableName(e[r])?t+="."+e[r]:t+="["+stringify(e[r])+"]";return t}function stringifyArray(e,t,r){var n=e.map(function(e,n){var i=r(e,n);return void 0===i?String(i):t+i.split("\n").join("\n"+t)}).join(t?",\n":",");return t&&n?"[\n"+n+"\n]":"["+n+"]"}var o={"[object Array]":stringifyArray,"[object Object]":function stringifyObject(e,t,r){var n=Object.keys(e).reduce(function(n,i){var o=r(e[i],i);return void 0===o?n:(i=isValidVariableName(i)?i:stringify(i),o=String(o).split("\n").join("\n"+t),n.push(t+i+":"+(t?" ":"")+o),n)},[]).join(t?",\n":",");return t&&n?"{\n"+n+"\n}":"{"+n+"}"},"[object Error]":function(e){return"new Error("+stringify(e.message)+")"},"[object Date]":function(e){return"new Date("+e.getTime()+")"},"[object String]":function(e){return"new String("+stringify(e.toString())+")"},"[object Number]":function(e){return"new Number("+e+")"},"[object Boolean]":function(e){return"new Boolean("+e+")"},"[object Uint8Array]":function(e,t){return"new Uint8Array("+stringifyArray(e)+")"},"[object Set]":function(e,t,r){return"function"==typeof Array.from?"new Set("+stringify(Array.from(e),t,r)+")":void 0},"[object Map]":function(e,t,r){return"function"==typeof Array.from?"new Map("+stringify(Array.from(e),t,r)+")":void 0},"[object RegExp]":String,"[object Function]":String,"[object global]":toGlobalVariable,"[object Window]":toGlobalVariable},a={string:function(t){return"'"+t.replace(e,escapeChar)+"'"},number:String,object:String,boolean:String,symbol:String,undefined:String};function stringify(e,r,n){if(Object(e)!==e)return a[typeof e](e,r,n);if("function"==typeof t&&t.isBuffer(e))return"new Buffer("+n(e.toString())+")";var i=o[Object.prototype.toString.call(e)];return i?i(e,r,n):void 0}return function(e,t,r,n){n=n||{},"string"!=typeof r&&(r=new Array(Math.max(0,0|r)+1).join(" "));var i=Number(n.maxDepth)||100,o=!!n.references,a=!!n.skipUndefinedProperties,s=Number(n.maxValues)||1e5,l=[],u=[],c=[],p=[],h=[];function next(e,t){if(!a||void 0!==e){l.push(t);var r=f(e,stringify);return l.pop(),r}}var f=o?function(e,t){if(e&&("object"==typeof e||"function"==typeof e)){var n=c.indexOf(e);if(n>-1)return void h.push(l.slice(),p[n]);c.push(e),p.push(l.slice())}if(!(l.length>i||s--<=0))return t(e,r,next)}:function(e,t){var n=u.indexOf(e);if(!(n>-1||l.length>i||s--<=0)){u.push(e);var e=t(e,r,next);return u.pop(),e}};if("function"==typeof t){var d=f;f=function(e,r){return d(e,function(e,n,i){return t(e,n,function(e){return r(e,n,i)})})}}var g=f(e,stringify);if(h.length){for(var m=r?"\n":"",y=r?" = ":"=",v=";"+m,d=r?"(function () {":"(function(){",_=["var x"+y+g],b=0;b<h.length;b+=2)_.push("x"+toPath(h[b])+y+"x"+toPath(h[b+1]));return _.push("return x"),d+m+_.join(v)+v+"}())"}return g}}()}).call(this,r(170).Buffer)},function(e,t){var r=/[\'\"]/;e.exports=function unquote(e){return e?(r.test(e.charAt(0))&&(e=e.substr(1)),r.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},function(e,t,r){var n=r(171),i=r(140),o=r(355),a=r(49);e.exports=function map(e,t){return(a(e)?n:o)(e,i(t,3))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=_interopRequireDefault(r(1)),o=_interopRequireDefault(r(142));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdFullscreen(e){return i.default.createElement(o.default,n({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m23.4 8.4h8.2v8.2h-3.2v-5h-5v-3.2z m5 20v-5h3.2v8.2h-8.2v-3.2h5z m-20-11.8v-8.2h8.2v3.2h-5v5h-3.2z m3.2 6.8v5h5v3.2h-8.2v-8.2h3.2z"})))},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=_interopRequireDefault(r(1)),o=_interopRequireDefault(r(142));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdFullscreenExit(e){return i.default.createElement(o.default,n({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m26.6 13.4h5v3.2h-8.2v-8.2h3.2v5z m-3.2 18.2v-8.2h8.2v3.2h-5v5h-3.2z m-10-18.2v-5h3.2v8.2h-8.2v-3.2h5z m-5 13.2v-3.2h8.2v8.2h-3.2v-5h-5z"})))},e.exports=t.default},function(e,t,r){var n=r(180),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function escapeRegExp(e){return(e=n(e))&&o.test(e)?e.replace(i,"\\$&"):e}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return transform});var n=r(201),i=r(109),o={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:""},a=/^[\da-fA-F]+$/,s=/^\d+$/,l="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var u=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function injectDynamicImport(e){var t=e.tokTypes;function parseDynamicImport(){var e=this.startNode();return this.next(),this.type!==t.parenL&&this.unexpected(),this.finishNode(e,r)}function peekNext(){return this.input[this.pos]}return t._import.startsExpr=!0,e.plugins.dynamicImport=function dynamicImportPlugin(e){e.extend("parseStatement",function(e){return function parseStatement(){var r=this.startNode();if(this.type===t._import&&peekNext.call(this)===t.parenL.label){var n=this.parseExpression();return this.parseExpressionStatement(r,n)}for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e.apply(this,o)}}),e.extend("parseExprAtom",function(e){return function parseExprAtom(r){return this.type===t._import?parseDynamicImport.call(this):e.call(this,r)}})},e};var r=t.DynamicImportKey="Import"}),c=function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(u);u.DynamicImportKey;function toJSON(e){var t={};return Object.keys(e).forEach(function(r){"parent"!==r&&"program"!==r&&"keys"!==r&&"__wrapped"!==r&&(Array.isArray(e[r])?t[r]=e[r].map(toJSON):e[r]&&e[r].toJSON?t[r]=e[r].toJSON():t[r]=e[r])}),t}var p=function Node(){};function extractNames(e){var t=[];return h[e.type](t,e),t}p.prototype.ancestor=function ancestor(e){for(var t=this;e--;)if(!(t=t.parent))return null;return t},p.prototype.contains=function contains(e){for(;e;){if(e===this)return!0;e=e.parent}return!1},p.prototype.findLexicalBoundary=function findLexicalBoundary(){return this.parent.findLexicalBoundary()},p.prototype.findNearest=function findNearest(e){return"string"==typeof e&&(e=new RegExp("^"+e+"$")),e.test(this.type)?this:this.parent.findNearest(e)},p.prototype.unparenthesizedParent=function unparenthesizedParent(){for(var e=this.parent;e&&"ParenthesizedExpression"===e.type;)e=e.parent;return e},p.prototype.unparenthesize=function unparenthesize(){for(var e=this;"ParenthesizedExpression"===e.type;)e=e.expression;return e},p.prototype.findScope=function findScope(e){return this.parent.findScope(e)},p.prototype.getIndentation=function getIndentation(){return this.parent.getIndentation()},p.prototype.initialise=function initialise(e){for(var t=0,r=this.keys;t<r.length;t+=1){var n=this[r[t]];Array.isArray(n)?n.forEach(function(t){return t&&t.initialise(e)}):n&&"object"==typeof n&&n.initialise(e)}},p.prototype.toJSON=function toJSON$1(){return toJSON(this)},p.prototype.toString=function toString(){return this.program.magicString.original.slice(this.start,this.end)},p.prototype.transpile=function transpile(e,t){for(var r=0,n=this.keys;r<n.length;r+=1){var i=this[n[r]];Array.isArray(i)?i.forEach(function(r){return r&&r.transpile(e,t)}):i&&"object"==typeof i&&i.transpile(e,t)}};var h={Identifier:function Identifier(e,t){e.push(t)},ObjectPattern:function ObjectPattern(e,t){for(var r=0,n=t.properties;r<n.length;r+=1){var i=n[r];h[i.type](e,i)}},Property:function Property(e,t){h[t.value.type](e,t.value)},ArrayPattern:function ArrayPattern(e,t){for(var r=0,n=t.elements;r<n.length;r+=1){var i=n[r];i&&h[i.type](e,i)}},RestElement:function RestElement(e,t){h[t.argument.type](e,t.argument)},AssignmentPattern:function AssignmentPattern(e,t){h[t.left.type](e,t.left)}},f=Object.create(null);function Scope(e){e=e||{},this.parent=e.parent,this.isBlockScope=!!e.block,this.createDeclarationCallback=e.declare;for(var t=this;t.isBlockScope;)t=t.parent;this.functionScope=t,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function locate(e,t){var r,n=e.split("\n"),i=n.length,o=0;for(r=0;r<i;r+=1){var a=o+n[r].length+1;if(a>t)return{line:r+1,column:t-o,char:r};o=a}throw new Error("Could not determine location of character")}function repeat(e,t){for(var r="";t--;)r+=e;return r}function getSnippet(e,t,r){void 0===r&&(r=1);var n=Math.max(t.line-5,0),i=t.line,o=String(i).length,a=e.split("\n").slice(n,i),s=a[a.length-1].slice(0,t.column).replace(/\t/g,"  ").length,l=a.map(function(e,t){return r=o,(i=String(t+n+1))+repeat(" ",r-i.length)+" : "+e.replace(/\t/g,"  ");var r,i}).join("\n");return l+="\n"+repeat(" ",o+3+s)+repeat("^",r)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach(function(e){return f[e]=!0}),Scope.prototype={addDeclaration:function addDeclaration(e,t){for(var r=0,n=extractNames(e);r<n.length;r+=1){var i=n[r],o=i.name,a={name:o,node:i,kind:t,instances:[]};this.declarations[o]=a,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[o]||(this.functionScope.blockScopedDeclarations[o]=[]),this.functionScope.blockScopedDeclarations[o].push(a))}},addReference:function addReference(e){this.consolidated?this.consolidateReference(e):this.identifiers.push(e)},consolidate:function consolidate(){for(var e=0;e<this.identifiers.length;e+=1){var t=this.identifiers[e];this.consolidateReference(t)}this.consolidated=!0},consolidateReference:function consolidateReference(e){var t=this.declarations[e.name];t?t.instances.push(e):(this.references[e.name]=!0,this.parent&&this.parent.addReference(e))},contains:function contains(e){return this.declarations[e]||!!this.parent&&this.parent.contains(e)},createIdentifier:function createIdentifier(e){"number"==typeof e&&(e=e.toString());for(var t=e=e.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),r=1;this.declarations[t]||this.references[t]||this.aliases[t]||t in f;)t=e+"$"+r++;return this.aliases[t]=!0,t},createDeclaration:function createDeclaration(e){var t=this.createIdentifier(e);return this.createDeclarationCallback(t),t},findDeclaration:function findDeclaration(e){return this.declarations[e]||this.parent&&this.parent.findDeclaration(e)},resolveName:function resolveName(e){var t=this.findDeclaration(e);return t?t.name:e}};var d=function(e){function CompileError(t,r){if(e.call(this,t),this.name="CompileError",r){var n=r.program.magicString.original,i=locate(n,r.start);this.message=t+" ("+i.line+":"+i.column+")",this.stack=(new e).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=i,this.snippet=getSnippet(n,i,r.end-r.start)}}return e&&(CompileError.__proto__=e),CompileError.prototype=Object.create(e&&e.prototype),CompileError.prototype.constructor=CompileError,CompileError.prototype.toString=function toString(){return this.name+": "+this.message+"\n"+this.snippet},CompileError}(Error);function findIndex(e,t){for(var r=0;r<e.length;r+=1)if(t(e[r],r))return r;return-1}var g={Identifier:destructureIdentifier,AssignmentPattern:function destructureAssignmentPattern(e,t,r,n,i,o,a){var s="Identifier"===n.left.type,l=s?n.left.name:i;o||a.push(function(t,r,i){e.prependRight(n.left.end,r+"if ( "+l+" === void 0 ) "+l),e.move(n.left.end,n.right.end,t),e.appendLeft(n.right.end,i)});s||destructure(e,t,r,n.left,i,o,a)},ArrayPattern:function destructureArrayPattern(e,t,r,n,i,o,a){var s=n.start;n.elements.forEach(function(n,l){n&&("RestElement"===n.type?handleProperty(e,t,r,s,n.argument,i+".slice("+l+")",o,a):handleProperty(e,t,r,s,n,i+"["+l+"]",o,a),s=n.end)}),e.remove(s,n.end)},ObjectPattern:destructureObjectPattern};function destructure(e,t,r,n,i,o,a){g[n.type](e,t,r,n,i,o,a)}function destructureIdentifier(e,t,r,n,i,o,a){a.push(function(t,a,s){e.overwrite(n.start,n.end,(o?a:a+"var ")+r(n)+" = "+i+s),e.move(n.start,n.end,t)})}function destructureMemberExpression(e,t,r,n,i,o,a){a.push(function(t,r,a){e.prependRight(n.start,o?r:r+"var "),e.appendLeft(n.end," = "+i+a),e.move(n.start,n.end,t)})}function destructureObjectPattern(e,t,r,n,i,o,a){var s=this,l=n.start,u=[];n.properties.forEach(function(n){var c,p;if("Property"===n.type){var h=n.computed||"Identifier"!==n.key.type,f=h?e.slice(n.key.start,n.key.end):n.key.name;c=h?i+"["+f+"]":i+"."+f,p=n.value,u.push(h?f:'"'+f+'"')}else{if("RestElement"!==n.type)throw new d(s,"Unexpected node of type "+n.type+" in object pattern");p=n.argument,c=t("rest"),a.push(function(t,r,a){var s=n.program.getObjectWithoutPropertiesHelper(e);e.overwrite(n.start,l=n.argument.start,(o?r:r+"var ")+c+" = "+s+"( "+i+", ["+u.join(", ")+"] )"+a),e.move(n.start,l,t)})}handleProperty(e,t,r,l,p,c,o,a),l=n.end}),e.remove(l,n.end)}function handleProperty(e,t,r,n,i,o,a,s){switch(i.type){case"Identifier":e.remove(n,i.start),destructureIdentifier(e,0,r,i,o,a,s);break;case"MemberExpression":e.remove(n,i.start),destructureMemberExpression(e,0,0,i,o,!0,s);break;case"AssignmentPattern":var l,u="Identifier"===i.left.type;l=u?r(i.left):t(o),s.push(function(t,r,n){a?(e.prependRight(i.right.start,l+" = "+o+", "+l+" = "+l+" === void 0 ? "),e.appendLeft(i.right.end," : "+l+n)):(e.prependRight(i.right.start,r+"var "+l+" = "+o+"; if ( "+l+" === void 0 ) "+l+" = "),e.appendLeft(i.right.end,n)),e.move(i.right.start,i.right.end,t)}),u?e.remove(n,i.right.start):(e.remove(n,i.left.start),e.remove(i.left.end,i.right.start),handleProperty(e,t,r,n,i.left,l,a,s));break;case"ObjectPattern":e.remove(n,n=i.start);var c=o;i.properties.length>1&&(c=t(o),s.push(function(t,r,s){e.prependRight(i.start,(a?"":r+"var ")+c+" = "),e.overwrite(i.start,n=i.start+1,o),e.appendLeft(n,s),e.overwrite(i.start,n=i.start+1,(a?"":r+"var ")+c+" = "+o+s),e.move(i.start,n,t)})),destructureObjectPattern(e,t,r,i,c,a,s);break;case"ArrayPattern":if(e.remove(n,n=i.start),i.elements.filter(Boolean).length>1){var p=t(o);s.push(function(t,r,s){e.prependRight(i.start,(a?"":r+"var ")+p+" = "),e.overwrite(i.start,n=i.start+1,o,{contentOnly:!0}),e.appendLeft(n,s),e.move(i.start,n,t)}),i.elements.forEach(function(i,o){i&&("RestElement"===i.type?handleProperty(e,t,r,n,i.argument,p+".slice("+o+")",a,s):handleProperty(e,t,r,n,i,p+"["+o+"]",a,s),n=i.end)})}else{var h=findIndex(i.elements,Boolean),f=i.elements[h];"RestElement"===f.type?handleProperty(e,t,r,n,f.argument,o+".slice("+h+")",a,s):handleProperty(e,t,r,n,f,o+"["+h+"]",a,s),n=f.end}e.remove(n,i.end);break;default:throw new Error("Unexpected node type in destructuring ("+i.type+")")}}var m=function(e){function BlockStatement(){e.apply(this,arguments)}return e&&(BlockStatement.__proto__=e),BlockStatement.prototype=Object.create(e&&e.prototype),BlockStatement.prototype.constructor=BlockStatement,BlockStatement.prototype.createScope=function createScope(){var e=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new Scope({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(t){return e.createdDeclarations.push(t)}}),this.parentIsFunction&&this.parent.params.forEach(function(t){e.scope.addDeclaration(t,"param")})},BlockStatement.prototype.initialise=function initialise(e){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach(function(t){return t.initialise(e)}),this.scope.consolidate()},BlockStatement.prototype.findLexicalBoundary=function findLexicalBoundary(){return"Program"===this.type?this:/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},BlockStatement.prototype.findScope=function findScope(e){return e&&!this.isFunctionBlock?this.parent.findScope(e):this.scope},BlockStatement.prototype.getArgumentsAlias=function getArgumentsAlias(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},BlockStatement.prototype.getArgumentsArrayAlias=function getArgumentsArrayAlias(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},BlockStatement.prototype.getThisAlias=function getThisAlias(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},BlockStatement.prototype.getIndentation=function getIndentation(){if(void 0===this.indentation){for(var e=this.program.magicString.original,t=this.synthetic||!this.body.length,r=t?this.start:this.body[0].start;r&&"\n"!==e[r];)r-=1;for(this.indentation="";;){var n=e[r+=1];if(" "!==n&&"\t"!==n)break;this.indentation+=n}for(var i=this.program.magicString.getIndentString(),o=this.parent;o;)"constructor"!==o.kind||o.parent.parent.superClass||(this.indentation=this.indentation.replace(i,"")),o=o.parent;t&&(this.indentation+=i)}return this.indentation},BlockStatement.prototype.transpile=function transpile(t,r){var n,i,o=this,a=this.getIndentation(),s=[];if(this.argumentsAlias&&s.push(function(e,r,n){var i=r+"var "+o.argumentsAlias+" = arguments"+n;t.appendLeft(e,i)}),this.thisAlias&&s.push(function(e,r,n){var i=r+"var "+o.thisAlias+" = this"+n;t.appendLeft(e,i)}),this.argumentsArrayAlias&&s.push(function(e,r,n){var i=o.scope.createIdentifier("i"),s=r+"var "+i+" = arguments.length, "+o.argumentsArrayAlias+" = Array("+i+");\n"+a+"while ( "+i+"-- ) "+o.argumentsArrayAlias+"["+i+"] = arguments["+i+"]"+n;t.appendLeft(e,s)}),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,t,r,a,s):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],t,r,a,s),r.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(t),e.prototype.transpile.call(this,t,r),this.createdDeclarations.length&&s.push(function(e,r,n){var i=r+"var "+o.createdDeclarations.join(", ")+n;t.appendLeft(e,i)}),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var l=this.body[0];s.length?(t.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),t.prependRight(l.start,"\n"+a+"return "),t.appendLeft(l.end,";\n")):r.arrow&&(t.prependRight(l.start,"{ return "),t.appendLeft(l.end,"; }"))}else s.length&&t.prependRight(this.start,"{").appendLeft(this.end,"}");i=this.body[0],n=i&&"ExpressionStatement"===i.type&&"Literal"===i.expression.type&&"use strict"===i.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var u="\n"+a,c=";";s.forEach(function(e,t){t===s.length-1&&(c=";\n"),e(n,u,c)})},BlockStatement.prototype.transpileParameters=function transpileParameters(e,t,r,n,i){var o=this;e.forEach(function(a){if("AssignmentPattern"===a.type&&"Identifier"===a.left.type)r.defaultParameter&&i.push(function(e,r,n){var i=r+"if ( "+a.left.name+" === void 0 ) "+a.left.name;t.prependRight(a.left.end,i).move(a.left.end,a.right.end,e).appendLeft(a.right.end,n)});else if("RestElement"===a.type)r.spreadRest&&i.push(function(r,i,s){var l=e[e.length-2];if(l)t.remove(l?l.end:a.start,a.end);else{for(var u=a.start,c=a.end;/\s/.test(t.original[u-1]);)u-=1;for(;/\s/.test(t.original[c]);)c+=1;t.remove(u,c)}var p=a.argument.name,h=o.scope.createIdentifier("len"),f=e.length-1;f?t.prependRight(r,i+"var "+p+" = [], "+h+" = arguments.length - "+f+";\n"+n+"while ( "+h+"-- > 0 ) "+p+"[ "+h+" ] = arguments[ "+h+" + "+f+" ]"+s):t.prependRight(r,i+"var "+p+" = [], "+h+" = arguments.length;\n"+n+"while ( "+h+"-- ) "+p+"[ "+h+" ] = arguments[ "+h+" ]"+s)});else if("Identifier"!==a.type&&r.parameterDestructuring){var s=o.scope.createIdentifier("ref");destructure(t,function(e){return o.scope.createIdentifier(e)},function(e){var t=e.name;return o.scope.resolveName(t)},a,s,!1,i),t.prependRight(a.start,s)}})},BlockStatement.prototype.transpileBlockScopedIdentifiers=function transpileBlockScopedIdentifiers(e){var t=this;Object.keys(this.scope.blockScopedDeclarations).forEach(function(r){for(var n=0,i=t.scope.blockScopedDeclarations[r];n<i.length;n+=1){var o=i[n],a=!1;if("for.let"===o.kind){var s=o.node.findNearest("ForStatement");if(s.shouldRewriteAsFunction){var l=t.scope.createIdentifier(r),u=s.reassigned[r]?t.scope.createIdentifier(r):r;o.name=l,e.overwrite(o.node.start,o.node.end,l,{storeName:!0}),s.aliases[r]={outer:l,inner:u};for(var c=0,p=o.instances;c<p.length;c+=1){var h=p[c],f=s.body.contains(h)?u:l;r!==f&&e.overwrite(h.start,h.end,f,{storeName:!0})}a=!0}}if(!a){var d=t.scope.createIdentifier(r);if(r!==d){o.name=d,e.overwrite(o.node.start,o.node.end,d,{storeName:!0});for(var g=0,m=o.instances;g<m.length;g+=1){var y=m[g];y.rewritten=!0,e.overwrite(y.start,y.end,d,{storeName:!0})}}}}})},BlockStatement}(p);function isArguments(e){return"Identifier"===e.type&&"arguments"===e.name}function spread(e,t,r,n,i){for(var o=t.length,a=-1;o--;){var s=t[o];s&&"SpreadElement"===s.type&&(isArguments(s.argument)&&e.overwrite(s.argument.start,s.argument.end,n),a=o)}if(-1===a)return!1;if(i){for(o=0;o<t.length;o+=1){var l=t[o];"SpreadElement"===l.type?e.remove(l.start,l.argument.start):(e.prependRight(l.start,"["),e.prependRight(l.end,"]"))}return!0}var u=t[a],c=t[a-1];for(c?e.overwrite(c.end,u.start," ].concat( "):(e.remove(r,u.start),e.overwrite(u.end,t[1].start,".concat( ")),o=a;o<t.length;o+=1)(u=t[o])&&("SpreadElement"===u.type?e.remove(u.start,u.argument.start):(e.appendLeft(u.start,"["),e.appendLeft(u.end,"]")));return!0}var y=function(e){function ArrayExpression(){e.apply(this,arguments)}return e&&(ArrayExpression.__proto__=e),ArrayExpression.prototype=Object.create(e&&e.prototype),ArrayExpression.prototype.constructor=ArrayExpression,ArrayExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.elements.length)for(var r=this.findLexicalBoundary(),n=this.elements.length;n--;){var i=this.elements[n];i&&"SpreadElement"===i.type&&isArguments(i.argument)&&(this.argumentsArrayAlias=r.getArgumentsArrayAlias())}e.prototype.initialise.call(this,t)},ArrayExpression.prototype.transpile=function transpile(t,r){if(e.prototype.transpile.call(this,t,r),r.spreadRest){if(this.elements.length){var n=this.elements[this.elements.length-1];n&&/\s*,/.test(t.original.slice(n.end,this.end))&&t.overwrite(n.end,this.end-1," ")}if(1===this.elements.length){var i=this.elements[0];i&&"SpreadElement"===i.type&&(isArguments(i.argument)?t.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(t.overwrite(this.start,i.argument.start,"[].concat( "),t.overwrite(i.end,this.end," )")))}else{spread(t,this.elements,this.start,this.argumentsArrayAlias)&&t.overwrite(this.end-1,this.end,")")}}},ArrayExpression}(p);function removeTrailingComma(e,t){for(;")"!==e.original[t];){if(","===e.original[t])return void e.remove(t,t+1);"/"===e.original[t]&&(t=e.original.indexOf("/"===e.original[t+1]?"\n":"*/",t)+1),t+=1}}var v=function(e){function ArrowFunctionExpression(){e.apply(this,arguments)}return e&&(ArrowFunctionExpression.__proto__=e),ArrowFunctionExpression.prototype=Object.create(e&&e.prototype),ArrowFunctionExpression.prototype.constructor=ArrowFunctionExpression,ArrowFunctionExpression.prototype.initialise=function initialise(t){this.body.createScope(),e.prototype.initialise.call(this,t)},ArrowFunctionExpression.prototype.transpile=function transpile(t,r){var n=1===this.params.length&&this.start===this.params[0].start;if(r.arrow||this.needsArguments(r)){for(var i=this.body.start;"="!==t.original[i];)i-=1;t.remove(i,this.body.start),e.prototype.transpile.call(this,t,r),n&&(t.prependRight(this.params[0].start,"("),t.appendLeft(this.params[0].end,")")),this.parent&&"ExpressionStatement"===this.parent.type?t.prependRight(this.start,"!function"):t.prependRight(this.start,"function ")}else e.prototype.transpile.call(this,t,r);r.trailingFunctionCommas&&this.params.length&&!n&&removeTrailingComma(t,this.params[this.params.length-1].end)},ArrowFunctionExpression.prototype.needsArguments=function needsArguments(e){return e.spreadRest&&this.params.filter(function(e){return"RestElement"===e.type}).length>0},ArrowFunctionExpression}(p);function checkConst(e,t){var r=t.findDeclaration(e.name);if(r&&"const"===r.kind)throw new d(e.name+" is read-only",e)}var _=function(e){function AssignmentExpression(){e.apply(this,arguments)}return e&&(AssignmentExpression.__proto__=e),AssignmentExpression.prototype=Object.create(e&&e.prototype),AssignmentExpression.prototype.constructor=AssignmentExpression,AssignmentExpression.prototype.initialise=function initialise(t){if("Identifier"===this.left.type){var r=this.findScope(!1).findDeclaration(this.left.name),n=r&&r.node.ancestor(3);n&&"ForStatement"===n.type&&n.body.contains(this)&&(n.reassigned[this.left.name]=!0)}e.prototype.initialise.call(this,t)},AssignmentExpression.prototype.transpile=function transpile(t,r){"Identifier"===this.left.type&&checkConst(this.left,this.findScope(!1)),"**="===this.operator&&r.exponentiation?this.transpileExponentiation(t,r):/Pattern/.test(this.left.type)&&r.destructuring&&this.transpileDestructuring(t,r),e.prototype.transpile.call(this,t,r)},AssignmentExpression.prototype.transpileDestructuring=function transpileDestructuring(e){var t=this,r=this.findScope(!0),n=this.findScope(!1),i=r.createDeclaration("assign");e.appendRight(this.left.end,"("+i),e.appendLeft(this.right.end,", ");var o=[];destructure(e,function(e){return r.createDeclaration(e)},function(e){var t=n.resolveName(e.name);return checkConst(e,n),t},this.left,i,!0,o);var a=", ";o.forEach(function(e,r){r===o.length-1&&(a=""),e(t.end,"",a)}),"ExpressionStatement"===this.unparenthesizedParent().type?e.prependRight(this.end,")"):e.appendRight(this.end,", "+i+")")},AssignmentExpression.prototype.transpileExponentiation=function transpileExponentiation(e){for(var t,r=this.findScope(!1),n=this.left.end;"*"!==e.original[n];)n+=1;e.remove(n,n+2);var i=this.left.unparenthesize();if("Identifier"===i.type)t=r.resolveName(i.name);else if("MemberExpression"===i.type){var o,a,s=!1,l=!1,u=this.findNearest(/(?:Statement|Declaration)$/),c=u.getIndentation();"Identifier"===i.property.type?a=i.computed?r.resolveName(i.property.name):i.property.name:(a=r.createDeclaration("property"),l=!0),"Identifier"===i.object.type?o=r.resolveName(i.object.name):(o=r.createDeclaration("object"),s=!0),i.start===u.start?s&&l?(e.prependRight(u.start,o+" = "),e.overwrite(i.object.end,i.property.start,";\n"+c+a+" = "),e.overwrite(i.property.end,i.end,";\n"+c+o+"["+a+"]")):s?(e.prependRight(u.start,o+" = "),e.appendLeft(i.object.end,";\n"+c),e.appendLeft(i.object.end,o)):l&&(e.prependRight(i.property.start,a+" = "),e.appendLeft(i.property.end,";\n"+c),e.move(i.property.start,i.property.end,this.start),e.appendLeft(i.object.end,"["+a+"]"),e.remove(i.object.end,i.property.start),e.remove(i.property.end,i.end)):(s&&l?(e.prependRight(i.start,"( "+o+" = "),e.overwrite(i.object.end,i.property.start,", "+a+" = "),e.overwrite(i.property.end,i.end,", "+o+"["+a+"]")):s?(e.prependRight(i.start,"( "+o+" = "),e.appendLeft(i.object.end,", "+o)):l&&(e.prependRight(i.property.start,"( "+a+" = "),e.appendLeft(i.property.end,", "),e.move(i.property.start,i.property.end,i.start),e.overwrite(i.object.end,i.property.start,"["+a+"]"),e.remove(i.property.end,i.end)),l&&e.appendLeft(this.end," )")),t=o+(i.computed||l?"["+a+"]":"."+a)}e.prependRight(this.right.start,"Math.pow( "+t+", "),e.appendLeft(this.right.end," )")},AssignmentExpression}(p),b=function(e){function BinaryExpression(){e.apply(this,arguments)}return e&&(BinaryExpression.__proto__=e),BinaryExpression.prototype=Object.create(e&&e.prototype),BinaryExpression.prototype.constructor=BinaryExpression,BinaryExpression.prototype.transpile=function transpile(t,r){"**"===this.operator&&r.exponentiation&&(t.prependRight(this.start,"Math.pow( "),t.overwrite(this.left.end,this.right.start,", "),t.appendLeft(this.end," )")),e.prototype.transpile.call(this,t,r)},BinaryExpression}(p),x=/(?:For(?:In|Of)?|While)Statement/,w=function(e){function BreakStatement(){e.apply(this,arguments)}return e&&(BreakStatement.__proto__=e),BreakStatement.prototype=Object.create(e&&e.prototype),BreakStatement.prototype.constructor=BreakStatement,BreakStatement.prototype.initialise=function initialise(){var e=this.findNearest(x),t=this.findNearest("SwitchCase");e&&(!t||e.depth>t.depth)&&(e.canBreak=!0,this.loop=e)},BreakStatement.prototype.transpile=function transpile(e){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new d("Labels are not currently supported in a loop with locally-scoped variables",this);e.overwrite(this.start,this.start+5,"return 'break'")}},BreakStatement}(p),S=function(e){function CallExpression(){e.apply(this,arguments)}return e&&(CallExpression.__proto__=e),CallExpression.prototype=Object.create(e&&e.prototype),CallExpression.prototype.constructor=CallExpression,CallExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.arguments.length>1)for(var r=this.findLexicalBoundary(),n=this.arguments.length;n--;){var i=this.arguments[n];"SpreadElement"===i.type&&isArguments(i.argument)&&(this.argumentsArrayAlias=r.getArgumentsArrayAlias())}e.prototype.initialise.call(this,t)},CallExpression.prototype.transpile=function transpile(t,r){if(r.spreadRest&&this.arguments.length){var n,i=!1,o=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===o.type&&(t.remove(o.start,o.argument.start),i=!0):i=spread(t,this.arguments,o.start,this.argumentsArrayAlias),i){var a=null;if("Super"===this.callee.type?a=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(a=this.callee.object),a||"MemberExpression"!==this.callee.type)n="void 0";else if("Identifier"===this.callee.object.type)n=this.callee.object.name;else{n=this.findScope(!0).createDeclaration("ref");var s=this.callee.object;t.prependRight(s.start,"("+n+" = "),t.appendLeft(s.end,")")}t.appendLeft(this.callee.end,".apply"),a?(a.noCall=!0,this.arguments.length>1&&("SpreadElement"!==o.type&&t.prependRight(o.start,"[ "),t.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?t.prependRight(o.start,n+", "):("SpreadElement"===o.type?t.appendLeft(o.start,n+", "):t.appendLeft(o.start,n+", [ "),t.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}r.trailingFunctionCommas&&this.arguments.length&&removeTrailingComma(t,this.arguments[this.arguments.length-1].end),e.prototype.transpile.call(this,t,r)},CallExpression}(p),E=function(e){function ClassBody(){e.apply(this,arguments)}return e&&(ClassBody.__proto__=e),ClassBody.prototype=Object.create(e&&e.prototype),ClassBody.prototype.constructor=ClassBody,ClassBody.prototype.transpile=function transpile(t,r,n,i){var o=this;if(r.classes){var a=this.parent.name,s=t.getIndentString(),l=this.getIndentation()+(n?s:""),u=l+s,c=findIndex(this.body,function(e){return"constructor"===e.kind}),p=this.body[c],h="",d="";if(this.body.length?(t.remove(this.start,this.body[0].start),t.remove(this.body[this.body.length-1].end,this.end)):t.remove(this.start,this.end),p){p.value.body.isConstructorBody=!0;var g=this.body[c-1],m=this.body[c+1];c>0&&(t.remove(g.end,p.start),t.move(p.start,m?m.start:this.end-1,this.body[0].start)),n||t.appendLeft(p.end,";")}var y=!1!==this.program.options.namedFunctionExpressions,v=y||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var _="if ( "+i+" ) "+a+".__proto__ = "+i+";\n"+l+a+".prototype = Object.create( "+i+" && "+i+".prototype );\n"+l+a+".prototype.constructor = "+a+";";if(p)h+="\n\n"+l+_;else h+=(_="function "+a+" () {"+(i?"\n"+u+i+".apply(this, arguments);\n"+l+"}":"}")+(n?"":";")+(this.body.length?"\n\n"+l:"")+_)+"\n\n"+l}else if(!p){var b="function "+(v?a+" ":"")+"() {}";"ClassDeclaration"===this.parent.type&&(b+=";"),this.body.length&&(b+="\n\n"+l),h+=b}var x,w,S=this.findScope(!1),E=[],P=[];if(this.body.forEach(function(e,r){if("constructor"!==e.kind){if(e.static){var n=" "==t.original[e.start+6]?7:6;t.remove(e.start,e.start+n)}var i,s="method"!==e.kind,u=e.key.name;(f[u]||e.value.body.scope.references[u])&&(u=S.createIdentifier(u));var p=!1;if(e.computed||"Literal"!==e.key.type||(p=!0,e.computed=!0),s){if(e.computed)throw new Error("Computed accessor properties are not currently supported");t.remove(e.start,e.key.start),e.static?(~P.indexOf(e.key.name)||P.push(e.key.name),w||(w=S.createIdentifier("staticAccessors")),i=""+w):(~E.indexOf(e.key.name)||E.push(e.key.name),x||(x=S.createIdentifier("prototypeAccessors")),i=""+x)}else i=e.static?""+a:a+".prototype";e.computed||(i+="."),(c>0&&r===c+1||0===r&&c===o.body.length-1)&&(i="\n\n"+l+i);var h=e.key.end;if(e.computed)if(p)t.prependRight(e.key.start,"["),t.appendLeft(e.key.end,"]");else{for(;"]"!==t.original[h];)h+=1;h+=1}var d=e.computed||s||!y?"":u+" ",g=(s?"."+e.kind:"")+" = function"+(e.value.generator?"* ":" ")+d;t.remove(h,e.value.start),t.prependRight(e.value.start,g),t.appendLeft(e.end,";"),e.value.generator&&t.remove(e.start,e.key.start),t.prependRight(e.start,i)}else{var m=v?" "+a:"";t.overwrite(e.key.start,e.key.end,"function"+m)}}),E.length||P.length){var C=[],T=[];E.length&&(C.push("var "+x+" = { "+E.map(function(e){return e+": { configurable: true }"}).join(",")+" };"),T.push("Object.defineProperties( "+a+".prototype, "+x+" );")),P.length&&(C.push("var "+w+" = { "+P.map(function(e){return e+": { configurable: true }"}).join(",")+" };"),T.push("Object.defineProperties( "+a+", "+w+" );")),p&&(h+="\n\n"+l),h+=C.join("\n"+l),p||(h+="\n\n"+l),d+="\n\n"+l+T.join("\n"+l)}p?t.appendLeft(p.end,h):t.prependRight(this.start,h),t.appendLeft(this.end,d)}e.prototype.transpile.call(this,t,r)},ClassBody}(p);function deindent(e,t){var r=e.start,n=e.end,i=t.getIndentString(),o=i.length,a=r-o;e.program.indentExclusions[a]||t.original.slice(a,r)!==i||t.remove(a,r);for(var s,l=new RegExp(i+"\\S","g"),u=t.original.slice(r,n);s=l.exec(u);){var c=r+s.index;e.program.indentExclusions[c]||t.remove(c,c+o)}}var P=function(e){function ClassDeclaration(){e.apply(this,arguments)}return e&&(ClassDeclaration.__proto__=e),ClassDeclaration.prototype=Object.create(e&&e.prototype),ClassDeclaration.prototype.constructor=ClassDeclaration,ClassDeclaration.prototype.initialise=function initialise(t){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),e.prototype.initialise.call(this,t)},ClassDeclaration.prototype.transpile=function transpile(e,t){if(t.classes){this.superClass||deindent(this.body,e);var r=this.superClass&&(this.superClass.name||"superclass"),n=this.getIndentation(),i=n+e.getIndentString(),o="ExportDefaultDeclaration"===this.parent.type;o&&e.remove(this.parent.start,this.start);var a=this.start;this.id?(e.overwrite(a,this.id.start,"var "),a=this.id.end):e.prependLeft(a,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(e.remove(a,this.superClass.start),e.appendLeft(a," = (function ("+r+") {\n"+i)):(e.overwrite(a,this.superClass.start," = "),e.overwrite(this.superClass.end,this.body.start,"(function ("+r+") {\n"+i)):a===this.body.start?e.appendLeft(a," = "):e.overwrite(a,this.body.start," = "),this.body.transpile(e,t,!!this.superClass,r);var s=o?"\n\n"+n+"export default "+this.name+";":"";this.superClass?(e.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+n+"}("),e.move(this.superClass.start,this.superClass.end,this.end),e.prependRight(this.end,"));"+s)):s&&e.prependRight(this.end,s)}else this.body.transpile(e,t,!1,null)},ClassDeclaration}(p),C=function(e){function ClassExpression(){e.apply(this,arguments)}return e&&(ClassExpression.__proto__=e),ClassExpression.prototype=Object.create(e&&e.prototype),ClassExpression.prototype.constructor=ClassExpression,ClassExpression.prototype.initialise=function initialise(t){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),e.prototype.initialise.call(this,t)},ClassExpression.prototype.transpile=function transpile(e,t){if(t.classes){var r=this.superClass&&(this.superClass.name||"superclass"),n=this.getIndentation(),i=n+e.getIndentString();this.superClass?(e.remove(this.start,this.superClass.start),e.remove(this.superClass.end,this.body.start),e.appendLeft(this.start,"(function ("+r+") {\n"+i)):e.overwrite(this.start,this.body.start,"(function () {\n"+i),this.body.transpile(e,t,!0,r);var o="\n\n"+i+"return "+this.name+";\n"+n+"}(";this.superClass?(e.appendLeft(this.end,o),e.move(this.superClass.start,this.superClass.end,this.end),e.prependRight(this.end,"))")):e.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+n+"}())")}else this.body.transpile(e,t,!1)},ClassExpression}(p),T=function(e){function ContinueStatement(){e.apply(this,arguments)}return e&&(ContinueStatement.__proto__=e),ContinueStatement.prototype=Object.create(e&&e.prototype),ContinueStatement.prototype.constructor=ContinueStatement,ContinueStatement.prototype.transpile=function transpile(e){if(this.findNearest(x).shouldRewriteAsFunction){if(this.label)throw new d("Labels are not currently supported in a loop with locally-scoped variables",this);e.overwrite(this.start,this.start+8,"return")}},ContinueStatement}(p),k=function(e){function ExportDefaultDeclaration(){e.apply(this,arguments)}return e&&(ExportDefaultDeclaration.__proto__=e),ExportDefaultDeclaration.prototype=Object.create(e&&e.prototype),ExportDefaultDeclaration.prototype.constructor=ExportDefaultDeclaration,ExportDefaultDeclaration.prototype.initialise=function initialise(t){if(t.moduleExport)throw new d("export is not supported",this);e.prototype.initialise.call(this,t)},ExportDefaultDeclaration}(p),O=function(e){function ExportNamedDeclaration(){e.apply(this,arguments)}return e&&(ExportNamedDeclaration.__proto__=e),ExportNamedDeclaration.prototype=Object.create(e&&e.prototype),ExportNamedDeclaration.prototype.constructor=ExportNamedDeclaration,ExportNamedDeclaration.prototype.initialise=function initialise(t){if(t.moduleExport)throw new d("export is not supported",this);e.prototype.initialise.call(this,t)},ExportNamedDeclaration}(p),A=function(e){function LoopStatement(){e.apply(this,arguments)}return e&&(LoopStatement.__proto__=e),LoopStatement.prototype=Object.create(e&&e.prototype),LoopStatement.prototype.constructor=LoopStatement,LoopStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},LoopStatement.prototype.initialise=function initialise(t){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),e.prototype.initialise.call(this,t),t.letConst)for(var r=Object.keys(this.body.scope.declarations),n=r.length;n--;){for(var i=r[n],o=this.body.scope.declarations[i],a=o.instances.length;a--;){var s=o.instances[a].findNearest(/Function/);if(s&&s.depth>this.depth){this.shouldRewriteAsFunction=!0;break}}if(this.shouldRewriteAsFunction)break}},LoopStatement.prototype.transpile=function transpile(t,r){var n="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var i=this.getIndentation(),o=i+t.getIndentString(),a=this.args?" "+this.args.join(", ")+" ":"",s=this.params?" "+this.params.join(", ")+" ":"",l=this.findScope(!0),u=l.createIdentifier("loop"),c="var "+u+" = function ("+s+") "+(this.body.synthetic?"{\n"+i+t.getIndentString():""),p=(this.body.synthetic?"\n"+i+"}":"")+";\n\n"+i;if(t.prependRight(this.body.start,c),t.appendLeft(this.body.end,p),t.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var h=l.createIdentifier("returned"),f="{\n"+o+"var "+h+" = "+u+"("+a+");\n";this.canBreak&&(f+="\n"+o+"if ( "+h+" === 'break' ) break;"),this.canReturn&&(f+="\n"+o+"if ( "+h+" ) return "+h+".v;"),f+="\n"+i+"}",t.prependRight(this.body.end,f)}else{var d=u+"("+a+");";"DoWhileStatement"===this.type?t.overwrite(this.start,this.body.start,"do {\n"+o+d+"\n"+i+"}"):t.prependRight(this.body.end,d)}}else n&&(t.appendLeft(this.body.start,"{ "),t.prependRight(this.body.end," }"));e.prototype.transpile.call(this,t,r)},LoopStatement}(p),I=function(e){function ForStatement(){e.apply(this,arguments)}return e&&(ForStatement.__proto__=e),ForStatement.prototype=Object.create(e&&e.prototype),ForStatement.prototype.constructor=ForStatement,ForStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},ForStatement.prototype.transpile=function transpile(t,r){var n=this,i=this.getIndentation()+t.getIndentString();if(this.shouldRewriteAsFunction){var o="VariableDeclaration"===this.init.type?this.init.declarations.map(function(e){return extractNames(e.id)}):[],a=this.aliases;this.args=o.map(function(e){return e in n.aliases?n.aliases[e].outer:e}),this.params=o.map(function(e){return e in n.aliases?n.aliases[e].inner:e});var s=Object.keys(this.reassigned).map(function(e){return a[e].outer+" = "+a[e].inner+";"});if(s.length)if(this.body.synthetic)t.appendLeft(this.body.body[0].end,"; "+s.join(" "));else{var l=this.body.body[this.body.body.length-1];t.appendLeft(l.end,"\n\n"+i+s.join("\n"+i))}}e.prototype.transpile.call(this,t,r)},ForStatement}(A),R=function(e){function ForInStatement(){e.apply(this,arguments)}return e&&(ForInStatement.__proto__=e),ForInStatement.prototype=Object.create(e&&e.prototype),ForInStatement.prototype.constructor=ForInStatement,ForInStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},ForInStatement.prototype.transpile=function transpile(t,r){var n=this,i="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var o=i?this.left.declarations.map(function(e){return extractNames(e.id)}):[];this.args=o.map(function(e){return e in n.aliases?n.aliases[e].outer:e}),this.params=o.map(function(e){return e in n.aliases?n.aliases[e].inner:e})}e.prototype.transpile.call(this,t,r);var a=i?this.left.declarations[0].id:this.left;"Identifier"!==a.type&&this.destructurePattern(t,a,i)},ForInStatement.prototype.destructurePattern=function destructurePattern(e,t,r){var n=this.findScope(!0),i=this.getIndentation()+e.getIndentString(),o=n.createIdentifier("ref"),a=this.body.body.length?this.body.body[0].start:this.body.start+1;e.move(t.start,t.end,a),e.prependRight(t.end,r?o:"var "+o);var s=[];destructure(e,function(e){return n.createIdentifier(e)},function(e){var t=e.name;return n.resolveName(t)},t,o,!1,s);var l=";\n"+i;s.forEach(function(e,t){t===s.length-1&&(l=";\n\n"+i),e(a,"",l)})},ForInStatement}(A),M=function(e){function ForOfStatement(){e.apply(this,arguments)}return e&&(ForOfStatement.__proto__=e),ForOfStatement.prototype=Object.create(e&&e.prototype),ForOfStatement.prototype.constructor=ForOfStatement,ForOfStatement.prototype.initialise=function initialise(t){if(t.forOf&&!t.dangerousForOf)throw new d("for...of statements are not supported. Use `transforms: { forOf: false }` to skip transformation and disable this error, or `transforms: { dangerousForOf: true }` if you know what you're doing",this);e.prototype.initialise.call(this,t)},ForOfStatement.prototype.transpile=function transpile(t,r){if(e.prototype.transpile.call(this,t,r),r.dangerousForOf)if(this.body.body[0]){var n=this.findScope(!0),i=this.getIndentation(),o=i+t.getIndentString(),a=n.createIdentifier("i"),s=n.createIdentifier("list");this.body.synthetic&&(t.prependRight(this.left.start,"{\n"+o),t.appendLeft(this.body.body[0].end,"\n"+i+"}"));var l=this.body.body[0].start;t.remove(this.left.end,this.right.start),t.move(this.left.start,this.left.end,l),t.prependRight(this.right.start,"var "+a+" = 0, "+s+" = "),t.appendLeft(this.right.end,"; "+a+" < "+s+".length; "+a+" += 1");var u="VariableDeclaration"===this.left.type,c=u?this.left.declarations[0].id:this.left;if("Identifier"!==c.type){var p=[],h=n.createIdentifier("ref");destructure(t,function(e){return n.createIdentifier(e)},function(e){var t=e.name;return n.resolveName(t)},c,h,!u,p);var f=";\n"+o;p.forEach(function(e,t){t===p.length-1&&(f=";\n\n"+o),e(l,"",f)}),u?(t.appendLeft(this.left.start+this.left.kind.length+1,h),t.appendLeft(this.left.end," = "+s+"["+a+"];\n"+o)):t.appendLeft(this.left.end,"var "+h+" = "+s+"["+a+"];\n"+o)}else t.appendLeft(this.left.end," = "+s+"["+a+"];\n\n"+o)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(t.remove(this.start,this.left.start),t.appendLeft(this.left.end,";"),t.remove(this.left.end,this.end)):t.remove(this.start,this.end)},ForOfStatement}(A),L=function(e){function FunctionDeclaration(){e.apply(this,arguments)}return e&&(FunctionDeclaration.__proto__=e),FunctionDeclaration.prototype=Object.create(e&&e.prototype),FunctionDeclaration.prototype.constructor=FunctionDeclaration,FunctionDeclaration.prototype.initialise=function initialise(t){if(this.generator&&t.generator)throw new d("Generators are not supported",this);this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),e.prototype.initialise.call(this,t)},FunctionDeclaration.prototype.transpile=function transpile(t,r){e.prototype.transpile.call(this,t,r),r.trailingFunctionCommas&&this.params.length&&removeTrailingComma(t,this.params[this.params.length-1].end)},FunctionDeclaration}(p),j=function(e){function FunctionExpression(){e.apply(this,arguments)}return e&&(FunctionExpression.__proto__=e),FunctionExpression.prototype=Object.create(e&&e.prototype),FunctionExpression.prototype.constructor=FunctionExpression,FunctionExpression.prototype.initialise=function initialise(t){if(this.generator&&t.generator)throw new d("Generators are not supported",this);this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),e.prototype.initialise.call(this,t);var r,n=this.parent;if(t.conciseMethodProperty&&"Property"===n.type&&"init"===n.kind&&n.method&&"Identifier"===n.key.type?r=n.key.name:t.classes&&"MethodDefinition"===n.type&&"method"===n.kind&&"Identifier"===n.key.type?r=n.key.name:this.id&&"Identifier"===this.id.type&&(r=this.id.alias||this.id.name),r)for(var i=0,o=this.params;i<o.length;i+=1){var a=o[i];if("Identifier"===a.type&&r===a.name){var s=this.body.scope,l=s.declarations[r],u=s.createIdentifier(r);a.alias=u;for(var c=0,p=l.instances;c<p.length;c+=1){p[c].alias=u}break}}},FunctionExpression.prototype.transpile=function transpile(t,r){e.prototype.transpile.call(this,t,r),r.trailingFunctionCommas&&this.params.length&&removeTrailingComma(t,this.params[this.params.length-1].end)},FunctionExpression}(p);function isReference(e,t){return"MemberExpression"===e.type?!e.computed&&isReference(e.object,e):"Identifier"===e.type?!t||!/(Function|Class)Expression/.test(t.type)&&("VariableDeclarator"===t.type?e===t.init:"MemberExpression"===t.type||"MethodDefinition"===t.type?t.computed||e===t.object:"ArrayPattern"!==t.type&&("Property"===t.type?"ObjectPattern"!==t.parent.type&&(t.computed||e===t.value):"MethodDefinition"!==t.type&&("ExportSpecifier"!==t.type||e===t.local))):void 0}var D=function(e){function Identifier(){e.apply(this,arguments)}return e&&(Identifier.__proto__=e),Identifier.prototype=Object.create(e&&e.prototype),Identifier.prototype.constructor=Identifier,Identifier.prototype.findScope=function findScope(e){return this.parent.params&&~this.parent.params.indexOf(this)?this.parent.body.scope:"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(e)},Identifier.prototype.initialise=function initialise(e){if(isReference(this,this.parent)){if(e.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var t=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),n=this.findNearest(x);r&&r.depth>t.depth&&(this.alias=t.getArgumentsAlias()),n&&n.body.contains(this)&&n.depth>t.depth&&(this.alias=t.getArgumentsAlias())}this.findScope(!1).addReference(this)}},Identifier.prototype.transpile=function transpile(e){this.alias&&e.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},Identifier}(p),F=function(e){function IfStatement(){e.apply(this,arguments)}return e&&(IfStatement.__proto__=e),IfStatement.prototype=Object.create(e&&e.prototype),IfStatement.prototype.constructor=IfStatement,IfStatement.prototype.initialise=function initialise(t){e.prototype.initialise.call(this,t)},IfStatement.prototype.transpile=function transpile(t,r){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(t.appendLeft(this.consequent.start,"{ "),t.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(t.appendLeft(this.alternate.start,"{ "),t.prependRight(this.alternate.end," }")),e.prototype.transpile.call(this,t,r)},IfStatement}(p),N=function(e){function ImportDeclaration(){e.apply(this,arguments)}return e&&(ImportDeclaration.__proto__=e),ImportDeclaration.prototype=Object.create(e&&e.prototype),ImportDeclaration.prototype.constructor=ImportDeclaration,ImportDeclaration.prototype.initialise=function initialise(t){if(t.moduleImport)throw new d("import is not supported",this);e.prototype.initialise.call(this,t)},ImportDeclaration}(p),z=function(e){function ImportDefaultSpecifier(){e.apply(this,arguments)}return e&&(ImportDefaultSpecifier.__proto__=e),ImportDefaultSpecifier.prototype=Object.create(e&&e.prototype),ImportDefaultSpecifier.prototype.constructor=ImportDefaultSpecifier,ImportDefaultSpecifier.prototype.initialise=function initialise(t){this.findScope(!0).addDeclaration(this.local,"import"),e.prototype.initialise.call(this,t)},ImportDefaultSpecifier}(p),B=function(e){function ImportSpecifier(){e.apply(this,arguments)}return e&&(ImportSpecifier.__proto__=e),ImportSpecifier.prototype=Object.create(e&&e.prototype),ImportSpecifier.prototype.constructor=ImportSpecifier,ImportSpecifier.prototype.initialise=function initialise(t){this.findScope(!0).addDeclaration(this.local,"import"),e.prototype.initialise.call(this,t)},ImportSpecifier}(p),U=function(e){function JSXAttribute(){e.apply(this,arguments)}return e&&(JSXAttribute.__proto__=e),JSXAttribute.prototype=Object.create(e&&e.prototype),JSXAttribute.prototype.constructor=JSXAttribute,JSXAttribute.prototype.transpile=function transpile(t,r){var n,i=this.name,o=i.start,a=i.name,s=this.value?this.value.start:this.name.end;t.overwrite(o,s,(/-/.test(n=a)?"'"+n+"'":n)+": "+(this.value?"":"true")),e.prototype.transpile.call(this,t,r)},JSXAttribute}(p);var V=function(e){function JSXClosingElement(){e.apply(this,arguments)}return e&&(JSXClosingElement.__proto__=e),JSXClosingElement.prototype=Object.create(e&&e.prototype),JSXClosingElement.prototype.constructor=JSXClosingElement,JSXClosingElement.prototype.transpile=function transpile(e){var t,r=!0,n=this.parent.children[this.parent.children.length-1];(n&&("JSXText"===(t=n).type&&!/\S/.test(t.value)&&/\n/.test(t.value))||this.parent.openingElement.attributes.length)&&(r=!1),e.overwrite(this.start,this.end,r?" )":")")},JSXClosingElement}(p);var q=function(e){function JSXClosingFragment(){e.apply(this,arguments)}return e&&(JSXClosingFragment.__proto__=e),JSXClosingFragment.prototype=Object.create(e&&e.prototype),JSXClosingFragment.prototype.constructor=JSXClosingFragment,JSXClosingFragment.prototype.transpile=function transpile(e){var t,r=!0,n=this.parent.children[this.parent.children.length-1];n&&("JSXText"===(t=n).type&&!/\S/.test(t.value)&&/\n/.test(t.value))&&(r=!1),e.overwrite(this.start,this.end,r?" )":")")},JSXClosingFragment}(p);function normalise(e,t){return e=e.replace(/\u00a0/g,"&nbsp;"),t&&/\n/.test(e)&&(e=e.replace(/\s+$/,"")),e=e.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(e)}var G=function(e){function JSXElement(){e.apply(this,arguments)}return e&&(JSXElement.__proto__=e),JSXElement.prototype=Object.create(e&&e.prototype),JSXElement.prototype.constructor=JSXElement,JSXElement.prototype.transpile=function transpile(t,r){e.prototype.transpile.call(this,t,r);var n=this.children.filter(function(e){return"JSXText"!==e.type||(/\S/.test(e.raw)||!/\n/.test(e.raw))});if(n.length){var i,o=this.openingElement.end;for(i=0;i<n.length;i+=1){var a=n[i];if("JSXExpressionContainer"===a.type&&"JSXEmptyExpression"===a.expression.type);else{var s="\n"===t.original[o]&&"JSXText"!==a.type?"":" ";t.appendLeft(o,","+s)}if("JSXText"===a.type){var l=normalise(a.value,i===n.length-1);t.overwrite(a.start,a.end,l)}o=a.end}}},JSXElement}(p),W=function(e){function JSXExpressionContainer(){e.apply(this,arguments)}return e&&(JSXExpressionContainer.__proto__=e),JSXExpressionContainer.prototype=Object.create(e&&e.prototype),JSXExpressionContainer.prototype.constructor=JSXExpressionContainer,JSXExpressionContainer.prototype.transpile=function transpile(t,r){t.remove(this.start,this.expression.start),t.remove(this.expression.end,this.end),e.prototype.transpile.call(this,t,r)},JSXExpressionContainer}(p),H=function(e){function JSXFragment(){e.apply(this,arguments)}return e&&(JSXFragment.__proto__=e),JSXFragment.prototype=Object.create(e&&e.prototype),JSXFragment.prototype.constructor=JSXFragment,JSXFragment}(G),X=function(e){function JSXOpeningElement(){e.apply(this,arguments)}return e&&(JSXOpeningElement.__proto__=e),JSXOpeningElement.prototype=Object.create(e&&e.prototype),JSXOpeningElement.prototype.constructor=JSXOpeningElement,JSXOpeningElement.prototype.transpile=function transpile(t,r){e.prototype.transpile.call(this,t,r),t.overwrite(this.start,this.name.start,this.program.jsx+"( ");var n="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();n&&t.prependRight(this.name.start,"'");var i=this.attributes.length,o=this.name.end;if(i){var a,s,l,u=!1;for(a=0;a<i;a+=1)if("JSXSpreadAttribute"===this.attributes[a].type){u=!0;break}for(o=this.attributes[0].end,a=0;a<i;a+=1){var c=this.attributes[a];if(a>0&&(c.start===o?t.prependRight(o,", "):t.overwrite(o,c.start,", ")),u&&"JSXSpreadAttribute"!==c.type){var p=this.attributes[a-1],h=this.attributes[a+1];p&&"JSXSpreadAttribute"!==p.type||t.prependRight(c.start,"{ "),h&&"JSXSpreadAttribute"!==h.type||t.appendLeft(c.end," }")}o=c.end}if(u)if(1===i)l=n?"',":",";else{if(!this.program.options.objectAssign)throw new d("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);l=n?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",s=")"}else l=n?"', {":", {",s=" }";t.prependRight(this.name.end,l),s&&t.appendLeft(this.attributes[i-1].end,s)}else t.appendLeft(this.name.end,n?"', null":", null"),o=this.name.end;this.selfClosing?t.overwrite(o,this.end,this.attributes.length?")":" )"):t.remove(o,this.end)},JSXOpeningElement}(p),K=function(e){function JSXOpeningFragment(){e.apply(this,arguments)}return e&&(JSXOpeningFragment.__proto__=e),JSXOpeningFragment.prototype=Object.create(e&&e.prototype),JSXOpeningFragment.prototype.constructor=JSXOpeningFragment,JSXOpeningFragment.prototype.transpile=function transpile(e){e.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},JSXOpeningFragment}(p),Z=function(e){function JSXSpreadAttribute(){e.apply(this,arguments)}return e&&(JSXSpreadAttribute.__proto__=e),JSXSpreadAttribute.prototype=Object.create(e&&e.prototype),JSXSpreadAttribute.prototype.constructor=JSXSpreadAttribute,JSXSpreadAttribute.prototype.transpile=function transpile(t,r){t.remove(this.start,this.argument.start),t.remove(this.argument.end,this.end),e.prototype.transpile.call(this,t,r)},JSXSpreadAttribute}(p),Y=createCommonjsModule(function(e,t){
/*!
 * regjsgen 0.3.0
 * Copyright 2014-2016 Benjamin Tan <https://demoneaux.github.io/>
 * Available under MIT license <https://github.com/demoneaux/regjsgen/blob/master/LICENSE>
 */
(function(){var r={function:!0,object:!0},n=r[typeof window]&&window||this,i=r.object&&t,o=r.object&&e&&!e.nodeType&&e,a=i&&o&&"object"==typeof l&&l;!a||a.global!==a&&a.window!==a&&a.self!==a||(n=a);var s=Object.prototype.hasOwnProperty,u=String.fromCharCode,c=Math.floor;function fromCodePoint(){var e,t,r=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||c(a)!=a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(n+1==i||r.length>16384)&&(o+=u.apply(null,r),r.length=0)}return o}var p={};function assertType(e,t){if(-1==t.indexOf("|")){if(e==t)return;throw Error("Invalid node type: "+e+"; expected type: "+t)}if(!(t=s.call(p,t)?p[t]:p[t]=RegExp("^(?:"+t+")$")).test(e))throw Error("Invalid node type: "+e+"; expected types: "+t)}function generate(e){var t=e.type;if(s.call(h,t))return h[t](e);throw Error("Invalid node type: "+t)}function generateAtom(e){return assertType(e.type,"anchor|characterClass|characterClassEscape|dot|group|reference|value"),generate(e)}function generateClassAtom(e){return assertType(e.type,"anchor|characterClassEscape|characterClassRange|dot|value"),generate(e)}function generateTerm(e){return assertType(e.type,"anchor|characterClass|characterClassEscape|empty|group|quantifier|reference|unicodePropertyEscape|value"),generate(e)}var h={alternative:function generateAlternative(e){assertType(e.type,"alternative");for(var t=e.body,r=-1,n=t.length,i="";++r<n;)i+=generateTerm(t[r]);return i},anchor:function generateAnchor(e){switch(assertType(e.type,"anchor"),e.kind){case"start":return"^";case"end":return"$";case"boundary":return"\\b";case"not-boundary":return"\\B";default:throw Error("Invalid assertion")}},characterClass:function generateCharacterClass(e){assertType(e.type,"characterClass");var t=e.body,r=-1,n=t.length,i="";for(e.negative&&(i+="^");++r<n;)i+=generateClassAtom(t[r]);return"["+i+"]"},characterClassEscape:function generateCharacterClassEscape(e){return assertType(e.type,"characterClassEscape"),"\\"+e.value},characterClassRange:function generateCharacterClassRange(e){assertType(e.type,"characterClassRange");var t=e.min,r=e.max;if("characterClassRange"==t.type||"characterClassRange"==r.type)throw Error("Invalid character class range");return generateClassAtom(t)+"-"+generateClassAtom(r)},unicodePropertyEscape:function generateUnicodePropertyEscape(e){return assertType(e.type,"unicodePropertyEscape"),"\\"+(e.negative?"P":"p")+"{"+e.value+"}"},disjunction:function generateDisjunction(e){assertType(e.type,"disjunction");for(var t=e.body,r=-1,n=t.length,i="";++r<n;)0!=r&&(i+="|"),i+=generate(t[r]);return i},dot:function generateDot(e){return assertType(e.type,"dot"),"."},group:function generateGroup(e){assertType(e.type,"group");var t="";switch(e.behavior){case"normal":break;case"ignore":t+="?:";break;case"lookahead":t+="?=";break;case"negativeLookahead":t+="?!";break;default:throw Error("Invalid behaviour: "+e.behaviour)}for(var r=e.body,n=-1,i=r.length;++n<i;)t+=generate(r[n]);return"("+t+")"},quantifier:function generateQuantifier(e){assertType(e.type,"quantifier");var t="",r=e.min,n=e.max;return t=null==n?0==r?"*":1==r?"+":"{"+r+",}":r==n?"{"+r+"}":0==r&&1==n?"?":"{"+r+","+n+"}",e.greedy||(t+="?"),generateAtom(e.body[0])+t},reference:function generateReference(e){return assertType(e.type,"reference"),"\\"+e.matchIndex},value:function generateValue(e){assertType(e.type,"value");var t=e.kind,r=e.codePoint;switch(t){case"controlLetter":return"\\c"+fromCodePoint(r+64);case"hexadecimalEscape":return"\\x"+("00"+r.toString(16).toUpperCase()).slice(-2);case"identifier":return"\\"+fromCodePoint(r);case"null":return"\\"+r;case"octal":return"\\"+r.toString(8);case"singleEscape":switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r";default:throw Error("Invalid codepoint: "+r)}case"symbol":return fromCodePoint(r);case"unicodeEscape":return"\\u"+("0000"+r.toString(16).toUpperCase()).slice(-4);case"unicodeCodePointEscape":return"\\u{"+r.toString(16).toUpperCase()+"}";default:throw Error("Unsupported node kind: "+t)}}};i&&o?i.generate=generate:n.regjsgen={generate:generate}}).call(l)}),J=createCommonjsModule(function(e){!function(){var t={parse:function parse(e,t,r){function addRaw(t){return t.raw=e.substring(t.range[0],t.range[1]),t}function updateRawStart(e,t){return e.range[0]=t,addRaw(e)}function createAnchor(e,t){return addRaw({type:"anchor",kind:e,range:[s-t,s]})}function createValue(e,t,r,n){return addRaw({type:"value",kind:e,codePoint:t,range:[r,n]})}function createEscaped(e,t,r,n){return n=n||0,createValue(e,t,s-(r.length+n),s)}function createCharacter(e){var t,r=e[0],n=r.charCodeAt(0);return a&&1===r.length&&n>=55296&&n<=56319&&(t=lookahead().charCodeAt(0))>=56320&&t<=57343?createValue("symbol",1024*(n-55296)+t-56320+65536,++s-2,s):createValue("symbol",n,s-1,s)}function createDisjunction(e,t,r){return addRaw({type:"disjunction",body:e,range:[t,r]})}function createGroup(e,t,r,n){return addRaw({type:"group",behavior:e,body:t,range:[r,n]})}function createQuantifier(e,t,r,n){return null==n&&(r=s-1,n=s),addRaw({type:"quantifier",min:e,max:t,greedy:!0,body:null,range:[r,n]})}function createAlternative(e,t,r){return addRaw({type:"alternative",body:e,range:[t,r]})}function createCharacterClass(e,t,r,n){return addRaw({type:"characterClass",body:e,negative:t,range:[r,n]})}function createClassRange(e,t,r,n){return e.codePoint>t.codePoint&&bail("invalid range in character class",e.raw+"-"+t.raw,r,n),addRaw({type:"characterClassRange",min:e,max:t,range:[r,n]})}function flattenBody(e){return"alternative"===e.type?e.body:[e]}function incr(t){t=t||1;var r=e.substring(s,s+t);return s+=t||1,r}function skip(e){match(e)||bail("character",e)}function match(t){if(e.indexOf(t,s)===s)return incr(t.length)}function lookahead(){return e[s]}function current(t){return e.indexOf(t,s)===s}function next(t){return e[s+1]===t}function matchReg(t){var r=e.substring(s).match(t);return r&&(r.range=[],r.range[0]=s,incr(r[0].length),r.range[1]=s),r}function parseDisjunction(){var e=[],t=s;for(e.push(parseAlternative());match("|");)e.push(parseAlternative());return 1===e.length?e[0]:createDisjunction(e,t,s)}function parseAlternative(){for(var e,t=[],r=s;e=parseTerm();)t.push(e);return 1===t.length?t[0]:createAlternative(t,r,s)}function parseTerm(){if(s>=e.length||current("|")||current(")"))return null;var t=match("^")?createAnchor("start",1):match("$")?createAnchor("end",1):match("\\b")?createAnchor("boundary",2):match("\\B")?createAnchor("not-boundary",2):parseGroup("(?=","lookahead","(?!","negativeLookahead");if(t)return t;var r,n=(r=matchReg(/^[^^$\\.*+?(){[|]/))?createCharacter(r):match(".")?addRaw({type:"dot",range:[s-1,s]}):match("\\")?((r=parseAtomEscape())||bail("atomEscape"),r):(r=parseCharacterClass())?r:parseGroup("(?:","ignore","(","normal");n||bail("Expected atom");var i=parseQuantifier()||!1;return i?(i.body=flattenBody(n),updateRawStart(i,n.range[0]),i):n}function parseGroup(e,t,r,n){var a=null,l=s;if(match(e))a=t;else{if(!match(r))return!1;a=n}var u=parseDisjunction();u||bail("Expected disjunction"),skip(")");var c=createGroup(a,flattenBody(u),l,s);return"normal"==a&&o&&i++,c}function parseQuantifier(){var e,t,r,n,i=s;return match("*")?t=createQuantifier(0):match("+")?t=createQuantifier(1):match("?")?t=createQuantifier(0,1):(e=matchReg(/^\{([0-9]+)\}/))?t=createQuantifier(r=parseInt(e[1],10),r,e.range[0],e.range[1]):(e=matchReg(/^\{([0-9]+),\}/))?t=createQuantifier(r=parseInt(e[1],10),void 0,e.range[0],e.range[1]):(e=matchReg(/^\{([0-9]+),([0-9]+)\}/))&&((r=parseInt(e[1],10))>(n=parseInt(e[2],10))&&bail("numbers out of order in {} quantifier","",i,s),t=createQuantifier(r,n,e.range[0],e.range[1])),t&&match("?")&&(t.greedy=!1,t.range[1]+=1),t}function parseUnicodeSurrogatePairEscape(e){var t,r;if(a&&"unicodeEscape"==e.kind&&(t=e.codePoint)>=55296&&t<=56319&&current("\\")&&next("u")){var n=s;s++;var i=parseClassEscape();"unicodeEscape"==i.kind&&(r=i.codePoint)>=56320&&r<=57343?(e.range[1]=i.range[1],e.codePoint=1024*(t-55296)+r-56320+65536,e.type="value",e.kind="unicodeCodePointEscape",addRaw(e)):s=n}return e}function parseClassEscape(){return parseAtomEscape(!0)}function parseAtomEscape(e){var t,r=s;if(t=parseDecimalEscape())return t;if(e){if(match("b"))return createEscaped("singleEscape",8,"\\b");match("B")&&bail("\\B not possible inside of CharacterClass","",r)}return t=parseCharacterEscape()}function parseDecimalEscape(){var e,t,r;if(e=matchReg(/^(?!0)\d+/)){t=e[0];var o=parseInt(e[0],10);return o<=i?(r=e[0],addRaw({type:"reference",matchIndex:parseInt(r,10),range:[s-1-r.length,s]})):(n.push(o),incr(-e[0].length),(e=matchReg(/^[0-7]{1,3}/))?createEscaped("octal",parseInt(e[0],8),e[0],1):updateRawStart(e=createCharacter(matchReg(/^[89]/)),e.range[0]-1))}return(e=matchReg(/^[0-7]{1,3}/))?(t=e[0],/^0{1,3}$/.test(t)?createEscaped("null",0,"0",t.length+1):createEscaped("octal",parseInt(t,8),t,1)):!!(e=matchReg(/^[dDsSwW]/))&&addRaw({type:"characterClassEscape",value:e[0],range:[s-2,s]})}function parseCharacterEscape(){var e,t,n,i;if(e=matchReg(/^[fnrtv]/)){var o=0;switch(e[0]){case"t":o=9;break;case"n":o=10;break;case"v":o=11;break;case"f":o=12;break;case"r":o=13}return createEscaped("singleEscape",o,"\\"+e[0])}return(e=matchReg(/^c([a-zA-Z])/))?createEscaped("controlLetter",e[1].charCodeAt(0)%32,e[1],2):(e=matchReg(/^x([0-9a-fA-F]{2})/))?createEscaped("hexadecimalEscape",parseInt(e[1],16),e[1],2):(e=matchReg(/^u([0-9a-fA-F]{4})/))?parseUnicodeSurrogatePairEscape(createEscaped("unicodeEscape",parseInt(e[1],16),e[1],2)):a&&(e=matchReg(/^u\{([0-9a-fA-F]+)\}/))?createEscaped("unicodeCodePointEscape",parseInt(e[1],16),e[1],4):r.unicodePropertyEscape&&a&&(e=matchReg(/^([pP])\{([^\}]+)\}/))?addRaw({type:"unicodePropertyEscape",negative:"P"===e[1],value:e[2],range:[e.range[0]-1,e.range[1]],raw:e[0]}):(n=lookahead(),i=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),36===n||95===n||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||92===n||n>=128&&i.test(String.fromCharCode(n))?match("")?createEscaped("identifier",8204,""):match("")?createEscaped("identifier",8205,""):null:createEscaped("identifier",(t=incr()).charCodeAt(0),t,1))}function parseCharacterClass(){var e,t=s;return(e=matchReg(/^\[\^/))?(e=parseClassRanges(),skip("]"),createCharacterClass(e,!0,t,s)):match("[")?(e=parseClassRanges(),skip("]"),createCharacterClass(e,!1,t,s)):null}function parseClassRanges(){var e,t;return current("]")?[]:((t=parseClassAtom())||bail("classAtom"),(e=current("]")?[t]:parseHelperClassRanges(t))||bail("nonEmptyClassRanges"),e)}function parseHelperClassRanges(e){var t,r,n;if(current("-")&&!next("]")){skip("-"),(n=parseClassAtom())||bail("classAtom"),r=s;var i=parseClassRanges();return i||bail("classRanges"),t=e.range[0],"empty"===i.type?[createClassRange(e,n,t,r)]:[createClassRange(e,n,t,r)].concat(i)}return(n=parseNonemptyClassRangesNoDash())||bail("nonEmptyClassRangesNoDash"),[e].concat(n)}function parseNonemptyClassRangesNoDash(){var e=parseClassAtom();return e||bail("classAtom"),current("]")?e:parseHelperClassRanges(e)}function parseClassAtom(){return match("-")?createCharacter("-"):(e=matchReg(/^[^\\\]-]/))?createCharacter(e[0]):match("\\")?((e=parseClassEscape())||bail("classEscape"),parseUnicodeSurrogatePairEscape(e)):void 0;var e}function bail(t,r,n,i){n=null==n?s:n,i=null==i?n:i;var o=Math.max(0,n-10),a=Math.min(i+10,e.length),l="    "+e.substring(o,a),u="    "+new Array(n-o+1).join(" ")+"^";throw SyntaxError(t+" at position "+n+(r?": "+r:"")+"\n"+l+"\n"+u)}r||(r={});var n=[],i=0,o=!0,a=-1!==(t||"").indexOf("u"),s=0;""===(e=String(e))&&(e="(?:)");var l=parseDisjunction();l.range[1]!==e.length&&bail("Could not parse entire input - got stuck","",l.range[1]);for(var u=0;u<n.length;u++)if(n[u]<=i)return s=0,o=!1,parseDisjunction();return l}};e.exports?e.exports=t:window.regjsparser=t}()}),Q=createCommonjsModule(function(e,t){
/*! https://mths.be/regenerate v1.3.3 by @mathias | MIT license */
!function(r){var n=t,i=e&&e.exports==n&&e,o="object"==typeof l&&l;o.global!==o&&o.window!==o||(r=o);var a="A ranges `stop` value must be greater than or equal to the `start` value.",s="Invalid code point value. Code points range from U+000000 to U+10FFFF.",u=/\\x00([^0123456789]|$)/g,c={},p=c.hasOwnProperty,h=function(e,t){for(var r=-1,n=e.length;++r<n;)t(e[r],r)},f=c.toString,d=function(e){return"[object Array]"==f.call(e)},g=function(e){return"number"==typeof e||"[object Number]"==f.call(e)},m=function(e,t){var r=String(e);return r.length<t?("0000"+r).slice(-t):r},y=function(e){return Number(e).toString(16).toUpperCase()},v=[].slice,_=function(e){for(var t,r=-1,n=e.length,i=n-1,o=[],a=!0,s=0;++r<n;)if(t=e[r],a)o.push(t),s=t,a=!1;else if(t==s+1){if(r!=i){s=t;continue}a=!0,o.push(t+1)}else o.push(s+1,t),s=t;return a||o.push(t+1),o},b=function(e,t){for(var r,n,i=0,o=e.length;i<o;){if(r=e[i],n=e[i+1],t>=r&&t<n)return t==r?n==r+1?(e.splice(i,2),e):(e[i]=t+1,e):t==n-1?(e[i+1]=t,e):(e.splice(i,2,r,t,t+1,n),e);i+=2}return e},x=function(e,t,r){if(r<t)throw Error(a);for(var n,i,o=0;o<e.length;){if(n=e[o],i=e[o+1]-1,n>r)return e;if(t<=n&&r>=i)e.splice(o,2);else{if(t>=n&&r<i)return t==n?(e[o]=r+1,e[o+1]=i+1,e):(e.splice(o,2,n,t,r+1,i+1),e);if(t>=n&&t<=i)e[o+1]=t;else if(r>=n&&r<=i)return e[o]=r+1,e;o+=2}}return e},w=function(e,t){var r,n,i=0,o=null,a=e.length;if(t<0||t>1114111)throw RangeError(s);for(;i<a;){if(r=e[i],n=e[i+1],t>=r&&t<n)return e;if(t==r-1)return e[i]=t,e;if(r>t)return e.splice(null!=o?o+2:0,0,t,t+1),e;if(t==n)return t+1==e[i+2]?(e.splice(i,4,r,e[i+3]),e):(e[i+1]=t+1,e);o=i,i+=2}return e.push(t,t+1),e},S=function(e,t){for(var r,n,i=0,o=e.slice(),a=t.length;i<a;)o=(r=t[i])==(n=t[i+1]-1)?w(o,r):P(o,r,n),i+=2;return o},E=function(e,t){for(var r,n,i=0,o=e.slice(),a=t.length;i<a;)o=(r=t[i])==(n=t[i+1]-1)?b(o,r):x(o,r,n),i+=2;return o},P=function(e,t,r){if(r<t)throw Error(a);if(t<0||t>1114111||r<0||r>1114111)throw RangeError(s);for(var n,i,o=0,l=!1,u=e.length;o<u;){if(n=e[o],i=e[o+1],l){if(n==r+1)return e.splice(o-1,2),e;if(n>r)return e;n>=t&&n<=r&&(i>t&&i-1<=r?(e.splice(o,2),o-=2):(e.splice(o-1,2),o-=2))}else{if(n==r+1)return e[o]=t,e;if(n>r)return e.splice(o,0,t,r+1),e;if(t>=n&&t<i&&r+1<=i)return e;t>=n&&t<i||i==t?(e[o+1]=r+1,l=!0):t<=n&&r+1>=i&&(e[o]=t,e[o+1]=r+1,l=!0)}o+=2}return l||e.push(t,r+1),e},C=function(e,t){var r=0,n=e.length,i=e[r],o=e[n-1];if(n>=2&&(t<i||t>o))return!1;for(;r<n;){if(i=e[r],o=e[r+1],t>=i&&t<o)return!0;r+=2}return!1},T=function(e,t){for(var r,n=0,i=t.length,o=[];n<i;)r=t[n],C(e,r)&&o.push(r),++n;return _(o)},k=function(e){return!e.length},O=function(e){return 2==e.length&&e[0]+1==e[1]},A=function(e){for(var t,r,n=0,i=[],o=e.length;n<o;){for(t=e[n],r=e[n+1];t<r;)i.push(t),++t;n+=2}return i},I=Math.floor,R=function(e){return parseInt(I((e-65536)/1024)+55296,10)},M=function(e){return parseInt((e-65536)%1024+56320,10)},L=String.fromCharCode,j=function(e){return 9==e?"\\t":10==e?"\\n":12==e?"\\f":13==e?"\\r":92==e?"\\\\":36==e||e>=40&&e<=43||e>=45&&e<=47||63==e||e>=91&&e<=94||e>=123&&e<=125?"\\"+L(e):e>=32&&e<=126?L(e):e<=255?"\\x"+m(y(e),2):"\\u"+m(y(e),4)},D=function(e){return e<=65535?j(e):"\\u{"+e.toString(16).toUpperCase()+"}"},F=function(e){var t=e.length,r=e.charCodeAt(0);return r>=55296&&r<=56319&&t>1?1024*(r-55296)+e.charCodeAt(1)-56320+65536:r},N=function(e){var t,r,n="",i=0,o=e.length;if(O(e))return j(e[0]);for(;i<o;)n+=(t=e[i])==(r=e[i+1]-1)?j(t):t+1==r?j(t)+j(r):j(t)+"-"+j(r),i+=2;return"["+n+"]"},z=function(e){var t,r,n="",i=0,o=e.length;if(O(e))return D(e[0]);for(;i<o;)n+=(t=e[i])==(r=e[i+1]-1)?D(t):t+1==r?D(t)+D(r):D(t)+"-"+D(r),i+=2;return"["+n+"]"},B=function(e){for(var t,r,n=[],i=[],o=[],a=[],s=0,l=e.length;s<l;)t=e[s],r=e[s+1]-1,t<55296?(r<55296&&o.push(t,r+1),r>=55296&&r<=56319&&(o.push(t,55296),n.push(55296,r+1)),r>=56320&&r<=57343&&(o.push(t,55296),n.push(55296,56320),i.push(56320,r+1)),r>57343&&(o.push(t,55296),n.push(55296,56320),i.push(56320,57344),r<=65535?o.push(57344,r+1):(o.push(57344,65536),a.push(65536,r+1)))):t>=55296&&t<=56319?(r>=55296&&r<=56319&&n.push(t,r+1),r>=56320&&r<=57343&&(n.push(t,56320),i.push(56320,r+1)),r>57343&&(n.push(t,56320),i.push(56320,57344),r<=65535?o.push(57344,r+1):(o.push(57344,65536),a.push(65536,r+1)))):t>=56320&&t<=57343?(r>=56320&&r<=57343&&i.push(t,r+1),r>57343&&(i.push(t,57344),r<=65535?o.push(57344,r+1):(o.push(57344,65536),a.push(65536,r+1)))):t>57343&&t<=65535?r<=65535?o.push(t,r+1):(o.push(t,65536),a.push(65536,r+1)):a.push(t,r+1),s+=2;return{loneHighSurrogates:n,loneLowSurrogates:i,bmp:o,astral:a}},U=function(e){for(var t,r,n,i,o,a,s=[],l=[],u=!1,c=-1,p=e.length;++c<p;)if(t=e[c],r=e[c+1]){for(n=t[0],i=t[1],o=r[0],a=r[1],l=i;o&&n[0]==o[0]&&n[1]==o[1];)l=O(a)?w(l,a[0]):P(l,a[0],a[1]-1),n=(t=e[++c])[0],i=t[1],o=(r=e[c+1])&&r[0],a=r&&r[1],u=!0;s.push([n,u?l:i]),u=!1}else s.push(t);return V(s)},V=function(e){if(1==e.length)return e;for(var t=-1,r=-1;++t<e.length;){var n=e[t],i=n[1],o=i[0],a=i[1];for(r=t;++r<e.length;){var s=e[r],l=s[1],u=l[0],c=l[1];o==u&&a==c&&(O(s[0])?n[0]=w(n[0],s[0][0]):n[0]=P(n[0],s[0][0],s[0][1]-1),e.splice(r,1),--r)}}return e},q=function(e){if(!e.length)return[];for(var t,r,n,i,o,a,s=0,l=[],u=e.length;s<u;){t=e[s],r=e[s+1]-1,n=R(t),i=M(t),o=R(r);var c=57343==(a=M(r)),p=!1;n==o||56320==i&&c?(l.push([[n,o+1],[i,a+1]]),p=!0):l.push([[n,n+1],[i,57344]]),!p&&n+1<o&&(c?(l.push([[n+1,o+1],[56320,a+1]]),p=!0):l.push([[n+1,o],[56320,57344]])),p||l.push([[o,o+1],[56320,a+1]]),s+=2}return U(l)},G=function(e){var t=[];return h(e,function(e){var r=e[0],n=e[1];t.push(N(r)+N(n))}),t.join("|")},W=function(e,t,r){if(r)return z(e);var n=[],i=B(e),o=i.loneHighSurrogates,a=i.loneLowSurrogates,s=i.bmp,l=i.astral,u=!k(o),c=!k(a),p=q(l);return t&&(s=S(s,o),u=!1,s=S(s,a),c=!1),k(s)||n.push(N(s)),p.length&&n.push(G(p)),u&&n.push(N(o)+"(?![\\uDC00-\\uDFFF])"),c&&n.push("(?:[^\\uD800-\\uDBFF]|^)"+N(a)),n.join("|")},H=function(e){return arguments.length>1&&(e=v.call(arguments)),this instanceof H?(this.data=[],e?this.add(e):this):(new H).add(e)};H.version="1.3.3";var X=H.prototype;!function(e,t){var r;for(r in t)p.call(t,r)&&(e[r]=t[r])}(X,{add:function(e){var t=this;return null==e?t:e instanceof H?(t.data=S(t.data,e.data),t):(arguments.length>1&&(e=v.call(arguments)),d(e)?(h(e,function(e){t.add(e)}),t):(t.data=w(t.data,g(e)?e:F(e)),t))},remove:function(e){var t=this;return null==e?t:e instanceof H?(t.data=E(t.data,e.data),t):(arguments.length>1&&(e=v.call(arguments)),d(e)?(h(e,function(e){t.remove(e)}),t):(t.data=b(t.data,g(e)?e:F(e)),t))},addRange:function(e,t){return this.data=P(this.data,g(e)?e:F(e),g(t)?t:F(t)),this},removeRange:function(e,t){var r=g(e)?e:F(e),n=g(t)?t:F(t);return this.data=x(this.data,r,n),this},intersection:function(e){var t=e instanceof H?A(e.data):e;return this.data=T(this.data,t),this},contains:function(e){return C(this.data,g(e)?e:F(e))},clone:function(){var e=new H;return e.data=this.data.slice(0),e},toString:function(e){var t=W(this.data,!!e&&e.bmpOnly,!!e&&e.hasUnicodeFlag);return t?t.replace(u,"\\0$1"):"[]"},toRegExp:function(e){var t=this.toString(e&&-1!=e.indexOf("u")?{hasUnicodeFlag:!0}:null);return RegExp(t,e||"")},valueOf:function(){return A(this.data)}}),X.toArray=X.valueOf,n&&!n.nodeType?i?i.exports=H:n.regenerate=H:r.regenerate=H}(l)}),$=new Set(["General_Category","Script","Script_Extensions","Alphabetic","Any","ASCII","ASCII_Hex_Digit","Assigned","Bidi_Control","Bidi_Mirrored","Case_Ignorable","Cased","Changes_When_Casefolded","Changes_When_Casemapped","Changes_When_Lowercased","Changes_When_NFKC_Casefolded","Changes_When_Titlecased","Changes_When_Uppercased","Dash","Default_Ignorable_Code_Point","Deprecated","Diacritic","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Grapheme_Base","Grapheme_Extend","Hex_Digit","ID_Continue","ID_Start","Ideographic","IDS_Binary_Operator","IDS_Trinary_Operator","Join_Control","Logical_Order_Exception","Lowercase","Math","Noncharacter_Code_Point","Pattern_Syntax","Pattern_White_Space","Quotation_Mark","Radical","Regional_Indicator","Sentence_Terminal","Soft_Dotted","Terminal_Punctuation","Unified_Ideograph","Uppercase","Variation_Selector","White_Space","XID_Continue","XID_Start"]),ee=new Map([["scx","Script_Extensions"],["sc","Script"],["gc","General_Category"],["AHex","ASCII_Hex_Digit"],["Alpha","Alphabetic"],["Bidi_C","Bidi_Control"],["Bidi_M","Bidi_Mirrored"],["Cased","Cased"],["CI","Case_Ignorable"],["CWCF","Changes_When_Casefolded"],["CWCM","Changes_When_Casemapped"],["CWKCF","Changes_When_NFKC_Casefolded"],["CWL","Changes_When_Lowercased"],["CWT","Changes_When_Titlecased"],["CWU","Changes_When_Uppercased"],["Dash","Dash"],["Dep","Deprecated"],["DI","Default_Ignorable_Code_Point"],["Dia","Diacritic"],["Ext","Extender"],["Gr_Base","Grapheme_Base"],["Gr_Ext","Grapheme_Extend"],["Hex","Hex_Digit"],["IDC","ID_Continue"],["Ideo","Ideographic"],["IDS","ID_Start"],["IDSB","IDS_Binary_Operator"],["IDST","IDS_Trinary_Operator"],["Join_C","Join_Control"],["LOE","Logical_Order_Exception"],["Lower","Lowercase"],["Math","Math"],["NChar","Noncharacter_Code_Point"],["Pat_Syn","Pattern_Syntax"],["Pat_WS","Pattern_White_Space"],["QMark","Quotation_Mark"],["Radical","Radical"],["RI","Regional_Indicator"],["SD","Soft_Dotted"],["STerm","Sentence_Terminal"],["Term","Terminal_Punctuation"],["UIdeo","Unified_Ideograph"],["Upper","Uppercase"],["VS","Variation_Selector"],["WSpace","White_Space"],["space","White_Space"],["XIDC","XID_Continue"],["XIDS","XID_Start"]]),te=function(e){if($.has(e))return e;if(ee.has(e))return ee.get(e);throw new Error("Unknown property: "+e)},re=new Map([["General_Category",new Map([["C","Other"],["Cc","Control"],["cntrl","Control"],["Cf","Format"],["Cn","Unassigned"],["Co","Private_Use"],["Cs","Surrogate"],["L","Letter"],["LC","Cased_Letter"],["Ll","Lowercase_Letter"],["Lm","Modifier_Letter"],["Lo","Other_Letter"],["Lt","Titlecase_Letter"],["Lu","Uppercase_Letter"],["M","Mark"],["Combining_Mark","Mark"],["Mc","Spacing_Mark"],["Me","Enclosing_Mark"],["Mn","Nonspacing_Mark"],["N","Number"],["Nd","Decimal_Number"],["digit","Decimal_Number"],["Nl","Letter_Number"],["No","Other_Number"],["P","Punctuation"],["punct","Punctuation"],["Pc","Connector_Punctuation"],["Pd","Dash_Punctuation"],["Pe","Close_Punctuation"],["Pf","Final_Punctuation"],["Pi","Initial_Punctuation"],["Po","Other_Punctuation"],["Ps","Open_Punctuation"],["S","Symbol"],["Sc","Currency_Symbol"],["Sk","Modifier_Symbol"],["Sm","Math_Symbol"],["So","Other_Symbol"],["Z","Separator"],["Zl","Line_Separator"],["Zp","Paragraph_Separator"],["Zs","Space_Separator"],["Other","Other"],["Control","Control"],["Format","Format"],["Unassigned","Unassigned"],["Private_Use","Private_Use"],["Surrogate","Surrogate"],["Letter","Letter"],["Cased_Letter","Cased_Letter"],["Lowercase_Letter","Lowercase_Letter"],["Modifier_Letter","Modifier_Letter"],["Other_Letter","Other_Letter"],["Titlecase_Letter","Titlecase_Letter"],["Uppercase_Letter","Uppercase_Letter"],["Mark","Mark"],["Spacing_Mark","Spacing_Mark"],["Enclosing_Mark","Enclosing_Mark"],["Nonspacing_Mark","Nonspacing_Mark"],["Number","Number"],["Decimal_Number","Decimal_Number"],["Letter_Number","Letter_Number"],["Other_Number","Other_Number"],["Punctuation","Punctuation"],["Connector_Punctuation","Connector_Punctuation"],["Dash_Punctuation","Dash_Punctuation"],["Close_Punctuation","Close_Punctuation"],["Final_Punctuation","Final_Punctuation"],["Initial_Punctuation","Initial_Punctuation"],["Other_Punctuation","Other_Punctuation"],["Open_Punctuation","Open_Punctuation"],["Symbol","Symbol"],["Currency_Symbol","Currency_Symbol"],["Modifier_Symbol","Modifier_Symbol"],["Math_Symbol","Math_Symbol"],["Other_Symbol","Other_Symbol"],["Separator","Separator"],["Line_Separator","Line_Separator"],["Paragraph_Separator","Paragraph_Separator"],["Space_Separator","Space_Separator"]])],["Script",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])],["Script_Extensions",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])]]),ne=function(e,t){var r=re.get(e);if(!r)throw new Error("Unknown property `"+e+"`.");var n=r.get(t);if(n)return n;throw new Error("Unknown value `"+t+"` for property `"+e+"`.")},ie=new Map([[75,8490],[83,383],[107,8490],[115,383],[181,924],[197,8491],[223,7838],[229,8491],[383,83],[452,453],[453,452],[455,456],[456,455],[458,459],[459,458],[497,498],[498,497],[618,42926],[669,42930],[837,8126],[914,976],[917,1013],[920,1012],[921,8126],[922,1008],[924,181],[928,982],[929,1009],[931,962],[934,981],[937,8486],[952,1012],[962,931],[969,8486],[976,914],[977,1012],[981,934],[982,928],[1008,922],[1009,929],[1012,[920,977,952]],[1013,917],[1042,7296],[1044,7297],[1054,7298],[1057,7299],[1058,7301],[1066,7302],[1074,7296],[1076,7297],[1086,7298],[1089,7299],[1090,[7300,7301]],[1098,7302],[1122,7303],[1123,7303],[5024,43888],[5025,43889],[5026,43890],[5027,43891],[5028,43892],[5029,43893],[5030,43894],[5031,43895],[5032,43896],[5033,43897],[5034,43898],[5035,43899],[5036,43900],[5037,43901],[5038,43902],[5039,43903],[5040,43904],[5041,43905],[5042,43906],[5043,43907],[5044,43908],[5045,43909],[5046,43910],[5047,43911],[5048,43912],[5049,43913],[5050,43914],[5051,43915],[5052,43916],[5053,43917],[5054,43918],[5055,43919],[5056,43920],[5057,43921],[5058,43922],[5059,43923],[5060,43924],[5061,43925],[5062,43926],[5063,43927],[5064,43928],[5065,43929],[5066,43930],[5067,43931],[5068,43932],[5069,43933],[5070,43934],[5071,43935],[5072,43936],[5073,43937],[5074,43938],[5075,43939],[5076,43940],[5077,43941],[5078,43942],[5079,43943],[5080,43944],[5081,43945],[5082,43946],[5083,43947],[5084,43948],[5085,43949],[5086,43950],[5087,43951],[5088,43952],[5089,43953],[5090,43954],[5091,43955],[5092,43956],[5093,43957],[5094,43958],[5095,43959],[5096,43960],[5097,43961],[5098,43962],[5099,43963],[5100,43964],[5101,43965],[5102,43966],[5103,43967],[5104,5112],[5105,5113],[5106,5114],[5107,5115],[5108,5116],[5109,5117],[5112,5104],[5113,5105],[5114,5106],[5115,5107],[5116,5108],[5117,5109],[7296,[1042,1074]],[7297,[1044,1076]],[7298,[1054,1086]],[7299,[1057,1089]],[7300,[7301,1090]],[7301,[1058,7300,1090]],[7302,[1066,1098]],[7303,[1122,1123]],[7304,[42570,42571]],[7776,7835],[7835,7776],[7838,223],[8064,8072],[8065,8073],[8066,8074],[8067,8075],[8068,8076],[8069,8077],[8070,8078],[8071,8079],[8072,8064],[8073,8065],[8074,8066],[8075,8067],[8076,8068],[8077,8069],[8078,8070],[8079,8071],[8080,8088],[8081,8089],[8082,8090],[8083,8091],[8084,8092],[8085,8093],[8086,8094],[8087,8095],[8088,8080],[8089,8081],[8090,8082],[8091,8083],[8092,8084],[8093,8085],[8094,8086],[8095,8087],[8096,8104],[8097,8105],[8098,8106],[8099,8107],[8100,8108],[8101,8109],[8102,8110],[8103,8111],[8104,8096],[8105,8097],[8106,8098],[8107,8099],[8108,8100],[8109,8101],[8110,8102],[8111,8103],[8115,8124],[8124,8115],[8126,[837,921]],[8131,8140],[8140,8131],[8179,8188],[8188,8179],[8486,[937,969]],[8490,75],[8491,[197,229]],[42570,7304],[42571,7304],[42926,618],[42930,669],[42931,43859],[42932,42933],[42933,42932],[42934,42935],[42935,42934],[43859,42931],[43888,5024],[43889,5025],[43890,5026],[43891,5027],[43892,5028],[43893,5029],[43894,5030],[43895,5031],[43896,5032],[43897,5033],[43898,5034],[43899,5035],[43900,5036],[43901,5037],[43902,5038],[43903,5039],[43904,5040],[43905,5041],[43906,5042],[43907,5043],[43908,5044],[43909,5045],[43910,5046],[43911,5047],[43912,5048],[43913,5049],[43914,5050],[43915,5051],[43916,5052],[43917,5053],[43918,5054],[43919,5055],[43920,5056],[43921,5057],[43922,5058],[43923,5059],[43924,5060],[43925,5061],[43926,5062],[43927,5063],[43928,5064],[43929,5065],[43930,5066],[43931,5067],[43932,5068],[43933,5069],[43934,5070],[43935,5071],[43936,5072],[43937,5073],[43938,5074],[43939,5075],[43940,5076],[43941,5077],[43942,5078],[43943,5079],[43944,5080],[43945,5081],[43946,5082],[43947,5083],[43948,5084],[43949,5085],[43950,5086],[43951,5087],[43952,5088],[43953,5089],[43954,5090],[43955,5091],[43956,5092],[43957,5093],[43958,5094],[43959,5095],[43960,5096],[43961,5097],[43962,5098],[43963,5099],[43964,5100],[43965,5101],[43966,5102],[43967,5103],[66560,66600],[66561,66601],[66562,66602],[66563,66603],[66564,66604],[66565,66605],[66566,66606],[66567,66607],[66568,66608],[66569,66609],[66570,66610],[66571,66611],[66572,66612],[66573,66613],[66574,66614],[66575,66615],[66576,66616],[66577,66617],[66578,66618],[66579,66619],[66580,66620],[66581,66621],[66582,66622],[66583,66623],[66584,66624],[66585,66625],[66586,66626],[66587,66627],[66588,66628],[66589,66629],[66590,66630],[66591,66631],[66592,66632],[66593,66633],[66594,66634],[66595,66635],[66596,66636],[66597,66637],[66598,66638],[66599,66639],[66600,66560],[66601,66561],[66602,66562],[66603,66563],[66604,66564],[66605,66565],[66606,66566],[66607,66567],[66608,66568],[66609,66569],[66610,66570],[66611,66571],[66612,66572],[66613,66573],[66614,66574],[66615,66575],[66616,66576],[66617,66577],[66618,66578],[66619,66579],[66620,66580],[66621,66581],[66622,66582],[66623,66583],[66624,66584],[66625,66585],[66626,66586],[66627,66587],[66628,66588],[66629,66589],[66630,66590],[66631,66591],[66632,66592],[66633,66593],[66634,66594],[66635,66595],[66636,66596],[66637,66597],[66638,66598],[66639,66599],[66736,66776],[66737,66777],[66738,66778],[66739,66779],[66740,66780],[66741,66781],[66742,66782],[66743,66783],[66744,66784],[66745,66785],[66746,66786],[66747,66787],[66748,66788],[66749,66789],[66750,66790],[66751,66791],[66752,66792],[66753,66793],[66754,66794],[66755,66795],[66756,66796],[66757,66797],[66758,66798],[66759,66799],[66760,66800],[66761,66801],[66762,66802],[66763,66803],[66764,66804],[66765,66805],[66766,66806],[66767,66807],[66768,66808],[66769,66809],[66770,66810],[66771,66811],[66776,66736],[66777,66737],[66778,66738],[66779,66739],[66780,66740],[66781,66741],[66782,66742],[66783,66743],[66784,66744],[66785,66745],[66786,66746],[66787,66747],[66788,66748],[66789,66749],[66790,66750],[66791,66751],[66792,66752],[66793,66753],[66794,66754],[66795,66755],[66796,66756],[66797,66757],[66798,66758],[66799,66759],[66800,66760],[66801,66761],[66802,66762],[66803,66763],[66804,66764],[66805,66765],[66806,66766],[66807,66767],[66808,66768],[66809,66769],[66810,66770],[66811,66771],[68736,68800],[68737,68801],[68738,68802],[68739,68803],[68740,68804],[68741,68805],[68742,68806],[68743,68807],[68744,68808],[68745,68809],[68746,68810],[68747,68811],[68748,68812],[68749,68813],[68750,68814],[68751,68815],[68752,68816],[68753,68817],[68754,68818],[68755,68819],[68756,68820],[68757,68821],[68758,68822],[68759,68823],[68760,68824],[68761,68825],[68762,68826],[68763,68827],[68764,68828],[68765,68829],[68766,68830],[68767,68831],[68768,68832],[68769,68833],[68770,68834],[68771,68835],[68772,68836],[68773,68837],[68774,68838],[68775,68839],[68776,68840],[68777,68841],[68778,68842],[68779,68843],[68780,68844],[68781,68845],[68782,68846],[68783,68847],[68784,68848],[68785,68849],[68786,68850],[68800,68736],[68801,68737],[68802,68738],[68803,68739],[68804,68740],[68805,68741],[68806,68742],[68807,68743],[68808,68744],[68809,68745],[68810,68746],[68811,68747],[68812,68748],[68813,68749],[68814,68750],[68815,68751],[68816,68752],[68817,68753],[68818,68754],[68819,68755],[68820,68756],[68821,68757],[68822,68758],[68823,68759],[68824,68760],[68825,68761],[68826,68762],[68827,68763],[68828,68764],[68829,68765],[68830,68766],[68831,68767],[68832,68768],[68833,68769],[68834,68770],[68835,68771],[68836,68772],[68837,68773],[68838,68774],[68839,68775],[68840,68776],[68841,68777],[68842,68778],[68843,68779],[68844,68780],[68845,68781],[68846,68782],[68847,68783],[68848,68784],[68849,68785],[68850,68786],[71840,71872],[71841,71873],[71842,71874],[71843,71875],[71844,71876],[71845,71877],[71846,71878],[71847,71879],[71848,71880],[71849,71881],[71850,71882],[71851,71883],[71852,71884],[71853,71885],[71854,71886],[71855,71887],[71856,71888],[71857,71889],[71858,71890],[71859,71891],[71860,71892],[71861,71893],[71862,71894],[71863,71895],[71864,71896],[71865,71897],[71866,71898],[71867,71899],[71868,71900],[71869,71901],[71870,71902],[71871,71903],[71872,71840],[71873,71841],[71874,71842],[71875,71843],[71876,71844],[71877,71845],[71878,71846],[71879,71847],[71880,71848],[71881,71849],[71882,71850],[71883,71851],[71884,71852],[71885,71853],[71886,71854],[71887,71855],[71888,71856],[71889,71857],[71890,71858],[71891,71859],[71892,71860],[71893,71861],[71894,71862],[71895,71863],[71896,71864],[71897,71865],[71898,71866],[71899,71867],[71900,71868],[71901,71869],[71902,71870],[71903,71871],[125184,125218],[125185,125219],[125186,125220],[125187,125221],[125188,125222],[125189,125223],[125190,125224],[125191,125225],[125192,125226],[125193,125227],[125194,125228],[125195,125229],[125196,125230],[125197,125231],[125198,125232],[125199,125233],[125200,125234],[125201,125235],[125202,125236],[125203,125237],[125204,125238],[125205,125239],[125206,125240],[125207,125241],[125208,125242],[125209,125243],[125210,125244],[125211,125245],[125212,125246],[125213,125247],[125214,125248],[125215,125249],[125216,125250],[125217,125251],[125218,125184],[125219,125185],[125220,125186],[125221,125187],[125222,125188],[125223,125189],[125224,125190],[125225,125191],[125226,125192],[125227,125193],[125228,125194],[125229,125195],[125230,125196],[125231,125197],[125232,125198],[125233,125199],[125234,125200],[125235,125201],[125236,125202],[125237,125203],[125238,125204],[125239,125205],[125240,125206],[125241,125207],[125242,125208],[125243,125209],[125244,125210],[125245,125211],[125246,125212],[125247,125213],[125248,125214],[125249,125215],[125250,125216],[125251,125217]]),oe={REGULAR:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,65535)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,65535)],["w",Q(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,65535)]]),UNICODE:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,1114111)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",Q(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,1114111)]]),UNICODE_IGNORE_CASE:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,1114111)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",Q(95,383,8490).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,382).addRange(384,8489).addRange(8491,1114111)]])},ae=createCommonjsModule(function(e){var t=Y.generate,r=J.parse,n=Q().addRange(0,1114111),i=Q().addRange(0,65535),o=n.clone().remove(10,13,8232,8233),a=o.clone().intersection(i),s=function(e,t,r){return t?r?oe.UNICODE_IGNORE_CASE.get(e):oe.UNICODE.get(e):oe.REGULAR.get(e)},l=function(e,t){try{return commonjsRequire()}catch(r){throw new Error("Failed to recognize value `"+t+"` for property `"+e+"`.")}},u=function(e){try{var t=ne("General_Category",e);return l("General_Category",t)}catch(e){}var r=te(e);return l(r)},c=function(e,t){var r,i=e.split("="),o=i[0];if(1==i.length)r=u(o);else{var a=te(o),s=ne(a,i[1]);r=l(a,s)}return t?n.clone().remove(r):r.clone()};Q.prototype.iuAddRange=function(e,t){do{var r=f(e);r&&this.add(r)}while(++e<=t);return this};var p=function(e,t){var n=r(t,m.useUnicodeFlag?"u":"");switch(n.type){case"characterClass":case"group":case"value":break;default:n=h(n,t)}Object.assign(e,n)},h=function(e,t){return{type:"group",behavior:"ignore",body:[e],raw:"(?:"+t+")"}},f=function(e){return ie.get(e)||!1},d=function(e,t){for(var r=Q(),o=0,a=e.body;o<a.length;o+=1){var l=a[o];switch(l.type){case"value":if(r.add(l.codePoint),m.ignoreCase&&m.unicode&&!m.useUnicodeFlag){var u=f(l.codePoint);u&&r.add(u)}break;case"characterClassRange":var h=l.min.codePoint,d=l.max.codePoint;r.addRange(h,d),m.ignoreCase&&m.unicode&&!m.useUnicodeFlag&&r.iuAddRange(h,d);break;case"characterClassEscape":r.add(s(l.value,m.unicode,m.ignoreCase));break;case"unicodePropertyEscape":r.add(c(l.value,l.negative));break;default:throw new Error("Unknown term type: "+l.type)}}return e.negative&&(r=(m.unicode?n:i).clone().remove(r)),p(e,r.toString(t)),e},g=function(e,t){switch(e.type){case"dot":p(e,(h=m.unicode,y=m.dotAll,y?h?n:i:h?o:a).toString(t));break;case"characterClass":e=d(e,t);break;case"unicodePropertyEscape":p(e,c(e.value,e.negative).toString(t));break;case"characterClassEscape":p(e,s(e.value,m.unicode,m.ignoreCase).toString(t));break;case"alternative":case"disjunction":case"group":case"quantifier":e.body=e.body.map(function(e){return g(e,t)});break;case"value":var r=e.codePoint,l=Q(r);if(m.ignoreCase&&m.unicode&&!m.useUnicodeFlag){var u=f(r);u&&l.add(u)}p(e,l.toString(t));break;case"anchor":case"empty":case"group":case"reference":break;default:throw new Error("Unknown term type: "+e.type)}var h,y;return e},m={ignoreCase:!1,unicode:!1,dotAll:!1,useUnicodeFlag:!1};e.exports=function(e,n,i){var o={unicodePropertyEscape:i&&i.unicodePropertyEscape};m.ignoreCase=n&&n.includes("i"),m.unicode=n&&n.includes("u");var a=i&&i.dotAllFlag;m.dotAll=a&&n&&n.includes("s"),m.useUnicodeFlag=i&&i.useUnicodeFlag;var s={hasUnicodeFlag:m.useUnicodeFlag,bmpOnly:!m.unicode},l=r(e,n,o);return g(l,s),t(l)}}),se={ArrayExpression:y,ArrowFunctionExpression:v,AssignmentExpression:_,BinaryExpression:b,BreakStatement:w,CallExpression:S,ClassBody:E,ClassDeclaration:P,ClassExpression:C,ContinueStatement:T,DoWhileStatement:A,ExportNamedDeclaration:O,ExportDefaultDeclaration:k,ForStatement:I,ForInStatement:R,ForOfStatement:M,FunctionDeclaration:L,FunctionExpression:j,Identifier:D,IfStatement:F,ImportDeclaration:N,ImportDefaultSpecifier:z,ImportSpecifier:B,JSXAttribute:U,JSXClosingElement:V,JSXClosingFragment:q,JSXElement:G,JSXExpressionContainer:W,JSXFragment:H,JSXOpeningElement:X,JSXOpeningFragment:K,JSXSpreadAttribute:Z,Literal:function(e){function Literal(){e.apply(this,arguments)}return e&&(Literal.__proto__=e),Literal.prototype=Object.create(e&&e.prototype),Literal.prototype.constructor=Literal,Literal.prototype.initialise=function initialise(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},Literal.prototype.transpile=function transpile(e,t){if(t.numericLiteral&&this.raw.match(/^0[bo]/i)&&e.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0}),this.regex){var r=this.regex,n=r.pattern,i=r.flags;if(t.stickyRegExp&&/y/.test(i))throw new d("Regular expression sticky flag is not supported",this);t.unicodeRegExp&&/u/.test(i)&&e.overwrite(this.start,this.end,"/"+ae(n,i)+"/"+i.replace("u",""),{contentOnly:!0})}},Literal}(p),MemberExpression:function(e){function MemberExpression(){e.apply(this,arguments)}return e&&(MemberExpression.__proto__=e),MemberExpression.prototype=Object.create(e&&e.prototype),MemberExpression.prototype.constructor=MemberExpression,MemberExpression.prototype.transpile=function transpile(t,r){r.reservedProperties&&f[this.property.name]&&(t.overwrite(this.object.end,this.property.start,"['"),t.appendLeft(this.property.end,"']")),e.prototype.transpile.call(this,t,r)},MemberExpression}(p),NewExpression:function(e){function NewExpression(){e.apply(this,arguments)}return e&&(NewExpression.__proto__=e),NewExpression.prototype=Object.create(e&&e.prototype),NewExpression.prototype.constructor=NewExpression,NewExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.arguments.length)for(var r=this.findLexicalBoundary(),n=this.arguments.length;n--;){var i=this.arguments[n];if("SpreadElement"===i.type&&isArguments(i.argument)){this.argumentsArrayAlias=r.getArgumentsArrayAlias();break}}e.prototype.initialise.call(this,t)},NewExpression.prototype.transpile=function transpile(t,r){if(e.prototype.transpile.call(this,t,r),r.spreadRest&&this.arguments.length){var n=this.arguments[0];spread(t,this.arguments,n.start,this.argumentsArrayAlias,!0)&&(t.prependRight(this.start+"new".length," (Function.prototype.bind.apply("),t.overwrite(this.callee.end,n.start,", [ null ].concat( "),t.appendLeft(this.end," ))"))}this.arguments.length&&removeTrailingComma(t,this.arguments[this.arguments.length-1].end)},NewExpression}(p),ObjectExpression:function(e){function ObjectExpression(){e.apply(this,arguments)}return e&&(ObjectExpression.__proto__=e),ObjectExpression.prototype=Object.create(e&&e.prototype),ObjectExpression.prototype.constructor=ObjectExpression,ObjectExpression.prototype.transpile=function transpile(t,r){e.prototype.transpile.call(this,t,r);for(var n=this.start+1,i=0,o=0,a=0,s=null,l=null,u=0;u<this.properties.length;++u){var c=this.properties[u];"SpreadElement"===c.type?(o+=1,null===s&&(s=u)):c.computed?(a+=1,null===l&&(l=u)):"Property"===c.type&&(i+=1)}if(o){if(!this.program.options.objectAssign)throw new d("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);var p=this.properties.length;if(i&&!a)for(;p--;){var h=this.properties[p];if("Property"===h.type&&!h.computed){var f=this.properties[p-1],g=this.properties[p+1];f&&"Property"===f.type&&!f.computed||t.prependRight(h.start,"{"),g&&"Property"===g.type&&!g.computed||t.appendLeft(h.end,"}")}}n=this.properties[0].start,a?"SpreadElement"===this.properties[0].type?(t.overwrite(this.start,n,this.program.options.objectAssign+"({}, "),t.remove(this.end-1,this.end),t.appendRight(this.end,")")):(t.prependLeft(this.start,this.program.options.objectAssign+"("),t.appendRight(this.end,")")):(t.overwrite(this.start,n,this.program.options.objectAssign+"({}, "),t.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}if(a&&r.computedProperty){var m,y,v=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(m=!0,y=this.parent.id.alias||this.parent.id.name):"AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type?(m=!0,y=this.parent.left.alias||this.parent.left.name):"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type&&(m=!0,y=this.parent.left.alias||this.parent.left.name),o&&(m=!1),y=this.findScope(!1).resolveName(y);var _=n,b=this.end;m||(null===s||l<s?(y=this.findScope(!0).createDeclaration("obj"),t.prependRight(this.start,"( "+y+" = ")):y=null);for(var x,w=this.properties.length,S=!1,E=!0,P=0;P<w;P+=1){var C=this.properties[P],T=P>0?this.properties[P-1].end:_;if("Property"===C.type&&(C.computed||x&&!o)){if(0===P&&(T=this.start+1),x=C,y){var k=(m?";\n"+v+y:", "+y)+("Literal"===C.key.type||C.computed?"":".");T<C.start?t.overwrite(T,C.start,k):t.prependRight(C.start,k)}else{var O=(y=this.findScope(!0).createDeclaration("obj"))+(C.computed?"":".");t.appendRight(C.start,"( "+y+" = {}, "+O)}var A=C.key.end;if(C.computed){for(;"]"!==t.original[A];)A+=1;A+=1}"Literal"!==C.key.type||C.computed?C.shorthand||C.method&&!C.computed&&r.conciseMethodProperty?t.overwrite(C.key.start,C.key.end,t.slice(C.key.start,C.key.end).replace(/:/," =")):(C.value.start>A&&t.remove(A,C.value.start),t.prependLeft(A," = ")):t.overwrite(C.start,C.key.end+1,"["+t.slice(C.start,C.key.end)+"] = "),!C.method||!C.computed&&r.conciseMethodProperty||(C.value.generator&&t.remove(C.start,C.key.start),t.prependRight(C.value.start,"function"+(C.value.generator?"*":"")+" "))}else"SpreadElement"===C.type?y&&P>0&&(x||(x=this.properties[P-1]),t.appendLeft(x.end,", "+y+" )"),x=null,y=null):(!E&&o&&(t.prependRight(C.start,"{"),t.appendLeft(C.end,"}")),S=!0);if(E&&("SpreadElement"===C.type||C.computed)){var I=S?this.properties[this.properties.length-1].end:this.end-1;","==t.original[I]&&++I;var R=t.slice(I,b);t.prependLeft(T,R),t.remove(I,b),E=!1}var M=C.end;if(P<w-1&&!S)for(;","!==t.original[M];)M+=1;else P==w-1&&(M=this.end);t.remove(C.end,M)}a===w&&t.remove(this.properties[w-1].end,this.end-1),!m&&y&&t.appendLeft(x.end,", "+y+" )")}},ObjectExpression}(p),Property:function(e){function Property(){e.apply(this,arguments)}return e&&(Property.__proto__=e),Property.prototype=Object.create(e&&e.prototype),Property.prototype.constructor=Property,Property.prototype.transpile=function transpile(t,r){if(e.prototype.transpile.call(this,t,r),r.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)t.prependRight(this.start,this.key.name+": ");else if(this.method){var n="";!1!==this.program.options.namedFunctionExpressions&&(n=" "+(n="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?f[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.value.generator&&t.remove(this.start,this.key.start),t.appendLeft(this.key.end,": function"+(this.value.generator?"*":"")+n)}r.reservedProperties&&f[this.key.name]&&(t.prependRight(this.key.start,"'"),t.appendLeft(this.key.end,"'"))},Property}(p),ReturnStatement:function(e){function ReturnStatement(){e.apply(this,arguments)}return e&&(ReturnStatement.__proto__=e),ReturnStatement.prototype=Object.create(e&&e.prototype),ReturnStatement.prototype.constructor=ReturnStatement,ReturnStatement.prototype.initialise=function initialise(e){this.loop=this.findNearest(x),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(e)},ReturnStatement.prototype.transpile=function transpile(e,t){var r=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(r&&e.prependRight(this.argument.start,"{ v: "),this.argument.transpile(e,t),r&&e.appendLeft(this.argument.end," }")):r&&e.appendLeft(this.start+6," {}")},ReturnStatement}(p),SpreadElement:function(e){function SpreadElement(){e.apply(this,arguments)}return e&&(SpreadElement.__proto__=e),SpreadElement.prototype=Object.create(e&&e.prototype),SpreadElement.prototype.constructor=SpreadElement,SpreadElement.prototype.transpile=function transpile(t,r){"ObjectExpression"==this.parent.type&&(t.remove(this.start,this.argument.start),t.remove(this.argument.end,this.end)),e.prototype.transpile.call(this,t,r)},SpreadElement}(p),Super:function(e){function Super(){e.apply(this,arguments)}return e&&(Super.__proto__=e),Super.prototype=Object.create(e&&e.prototype),Super.prototype.constructor=Super,Super.prototype.initialise=function initialise(e){if(e.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new d("use of super outside class method",this);var t=this.findNearest("ClassBody").parent;if(this.superClassName=t.superClass&&(t.superClass.name||"superclass"),!this.superClassName)throw new d("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new d("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new d("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(e.arrow){var r=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),i=this.findNearest(x);n&&n.depth>r.depth&&(this.thisAlias=r.getThisAlias()),i&&i.body.contains(this)&&i.depth>r.depth&&(this.thisAlias=r.getThisAlias())}},Super.prototype.transpile=function transpile(e,t){if(t.classes){var r=this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype";e.overwrite(this.start,this.end,r,{storeName:!0,contentOnly:!0});var n=this.isCalled?this.parent:this.parent.parent;if(n&&"CallExpression"===n.type){this.noCall||e.appendLeft(n.callee.end,".call");var i=this.thisAlias||"this";n.arguments.length?e.appendLeft(n.arguments[0].start,i+", "):e.appendLeft(n.end-1,""+i)}}},Super}(p),TaggedTemplateExpression:function(e){function TaggedTemplateExpression(){e.apply(this,arguments)}return e&&(TaggedTemplateExpression.__proto__=e),TaggedTemplateExpression.prototype=Object.create(e&&e.prototype),TaggedTemplateExpression.prototype.constructor=TaggedTemplateExpression,TaggedTemplateExpression.prototype.initialise=function initialise(t){if(t.templateString&&!t.dangerousTaggedTemplateString)throw new d("Tagged template strings are not supported. Use `transforms: { templateString: false }` to skip transformation and disable this error, or `transforms: { dangerousTaggedTemplateString: true }` if you know what you're doing",this);e.prototype.initialise.call(this,t)},TaggedTemplateExpression.prototype.transpile=function transpile(t,r){if(r.templateString&&r.dangerousTaggedTemplateString){var n=this.quasi.expressions.concat(this.quasi.quasis).sort(function(e,t){return e.start-t.start}),i=this.program.body.scope,o=this.quasi.quasis.map(function(e){return JSON.stringify(e.value.cooked)}).join(", "),a=this.program.templateLiteralQuasis[o];a||(a=i.createIdentifier("templateObject"),t.prependRight(this.program.prependAt,"var "+a+" = Object.freeze(["+o+"]);\n"),this.program.templateLiteralQuasis[o]=a),t.overwrite(this.tag.end,n[0].start,"("+a);var s=n[0].start;n.forEach(function(e){"TemplateElement"===e.type?t.remove(s,e.end):t.overwrite(s,e.start,", "),s=e.end}),t.overwrite(s,this.end,")")}e.prototype.transpile.call(this,t,r)},TaggedTemplateExpression}(p),TemplateElement:function(e){function TemplateElement(){e.apply(this,arguments)}return e&&(TemplateElement.__proto__=e),TemplateElement.prototype=Object.create(e&&e.prototype),TemplateElement.prototype.constructor=TemplateElement,TemplateElement.prototype.initialise=function initialise(){this.program.indentExclusionElements.push(this)},TemplateElement}(p),TemplateLiteral:function(e){function TemplateLiteral(){e.apply(this,arguments)}return e&&(TemplateLiteral.__proto__=e),TemplateLiteral.prototype=Object.create(e&&e.prototype),TemplateLiteral.prototype.constructor=TemplateLiteral,TemplateLiteral.prototype.transpile=function transpile(t,r){if(e.prototype.transpile.call(this,t,r),r.templateString&&"TaggedTemplateExpression"!==this.parent.type){var n=this.expressions.concat(this.quasis).sort(function(e,t){return e.start-t.start||e.end-t.end}).filter(function(e,t){return"TemplateElement"!==e.type||(!!e.value.raw||!t)});if(n.length>=3){var i=n[0],o=n[2];"TemplateElement"===i.type&&""===i.value.raw&&"TemplateElement"===o.type&&n.shift()}var a=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);a&&t.appendRight(this.start,"(");var s=this.start;n.forEach(function(e,r){var n=0===r?a?"(":"":" + ";if("TemplateElement"===e.type)t.overwrite(s,e.end,n+JSON.stringify(e.value.cooked));else{var i="Identifier"!==e.type;i&&(n+="("),t.remove(s,e.start),n&&t.prependRight(e.start,n),i&&t.appendLeft(e.end,")")}s=e.end}),a&&t.appendLeft(s,")"),t.overwrite(s,this.end,"",{contentOnly:!0})}},TemplateLiteral}(p),ThisExpression:function(e){function ThisExpression(){e.apply(this,arguments)}return e&&(ThisExpression.__proto__=e),ThisExpression.prototype=Object.create(e&&e.prototype),ThisExpression.prototype.constructor=ThisExpression,ThisExpression.prototype.initialise=function initialise(e){if(e.arrow){var t=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),n=this.findNearest(x);(r&&r.depth>t.depth||n&&n.body.contains(this)&&n.depth>t.depth||n&&n.right&&n.right.contains(this))&&(this.alias=t.getThisAlias())}},ThisExpression.prototype.transpile=function transpile(e){this.alias&&e.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},ThisExpression}(p),UpdateExpression:function(e){function UpdateExpression(){e.apply(this,arguments)}return e&&(UpdateExpression.__proto__=e),UpdateExpression.prototype=Object.create(e&&e.prototype),UpdateExpression.prototype.constructor=UpdateExpression,UpdateExpression.prototype.initialise=function initialise(t){if("Identifier"===this.argument.type){var r=this.findScope(!1).findDeclaration(this.argument.name),n=r&&r.node.ancestor(3);n&&"ForStatement"===n.type&&n.body.contains(this)&&(n.reassigned[this.argument.name]=!0)}e.prototype.initialise.call(this,t)},UpdateExpression.prototype.transpile=function transpile(t,r){"Identifier"===this.argument.type&&checkConst(this.argument,this.findScope(!1)),e.prototype.transpile.call(this,t,r)},UpdateExpression}(p),VariableDeclaration:function(e){function VariableDeclaration(){e.apply(this,arguments)}return e&&(VariableDeclaration.__proto__=e),VariableDeclaration.prototype=Object.create(e&&e.prototype),VariableDeclaration.prototype.constructor=VariableDeclaration,VariableDeclaration.prototype.initialise=function initialise(e){this.scope=this.findScope("var"===this.kind),this.declarations.forEach(function(t){return t.initialise(e)})},VariableDeclaration.prototype.transpile=function transpile(e,t){var r=this,n=this.getIndentation(),i=this.kind;if(t.letConst&&"var"!==i&&(i="var",e.overwrite(this.start,this.start+this.kind.length,i,{contentOnly:!0,storeName:!0})),t.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var o,a=this.start;this.declarations.forEach(function(i,s){if(i.transpile(e,t),"Identifier"===i.id.type)s>0&&"Identifier"!==r.declarations[s-1].id.type&&e.overwrite(a,i.id.start,"var ");else{var l=x.test(r.parent.type);0===s?e.remove(a,i.id.start):e.overwrite(a,i.id.start,";\n"+n);var u="Identifier"===i.init.type&&!i.init.rewritten,c=u?i.init.alias||i.init.name:i.findScope(!0).createIdentifier("ref");a=i.start;var p=[];u?e.remove(i.id.end,i.end):p.push(function(t,r,n){e.prependRight(i.id.end,"var "+c),e.appendLeft(i.init.end,""+n),e.move(i.id.end,i.end,t)});var h=i.findScope(!1);destructure(e,function(e){return h.createIdentifier(e)},function(e){var t=e.name;return h.resolveName(t)},i.id,c,l,p);var f=l?"var ":"",d=l?", ":";\n"+n;p.forEach(function(e,t){s===r.declarations.length-1&&t===p.length-1&&(d=l?"":";"),e(i.start,0===t?f:"",d)})}a=i.end,o="Identifier"!==i.id.type}),o&&this.end>a&&e.overwrite(a,this.end,"",{contentOnly:!0})}else this.declarations.forEach(function(r){r.transpile(e,t)})},VariableDeclaration}(p),VariableDeclarator:function(e){function VariableDeclarator(){e.apply(this,arguments)}return e&&(VariableDeclarator.__proto__=e),VariableDeclarator.prototype=Object.create(e&&e.prototype),VariableDeclarator.prototype.constructor=VariableDeclarator,VariableDeclarator.prototype.initialise=function initialise(t){var r=this.parent.kind;"let"===r&&"ForStatement"===this.parent.parent.type&&(r="for.let"),this.parent.scope.addDeclaration(this.id,r),e.prototype.initialise.call(this,t)},VariableDeclarator.prototype.transpile=function transpile(e,t){if(!this.init&&t.letConst&&"var"!==this.parent.kind){var r=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!r||/Function/.test(r.type)||this.isLeftDeclaratorOfLoop()||e.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(e,t),this.init&&this.init.transpile(e,t)},VariableDeclarator.prototype.isLeftDeclaratorOfLoop=function isLeftDeclaratorOfLoop(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},VariableDeclarator}(p),WhileStatement:A},le={Program:["body"],Literal:[]},ue={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function wrap(e,t){if(e)if("length"in e)for(var r=e.length;r--;)wrap(e[r],t);else if(!e.__wrapped){e.__wrapped=!0,le[e.type]||(le[e.type]=Object.keys(e).filter(function(t){return"object"==typeof e[t]}));var n=ue[e.type];if(n&&"BlockStatement"!==e[n].type){var i=e[n];e[n]={start:i.start,end:i.end,type:"BlockStatement",body:[i],synthetic:!0}}e.parent=t,e.program=t.program||t,e.depth=t.depth+1,e.keys=le[e.type],e.indentation=void 0;for(var o=0,a=le[e.type];o<a.length;o+=1){var s=a[o];wrap(e[s],e)}e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end);var l=("BlockStatement"===e.type?m:se[e.type])||p;e.__proto__=l.prototype}}function Program(e,t,r,i){this.type="Root",this.jsx=i.jsx||"React.createElement",this.options=i,this.source=e,this.magicString=new n.a(e),this.ast=t,this.depth=0,wrap(this.body=t,this),this.body.__proto__=m.prototype,this.templateLiteralQuasis=Object.create(null);for(var o=0;o<this.body.body.length;++o)if(!this.body.body[o].directive){this.prependAt=this.body.body[o].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(r),this.indentExclusions=Object.create(null);for(var a=0,s=this.indentExclusionElements;a<s.length;a+=1)for(var l=s[a],u=l.start;u<l.end;u+=1)this.indentExclusions[u]=!0;this.body.transpile(this.magicString,r)}Program.prototype={export:function export$1(e){return void 0===e&&(e={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:e.file,source:e.source,includeContent:!1!==e.includeContent})}},findNearest:function findNearest(){return null},findScope:function findScope(){return null},getObjectWithoutPropertiesHelper:function getObjectWithoutPropertiesHelper(e){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),e.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var ce={chrome:{48:305359,49:326143,50:391679,51:391679,52:522751,53:522751,54:522751,55:522751,56:522751,57:522751,58:1047039,59:1047039,60:1047039,61:1047039,62:1047039,63:1047039},firefox:{43:321757,44:322013,45:322015,46:387551,47:387583,48:387583,49:387583,50:387583,51:387583,52:1047039,53:1047039,54:1047039,55:1047039,56:1047039,57:1047039,58:1047039},safari:{8:262148,9:301166,10:915967,10.1:1047039,11:1047039},ie:{8:0,9:262144,10:262144,11:262400},edge:{12:305485,13:387535,14:1042943,15:1042943,16:1042943},node:{"0.10":262144,.12:262208,4:297167,5:297167,6:391679,8:1047039,8.3:1047039,8.7:1047039}},pe=["arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","unicodeRegExp","exponentiation","reservedProperties","trailingFunctionCommas"],he=[function(e){var t=e.tokTypes,r=e.tokContexts;r.j_oTag=new e.TokContext("<tag",!1),r.j_cTag=new e.TokContext("</tag",!1),r.j_expr=new e.TokContext("<tag>...</tag>",!0,!0),t.jsxName=new e.TokenType("jsxName"),t.jsxText=new e.TokenType("jsxText",{beforeExpr:!0}),t.jsxTagStart=new e.TokenType("jsxTagStart"),t.jsxTagEnd=new e.TokenType("jsxTagEnd"),t.jsxTagStart.updateContext=function(){this.context.push(r.j_expr),this.context.push(r.j_oTag),this.exprAllowed=!1},t.jsxTagEnd.updateContext=function(e){var n=this.context.pop();n===r.j_oTag&&e===t.slash||n===r.j_cTag?(this.context.pop(),this.exprAllowed=this.curContext()===r.j_expr):this.exprAllowed=!0};var n=e.Parser.prototype;function getQualifiedJSXName(e){return e?"JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?getQualifiedJSXName(e.object)+"."+getQualifiedJSXName(e.property):void 0:e}return n.jsx_readToken=function(){for(var r="",n=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(t.jsxTagStart)):this.getTokenFromCode(i):(r+=this.input.slice(n,this.pos),this.finishToken(t.jsxText,r));case 38:r+=this.input.slice(n,this.pos),r+=this.jsx_readEntity(),n=this.pos;break;default:e.isNewLine(i)?(r+=this.input.slice(n,this.pos),r+=this.jsx_readNewLine(!0),n=this.pos):++this.pos}}},n.jsx_readNewLine=function(e){var t,r=this.input.charCodeAt(this.pos);return++this.pos,13===r&&10===this.input.charCodeAt(this.pos)?(++this.pos,t=e?"\n":"\r\n"):t=String.fromCharCode(r),this.options.locations&&(++this.curLine,this.lineStart=this.pos),t},n.jsx_readString=function(r){for(var n="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var o=this.input.charCodeAt(this.pos);if(o===r)break;38===o?(n+=this.input.slice(i,this.pos),n+=this.jsx_readEntity(),i=this.pos):e.isNewLine(o)?(n+=this.input.slice(i,this.pos),n+=this.jsx_readNewLine(!1),i=this.pos):++this.pos}return n+=this.input.slice(i,this.pos++),this.finishToken(t.string,n)},n.jsx_readEntity=function(){var e,t="",r=0,n=this.input[this.pos];"&"!==n&&this.raise(this.pos,"Entity must start with an ampersand");for(var i=++this.pos;this.pos<this.input.length&&r++<10;){if(";"===(n=this.input[this.pos++])){"#"===t[0]?"x"===t[1]?(t=t.substr(2),a.test(t)&&(e=String.fromCharCode(parseInt(t,16)))):(t=t.substr(1),s.test(t)&&(e=String.fromCharCode(parseInt(t,10)))):e=o[t];break}t+=n}return e||(this.pos=i,"&")},n.jsx_readWord=function(){var r,n=this.pos;do{r=this.input.charCodeAt(++this.pos)}while(e.isIdentifierChar(r)||45===r);return this.finishToken(t.jsxName,this.input.slice(n,this.pos))},n.jsx_parseIdentifier=function(){var e=this.startNode();return this.type===t.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")},n.jsx_parseNamespacedName=function(){var e=this.start,r=this.startLoc,n=this.jsx_parseIdentifier();if(!this.options.plugins.jsx.allowNamespaces||!this.eat(t.colon))return n;var i=this.startNodeAt(e,r);return i.namespace=n,i.name=this.jsx_parseIdentifier(),this.finishNode(i,"JSXNamespacedName")},n.jsx_parseElementName=function(){if(this.type===t.jsxTagEnd)return"";var e=this.start,r=this.startLoc,n=this.jsx_parseNamespacedName();for(this.type!==t.dot||"JSXNamespacedName"!==n.type||this.options.plugins.jsx.allowNamespacedObjects||this.unexpected();this.eat(t.dot);){var i=this.startNodeAt(e,r);i.object=n,i.property=this.jsx_parseIdentifier(),n=this.finishNode(i,"JSXMemberExpression")}return n},n.jsx_parseAttributeValue=function(){switch(this.type){case t.braceL:var e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case t.jsxTagStart:case t.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}},n.jsx_parseEmptyExpression=function(){var e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)},n.jsx_parseExpressionContainer=function(){var e=this.startNode();return this.next(),e.expression=this.type===t.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(t.braceR),this.finishNode(e,"JSXExpressionContainer")},n.jsx_parseAttribute=function(){var e=this.startNode();return this.eat(t.braceL)?(this.expect(t.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(t.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(t.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))},n.jsx_parseOpeningElementAt=function(e,r){var n=this.startNodeAt(e,r);n.attributes=[];var i=this.jsx_parseElementName();for(i&&(n.name=i);this.type!==t.slash&&this.type!==t.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(t.slash),this.expect(t.jsxTagEnd),this.finishNode(n,i?"JSXOpeningElement":"JSXOpeningFragment")},n.jsx_parseClosingElementAt=function(e,r){var n=this.startNodeAt(e,r),i=this.jsx_parseElementName();return i&&(n.name=i),this.expect(t.jsxTagEnd),this.finishNode(n,i?"JSXClosingElement":"JSXClosingFragment")},n.jsx_parseElementAt=function(e,r){var n=this.startNodeAt(e,r),i=[],o=this.jsx_parseOpeningElementAt(e,r),a=null;if(!o.selfClosing){e:for(;;)switch(this.type){case t.jsxTagStart:if(e=this.start,r=this.startLoc,this.next(),this.eat(t.slash)){a=this.jsx_parseClosingElementAt(e,r);break e}i.push(this.jsx_parseElementAt(e,r));break;case t.jsxText:i.push(this.parseExprAtom());break;case t.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}getQualifiedJSXName(a.name)!==getQualifiedJSXName(o.name)&&this.raise(a.start,"Expected corresponding JSX closing tag for <"+getQualifiedJSXName(o.name)+">")}return n.openingElement=o,n.closingElement=a,n.children=i,this.type===t.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,o.name?"JSXElement":"JSXFragment")},n.jsx_parseText=function(e){var t=this.parseLiteral(e);return t.type="JSXText",t},n.jsx_parseElement=function(){var e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)},e.plugins.jsx=function(n,i){i&&("object"!=typeof i&&(i={}),n.options.plugins.jsx={allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},n.extend("parseExprAtom",function(e){return function(r){return this.type===t.jsxText?this.jsx_parseText(this.value):this.type===t.jsxTagStart?this.jsx_parseElement():e.call(this,r)}}),n.extend("readToken",function(n){return function(i){var o=this.curContext();if(o===r.j_expr)return this.jsx_readToken();if(o===r.j_oTag||o===r.j_cTag){if(e.isIdentifierStart(i))return this.jsx_readWord();if(62==i)return++this.pos,this.finishToken(t.jsxTagEnd);if((34===i||39===i)&&o==r.j_oTag)return this.jsx_readString(i)}return 60===i&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(t.jsxTagStart)):n.call(this,i)}}),n.extend("updateContext",function(e){return function(n){if(this.type==t.braceL){var i=this.curContext();i==r.j_oTag?this.context.push(r.b_expr):i==r.j_expr?this.context.push(r.b_tmpl):e.call(this,n),this.exprAllowed=!0}else{if(this.type!==t.slash||n!==t.jsxTagStart)return e.call(this,n);this.context.length-=2,this.context.push(r.j_cTag),this.exprAllowed=!1}}}))},e},c].reduce(function(e,t){return t(e)},i).parse,fe=["dangerousTaggedTemplateString","dangerousForOf"];function target(e){var t=Object.keys(e).length?1048575:262144;Object.keys(e).forEach(function(r){var n=ce[r];if(!n)throw new Error("Unknown environment '"+r+"'. Please raise an issue at https://github.com/Rich-Harris/buble/issues");var i=e[r];if(!(i in n))throw new Error("Support data exists for the following versions of "+r+": "+Object.keys(n).join(", ")+". Please raise an issue at https://github.com/Rich-Harris/buble/issues");var o=n[i];t&=o});var r=Object.create(null);return pe.forEach(function(e,n){r[e]=!(t&1<<n)}),fe.forEach(function(e){r[e]=!1}),r}function transform(e,t){var r;void 0===t&&(t={});var n=null;try{r=he(e,{ecmaVersion:9,preserveParens:!0,sourceType:"module",onComment:function(e,t){if(!n){var r=/@jsx\s+([^\s]+)/.exec(t);r&&(n=r[1])}},plugins:{jsx:!0,dynamicImport:!0}}),t.jsx=n||t.jsx}catch(t){throw t.snippet=getSnippet(e,t.loc),t.toString=function(){return t.name+": "+t.message+"\n"+t.snippet},t}var i=target(t.target||{});return Object.keys(t.transforms||{}).forEach(function(e){if("modules"===e)return"moduleImport"in t.transforms||(i.moduleImport=t.transforms.modules),void("moduleExport"in t.transforms||(i.moduleExport=t.transforms.modules));if(!(e in i))throw new Error("Unknown transform '"+e+"'");i[e]=t.transforms[e]}),new Program(e,r,i,t).export(t)}}).call(this,r(28))},function(e,t,r){"use strict";(function(e,n){var i=r(202);function Chunk(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})}Chunk.prototype={appendLeft:function appendLeft(e){this.outro+=e},appendRight:function appendRight(e){this.intro=this.intro+e},clone:function clone(){var e=new Chunk(this.start,this.end,this.original);return e.intro=this.intro,e.outro=this.outro,e.content=this.content,e.storeName=this.storeName,e.edited=this.edited,e},contains:function contains(e){return this.start<e&&e<this.end},eachNext:function eachNext(e){for(var t=this;t;)e(t),t=t.next},eachPrevious:function eachPrevious(e){for(var t=this;t;)e(t),t=t.previous},edit:function edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this},prependLeft:function prependLeft(e){this.outro=e+this.outro},prependRight:function prependRight(e){this.intro=e+this.intro},split:function split(e){var t=e-this.start,r=this.original.slice(0,t),n=this.original.slice(t);this.original=r;var i=new Chunk(e,this.end,n);return i.outro=this.outro,this.outro="",this.end=e,this.edited?(i.edit("",!1),this.content=""):this.content=r,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i},toString:function toString(){return this.intro+this.content+this.outro},trimEnd:function trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&this.split(this.start+t.length).edit("",!1),!0):(this.edit("",!1),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)},trimStart:function trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.end-t.length),this.edit("",!1)),!0):(this.edit("",!1),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0)}};var o="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof e?function(t){return new e(t).toString("base64")}:function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};function SourceMap(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=e.mappings}function guessIndent(e){var t=e.split("\n"),r=t.filter(function(e){return/^\t+/.test(e)}),n=t.filter(function(e){return/^ {2,}/.test(e)});if(0===r.length&&0===n.length)return null;if(r.length>=n.length)return"\t";var i=n.reduce(function(e,t){var r=/^ +/.exec(t)[0].length;return Math.min(r,e)},1/0);return new Array(i+1).join(" ")}function getRelativePath(e,t){var r=e.split(/[\/\\]/),n=t.split(/[\/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();if(r.length)for(var i=r.length;i--;)r[i]="..";return r.concat(n).join("/")}SourceMap.prototype={toString:function toString(){return JSON.stringify(this)},toUrl:function toUrl(){return"data:application/json;charset=utf-8;base64,"+o(this.toString())}};var a=Object.prototype.toString;function isObject(e){return"[object Object]"===a.call(e)}function getLocator(e){var t=e.split("\n"),r=0,n=t.map(function(e,t){var n=r+e.length+1,i={start:r,end:n,line:t};return r=n,i}),i=0;function rangeContains(e,t){return e.start<=t&&t<e.end}function getLocation(e,t){return{line:e.line,column:t-e.start}}return function locate(e){for(var t=n[i],r=e>=t.end?1:-1;t;){if(rangeContains(t,e))return getLocation(t,e);t=n[i+=r]}}}function Mappings(e){var t=this,r={generatedCodeColumn:0,sourceIndex:0,sourceCodeLine:0,sourceCodeColumn:0,sourceCodeName:0},n=0,o=0;this.raw=[];var a=this.raw[n]=[],s=null;this.addEdit=function(e,r,n,i,l){r.length?a.push([o,e,i.line,i.column,l]):s&&a.push(s),t.advance(r),s=null},this.addUneditedChunk=function(r,i,l,u,c){for(var p=i.start,h=!0;p<i.end;)(e||h||c[p])&&a.push([o,r,u.line,u.column,-1]),"\n"===l[p]?(u.line+=1,u.column=0,n+=1,t.raw[n]=a=[],o=0):(u.column+=1,o+=1),p+=1,h=!1;s=[o,r,u.line,u.column,-1]},this.advance=function(e){if(e){var r=e.split("\n"),i=r.pop();r.length?(n+=r.length,t.raw[n]=a=[],o=i.length):o+=i.length}},this.encode=function(){return t.raw.map(function(e){var t=0;return e.map(function(e){var n=[e[0]-t,e[1]-r.sourceIndex,e[2]-r.sourceCodeLine,e[3]-r.sourceCodeColumn];return t=e[0],r.sourceIndex=e[1],r.sourceCodeLine=e[2],r.sourceCodeColumn=e[3],~e[4]&&(n.push(e[4]-r.sourceCodeName),r.sourceCodeName=e[4]),Object(i.a)(n)}).join(",")}).join(";")}}var s=function Stats(){Object.defineProperties(this,{startTimes:{value:{}}})};s.prototype.time=function time(e){this.startTimes[e]=n.hrtime()},s.prototype.timeEnd=function timeEnd(e){var t=n.hrtime(this.startTimes[e]);this[e]||(this[e]=0),this[e]+=1e3*t[0]+1e-6*t[1]};var l={insertLeft:!1,insertRight:!1,storeName:!1};function MagicString$1(e,t){void 0===t&&(t={});var r=new Chunk(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:guessIndent(e)}}),this.byStart[0]=r,this.byEnd[e.length]=r}MagicString$1.prototype={addSourcemapLocation:function addSourcemapLocation(e){this.sourcemapLocations[e]=!0},append:function append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this},appendLeft:function appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this},appendRight:function appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this},clone:function clone(){for(var e=new MagicString$1(this.original,{filename:this.filename}),t=this.firstChunk,r=e.firstChunk=e.lastSearchedChunk=t.clone();t;){e.byStart[r.start]=r,e.byEnd[r.end]=r;var n=t.next,i=n&&n.clone();i&&(r.next=i,i.previous=r,r=i),t=n}return e.lastChunk=r,this.indentExclusionRanges&&(e.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach(function(t){e.sourcemapLocations[t]=!0}),e},generateMap:function generateMap(e){var t=this;e=e||{};var r=Object.keys(this.storedNames),n=new Mappings(e.hires),i=getLocator(this.original);return this.intro&&n.advance(this.intro),this.firstChunk.eachNext(function(e){var o=i(e.start);e.intro.length&&n.advance(e.intro),e.edited?n.addEdit(0,e.content,e.original,o,e.storeName?r.indexOf(e.original):-1):n.addUneditedChunk(0,e,t.original,o,t.sourcemapLocations),e.outro.length&&n.advance(e.outro)}),new SourceMap({file:e.file?e.file.split(/[\/\\]/).pop():null,sources:[e.source?getRelativePath(e.file||"",e.source):null],sourcesContent:e.includeContent?[this.original]:[null],names:r,mappings:n.encode()})},getIndentString:function getIndentString(){return null===this.indentStr?"\t":this.indentStr},indent:function indent(e,t){var r=/^[^\r\n]/gm;if(isObject(e)&&(t=e,e=void 0),""===(e=void 0!==e?e:this.indentStr||"\t"))return this;var n={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach(function(e){for(var t=e[0];t<e[1];t+=1)n[t]=!0});var i=!1!==t.indentStart,o=function(t){return i?""+e+t:(i=!0,t)};this.intro=this.intro.replace(r,o);for(var a=0,s=this.firstChunk;s;){var l=s.end;if(s.edited)n[a]||(s.content=s.content.replace(r,o),s.content.length&&(i="\n"===s.content[s.content.length-1]));else for(a=s.start;a<l;){if(!n[a]){var u=this.original[a];"\n"===u?i=!0:"\r"!==u&&i&&(i=!1,a===s.start?s.prependRight(e):(this._splitChunk(s,a),(s=s.next).prependRight(e)))}a+=1}a=s.end,s=s.next}return this.outro=this.outro.replace(r,o),this},insert:function insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},insertLeft:function insertLeft(e,t){return l.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),l.insertLeft=!0),this.appendLeft(e,t)},insertRight:function insertRight(e,t){return l.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),l.insertRight=!0),this.prependRight(e,t)},move:function move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);var n=this.byStart[e],i=this.byEnd[t],o=n.previous,a=i.next,s=this.byStart[r];if(!s&&i===this.lastChunk)return this;var l=s?s.previous:this.lastChunk;return o&&(o.next=a),a&&(a.previous=o),l&&(l.next=n),s&&(s.previous=i),n.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,i.next=s||null,l||(this.firstChunk=n),s||(this.lastChunk=i),this},overwrite:function overwrite(e,t,r,n){if("string"!=typeof r)throw new TypeError("replacement content must be a string");for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range  use appendLeft or prependRight instead");this._split(e),this._split(t),!0===n&&(l.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),l.storeName=!0),n={storeName:!0});var i=void 0!==n&&n.storeName,o=void 0!==n&&n.contentOnly;if(i){var a=this.original.slice(e,t);this.storedNames[a]=!0}var s=this.byStart[e],u=this.byEnd[t];if(s){if(t>s.end&&s.next!==this.byStart[s.end])throw new Error("Cannot overwrite across a split point");if(s.edit(r,i,o),s!==u){for(var c=s.next;c!==u;)c.edit("",!1),c=c.next;c.edit("",!1)}}else{var p=new Chunk(e,t,"").edit(r,i);u.next=p,p.previous=u}return this},prepend:function prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this},prependLeft:function prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this},prependRight:function prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this},remove:function remove(e,t){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);for(var r=this.byStart[e];r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this},slice:function slice(e,t){for(void 0===e&&(e=0),void 0===t&&(t=this.original.length);e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;for(var r="",n=this.firstChunk;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error("Cannot use replaced character "+e+" as slice start anchor.");for(var i=n;n;){!n.intro||i===n&&n.start!==e||(r+=n.intro);var o=n.start<t&&n.end>=t;if(o&&n.edited&&n.end!==t)throw new Error("Cannot use replaced character "+t+" as slice end anchor.");var a=i===n?e-n.start:0,s=o?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(a,s),!n.outro||o&&n.end!==t||(r+=n.outro),o)break;n=n.next}return r},snip:function snip(e,t){var r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r},_split:function _split(e){if(!this.byStart[e]&&!this.byEnd[e])for(var t=this.lastSearchedChunk,r=e>t.end;;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}},_splitChunk:function _splitChunk(e,t){if(e.edited&&e.content.length){var r=getLocator(this.original)(t);throw new Error("Cannot split a chunk that has already been edited ("+r.line+":"+r.column+'  "'+e.original+'")')}var n=e.split(t);return this.byEnd[t]=e,this.byStart[t]=n,this.byEnd[n.end]=n,e===this.lastChunk&&(this.lastChunk=n),this.lastSearchedChunk=e,!0},toString:function toString(){for(var e=this.intro,t=this.firstChunk;t;)e+=t.toString(),t=t.next;return e+this.outro},trimLines:function trimLines(){return this.trim("[\\r\\n]")},trim:function trim(e){return this.trimStart(e).trimEnd(e)},trimEnd:function trimEnd(e){var t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return this;var r=this.lastChunk;do{var n=r.end,i=r.trimEnd(t);if(r.end!==n&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),i)return this;r=r.previous}while(r);return this},trimStart:function trimStart(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return this;var r=this.firstChunk;do{var n=r.end,i=r.trimStart(t);if(r.end!==n&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),i)return this;r=r.next}while(r);return this}};var u=Object.prototype.hasOwnProperty;function Bundle(e){void 0===e&&(e={}),this.intro=e.intro||"",this.separator=void 0!==e.separator?e.separator:"\n",this.sources=[],this.uniqueSources=[],this.uniqueSourceIndexByFilename={}}Bundle.prototype={addSource:function addSource(e){if(e instanceof MagicString$1)return this.addSource({content:e,filename:e.filename,separator:this.separator});if(!isObject(e)||!e.content)throw new Error("bundle.addSource() takes an object with a `content` property, which should be an instance of MagicString, and an optional `filename`");if(["filename","indentExclusionRanges","separator"].forEach(function(t){u.call(e,t)||(e[t]=e.content[t])}),void 0===e.separator&&(e.separator=this.separator),e.filename)if(u.call(this.uniqueSourceIndexByFilename,e.filename)){var t=this.uniqueSources[this.uniqueSourceIndexByFilename[e.filename]];if(e.content.original!==t.content)throw new Error("Illegal source: same filename ("+e.filename+"), different contents")}else this.uniqueSourceIndexByFilename[e.filename]=this.uniqueSources.length,this.uniqueSources.push({filename:e.filename,content:e.content.original});return this.sources.push(e),this},append:function append(e,t){return this.addSource({content:new MagicString$1(e),separator:t&&t.separator||""}),this},clone:function clone(){var e=new Bundle({intro:this.intro,separator:this.separator});return this.sources.forEach(function(t){e.addSource({filename:t.filename,content:t.content.clone(),separator:t.separator})}),e},generateMap:function generateMap(e){var t=this;void 0===e&&(e={});var r=[];this.sources.forEach(function(e){Object.keys(e.content.storedNames).forEach(function(e){~r.indexOf(e)||r.push(e)})});var n=new Mappings(e.hires);return this.intro&&n.advance(this.intro),this.sources.forEach(function(e,i){i>0&&n.advance(t.separator);var o=e.filename?t.uniqueSourceIndexByFilename[e.filename]:-1,a=e.content,s=getLocator(a.original);a.intro&&n.advance(a.intro),a.firstChunk.eachNext(function(t){var i=s(t.start);t.intro.length&&n.advance(t.intro),e.filename?t.edited?n.addEdit(o,t.content,t.original,i,t.storeName?r.indexOf(t.original):-1):n.addUneditedChunk(o,t,a.original,i,a.sourcemapLocations):n.advance(t.content),t.outro.length&&n.advance(t.outro)}),a.outro&&n.advance(a.outro)}),new SourceMap({file:e.file?e.file.split(/[\/\\]/).pop():null,sources:this.uniqueSources.map(function(t){return e.file?getRelativePath(e.file,t.filename):t.filename}),sourcesContent:this.uniqueSources.map(function(t){return e.includeContent?t.content:null}),names:r,mappings:n.encode()})},getIndentString:function getIndentString(){var e={};return this.sources.forEach(function(t){var r=t.content.indentStr;null!==r&&(e[r]||(e[r]=0),e[r]+=1)}),Object.keys(e).sort(function(t,r){return e[t]-e[r]})[0]||"\t"},indent:function indent(e){var t=this;if(arguments.length||(e=this.getIndentString()),""===e)return this;var r=!this.intro||"\n"===this.intro.slice(-1);return this.sources.forEach(function(n,i){var o=void 0!==n.separator?n.separator:t.separator,a=r||i>0&&/\r?\n$/.test(o);n.content.indent(e,{exclude:n.indentExclusionRanges,indentStart:a}),r="\n"===n.content.toString().slice(0,-1)}),this.intro&&(this.intro=e+this.intro.replace(/^[^\n]/gm,function(t,r){return r>0?e+t:t})),this},prepend:function prepend(e){return this.intro=e+this.intro,this},toString:function toString(){var e=this,t=this.sources.map(function(t,r){var n=void 0!==t.separator?t.separator:e.separator;return(r>0?n:"")+t.content.toString()}).join("");return this.intro+t},trimLines:function trimLines(){return this.trim("[\\r\\n]")},trim:function trim(e){return this.trimStart(e).trimEnd(e)},trimStart:function trimStart(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),!this.intro){var r,n=0;do{if(!(r=this.sources[n]))break;r.content.trimStart(e),n+=1}while(""===r.content.toString())}return this},trimEnd:function trimEnd(e){var t,r=new RegExp((e||"\\s")+"+$"),n=this.sources.length-1;do{if(!(t=this.sources[n])){this.intro=this.intro.replace(r,"");break}t.content.trimEnd(e),n-=1}while(""===t.content.toString());return this}},t.a=MagicString$1}).call(this,r(170).Buffer,r(58))},function(e,t,r){"use strict";r.d(t,"a",function(){return encode});var n={},i={};function encode(e){var t;if("number"==typeof e)t=encodeInteger(e);else{t="";for(var r=0;r<e.length;r+=1)t+=encodeInteger(e[r])}return t}function encodeInteger(e){var t="";e<0?e=-e<<1|1:e<<=1;do{var r=31&e;(e>>=5)>0&&(r|=32),t+=i[r]}while(e>0);return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){n[e]=t,i[t]=e})},function(e,t){e.exports=function clipboardCopy(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre";var r=document.createElement("iframe");r.sandbox="allow-same-origin",document.body.appendChild(r);var n=r.contentWindow;n.document.body.appendChild(t);var i=n.getSelection();i||(n=window,i=n.getSelection(),document.body.appendChild(t));var o=n.document.createRange();i.removeAllRanges(),o.selectNode(t),i.addRange(o);var a=!1;try{a=n.document.execCommand("copy")}catch(e){}return i.removeAllRanges(),n.document.body.removeChild(t),document.body.removeChild(r),a?Promise.resolve():Promise.reject()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=_interopRequireDefault(r(1)),o=_interopRequireDefault(r(142));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdContentCopy(e){return i.default.createElement(o.default,n({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m31.6 35v-23.4h-18.2v23.4h18.2z m0-26.6c1.8 0 3.4 1.4 3.4 3.2v23.4c0 1.8-1.6 3.4-3.4 3.4h-18.2c-1.8 0-3.4-1.6-3.4-3.4v-23.4c0-1.8 1.6-3.2 3.4-3.2h18.2z m-5-6.8v3.4h-20v23.4h-3.2v-23.4c0-1.8 1.4-3.4 3.2-3.4h20z"})))},e.exports=t.default},function(e,t,r){var n=r(48).isFinite;e.exports=function isFinite(e){return"number"==typeof e&&n(e)}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return globalizeComponent});var n=r(207);function globalizeComponent(t){t.name&&(e[t.name]=Object(n.a)(t.module,t.name))}}).call(this,r(28))},function(e,t,r){"use strict";function getComponent(e,t){if(e.default)return e.default;if(!e.__esModule&&"function"==typeof e)return e;var r=Object.keys(e);return 1===r.length?e[r[0]]:e[t]||e}r.d(t,"a",function(){return getComponent})},function(e,t,r){"use strict";(function(e){var n=r(25);t.a=function isElectron(){return"undefined"!=typeof window&&"object"===Object(n.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(n.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(n.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}()}).call(this,r(58))},function(e,t,r){"use strict";r.d(t,"a",function(){return getParameterPolyfill});var n,i=r(0),o=function getWebGL2ValueOrZero(e){return isWebGL2(e)?void 0:0},a=(n={},Object(i.a)(n,3074,function(e){return isWebGL2(e)?void 0:36064}),Object(i.a)(n,35723,function(e){return isWebGL2(e)?void 0:4352}),Object(i.a)(n,35977,o),Object(i.a)(n,32937,o),Object(i.a)(n,36795,function(e,t){var r=isWebGL2(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0}),Object(i.a)(n,37445,function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)}),Object(i.a)(n,37446,function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)}),Object(i.a)(n,34047,function(e,t){var r=e.luma.extensions.EXT_texture_filter_anisotropic;return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(i.a)(n,32883,o),Object(i.a)(n,35071,o),Object(i.a)(n,37447,o),Object(i.a)(n,36063,function(e,t){if(!isWebGL2(e)){var r=e.getExtension("WEBGL_draw_buffers");return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(i.a)(n,35379,o),Object(i.a)(n,35374,o),Object(i.a)(n,35377,o),Object(i.a)(n,34852,function(e){if(!isWebGL2(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(i.a)(n,36203,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),Object(i.a)(n,33001,function(e){return e.getExtension("OES_element_index")?16777216:65535}),Object(i.a)(n,33e3,function(e){return 16777216}),Object(i.a)(n,37157,o),Object(i.a)(n,35373,o),Object(i.a)(n,35657,o),Object(i.a)(n,36183,o),Object(i.a)(n,37137,o),Object(i.a)(n,34045,o),Object(i.a)(n,35978,o),Object(i.a)(n,35979,o),Object(i.a)(n,35968,o),Object(i.a)(n,35376,o),Object(i.a)(n,35375,o),Object(i.a)(n,35659,o),Object(i.a)(n,37154,o),Object(i.a)(n,35371,o),Object(i.a)(n,35658,o),Object(i.a)(n,35076,o),Object(i.a)(n,35077,o),Object(i.a)(n,35380,o),n);function isWebGL2(e){return e&&!0}function getParameterPolyfill(e,t,r){var n=a[r],i="function"==typeof n?n(e,t,r):n;return void 0!==i?i:t(r)}},function(e,t,r){"use strict";function earcut(e,t,r){r=r||2;var n,i,o,a,s,l,u,c=t&&t.length,p=c?t[0]*r:e.length,h=linkedList(e,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=eliminateHoles(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<p;d+=r)(s=e[d])<n&&(n=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return earcutLinked(h,f,r,n,i,u),f}function linkedList(e,t,r,n,i){var o,a;if(i===signedArea(e,t,r,n)>0)for(o=t;o<r;o+=n)a=insertNode(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function earcutLinked(e,t,r,n,i,o,a){if(e){!a&&o&&indexCurve(e,n,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?isEarHashed(e,n,i,o):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?earcutLinked(e=cureLocalIntersections(e,t,r),t,r,n,i,o,2):2===a&&splitEarcut(e,t,r,n,i,o):earcutLinked(filterPoints(e),t,r,n,i,o,1);break}}}function isEar(e){var t=e.prev,r=e,n=e.next;if(area(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,t,r,n){var i=e.prev,o=e,a=e.next;if(area(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=zOrder(s,l,t,r,n),h=zOrder(u,c,t,r,n),f=e.prevZ,d=e.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==e.prev&&f!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function cureLocalIntersections(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!equals(i,o)&&intersects(i,n,n.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),removeNode(n),removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n}function splitEarcut(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var l=splitPolygon(a,s);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,t,r,n,i,o),void earcutLinked(l,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=linkedList(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(getLeftmost(a));for(s.sort(compareX),i=0;i<s.length;i++)eliminateHole(s[i],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var r=splitPolygon(t,e);filterPoints(r,r.next)}}function findHoleBridge(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var l,u=r,c=r.x,p=r.y,h=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&pointInTriangle(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<h||l===h&&n.x>r.x)&&locallyInside(n,e)&&(r=n,h=l),n=n.next;return r}function indexCurve(e,t,r,n){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function pointInTriangle(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,n){return!!(equals(e,t)&&equals(r,n)||equals(e,n)&&equals(r,t))||area(e,t,r)>0!=area(e,t,n)>0&&area(r,n,e)>0!=area(r,n,t)>0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),n=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function insertNode(e,t,r,n){var i=new Node(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=earcut,e.exports.default=earcut,earcut.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(signedArea(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(signedArea(e,u,c,r))}var p=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,d=n[s+2]*r;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},function(e,t,r){"use strict";e.exports=TinySDF;var n=1e20;function TinySDF(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function edt(e,t,r,n,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<r;l++)n[l]=e[l*t+s];for(edt1d(n,i,o,a,r),l=0;l<r;l++)e[l*t+s]=i[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)n[s]=e[l*t+s];for(edt1d(n,i,o,a,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function edt1d(e,t,r,i,o){r[0]=0,i[0]=-n,i[1]=+n;for(var a=1,s=0;a<o;a++){for(var l=(e[a]+a*a-(e[r[s]]+r[s]*r[s]))/(2*a-2*r[s]);l<=i[s];)s--,l=(e[a]+a*a-(e[r[s]]+r[s]*r[s]))/(2*a-2*r[s]);r[++s]=a,i[s]=l,i[s+1]=+n}for(a=0,s=0;a<o;a++){for(;i[s+1]<a;)s++;t[a]=(a-r[s])*(a-r[s])+e[r[s]]}}TinySDF.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=t.data[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?n:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?n:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(edt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),edt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=this.gridOuter[i]-this.gridInner[i];r[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return r}},function(e,t,r){r(213),e.exports=r(412)},function(e,t,r){"use strict";r.r(t),function(e){r(214);var t=r(82);e.MapGL=t.e,e.Layer=t.a,e.Source=t.d,e.Popup=t.c,e.Marker=t.b,e.MAPBOX_ACCESS_TOKEN="pk.eyJ1Ijoic3RlcGFua3V6bWluIiwiYSI6Ik1ieW5udm8ifQ.25EOEC2-N92NCWT0Ci9w-Q"}.call(this,r(28))},function(e,t,r){var n=r(215);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(151)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(150)(!1)).push([e.i,".mapboxgl-map {\n    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n    overflow: hidden;\n    position: relative;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.mapboxgl-map:-webkit-full-screen {\n    width: 100%;\n    height: 100%;\n}\n\n.mapboxgl-canary {\n    background-color: salmon;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass {\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n    cursor: grab;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive:active,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active {\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n    cursor: grabbing;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas {\n    touch-action: pan-x pan-y;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: pinch-zoom;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: none;\n}\n\n.mapboxgl-ctrl-top-left,\n.mapboxgl-ctrl-top-right,\n.mapboxgl-ctrl-bottom-left,\n.mapboxgl-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.mapboxgl-ctrl-top-left     { top: 0; left: 0; }\n.mapboxgl-ctrl-top-right    { top: 0; right: 0; }\n.mapboxgl-ctrl-bottom-left  { bottom: 0; left: 0; }\n.mapboxgl-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.mapboxgl-ctrl { clear: both; pointer-events: auto; }\n.mapboxgl-ctrl-top-left .mapboxgl-ctrl     { margin: 10px 0 0 10px; float: left; }\n.mapboxgl-ctrl-top-right .mapboxgl-ctrl    { margin: 10px 10px 0 0; float: right; }\n.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl  { margin: 0 0 10px 10px; float: left; }\n.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl { margin: 0 10px 10px 0; float: right; }\n\n.mapboxgl-ctrl-group {\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n}\n\n.mapboxgl-ctrl-group:not(:empty) {\n    -moz-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);\n}\n\n.mapboxgl-ctrl-group > button {\n    width: 30px;\n    height: 30px;\n    display: block;\n    padding: 0;\n    outline: none;\n    border: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.mapboxgl-ctrl-group > button + button {\n    border-top: 1px solid #ddd;\n}\n\n/* https://bugzilla.mozilla.org/show_bug.cgi?id=140562 */\n.mapboxgl-ctrl > button::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n.mapboxgl-ctrl > button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-ctrl-icon,\n.mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow {\n    speak: none;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.mapboxgl-ctrl-icon {\n    padding: 5px;\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting {\n    -webkit-animation: mapboxgl-spin 2s infinite linear;\n    -moz-animation: mapboxgl-spin 2s infinite linear;\n    -o-animation: mapboxgl-spin 2s infinite linear;\n    -ms-animation: mapboxgl-spin 2s infinite linear;\n    animation: mapboxgl-spin 2s infinite linear;\n}\n\n@-webkit-keyframes mapboxgl-spin {\n    0% { -webkit-transform: rotate(0deg); }\n    100% { -webkit-transform: rotate(360deg); }\n}\n\n@-moz-keyframes mapboxgl-spin {\n    0% { -moz-transform: rotate(0deg); }\n    100% { -moz-transform: rotate(360deg); }\n}\n\n@-o-keyframes mapboxgl-spin {\n    0% { -o-transform: rotate(0deg); }\n    100% { -o-transform: rotate(360deg); }\n}\n\n@-ms-keyframes mapboxgl-spin {\n    0% { -ms-transform: rotate(0deg); }\n    100% { -ms-transform: rotate(360deg); }\n}\n\n@keyframes mapboxgl-spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23000000;' d='M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow {\n    width: 20px;\n    height: 20px;\n    margin: 5px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpolygon fill='%23333333' points='6,9 10,1 14,9'/%3E %3Cpolygon fill='%23CCCCCC' points='6,11 10,19 14,11 '/%3E %3C/svg%3E\");\n    background-repeat: no-repeat;\n    display: inline-block;\n}\n\na.mapboxgl-ctrl-logo {\n    width: 85px;\n    height: 21px;\n    margin: 0 0 -3px -3px;\n    display: block;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 84.49 21' style='enable-background:new 0 0 84.49 21;' xml:space='preserve'%3E%3Cg%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z'/%3E %3Cpolygon class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' points='14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 '/%3E%3C/g%3E%3C/svg%3E\");\n}\n\na.mapboxgl-ctrl-logo.mapboxgl-compact {\n    width: 21px;\n    height: 21px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 21 21' style='enable-background:new 0 0 21 21;' xml:space='preserve'%3E%3Cg transform='translate(0,0.01)'%3E%3Cpath d='m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3Cpath d='M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpath d='M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpolygon points='11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 ' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.mapboxgl-ctrl.mapboxgl-ctrl-attrib {\n    padding: 0 5px;\n    background-color: rgba(255, 255, 255, 0.5);\n    margin: 0;\n}\n\n@media screen {\n    .mapboxgl-ctrl-attrib.mapboxgl-compact {\n        margin: 10px;\n        position: relative;\n        background-color: #fff;\n        border-radius: 3px 12px 12px 3px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 24px 2px 4px;\n        visibility: visible;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover,\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 4px 2px 24px;\n        border-radius: 12px 3px 3px 12px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner {\n        display: none;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner {\n        display: block;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        content: '';\n        cursor: pointer;\n        position: absolute;\n        background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill='%23333333' fill-rule='evenodd' d='M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0'/%3E %3C/svg%3E\");\n        background-color: rgba(255, 255, 255, 0.5);\n        width: 24px;\n        height: 24px;\n        box-sizing: border-box;\n        border-radius: 12px;\n    }\n\n    .mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        left: 0;\n    }\n\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        left: 0;\n    }\n}\n\n.mapboxgl-ctrl-attrib a {\n    color: rgba(0, 0, 0, 0.75);\n    text-decoration: none;\n}\n\n.mapboxgl-ctrl-attrib a:hover {\n    color: inherit;\n    text-decoration: underline;\n}\n\n/* stylelint-disable-next-line selector-class-pattern */\n.mapboxgl-ctrl-attrib .mapbox-improve-map {\n    font-weight: bold;\n    margin-left: 2px;\n}\n\n.mapboxgl-attrib-empty {\n    display: none;\n}\n\n.mapboxgl-ctrl-scale {\n    background-color: rgba(255, 255, 255, 0.75);\n    font-size: 10px;\n    border-width: medium 2px 2px;\n    border-style: none solid solid;\n    border-color: #333;\n    padding: 0 5px;\n    color: #333;\n    box-sizing: border-box;\n}\n\n.mapboxgl-popup {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: -webkit-flex;\n    display: flex;\n    will-change: transform;\n    pointer-events: none;\n}\n\n.mapboxgl-popup-anchor-top,\n.mapboxgl-popup-anchor-top-left,\n.mapboxgl-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    flex-direction: column;\n}\n\n.mapboxgl-popup-anchor-bottom,\n.mapboxgl-popup-anchor-bottom-left,\n.mapboxgl-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    flex-direction: column-reverse;\n}\n\n.mapboxgl-popup-anchor-left {\n    -webkit-flex-direction: row;\n    flex-direction: row;\n}\n\n.mapboxgl-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    flex-direction: row-reverse;\n}\n\n.mapboxgl-popup-tip {\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    z-index: 1;\n}\n\n.mapboxgl-popup-anchor-top .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-top: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-top: none;\n    border-left: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-top: none;\n    border-right: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-bottom: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-bottom: none;\n    border-left: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-bottom: none;\n    border-right: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-left: none;\n    border-right-color: #fff;\n}\n\n.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-right: none;\n    border-left-color: #fff;\n}\n\n.mapboxgl-popup-close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n    border: 0;\n    border-radius: 0 3px 0 0;\n    cursor: pointer;\n    background-color: transparent;\n}\n\n.mapboxgl-popup-close-button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-popup-content {\n    position: relative;\n    background: #fff;\n    border-radius: 3px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n    padding: 10px 10px 15px;\n    pointer-events: auto;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content {\n    border-top-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content {\n    border-top-right-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content {\n    border-bottom-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content {\n    border-bottom-right-radius: 0;\n}\n\n.mapboxgl-marker {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n}\n\n.mapboxgl-user-location-dot {\n    background-color: #1da1f2;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n}\n\n.mapboxgl-user-location-dot::before {\n    background-color: #1da1f2;\n    content: '';\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -moz-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -ms-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    animation: mapboxgl-user-location-dot-pulse 2s infinite;\n}\n\n.mapboxgl-user-location-dot::after {\n    border-radius: 50%;\n    border: 2px solid #fff;\n    content: '';\n    height: 19px;\n    left: -2px;\n    position: absolute;\n    top: -2px;\n    width: 19px;\n    box-sizing: border-box;\n}\n\n@-webkit-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -webkit-transform: scale(1); opacity: 1; }\n    70%  { -webkit-transform: scale(3); opacity: 0; }\n    100% { -webkit-transform: scale(1); opacity: 0; }\n}\n\n@-ms-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -ms-transform: scale(1); opacity: 1; }\n    70%  { -ms-transform: scale(3); opacity: 0; }\n    100% { -ms-transform: scale(1); opacity: 0; }\n}\n\n@keyframes mapboxgl-user-location-dot-pulse {\n    0%   { transform: scale(1); opacity: 1; }\n    70%  { transform: scale(3); opacity: 0; }\n    100% { transform: scale(1); opacity: 0; }\n}\n\n.mapboxgl-user-location-dot-stale {\n    background-color: #aaa;\n}\n\n.mapboxgl-user-location-dot-stale::after {\n    display: none;\n}\n\n.mapboxgl-crosshair,\n.mapboxgl-crosshair .mapboxgl-interactive,\n.mapboxgl-crosshair .mapboxgl-interactive:active {\n    cursor: crosshair;\n}\n\n.mapboxgl-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n}\n\n@media print {\n    /* stylelint-disable-next-line selector-class-pattern */\n    .mapbox-improve-map {\n        display: none;\n    }\n}\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(152),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function aa(e,t,r,n,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function D(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);aa(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function G(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||v}function H(){}function I(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||v}G.prototype.isReactComponent={},G.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&D("85"),this.updater.enqueueSetState(this,e,t,"setState")},G.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},H.prototype=G.prototype;var b=I.prototype=new H;b.constructor=I,n(b,G.prototype),b.isPureReactComponent=!0;var x={current:null,currentDispatcher:null},w=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var n=void 0,i={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,n)&&!E.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:x.current}}function ba(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}function escape(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var P=/\/+/g,C=[];function R(e,t,r,n){if(C.length){var i=C.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function S(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function T(e,t,r,n){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return r(n,e,""===t?"."+U(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+U(i=e[l],l);s+=T(i,u,r,n)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=y&&e[y]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)s+=T(i=i.value,u=t+U(i,l++),r,n);else"object"===i&&D("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return s}function V(e,t,r){return null==e?0:T(e,"",t,r)}function U(e,t){return"object"==typeof e&&null!==e&&null!=e.key?escape(e.key):t.toString(36)}function ca(e,t){e.func.call(e.context,t,e.count++)}function da(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?W(e,n,r,function(e){return e}):null!=e&&(O(e)&&(e=ba(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+r)),n.push(e))}function W(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(P,"$&/")+"/"),V(e,da,t=R(t,o,n,i)),S(t)}var k={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return W(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;V(e,ca,t=R(null,null,t,r)),S(t)},count:function(e){return V(e,function(){return null},null)},toArray:function(e){var t=[];return W(e,t,null,function(e){return e}),t},only:function(e){return O(e)||D("143"),e}},createRef:function(){return{current:null}},Component:G,PureComponent:I,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},Fragment:s,StrictMode:l,Suspense:d,createElement:N,cloneElement:function(e,t,r){null==e&&D("267",e);var i=void 0,a=n({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=x.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))a.children=r;else if(1<i){c=Array(i);for(var p=0;p<i;p++)c[p]=arguments[p+2];a.children=c}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:u}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.7.0",unstable_ConcurrentMode:h,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:x,assign:n}},A={default:k},M=A&&k||A;e.exports=M.default||M},function(e,t,r){"use strict";t.__esModule=!0;var n=r(1),i=(_interopRequireDefault(n),_interopRequireDefault(r(2))),o=_interopRequireDefault(r(221));_interopRequireDefault(r(222));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=1073741823;t.default=function createReactContext(e,t){var r,s,l="__create-react-context-"+(0,o.default)()+"__",u=function(e){function Provider(){var t,r,n,i;_classCallCheck(this,Provider);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.emitter=(n=r.props.value,i=[],{on:function on(e){i.push(e)},off:function off(e){i=i.filter(function(t){return t!==e})},get:function get(){return n},set:function set(e,t){n=e,i.forEach(function(e){return e(n,t)})}}),_possibleConstructorReturn(r,t)}return _inherits(Provider,e),Provider.prototype.getChildContext=function getChildContext(){var e;return(e={})[l]=this.emitter,e},Provider.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){if(this.props.value!==e.value){var r=this.props.value,n=e.value,i=void 0;((o=r)===(s=n)?0!==o||1/o==1/s:o!=o&&s!=s)?i=0:(i="function"==typeof t?t(r,n):a,0!=(i|=0)&&this.emitter.set(e.value,i))}var o,s},Provider.prototype.render=function render(){return this.props.children},Provider}(n.Component);u.childContextTypes=((r={})[l]=i.default.object.isRequired,r);var c=function(t){function Consumer(){var e,r;_classCallCheck(this,Consumer);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=r=_possibleConstructorReturn(this,t.call.apply(t,[this].concat(i))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!=((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},_possibleConstructorReturn(r,e)}return _inherits(Consumer,t),Consumer.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.observedBits;this.observedBits=null==t?a:t},Consumer.prototype.componentDidMount=function componentDidMount(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?a:e},Consumer.prototype.componentWillUnmount=function componentWillUnmount(){this.context[l]&&this.context[l].off(this.onUpdate)},Consumer.prototype.getValue=function getValue(){return this.context[l]?this.context[l].get():e},Consumer.prototype.render=function render(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},Consumer}(n.Component);return c.contextTypes=((s={})[l]=i.default.object,s),{Provider:u,Consumer:c}},e.exports=t.default},function(e,t,r){"use strict";var n=r(220);function emptyFunction(){}e.exports=function(){function shim(e,t,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};return e.checkPropTypes=emptyFunction,e.PropTypes=e,e}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";(function(t){var r="__global_unique_id__";e.exports=function(){return t[r]=(t[r]||0)+1}}).call(this,r(28))},function(e,t,r){"use strict";var n=r(223);e.exports=n},function(e,t,r){"use strict";function makeEmptyFunction(e){return function(){return e}}var n=function emptyFunction(){};n.thatReturns=makeEmptyFunction,n.thatReturnsFalse=makeEmptyFunction(!1),n.thatReturnsTrue=makeEmptyFunction(!0),n.thatReturnsNull=makeEmptyFunction(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},function(e,t,r){e.exports=function(){"use strict";var e,t,r;function define(n,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),(r=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else t=i;else e=i}return define(0,function(u){function e(e,t){return e(t={exports:{}},t.exports),t.exports}var _=n;function n(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var r,n,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var E=a;function a(e,t){this.x=e,this.y=t}function o(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!o(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!o(e[n],t[n]))return!1;return!0}return e===t}function s(e,t,r,n){var i=new _(e,t,r,n);return function(e){return i.solve(e)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,i=r*this.x+t*this.y;return this.x=n,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.x+r*(this.x-t.x)-n*(this.y-t.y),o=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e};var P=s(.25,.1,.25,1);function l(e,t,r){return Math.min(r,Math.max(t,e))}function p(e,t,r){var n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function c(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var o=i[n];for(var a in o)e[a]=o[a]}return e}var C=1;function f(){return C++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function m(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(e,t,r){var n={};for(var i in e)n[i]=t.call(r||this,e[i],i,e);return n}function x(e,t,r){var n={};for(var i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?g(e,b):e}var T={};function w(e){T[e]||("undefined"!=typeof console&&console.warn(e),T[e]=!0)}function A(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function S(e){for(var t=0,r=0,n=e.length,i=n-1,o=void 0,a=void 0;r<n;i=r++)o=e[r],t+=((a=e[i]).x-o.x)*(o.y+a.y);return t}function k(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var O,I,R=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),M=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,j=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,F={now:R,frame:function(e){var t=M(e);return{cancel:function(){return j(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)},resolveURL:function(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},N={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(e){!B&&I&&(V?L(e):O=e)}},B=!1,V=!1;function L(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,I),e.isContextLost())return;z.supported=!0}catch(e){}e.deleteTexture(t),B=!0}self.document&&((I=self.document.createElement("img")).onload=function(){O&&L(O),O=null,V=!0},I.onerror=function(){B=!0,O=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function D(e,t){var r=X(N.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"/"!==r.path&&(e.path=""+r.path+e.path),!N.REQUIRE_ACCESS_TOKEN)return Z(e);if(!(t=t||N.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+G);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+G);return e.params.push("access_token="+t),Z(e)}function U(e){return 0===e.indexOf("mapbox:")}var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function q(e){return W.test(e)}var K=/(\.(png|jpg)\d*)(?=$)/,Y=/\.[\w]+$/,J=function(e){var t=X(e);if(!t.path.match(/(^\/v4\/)/)||!t.path.match(Y))return e;var r="mapbox://tiles/";r+=t.path.replace("/v4/","");var n=t.params.filter(function(e){return!e.match(/^access_token=/)});return n.length&&(r+="?"+n.join("&")),r},Q=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function X(e){var t=e.match(Q);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Z(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function H(e){if(!e)return null;var t,r=e.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((t=r[1],decodeURIComponent(self.atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(e){return null}}var $=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(e){var t,r=H(N.ACCESS_TOKEN),n="";return r&&r.u?(t=r.u,n=self.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(Number("0x"+t))}))):n=N.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+n:"mapbox.eventData:"+n},$.prototype.fetchEventData=function(){var e=k("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{var n=self.localStorage.getItem(t);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){w("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var e=k("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){w("Unable to write to LocalStorage")}},$.prototype.processRequests=function(){},$.prototype.postEvent=function(e,t,r){var n=this,i=X(N.EVENTS_URL);i.params.push("access_token="+(N.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.0-beta.1",userId:this.anonId},a=t?c(o,t):o,s={url:Z(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=ye(s,function(e){n.pendingRequest=null,r(e),n.saveEventData(),n.processRequests()})},$.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()};var ee=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(e,t){N.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return U(e)||q(e)})&&this.queueRequest({id:t,timestamp:Date.now()})},e.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=this.queue.shift(),r=t.id,n=t.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(n,{},function(t){t||r&&(e.success[r]=!0)}))}},e}($),te=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(e){N.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return U(e)||q(e)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var t=H(N.ACCESS_TOKEN),r=t?t.u:N.ACCESS_TOKEN,n=r!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),n=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;n=n||s>=1||s<-1||o.getDate()!==a.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=i,e.eventData.tokenU=r)})}},e}($)),oe=te.postTurnstileEvent.bind(te),ae=new ee,ue=ae.postMapLoadEvent.bind(ae),ce={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ce);var pe=function(t){function e(e,r,n){401===r&&q(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function nt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var he,fe,de=nt()?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&"null"!==e&&"file://"!==e)return e+self.location.pathname},ge=function(e,t){if(!/^file:/.test(e.url)){if(self.fetch&&self.Request&&self.AbortController)return function(e,t){var r=new self.AbortController,n=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:de(),signal:r.signal});return"json"===e.type&&n.headers.set("Accept","application/json"),self.fetch(n).then(function(r){r.ok?r[e.type||"text"]().then(function(e){t(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires"))}).catch(function(e){return t(new Error(e.message))}):t(new pe(r.statusText,r.status,e.url))}).catch(function(e){20!==e.code&&t(new Error(e.message))}),{cancel:function(){return r.abort()}}}(e,t);if(nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t)}return function(e,t){var r=new self.XMLHttpRequest;for(var n in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(n,e.headers[n]);return"json"===e.type&&r.setRequestHeader("Accept","application/json"),r.withCredentials="include"===e.credentials,r.onerror=function(){t(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===e.type)try{n=JSON.parse(r.response)}catch(e){return t(e)}t(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else t(new pe(r.statusText,r.status,e.url))},r.send(e.body),{cancel:function(){return r.abort()}}}(e,t)},me=function(e,t){return ge(c(e,{type:"arrayBuffer"}),t)},ye=function(e,t){return ge(c(e,{method:"POST"}),t)};he=[],fe=0;var ve=function(e,t){if(fe>=N.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return he.push(r),r}fe++;var n=!1,i=function(){if(!n)for(n=!0,fe--;he.length&&fe<N.MAX_PARALLEL_IMAGE_REQUESTS;){var e=he.shift(),t=e.requestParameters,r=e.callback;e.cancelled||(e.cancel=ve(t,r).cancel)}},o=me(e,function(e,r,n,o){if(i(),e)t(e);else if(r){var a=new self.Image,s=self.URL||self.webkitURL;a.onload=function(){t(null,a),s.revokeObjectURL(a.src)},a.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var l=new self.Blob([new Uint8Array(r)],{type:"image/png"});a.cacheControl=n,a.expires=o,a.src=r.byteLength?s.createObjectURL(l):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){o.cancel(),i()}}};function ct(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function ht(e,t,r){if(r&&r[e]){var n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}var xe=function(e,t){void 0===t&&(t={}),c(this,t),this.type=e},Ee=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",c({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(xe),Pe=function(){};Pe.prototype.on=function(e,t){return this._listeners=this._listeners||{},ct(e,t,this._listeners),this},Pe.prototype.off=function(e,t){return ht(e,t,this._listeners),ht(e,t,this._oneTimeListeners),this},Pe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},ct(e,t,this._oneTimeListeners),this},Pe.prototype.fire=function(e,t){"string"==typeof e&&(e=new xe(e,t||{}));var r=e.type;if(this.listens(r)){e.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,e);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];o<a.length;o+=1){var s=a[o];ht(r,s,this._oneTimeListeners),s.call(this,e)}var l=this._eventedParent;l&&(c(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(e))}else e instanceof Ee&&console.error(e.error);return this},Pe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Pe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Te=function(e,t,r,n){this.message=(e?e+": ":"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)};function gt(e){var t=e.key,r=e.value;return r?[new Te(t,r,"constants have been deprecated as of v8")]:[]}function xt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var o=i[n];for(var a in o)e[a]=o[a]}return e}function bt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function _t(e){return Array.isArray(e)?e.map(_t):bt(e)}var Ie=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Re=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,n=t;r<n.length;r+=1){var i=n[r],o=i[0],a=i[1];this.bindings[o]=a}};Re.prototype.concat=function(e){return new Re(this,e)},Re.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Re.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Me={kind:"null"},Le={kind:"number"},je={kind:"string"},Fe={kind:"boolean"},Ne={kind:"color"},Be={kind:"object"},qe={kind:"value"},Ge={kind:"collator"},He={kind:"formatted"};function Mt(e,t){return{kind:"array",itemType:e,N:t}}function Tt(e){if("array"===e.kind){var t=Tt(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Xe=[Me,Le,je,Fe,Ne,He,Be,Mt(qe)];function Lt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Lt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,n=Xe;r<n.length;r+=1)if(!Lt(n[r],t))return null}return"Expected "+Tt(e)+" but found "+Tt(t)+" instead."}var Ke=e(function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function a(e){return"%"===e[e.length-1]?n(parseFloat(e)/100*255):n(parseInt(e))}function o(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),p=i.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[a(p[0]),a(p[1]),a(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),g=o(p[2]),m=g<=.5?g*(d+1):g+d-g*d,y=2*g-m;return[n(255*s(y,m,f+1/3)),n(255*s(y,m,f)),n(255*s(y,m,f-1/3)),h];default:return null}}return null}}catch(e){}}).parseCSSColor,Ze=function(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n};Ze.parse=function(e){if(e){if(e instanceof Ze)return e;if("string"==typeof e){var t=Ke(e);if(t)return new Ze(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ze.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],n=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(n)+","+i+")"},Ze.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]},Ze.black=new Ze(0,0,0,1),Ze.white=new Ze(1,1,1,1),Ze.transparent=new Ze(0,0,0,0),Ze.red=new Ze(1,0,0,1);var et=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};et.prototype.compare=function(e,t){return this.collator.compare(e,t)},et.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tt=function(e,t,r){this.text=e,this.scale=t,this.fontStack=r},rt=function(e){this.sections=e};function Rt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[e,t,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Nt(e){if(null===e)return Me;if("string"==typeof e)return je;if("boolean"==typeof e)return Fe;if("number"==typeof e)return Le;if(e instanceof Ze)return Ne;if(e instanceof et)return Ge;if(e instanceof rt)return He;if(Array.isArray(e)){for(var t,r=e.length,n=0,i=e;n<i.length;n+=1){var o=Nt(i[n]);if(t){if(t===o)continue;t=qe;break}t=o}return Mt(t||qe,r)}return Be}function Kt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ze||e instanceof rt?e.toString():JSON.stringify(e)}rt.fromString=function(e){return new rt([new tt(e,null,null)])},rt.prototype.toString=function(){return this.sections.map(function(e){return e.text}).join("")},rt.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),e.push(i)}return e};var it=function(e,t){this.type=e,this.value=t};it.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ze)return!0;if(e instanceof et)return!0;if(e instanceof rt)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var r=e[1],n=Nt(r),i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new it(n,r)},it.prototype.evaluate=function(){return this.value},it.prototype.eachChild=function(){},it.prototype.possibleOutputs=function(){return[this.value]},it.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ze?["rgba"].concat(this.value.toArray()):this.value instanceof rt?this.value.serialize():this.value};var ot=function(e){this.name="ExpressionEvaluationError",this.message=e};ot.prototype.toJSON=function(){return this.message};var at={string:je,number:Le,boolean:Fe,object:Be},st=function(e,t){this.type=e,this.args=t};st.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,n=1,i=e[0];if("array"===i){var o,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in at)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=at[s],n++}else o=qe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],n++}r=Mt(o,a)}else r=at[i];for(var l=[];n<e.length;n++){var u=t.parse(e[n],n,qe);if(!u)return null;l.push(u)}return new st(r,l)},st.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!Lt(this.type,Nt(r)))return r;if(t===this.args.length-1)throw new ot("Expected value to be of type "+Tt(this.type)+", but found "+Tt(Nt(r))+" instead.")}return null},st.prototype.eachChild=function(e){this.args.forEach(e)},st.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},st.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var lt=function(e){this.type=He,this.sections=e};lt.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var r=[],n=1;n<e.length-1;n+=2){var i=t.parse(e[n],1,qe);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var a=e[n+1];if("object"!=typeof a||Array.isArray(a))return t.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Le)))return null;var l=null;if(a["text-font"]&&!(l=t.parse(a["text-font"],1,Mt(je))))return null;r.push({text:i,scale:s,font:l})}return new lt(r)},lt.prototype.evaluate=function(e){return new rt(this.sections.map(function(t){return new tt(Kt(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)}))},lt.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e(n.text),n.scale&&e(n.scale),n.font&&e(n.font)}},lt.prototype.possibleOutputs=function(){return[void 0]},lt.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),e.push(i)}return e};var ut={"to-boolean":Fe,"to-color":Ne,"to-number":Le,"to-string":je},pt=function(e,t){this.type=e,this.args=t};pt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var n=ut[r],i=[],o=1;o<e.length;o++){var a=t.parse(e[o],o,qe);if(!a)return null;i.push(a)}return new pt(n,i)},pt.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(t=i[n].evaluate(e))instanceof Ze)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Rt(t[0],t[1],t[2],t[3])))return new Ze(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ot(r||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(e)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new ot("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?rt.fromString(Kt(this.args[0].evaluate(e))):Kt(this.args[0].evaluate(e))},pt.prototype.eachChild=function(e){this.args.forEach(e)},pt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},pt.prototype.serialize=function(){if("formatted"===this.type.kind)return new lt([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var ft=["Unknown","Point","LineString","Polygon"],dt=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};dt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},dt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ft[this.feature.type]:this.feature.type:null},dt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},dt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ze.parse(e)),t};var mt=function(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n};mt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},mt.prototype.eachChild=function(e){this.args.forEach(e)},mt.prototype.possibleOutputs=function(){return[void 0]},mt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},mt.parse=function(e,t){var r,n=e[0],i=mt.definitions[n];if(!i)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(t){var r=t[0];return!Array.isArray(r)||r.length===e.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],f=p[1];l=new wt(t.registry,t.path,null,t.scope);for(var d=[],g=!1,m=1;m<e.length;m++){var y=e[m],v=Array.isArray(h)?h[m-1]:h.type,_=l.parse(y,1+d.length,v);if(!_){g=!0;break}d.push(_)}if(!g)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=d[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new mt(n,o,f,d)}}if(1===s.length)(r=t.errors).push.apply(r,l.errors);else{for(var S=(s.length?s:a).map(function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(Tt).join(", ")+")":"("+Tt(t.type)+"...)"}).join(" | "),E=[],P=1;P<e.length;P++){var C=t.parse(e[P],1+E.length);if(!C)return null;E.push(Tt(C.type))}t.error("Expected arguments of type "+S+", but found ("+E.join(", ")+") instead.")}return null},mt.register=function(e,t){for(var r in mt.definitions=t,t)e[r]=mt};var yt=function(e,t,r){this.type=Ge,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};function re(e){if(e instanceof mt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!re(e)&&(t=!1)}),t}function ne(e){if(e instanceof mt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!ne(e)&&(t=!1)}),t}function ie(e,t){if(e instanceof mt&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!ie(e,t)&&(r=!1)}),r}yt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Fe);if(!n)return null;var i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Fe);if(!i)return null;var o=null;return r.locale&&!(o=t.parse(r.locale,1,je))?null:new yt(n,i,o)},yt.prototype.evaluate=function(e){return new et(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},yt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},yt.prototype.possibleOutputs=function(){return[void 0]},yt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var vt=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};vt.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new vt(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},vt.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},vt.prototype.eachChild=function(){},vt.prototype.possibleOutputs=function(){return[void 0]},vt.prototype.serialize=function(){return["var",this.name]};var wt=function(e,t,r,n,i){void 0===t&&(t=[]),void 0===n&&(n=new Re),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r};function se(e,t){for(var r,n,i=0,o=e.length-1,a=0;i<=o;){if(r=e[a=Math.floor((i+o)/2)],n=e[a+1],t===r||t>r&&t<n)return a;if(r<t)i=a+1;else{if(!(r>t))throw new ot("Input is not a number.");o=a-1}}return Math.max(a-1,0)}wt.prototype.parse=function(e,t,r,n,i){return void 0===i&&(i={}),t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)},wt.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new st(t,[e]):"coerce"===r?new pt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,t.typeAnnotation||"coerce");else o=r(o,a,t.typeAnnotation||"assert")}if(!(o instanceof it)&&function t(e){if(e instanceof vt)return t(e.boundExpression);if(e instanceof mt&&"error"===e.name)return!1;if(e instanceof yt)return!1;var r=e instanceof pt||e instanceof st,n=!0;return e.eachChild(function(e){n=r?n&&t(e):n&&e instanceof it}),!!n&&re(e)&&ie(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new dt;try{o=new it(o.type,o.evaluate(l))}catch(e){return this.error(e.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},wt.prototype.concat=function(e,t,r){var n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new wt(this.registry,n,t||null,i,this.errors)},wt.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var n=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new Ie(n,e))},wt.prototype.checkSubtype=function(e,t){var r=Lt(e,t);return r&&this.error(r),r};var St=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var o=i[n],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};function le(e,t,r){return e*(1-r)+t*r}St.parse=function(e,t){var r=e[1],n=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,1,Le)))return null;var i=[],o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType),n.unshift(-1/0);for(var a=0;a<n.length;a+=2){var s=n[a],l=n[a+1],u=a+1,c=a+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=t.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new St(o,r,i)},St.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[se(t,n)].evaluate(e)},St.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},St.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},St.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Et=Object.freeze({number:le,color:function(e,t,r){return new Ze(le(e.r,t.r,r),le(e.g,t.g,r),le(e.b,t.b,r),le(e.a,t.a,r))},array:function(e,t,r){return e.map(function(e,n){return le(e,t[n],r)})}}),Pt=.95047,Ct=1,kt=1.08883,Ot=4/29,At=6/29,It=3*At*At,jt=At*At*At,Dt=Math.PI/180,Ft=180/Math.PI;function be(e){return e>jt?Math.pow(e,1/3):e/It+Ot}function _e(e){return e>At?e*e*e:It*(e-Ot)}function we(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ae(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=Ae(e.r),r=Ae(e.g),n=Ae(e.b),i=be((.4124564*t+.3575761*r+.1804375*n)/Pt),o=be((.2126729*t+.7151522*r+.072175*n)/Ct);return{l:116*o-16,a:500*(i-o),b:200*(o-be((.0193339*t+.119192*r+.9503041*n)/kt)),alpha:e.a}}function ke(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=Ct*_e(t),r=Pt*_e(r),n=kt*_e(n),new Ze(we(3.2404542*r-1.5371385*t-.4985314*n),we(-.969266*r+1.8760108*t+.041556*n),we(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function ze(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var zt={forward:Se,reverse:ke,interpolate:function(e,t,r){return{l:le(e.l,t.l,r),a:le(e.a,t.a,r),b:le(e.b,t.b,r),alpha:le(e.alpha,t.alpha,r)}}},Bt={forward:function(e){var t=Se(e),r=t.l,n=t.a,i=t.b,o=Math.atan2(i,n)*Ft;return{h:o<0?o+360:o,c:Math.sqrt(n*n+i*i),l:r,alpha:e.a}},reverse:function(e){var t=e.h*Dt,r=e.c;return ke({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:ze(e.h,t.h,r),c:le(e.c,t.c,r),l:le(e.l,t.l,r),alpha:le(e.alpha,t.alpha,r)}}},Ut=Object.freeze({lab:zt,hcl:Bt}),Vt=function(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Ve(e,t,r,n){var i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}Vt.interpolationFactor=function(e,t,r,n){var i=0;if("exponential"===e.name)i=Ve(t,e.base,r,n);else if("linear"===e.name)i=Ve(t,1,r,n);else if("cubic-bezier"===e.name){var o=e.controlPoints;i=new _(o[0],o[1],o[2],o[3]).solve(Ve(t,1,r,n))}return i},Vt.parse=function(e,t){var r=e[0],n=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,Le)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=Ne:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var g=t.parse(h,d,u);if(!g)return null;u=u||g.type,l.push([p,g])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Vt(u,r,n,i,l):t.error("Type "+Tt(u)+" is not interpolatable.")},Vt.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);var o=se(t,n),a=t[o],s=t[o+1],l=Vt.interpolationFactor(this.interpolation,n,a,s),u=r[o].evaluate(e),c=r[o+1].evaluate(e);return"interpolate"===this.operator?Et[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?Bt.reverse(Bt.interpolate(Bt.forward(u),Bt.forward(c),l)):zt.reverse(zt.interpolate(zt.forward(u),zt.forward(c),l))},Vt.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},Vt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},Vt.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var qt=function(e,t){this.type=e,this.args=t};qt.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,n=t.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o],l=t.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,i.push(l)}var u=n&&i.some(function(e){return Lt(n,e.type)});return new qt(u?qe:r,i)},qt.prototype.evaluate=function(e){for(var t=null,r=0,n=this.args;r<n.length&&null===(t=n[r].evaluate(e));r+=1);return t},qt.prototype.eachChild=function(e){this.args.forEach(e)},qt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},qt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Gt=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Gt.prototype.evaluate=function(e){return this.result.evaluate(e)},Gt.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1)e(r[t][1]);e(this.result)},Gt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],n=1;n<e.length-1;n+=2){var i=e[n];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=t.parse(e[n+1],n+1);if(!o)return null;r.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return a?new Gt(r,a):null},Gt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Gt.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var n=r[t],i=n[0],o=n[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Wt=function(e,t,r){this.type=e,this.index=t,this.input=r};Wt.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Le),n=t.parse(e[2],2,Mt(t.expectedType||qe));if(!r||!n)return null;var i=n.type;return new Wt(i.itemType,r,n)},Wt.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new ot("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new ot("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new ot("Array index must be an integer, but found "+t+" instead.");return r[t]},Wt.prototype.eachChild=function(e){e(this.index),e(this.input)},Wt.prototype.possibleOutputs=function(){return[void 0]},Wt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ht=function(e,t,r,n,i,o){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o};Ht.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],l=e[a+1];Array.isArray(s)||(s=[s]);var u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,Nt(h)))return null}else r=Nt(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}var f=t.parse(l,a,n);if(!f)return null;n=n||f.type,o.push(f)}var d=t.parse(e[1],1,qe);if(!d)return null;var g=t.parse(e[e.length-1],e.length-1,n);return g?"value"!==d.type.kind&&t.concat(1).checkSubtype(r,d.type)?null:new Ht(r,n,d,i,o,g):null},Ht.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Nt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ht.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ht.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ht.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],n={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=n[this.cases[a]])?(n[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=r;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];1===h.length?t.push(s(h[0])):t.push(h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Xt=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};function Oe(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function De(e,t,r,n){return 0===n.compare(t,r)}function Ue(e,t,r){var n="=="!==e&&"!="!==e;return function(){function i(e,t,r){this.type=Fe,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],o=t.parse(e[1],1,qe);if(!o)return null;if(!Oe(r,o.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Tt(o.type)+"'.");var a=t.parse(e[2],2,qe);if(!a)return null;if(!Oe(r,a.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Tt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+Tt(o.type)+"' and '"+Tt(a.type)+"'.");n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new st(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new st(o.type,[a])));var s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Ge)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=Nt(o),l=Nt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ot('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var u=Nt(o),c=Nt(a);if("string"!==u.kind||"string"!==c.kind)return t(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):t(i,o,a)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},i}()}Xt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var n=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,Fe);if(!o)return null;var a=t.parse(e[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Xt(r,n,s):null},Xt.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],i=n[0],o=n[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)},Xt.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],i=n[0],o=n[1];e(i),e(o)}e(this.otherwise)},Xt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Xt.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Zt=Ue("==",function(e,t,r){return t===r},De),Yt=Ue("!=",function(e,t,r){return t!==r},function(e,t,r,n){return!De(0,t,r,n)}),Jt=Ue("<",function(e,t,r){return t<r},function(e,t,r,n){return n.compare(t,r)<0}),Qt=Ue(">",function(e,t,r){return t>r},function(e,t,r,n){return n.compare(t,r)>0}),$t=Ue("<=",function(e,t,r){return t<=r},function(e,t,r,n){return n.compare(t,r)<=0}),fr=Ue(">=",function(e,t,r){return t>=r},function(e,t,r,n){return n.compare(t,r)>=0}),mr=function(e,t,r,n,i){this.type=je,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};mr.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,Le);if(!r)return null;var n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=t.parse(n.locale,1,je)))return null;var o=null;if(n.currency&&!(o=t.parse(n.currency,1,je)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=t.parse(n["min-fraction-digits"],1,Le)))return null;var s=null;return n["max-fraction-digits"]&&!(s=t.parse(n["max-fraction-digits"],1,Le))?null:new mr(r,i,o,a,s)},mr.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},mr.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},mr.prototype.possibleOutputs=function(){return[void 0]},mr.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var vr=function(e){this.type=Le,this.input=e};vr.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+Tt(r.type)+" instead."):new vr(r):null},vr.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ot("Expected value to be of type string or array, but found "+Tt(Nt(t))+" instead.")},vr.prototype.eachChild=function(e){e(this.input)},vr.prototype.possibleOutputs=function(){return[void 0]},vr.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var xr={"==":Zt,"!=":Yt,">":Qt,"<":Jt,">=":fr,"<=":$t,array:st,at:Wt,boolean:st,case:Xt,coalesce:qt,collator:yt,format:lt,interpolate:Vt,"interpolate-hcl":Vt,"interpolate-lab":Vt,length:vr,let:Gt,literal:it,match:Ht,number:st,"number-format":mr,object:st,step:St,string:st,"to-boolean":pt,"to-color":pt,"to-number":pt,"to-string":pt,var:vt};function Ye(e,t){var r=t[0],n=t[1],i=t[2],o=t[3];r=r.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=Rt(r,n,i,a);if(s)throw new ot(s);return new Ze(r/255*a,n/255*a,i/255*a,a)}function Je(e,t){return e in t}function $e(e,t){var r=t[e];return void 0===r?null:r}function We(e){return{type:e}}function Qe(e){return{result:"success",value:e}}function tr(e){return{result:"error",value:e}}function er(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function rr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function nr(e){return!!e.expression&&e.expression.interpolated}function ir(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ar(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function or(e){return e}function sr(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function ur(e,t,r,n,i){return sr(typeof r===i?n[r]:void 0,e.default,t.default)}function lr(e,t,r){if("number"!==ir(r))return sr(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var i=hr(e.stops,r);return e.stops[i][1]}function pr(e,t,r){var n=void 0!==e.base?e.base:1;if("number"!==ir(r))return sr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];var o=hr(e.stops,r),a=function(e,t,r,n){var i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],u=Et[t.type]||or;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=Ut[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==n)return u(r,n,a)}}:u(s,l,a)}function cr(e,t,r){return"color"===t.type?r=Ze.parse(r):"formatted"===t.type?r=rt.fromString(r.toString()):ir(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),sr(r,e.default,t.default)}function hr(e,t){for(var r,n,i=0,o=e.length-1,a=0;i<=o;){if(r=e[a=Math.floor((i+o)/2)][0],n=e[a+1][0],t===r||t>r&&t<n)return a;r<t?i=a+1:r>t&&(o=a-1)}return Math.max(a-1,0)}mt.register(xr,{error:[{kind:"error"},[je],function(e,t){var r=t[0];throw new ot(r.evaluate(e))}],typeof:[je,[qe],function(e,t){return Tt(Nt(t[0].evaluate(e)))}],"to-rgba":[Mt(Le,4),[Ne],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ne,[Le,Le,Le],Ye],rgba:[Ne,[Le,Le,Le,Le],Ye],has:{type:Fe,overloads:[[[je],function(e,t){return Je(t[0].evaluate(e),e.properties())}],[[je,Be],function(e,t){var r=t[0],n=t[1];return Je(r.evaluate(e),n.evaluate(e))}]]},get:{type:qe,overloads:[[[je],function(e,t){return $e(t[0].evaluate(e),e.properties())}],[[je,Be],function(e,t){var r=t[0],n=t[1];return $e(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[qe,[je],function(e,t){return $e(t[0].evaluate(e),e.featureState||{})}],properties:[Be,[],function(e){return e.properties()}],"geometry-type":[je,[],function(e){return e.geometryType()}],id:[qe,[],function(e){return e.id()}],zoom:[Le,[],function(e){return e.globals.zoom}],"heatmap-density":[Le,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Le,[],function(e){return e.globals.lineProgress||0}],accumulated:[qe,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Le,We(Le),function(e,t){for(var r=0,n=0,i=t;n<i.length;n+=1)r+=i[n].evaluate(e);return r}],"*":[Le,We(Le),function(e,t){for(var r=1,n=0,i=t;n<i.length;n+=1)r*=i[n].evaluate(e);return r}],"-":{type:Le,overloads:[[[Le,Le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)-n.evaluate(e)}],[[Le],function(e,t){return-t[0].evaluate(e)}]]},"/":[Le,[Le,Le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)/n.evaluate(e)}],"%":[Le,[Le,Le],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)%n.evaluate(e)}],ln2:[Le,[],function(){return Math.LN2}],pi:[Le,[],function(){return Math.PI}],e:[Le,[],function(){return Math.E}],"^":[Le,[Le,Le],function(e,t){var r=t[0],n=t[1];return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[Le,[Le],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[Le,[Le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[Le,[Le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[Le,[Le],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[Le,[Le],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[Le,[Le],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[Le,[Le],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[Le,[Le],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[Le,[Le],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[Le,[Le],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[Le,We(Le),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Le,We(Le),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Le,[Le],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[Le,[Le],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Le,[Le],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[Le,[Le],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[Fe,[je,qe],function(e,t){var r=t[0],n=t[1];return e.properties()[r.value]===n.value}],"filter-id-==":[Fe,[qe],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[Fe,[je],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[Fe,[je,qe],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],o=n.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Fe,[qe],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Fe,[je,qe],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],o=n.value;return typeof i==typeof o&&i>o}],"filter-id->":[Fe,[qe],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[Fe,[je,qe],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],o=n.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Fe,[qe],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Fe,[je,qe],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],o=n.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Fe,[qe],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[Fe,[qe],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Fe,[],function(e){return null!==e.id()}],"filter-type-in":[Fe,[Mt(je)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Fe,[Mt(qe)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Fe,[je,Mt(qe)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Fe,[je,Mt(qe)],function(e,t){var r=t[0],n=t[1];return function(e,t,r,n){for(;r<=n;){var i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)&&n.evaluate(e)}],[We(Fe),function(e,t){for(var r=0,n=t;r<n.length;r+=1)if(!n[r].evaluate(e))return!1;return!0}]]},any:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)||n.evaluate(e)}],[We(Fe),function(e,t){for(var r=0,n=t;r<n.length;r+=1)if(n[r].evaluate(e))return!0;return!1}]]},"!":[Fe,[Fe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Fe,[je],function(e,t){var r=t[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[je,[je],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[je,[je],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[je,We(qe),function(e,t){return t.map(function(t){return Kt(t.evaluate(e))}).join("")}],"resolved-locale":[je,[Ge],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Br=function(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new dt,this._defaultValue=t?"color"===(r=t).type&&ar(r.default)?new Ze(0,0,0,0):"color"===r.type?Ze.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=t&&"enum"===t.type?t.values:null};function yr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in xr}function dr(e,t){var r=new wt(xr,[],t?function(e){var t={color:Ne,string:je,number:Le,enum:je,boolean:Fe,formatted:He};return"array"===e.type?Mt(t[e.value]||qe,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Qe(new Br(n,t)):tr(r.errors)}Br.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},Br.prototype.evaluate=function(e,t,r){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new ot("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Wr=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ne(t.expression)};Wr.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},Wr.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)};var Kr=function(e,t,r){this.kind=e,this.zoomStops=r.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ne(t.expression),r instanceof Vt&&(this._interpolationType=r.interpolation)};function gr(e,t){if("error"===(e=dr(e,t)).result)return e;var r=e.value.expression,n=re(r);if(!n&&!er(t))return tr([new Ie("","data expressions not supported")]);var i=ie(r,["zoom"]);if(!i&&!rr(t))return tr([new Ie("","zoom expressions not supported")]);var o=function t(e){var r=null;if(e instanceof Gt)r=t(e.result);else if(e instanceof qt)for(var n=0,i=e.args;n<i.length;n+=1){var o=i[n];if(r=t(o))break}else(e instanceof St||e instanceof Vt)&&e.input instanceof mt&&"zoom"===e.input.name&&(r=e);return r instanceof Ie?r:(e.eachChild(function(e){var n=t(e);n instanceof Ie?r=n:!r&&n?r=new Ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new Ie("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r)}(r);return o||i?o instanceof Ie?tr([o]):o instanceof Vt&&!nr(t)?tr([new Ie("",'"interpolate" expressions cannot be used with this property')]):Qe(o?new Kr(n?"camera":"composite",e.value,o):new Wr(n?"constant":"source",e.value)):tr([new Ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Kr.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},Kr.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)},Kr.prototype.interpolationFactor=function(e,t,r){return this._interpolationType?Vt.interpolationFactor(this._interpolationType,e,t,r):0};var Jr=function(e,t){this._parameters=e,this._specification=t,xt(this,function t(e,r){var n,i,o,a="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||void 0!==e.property,u=s||!l,c=e.type||(nr(r)?"exponential":"interval");if(a&&((e=xt({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],Ze.parse(e[1])]})),e.default?e.default=Ze.parse(e.default):e.default=Ze.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ut[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)n=pr;else if("interval"===c)n=lr;else if("categorical"===c){n=ur,i=Object.create(null);for(var p=0,h=e.stops;p<h.length;p+=1){var f=h[p];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');n=cr}if(s){for(var d={},g=[],m=0;m<e.stops.length;m++){var y=e.stops[m],v=y[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},g.push(v)),d[v].stops.push([y[0].value,y[1]])}for(var _=[],b=0,x=g;b<x.length;b+=1){var w=x[b];_.push([d[w].zoom,t(d[w],r)])}return{kind:"composite",interpolationFactor:Vt.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(e){return e[0]}),evaluate:function(t,n){var i=t.zoom;return pr({stops:_,base:e.base},r,i).evaluate(i,n)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?Vt.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(t){var a=t.zoom;return n(e,r,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?sr(e.default,r.default):n(e,r,s,i,o)}}}(this._parameters,this._specification))};function br(e,t){if(ar(e))return new Jr(e,t);if(yr(e)){var r=gr(e,t);if("error"===r.result)throw new Error(r.value.map(function(e){return e.key+": "+e.message}).join(", "));return r.value}var n=e;return"string"==typeof e&&"color"===t.type&&(n=Ze.parse(e)),{kind:"constant",evaluate:function(){return n}}}function _r(e){var t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],l=ir(r);if("object"!==l)return[new Te(t,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],p=n[c]||n["*"],h=void 0;if(i[c])h=i[c];else if(n[c])h=Gr;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new Te(t,r[u],'unknown property "'+u+'"'));continue}h=Gr}s=s.concat(h({key:(t?t+".":t)+u,value:r[u],valueSpec:p,style:o,styleSpec:a,object:r,objectKey:u},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new Te(t,r,'missing required property "'+f+'"'));return s}function wr(e){var t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Gr;if("array"!==ir(t))return[new Te(o,t,"array expected, "+ir(t)+" found")];if(r.length&&t.length!==r.length)return[new Te(o,t,"array length "+r.length+" expected, length "+t.length+" found")];if(r["min-length"]&&t.length<r["min-length"])return[new Te(o,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")];var s={type:r.value};i.$version<7&&(s.function=r.function),"object"===ir(r.value)&&(s=r.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:n,styleSpec:i,key:o+"["+u+"]"}));return l}function Ar(e){var t=e.key,r=e.value,n=e.valueSpec,i=ir(r);return"number"!==i?[new Te(t,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new Te(t,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new Te(t,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Sr(e){var t,r,n,i=e.valueSpec,o=bt(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,l=!s,u="array"===ir(e.value.stops)&&"array"===ir(e.value.stops[0])&&"object"===ir(e.value.stops[0][0]),p=_r({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Te(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;return t=t.concat(wr({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:c})),"array"===ir(r)&&0===r.length&&t.push(new Te(e.key,r,"array must have at least one stop")),t},default:function(e){return Gr({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&p.push(new Te(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||p.push(new Te(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!nr(e.valueSpec)&&p.push(new Te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!er(e.valueSpec)?p.push(new Te(e.key,e.value,"property functions not supported")):s&&!rr(e.valueSpec)&&p.push(new Te(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==e.value.property||p.push(new Te(e.key,e.value,'"property" property is required')),p;function c(e){var t=[],o=e.value,s=e.key;if("array"!==ir(o))return[new Te(s,o,"array expected, "+ir(o)+" found")];if(2!==o.length)return[new Te(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==ir(o[0]))return[new Te(s,o,"object expected, "+ir(o[0])+" found")];if(void 0===o[0].zoom)return[new Te(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Te(s,o,"object stop key must have value")];if(n&&n>bt(o[0].zoom))return[new Te(s,o[0].zoom,"stop zoom values must appear in ascending order")];bt(o[0].zoom)!==n&&(n=bt(o[0].zoom),r=void 0,a={}),t=t.concat(_r({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ar,value:h}}))}else t=t.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return yr(_t(o[1]))?t.concat([new Te(s+"[1]",o[1],"expressions are not allowed in function stops.")]):t.concat(Gr({key:s+"[1]",value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function h(e,n){var s=ir(e.value),l=bt(e.value),u=null!==e.value?e.value:n;if(t){if(s!==t)return[new Te(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Te(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return er(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Te(e.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==r&&l<r?[new Te(e.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===o&&l in a?[new Te(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Te(e.key,u,"integer expected, found "+l)]}}function kr(e){var t=("property"===e.expressionContext?gr:dr)(_t(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new Te(""+e.key+t.key,e.value,t.message)});var r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new Te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ne(r))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ne(r))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ie(r,["zoom","feature-state"]))return[new Te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!re(r))return[new Te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zr(e){var t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(bt(r))&&i.push(new Te(t,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(bt(r))&&i.push(new Te(t,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var n=r[t];if(!Ir(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Jr.deserialize=function(e){return new Jr(e._parameters,e._specification)},Jr.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Qr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Er(e){if(null==e)return function(){return!0};Ir(e)||(e=Vr(e));var t=dr(e,Qr);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,r){return t.value.evaluate(e,r)}}function Pr(e,t){return e<t?-1:e>t?1:0}function Vr(e){if(!e)return!0;var t,r=e[0];return e.length<=1?"any"!==r:"=="===r?Cr(e[1],e[2],"=="):"!="===r?Fr(Cr(e[1],e[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Cr(e[1],e[2],r):"any"===r?(t=e.slice(1),["any"].concat(t.map(Vr))):"all"===r?["all"].concat(e.slice(1).map(Vr)):"none"===r?["all"].concat(e.slice(1).map(Vr).map(Fr)):"in"===r?Mr(e[1],e.slice(2)):"!in"===r?Fr(Mr(e[1],e.slice(2))):"has"===r?Tr(e[1]):"!has"!==r||Fr(Tr(e[1]))}function Cr(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function Mr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Pr)]]:["filter-in-small",e,["literal",t]]}}function Tr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Fr(e){return["!",e]}function Lr(e){return Ir(_t(e.value))?kr(xt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==ir(r))return[new Te(n,r,"array expected, "+ir(r)+" found")];var i,o=e.styleSpec,a=[];if(r.length<1)return[new Te(n,r,"filter array must have at least 1 element")];switch(a=a.concat(zr({key:n+"[0]",value:r[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===bt(r[1])&&a.push(new Te(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&a.push(new Te(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(i=ir(r[1]))&&a.push(new Te(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=ir(r[s]),"$type"===bt(r[1])?a=a.concat(zr({key:n+"["+s+"]",value:r[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Te(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)a=a.concat(t({key:n+"["+l+"]",value:r[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=ir(r[1]),2!==r.length?a.push(new Te(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Te(n+"[1]",r[1],"string expected, "+i+" found"))}return a}(e)}function Or(e,t){var r=e.key,n=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Gr({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});var u,c=e.valueSpec||s[a];if(!c)return[new Te(r,o,'unknown property "'+a+'"')];if("string"===ir(o)&&er(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Te(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===a&&n&&!n.glyphs&&p.push(new Te(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ar(_t(o))&&"identity"===bt(o.type)&&p.push(new Te(r,o,'"text-font" does not support identity functions'))),p.concat(Gr({key:e.key,value:o,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Dr(e){return Or(e,"paint")}function Ur(e){return Or(e,"layout")}function jr(e){var t=[],r=e.value,n=e.key,i=e.style,o=e.styleSpec;r.type||r.ref||t.push(new Te(n,r,'either "type" or "ref" is required'));var a,s=bt(r.type),l=bt(r.ref);if(r.id)for(var u=bt(r.id),c=0;c<e.arrayIndex;c++){var p=i.layers[c];bt(p.id)===u&&t.push(new Te(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(e){e in r&&t.push(new Te(n,r[e],'"'+e+'" is prohibited for ref layers'))}),i.layers.forEach(function(e){bt(e.id)===l&&(a=e)}),a?a.ref?t.push(new Te(n,r.ref,"ref cannot reference another ref layer")):s=bt(a.type):t.push(new Te(n,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&bt(h.type);h?"vector"===f&&"raster"===s?t.push(new Te(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?t.push(new Te(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new Te(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||t.push(new Te(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Te(n,r,'layer "'+r.id+'" must specify a "source-layer"')):t.push(new Te(n,r.source,'source "'+r.source+'" not found'))}else t.push(new Te(n,r,'missing required property "source"'));return t=t.concat(_r({key:n,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gr({key:n+".type",value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:Lr,layout:function(e){return _r({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ur(xt({layerType:s},e))}}})},paint:function(e){return _r({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Dr(xt({layerType:s},e))}}})}}}))}function qr(e){var t=e.value,r=e.key,n=e.styleSpec,i=e.style;if(!t.type)return[new Te(r,t,'"type" is required')];var o,a=bt(t.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=_r({key:r,value:t,valueSpec:n["source_"+a.replace("-","_")],style:e.style,styleSpec:n}),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&o.push(new Te(r+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=_r({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n}),t.cluster)for(var l in t.clusterProperties){var u=t.clusterProperties[l],c=u[0],p=u[1],h="string"==typeof c?[c,["accumulated"],["get",l]]:c;o.push.apply(o,kr({key:r+"."+l+".map",value:p,expressionContext:"cluster-map"})),o.push.apply(o,kr({key:r+"."+l+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return _r({key:r,value:t,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return _r({key:r,value:t,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Te(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zr({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function Rr(e){var t=e.value,r=e.styleSpec,n=r.light,i=e.style,o=[],a=ir(t);if(void 0===t)return o;if("object"!==a)return o.concat([new Te("light",t,"object expected, "+a+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);o=l&&n[l[1]]&&n[l[1]].transition?o.concat(Gr({key:s,value:t[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?o.concat(Gr({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r})):o.concat([new Te(s,t[s],'unknown property "'+s+'"')])}return o}function Nr(e){var t=e.value,r=e.key,n=ir(t);return"string"!==n?[new Te(r,t,"string expected, "+n+" found")]:[]}var $r={"*":function(){return[]},array:wr,boolean:function(e){var t=e.value,r=e.key,n=ir(t);return"boolean"!==n?[new Te(r,t,"boolean expected, "+n+" found")]:[]},number:Ar,color:function(e){var t=e.key,r=e.value,n=ir(r);return"string"!==n?[new Te(t,r,"color expected, "+n+" found")]:null===Ke(r)?[new Te(t,r,'color expected, "'+r+'" found')]:[]},constants:gt,enum:zr,filter:Lr,function:Sr,layer:jr,object:_r,source:qr,light:Rr,string:Nr,formatted:function(e){return 0===Nr(e).length?[]:kr(e)}};function Gr(e){var t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&ar(bt(t))?Sr(e):r.expression&&yr(_t(t))?kr(e):r.type&&$r[r.type]?$r[r.type](e):_r(xt({},e,{valueSpec:r.type?n[r.type]:r}))}function Xr(e){var t=e.value,r=e.key,n=Nr(e);return n.length?n:(-1===t.indexOf("{fontstack}")&&n.push(new Te(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new Te(r,t,'"glyphs" url must include a "{range}" token')),n)}function Zr(e,t){t=t||Ce;var r=[];return r=r.concat(Gr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Xr,"*":function(){return[]}}})),e.constants&&(r=r.concat(gt({key:"constants",value:e.constants,style:e,styleSpec:t}))),Hr(r)}function Hr(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function Yr(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Hr(e.apply(this,t))}}Zr.source=Yr(qr),Zr.light=Yr(Rr),Zr.layer=Yr(jr),Zr.filter=Yr(Lr),Zr.paintProperty=Yr(Dr),Zr.layoutProperty=Yr(Ur);var en=Zr,rn=Zr.light,on=Zr.paintProperty,an=Zr.layoutProperty;function tn(e,t){var r=!1;if(t&&t.length)for(var n=0,i=t;n<i.length;n+=1){var o=i[n];e.fire(new Ee(new Error(o.message))),r=!0}return r}var un=nn,cn=3;function nn(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],r=i[2],this.d=t+2*r;for(var o=0;o<this.d*this.d;o++){var a=i[cn+o],s=i[cn+o+1];n.push(a===s?null:i.subarray(a,s))}var l=i[cn+n.length],u=i[cn+n.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var p=r/t*e;this.min=-p,this.max=e+p}nn.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nn.prototype._insertCell=function(e,t,r,n,i,o){this.cells[i].push(o)},nn.prototype.query=function(e,t,r,n,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},i),s},nn.prototype._queryCell=function(e,t,r,n,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&r>=c[f+0]&&n>=c[f+1])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},nn.prototype._forEachCell=function(e,t,r,n,i,o,a,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,r,n,d,o,a,s))return}},nn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},nn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=cn+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[cn+a]=o,i.set(s,o),o+=s.length}return i[cn+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[cn+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var hn=self.ImageData,gn={};function sn(e,t,r){void 0===r&&(r={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),gn[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}for(var _n in sn("Object",Object),un.serialize=function(e,t){var r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},un.deserialize=function(e){return new un(e.buffer)},sn("Grid",un),sn("Color",Ze),sn("Error",Error),sn("StylePropertyFunction",Jr),sn("StyleExpression",Br,{omit:["_evaluator"]}),sn("ZoomDependentExpression",Kr),sn("ZoomConstantExpression",Wr),sn("CompoundExpression",mt,{omit:["_evaluate"]}),xr)xr[_n]._classRegistryKey||sn("Expression_"+_n,xr[_n]);function ln(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return t&&t.push(r.buffer),r}if(e instanceof hn)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var n=[],i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(ln(a,t))}return n}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(gn[l].omit.indexOf(c)>=0)){var p=e[c];u[c]=gn[l].shallow.indexOf(c)>=0?p:ln(p,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof e)}function pn(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof hn)return e;if(Array.isArray(e))return e.map(pn);if("object"==typeof e){var t=e.$name||"Object",r=gn[t].klass;if(!r)throw new Error("can't deserialize unregistered class "+t);if(r.deserialize)return r.deserialize(e);for(var n=Object.create(r.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=e[a];n[a]=gn[t].shallow.indexOf(a)>=0?s:pn(s)}}return n}throw new Error("can't deserialize object of type "+typeof e)}var bn=function(){this.first=!0};bn.prototype.update=function(e,t){var r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))};var xn={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function fn(e){for(var t=0,r=e;t<r.length;t+=1)if(dn(r[t].charCodeAt(0)))return!0;return!1}function yn(e){return!(xn.Arabic(e)||xn["Arabic Supplement"](e)||xn["Arabic Extended-A"](e)||xn["Arabic Presentation Forms-A"](e)||xn["Arabic Presentation Forms-B"](e))}function dn(e){return!(746!==e&&747!==e&&(e<4352||!(xn["Bopomofo Extended"](e)||xn.Bopomofo(e)||xn["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||xn["CJK Compatibility Ideographs"](e)||xn["CJK Compatibility"](e)||xn["CJK Radicals Supplement"](e)||xn["CJK Strokes"](e)||!(!xn["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||xn["CJK Unified Ideographs Extension A"](e)||xn["CJK Unified Ideographs"](e)||xn["Enclosed CJK Letters and Months"](e)||xn["Hangul Compatibility Jamo"](e)||xn["Hangul Jamo Extended-A"](e)||xn["Hangul Jamo Extended-B"](e)||xn["Hangul Jamo"](e)||xn["Hangul Syllables"](e)||xn.Hiragana(e)||xn["Ideographic Description Characters"](e)||xn.Kanbun(e)||xn["Kangxi Radicals"](e)||xn["Katakana Phonetic Extensions"](e)||xn.Katakana(e)&&12540!==e||!(!xn["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!xn["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||xn["Unified Canadian Aboriginal Syllabics"](e)||xn["Unified Canadian Aboriginal Syllabics Extended"](e)||xn["Vertical Forms"](e)||xn["Yijing Hexagram Symbols"](e)||xn["Yi Syllables"](e)||xn["Yi Radicals"](e))))}function mn(e){return!(dn(e)||function(e){return!!(xn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||xn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||xn["Letterlike Symbols"](e)||xn["Number Forms"](e)||xn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||xn["Control Pictures"](e)&&9251!==e||xn["Optical Character Recognition"](e)||xn["Enclosed Alphanumerics"](e)||xn["Geometric Shapes"](e)||xn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||xn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||xn["CJK Symbols and Punctuation"](e)||xn.Katakana(e)||xn["Private Use Area"](e)||xn["CJK Compatibility Forms"](e)||xn["Small Form Variants"](e)||xn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function vn(e,t){return!(!t&&(e>=1424&&e<=2303||xn["Arabic Presentation Forms-A"](e)||xn["Arabic Presentation Forms-B"](e))||e>=2304&&e<=3583||e>=3840&&e<=4255||xn.Khmer(e))}var wn,Sn=!1,En=null,Pn=!1,Cn=new Pe,Tn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Pn||null!=Tn.applyArabicShaping}},kn=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bn,this.transition={})};kn.prototype.isSupportedScript=function(e){return function(e,t){for(var r=0,n=e;r<n.length;r+=1)if(!vn(n[r].charCodeAt(0),t))return!1;return!0}(e,Tn.isLoaded())},kn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},kn.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}};var On=function(e,t){this.property=e,this.value=t,this.expression=br(void 0===t?e.specification.default:t,e.specification)};On.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},On.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var An=function(e){this.property=e,this.value=new On(e,void 0)};An.prototype.transitioned=function(e,t){return new Rn(this.property,this.value,t,c({},e.transition,this.transition),e.now)},An.prototype.untransitioned=function(){return new Rn(this.property,this.value,null,{},0)};var In=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};In.prototype.getValue=function(e){return b(this._values[e].value.value)},In.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new An(this._values[e].property)),this._values[e].value=new On(this._values[e].property,null===t?void 0:b(t))},In.prototype.getTransition=function(e){return b(this._values[e].transition)},In.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new An(this._values[e].property)),this._values[e].transition=b(t)||void 0},In.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i);var o=this.getTransition(n);void 0!==o&&(e[n+"-transition"]=o)}return e},In.prototype.transitioned=function(e,t){for(var r=new Mn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].transitioned(e,t._values[o])}return r},In.prototype.untransitioned=function(){for(var e=new Mn(this._properties),t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t];e._values[n]=this._values[n].untransitioned()}return e};var Rn=function(e,t,r,n,i){this.property=e,this.value=t,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Rn.prototype.possiblyEvaluate=function(e){var t=e.now||0,r=this.value.possiblyEvaluate(e),n=this.prior;if(n){if(t>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(t<this.begin)return n.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(e),r,function(e){if(i<=0)return 0;if(i>=1)return 1;var t=i*i,r=t*i;return 4*(i<.5?r:3*(i-t)+r-.75)}())}return r};var Mn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Mn.prototype.possiblyEvaluate=function(e){for(var t=new Dn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},Mn.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var r=t[e];if(this._values[r].prior)return!0}return!1};var Ln=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Ln.prototype.getValue=function(e){return b(this._values[e].value)},Ln.prototype.setValue=function(e,t){this._values[e]=new On(this._values[e].property,null===t?void 0:b(t))},Ln.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i)}return e},Ln.prototype.possiblyEvaluate=function(e){for(var t=new Dn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var jn=function(e,t,r){this.property=e,this.value=t,this.parameters=r};jn.prototype.isConstant=function(){return"constant"===this.value.kind},jn.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},jn.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var Dn=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Dn.prototype.get=function(e){return this._values[e]};var Fn=function(e){this.specification=e};Fn.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Fn.prototype.interpolate=function(e,t,r){var n=Et[this.specification.type];return n?n(e,t,r):e};var zn=function(e){this.specification=e};zn.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new jn(this,{kind:"constant",value:e.expression.evaluate(t)},t):new jn(this,e.expression,t)},zn.prototype.interpolate=function(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new jn(this,{kind:"constant",value:void 0},e.parameters);var n=Et[this.specification.type];return n?new jn(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e},zn.prototype.evaluate=function(e,t,r,n){return"constant"===e.kind?e.value:e.evaluate(t,r,n)};var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,t){if(void 0===e.value)return new jn(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var r=e.expression.evaluate(t),n=this._calculate(r,r,r,t);return new jn(this,{kind:"constant",value:n},t)}if("camera"===e.expression.kind){var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new jn(this,{kind:"constant",value:i},t)}return new jn(this,e.expression,t)},e.prototype.evaluate=function(e,t,r,n){if("source"===e.kind){var i=e.evaluate(t,r,n);return this._calculate(i,i,i,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value},e.prototype._calculate=function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}},e.prototype.interpolate=function(e){return e},e}(zn),Un=function(e){this.specification=e};Un.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var r=e.expression.evaluate(t);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new kn(Math.floor(t.zoom-1),t)),e.expression.evaluate(new kn(Math.floor(t.zoom),t)),e.expression.evaluate(new kn(Math.floor(t.zoom+1),t)),t)}},Un.prototype._calculate=function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}},Un.prototype.interpolate=function(e){return e};var Vn=function(e){this.specification=e};Vn.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},Vn.prototype.interpolate=function(){return!1};var qn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var r=e[t],n=this.defaultPropertyValues[t]=new On(r,void 0),i=this.defaultTransitionablePropertyValues[t]=new An(r);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}};sn("DataDrivenProperty",zn),sn("DataConstantProperty",Fn),sn("CrossFadedDataDrivenProperty",Bn),sn("CrossFadedProperty",Un),sn("ColorRampProperty",Vn);var Gn=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Ln(r.layout)),r.paint)){for(var n in this._transitionablePaint=new In(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},e.prototype.setLayoutProperty=function(e,t,r){if(void 0===r&&(r={}),null!=t){var n="layers."+this.id+".layout."+e;if(this._validate(an,n,e,t,r))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},e.prototype.getPaintProperty=function(e){return v(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},e.prototype.setPaintProperty=function(e,t,r){if(void 0===r&&(r={}),null!=t){var n="layers."+this.id+".paint."+e;if(this._validate(on,n,e,t,r))return!1}if(v(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var i=this._transitionablePaint._values[e],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,a=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||a||o},e.prototype._handleSpecialPaintPropertyUpdate=function(e){},e.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},e.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),x(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},e.prototype._validate=function(e,t,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tn(this,e.call(en,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof jn&&er(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},e}(Pe),Wn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Hn=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Xn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Nn(e,t){void 0===t&&(t=1);var r=0,n=0;return{members:e.map(function(e){var i,o=(i=e.type,Wn[i].BYTES_PER_ELEMENT),a=r=Kn(r,Math.max(t,o)),s=e.components||1;return n=Math.max(n,o),r+=o*s,{name:e.name,type:e.type,components:s,offset:a}}),size:Kn(r,Math.max(n,t)),alignment:t}}function Kn(e,t){return Math.ceil(e/t)*t}Xn.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Xn.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Xn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Xn.prototype.clear=function(){this.length=0},Xn.prototype.resize=function(e){this.reserve(e),this.length=e},Xn.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Xn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)},e.prototype.emplace=function(e,t,r){var n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e},e}(Xn);Zn.prototype.bytesPerElement=4,sn("StructArrayLayout2i4",Zn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)},e.prototype.emplace=function(e,t,r,n,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,e},e}(Xn);Yn.prototype.bytesPerElement=8,sn("StructArrayLayout4i8",Yn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)},e.prototype.emplace=function(e,t,r,n,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},e}(Xn);Jn.prototype.bytesPerElement=12,sn("StructArrayLayout2i4i12",Jn);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,i,o,a,s)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l){var u=6*e,c=12*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=l,e},e}(Xn);Qn.prototype.bytesPerElement=12,sn("StructArrayLayout4i4ub12",Qn);var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,i,o,a,s)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=r,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,e},e}(Xn);$n.prototype.bytesPerElement=16,sn("StructArrayLayout8ui16",$n);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,i,o,a,s)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l){var u=8*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,e},e}(Xn);ei.prototype.bytesPerElement=16,sn("StructArrayLayout4i4ui16",ei);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)},e.prototype.emplace=function(e,t,r,n){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e},e}(Xn);ti.prototype.bytesPerElement=12,sn("StructArrayLayout3f12",ti);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var r=1*e;return this.uint32[r+0]=t,e},e}(Xn);ri.prototype.bytesPerElement=4,sn("StructArrayLayout1ul4",ri);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s,l,u,c){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,r,n,i,o,a,s,l,u,c)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l,u,c,p){var h=12*e,f=6*e;return this.int16[h+0]=t,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,e},e}(Xn);ni.prototype.bytesPerElement=24,sn("StructArrayLayout6i1ul2ui2i24",ni);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)},e.prototype.emplace=function(e,t,r,n,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},e}(Xn);ii.prototype.bytesPerElement=12,sn("StructArrayLayout2i2i2i12",ii);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)},e.prototype.emplace=function(e,t,r){var n=4*e;return this.uint8[n+0]=t,this.uint8[n+1]=r,e},e}(Xn);oi.prototype.bytesPerElement=4,sn("StructArrayLayout2ub4",oi);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s,l,u,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,n,i,o,a,s,l,u,c,p,h,f)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l,u,c,p,h,f,d){var g=20*e,m=10*e,y=40*e;return this.int16[g+0]=t,this.int16[g+1]=r,this.uint16[g+2]=n,this.uint16[g+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=s,this.uint16[g+10]=l,this.uint16[g+11]=u,this.uint16[g+12]=c,this.float32[m+7]=p,this.float32[m+8]=h,this.uint8[y+36]=f,this.uint8[y+37]=d,e},e}(Xn);ai.prototype.bytesPerElement=40,sn("StructArrayLayout2i2ui3ul3ui2f2ub40",ai);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n,i,o,a,s,l,u,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,n,i,o,a,s,l,u,c,p,h,f)},e.prototype.emplace=function(e,t,r,n,i,o,a,s,l,u,c,p,h,f,d){var g=16*e,m=8*e;return this.int16[g+0]=t,this.int16[g+1]=r,this.int16[g+2]=n,this.int16[g+3]=i,this.uint16[g+4]=o,this.uint16[g+5]=a,this.uint16[g+6]=s,this.uint16[g+7]=l,this.uint16[g+8]=u,this.uint16[g+9]=c,this.uint16[g+10]=p,this.uint16[g+11]=h,this.uint16[g+12]=f,this.uint32[m+7]=d,e},e}(Xn);si.prototype.bytesPerElement=32,sn("StructArrayLayout4i9ui1ul32",si);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var r=1*e;return this.float32[r+0]=t,e},e}(Xn);li.prototype.bytesPerElement=4,sn("StructArrayLayout1f4",li);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)},e.prototype.emplace=function(e,t,r,n){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e},e}(Xn);ui.prototype.bytesPerElement=6,sn("StructArrayLayout3i6",ui);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)},e.prototype.emplace=function(e,t,r,n){var i=2*e,o=4*e;return this.uint32[i+0]=t,this.uint16[o+2]=r,this.uint16[o+3]=n,e},e}(Xn);ci.prototype.bytesPerElement=8,sn("StructArrayLayout1ul2ui8",ci);var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)},e.prototype.emplace=function(e,t,r,n){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e},e}(Xn);pi.prototype.bytesPerElement=6,sn("StructArrayLayout3ui6",pi);var hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)},e.prototype.emplace=function(e,t,r){var n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e},e}(Xn);hi.prototype.bytesPerElement=4,sn("StructArrayLayout2ui4",hi);var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var r=1*e;return this.uint16[r+0]=t,e},e}(Xn);fi.prototype.bytesPerElement=2,sn("StructArrayLayout1ui2",fi);var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var r=this.length;return this.resize(r+1),this.emplace(r,e,t)},e.prototype.emplace=function(e,t,r){var n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e},e}(Xn);di.prototype.bytesPerElement=8,sn("StructArrayLayout2f8",di);var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)},e.prototype.emplace=function(e,t,r,n,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,e},e}(Xn);gi.prototype.bytesPerElement=16,sn("StructArrayLayout4f16",gi);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},r.anchorPoint.get=function(){return new E(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(Hn);mi.prototype.size=24;var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new mi(this,e)},e}(ni);sn("CollisionBoxArray",yi);var vi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(e.prototype,r),e}(Hn);vi.prototype.size=40;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new vi(this,e)},e}(ai);sn("PlacedSymbolArray",_i);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.horizontalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},r.key.get=function(){return this._structArray.uint16[this._pos2+4]},r.key.set=function(e){this._structArray.uint16[this._pos2+4]=e},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},r.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+5]=e},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},r.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+6]=e},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.featureIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},r.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},r.numGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+10]=e},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},r.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+11]=e},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},r.crossTileID.set=function(e){this._structArray.uint32[this._pos4+7]=e},Object.defineProperties(e.prototype,r),e}(Hn);bi.prototype.size=32;var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new bi(this,e)},e}(si);sn("SymbolInstanceArray",xi);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(e.prototype,r),e}(Hn);wi.prototype.size=4;var Si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(e){return this.float32[1*e+0]},e.prototype.get=function(e){return new wi(this,e)},e}(li);sn("GlyphOffsetArray",Si);var Pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(e){this._structArray.int16[this._pos2+0]=e},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(e){this._structArray.int16[this._pos2+1]=e},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(e.prototype,r),e}(Hn);Pi.prototype.size=6;var Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(e){return this.int16[3*e+0]},e.prototype.gety=function(e){return this.int16[3*e+1]},e.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},e.prototype.get=function(e){return new Pi(this,e)},e}(ui);sn("SymbolLineVertexArray",Ci);var Ti=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(e.prototype,r),e}(Hn);Ti.prototype.size=8;var ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new Ti(this,e)},e}(ci);sn("FeatureIndexArray",ki);var Oi=Nn([{name:"a_pos",components:2,type:"Int16"}],4),Ai=Oi.members,Ri=(Oi.size,Oi.alignment,function(e){void 0===e&&(e=[]),this.segments=e});function Ii(e,t){return 256*(e=l(Math.floor(e),0,255))+l(Math.floor(t),0,255)}Ri.prototype.prepareSegment=function(e,t,r,n){var i=this.segments[this.segments.length-1];return e>Ri.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Ri.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>Ri.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},Ri.prototype.get=function(){return this.segments},Ri.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var r=t[e];for(var n in r.vaos)r.vaos[n].destroy()}},Ri.simpleSegment=function(e,t,r,n){return new Ri([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},Ri.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sn("SegmentVector",Ri);var Mi=function(){this.ids=[],this.positions=[],this.indexed=!1};function Ei(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}Mi.prototype.add=function(e,t,r,n){this.ids.push(e),this.positions.push(t,r,n)},Mi.prototype.getPositions=function(e){for(var t=0,r=this.ids.length-1;t<r;){var n=t+r>>1;this.ids[n]>=e?r=n:t=n+1}for(var i=[];this.ids[t]===e;){var o=this.positions[3*t],a=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:o,start:a,end:s}),t++}return i},Mi.serialize=function(e,t){var r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return function t(e,r,n,i){if(!(n>=i)){for(var o=e[n+i>>1],a=n-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Ei(e,a,s),Ei(r,3*a,3*s),Ei(r,3*a+1,3*s+1),Ei(r,3*a+2,3*s+2)}t(e,r,n,s),t(e,r,s+1,i)}}(r,n,0,r.length-1),t.push(r.buffer,n.buffer),{ids:r,positions:n}},Mi.deserialize=function(e){var t=new Mi;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},sn("FeaturePositionMap",Mi);var Li=function(e,t){this.gl=e.gl,this.location=t},ji=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},e}(Li),Di=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},e}(Li),Fi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},e}(Li),Ni=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},e}(Li),zi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},e}(Li),Bi=function(t){function e(e,r){t.call(this,e,r),this.current=Ze.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},e}(Li),Vi=new Float32Array(16),qi=function(t){function e(e,r){t.call(this,e,r),this.current=Vi}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},e}(Li);function Ui(e){return[Ii(255*e.r,255*e.g),Ii(255*e.b,255*e.a)]}var Gi=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=r,this.maxValue=-1/0};Gi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Gi.prototype.setConstantPatternPositions=function(){},Gi.prototype.populatePaintArray=function(){},Gi.prototype.updatePaintArray=function(){},Gi.prototype.upload=function(){},Gi.prototype.destroy=function(){},Gi.prototype.setUniforms=function(e,t,r,n){t.set(n.constantOr(this.value))},Gi.prototype.getBinding=function(e,t){return"color"===this.type?new Bi(e,t):new Di(e,t)},Gi.serialize=function(e){var t=e.value,r=e.names,n=e.type;return{value:ln(t),names:r,type:n}},Gi.deserialize=function(e){var t=e.value,r=e.names,n=e.type;return new Gi(pn(t),r,n)};var Xi=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Xi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Xi.prototype.populatePaintArray=function(){},Xi.prototype.updatePaintArray=function(){},Xi.prototype.upload=function(){},Xi.prototype.destroy=function(){},Xi.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},Xi.prototype.setUniforms=function(e,t,r,n,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&t.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&t.set(o.patternFrom)},Xi.prototype.getBinding=function(e,t){return new zi(e,t)};var Ki=function(e,t,r,n){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map(function(e){return"a_"+e}),this.maxValue=-1/0,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new n};Ki.prototype.defines=function(){return[]},Ki.prototype.setConstantPatternPositions=function(){},Ki.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,n=r.length;r.reserve(e);var i=this.expression.evaluate(new kn(0),t,{});if("color"===this.type)for(var o=Ui(i),a=n;a<e;a++)r.emplaceBack(o[0],o[1]);else{for(var s=n;s<e;s++)r.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Ki.prototype.updatePaintArray=function(e,t,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var a=Ui(o),s=e;s<t;s++)i.emplace(s,a[0],a[1]);else{for(var l=e;l<t;l++)i.emplace(l,o);this.maxValue=Math.max(this.maxValue,o)}},Ki.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ki.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ki.prototype.setUniforms=function(e,t){t.set(0)},Ki.prototype.getBinding=function(e,t){return new Di(e,t)};var Yi=function(e,t,r,n,i,o){this.expression=e,this.names=t,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new a};Yi.prototype.defines=function(){return[]},Yi.prototype.setConstantPatternPositions=function(){},Yi.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,n=r.length;r.reserve(e);var i=this.expression.evaluate(new kn(this.zoom),t,{}),o=this.expression.evaluate(new kn(this.zoom+1),t,{});if("color"===this.type)for(var a=Ui(i),s=Ui(o),l=n;l<e;l++)r.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=n;u<e;u++)r.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},Yi.prototype.updatePaintArray=function(e,t,r,n){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},r,n),a=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Ui(o),l=Ui(a),u=e;u<t;u++)i.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=e;c<t;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Yi.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},Yi.prototype.setUniforms=function(e,t,r){t.set(this.interpolationFactor(r.zoom))},Yi.prototype.getBinding=function(e,t){return new Di(e,t)};var Ji=function(e,t,r,n,i,o,a){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Ji.prototype.defines=function(){return[]},Ji.prototype.setConstantPatternPositions=function(){},Ji.prototype.populatePaintArray=function(e,t,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=n.length;if(n.reserve(e),i.reserve(e),r&&t.patterns&&t.patterns[o]){var s=t.patterns[o],l=s.min,u=s.mid,c=s.max,p=r[l],h=r[u],f=r[c];if(!p||!h||!f)return;for(var d=a;d<e;d++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Ji.prototype.updatePaintArray=function(e,t,r,n,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var l=r.patterns[s],u=l.min,c=l.mid,p=l.max,h=i[u],f=i[c],d=i[p];if(!h||!f||!d)return;for(var g=e;g<t;g++)o.emplace(g,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(g,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Ji.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ji.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ji.prototype.setUniforms=function(e,t){t.set(0)},Ji.prototype.getBinding=function(e,t){return new Di(e,t)};var $i=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Mi,this._bufferOffset=0};$i.createDynamic=function(e,t,r){var n=new $i,i=[];for(var o in e.paint._values)if(r(o)){var a=e.paint.get(o);if(a instanceof jn&&er(a.property.specification)){var s=Zi(o,e.type),l=a.property.specification.type,u=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)n.binders[o]=new Xi(a.value.value,s,l),i.push("/u_"+o);else{var c=Hi(o,l,"source");n.binders[o]=new Ji(a.value,s,l,u,t,c,e.id),i.push("/a_"+o)}else if("constant"===a.value.kind)n.binders[o]=new Gi(a.value.value,s,l),i.push("/u_"+o);else if("source"===a.value.kind){var p=Hi(o,l,"source");n.binders[o]=new Ki(a.value,s,l,p),i.push("/a_"+o)}else{var h=Hi(o,l,"composite");n.binders[o]=new Yi(a.value,s,l,u,t,h),i.push("/z_"+o)}}}return n.cacheKey=i.sort().join(""),n},$i.prototype.populatePaintArrays=function(e,t,r,n){for(var i in this.binders)this.binders[i].populatePaintArray(e,t,n);void 0!==t.id&&this._featureMap.add(+t.id,r,this._bufferOffset,e),this._bufferOffset=e},$i.prototype.setConstantPatternPositions=function(e,t){for(var r in this.binders)this.binders[r].setConstantPatternPositions(e,t)},$i.prototype.updatePaintArrays=function(e,t,r,n){var i=!1;for(var o in e)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var l=s[a],u=t.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof Gi||p instanceof Xi)&&!0===p.expression.isStateDependent){var h=r.paint.get(c);p.expression=h.value,p.updatePaintArray(l.start,l.end,u,e[o],n),i=!0}}}return i},$i.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},$i.prototype.getPaintVertexBuffers=function(){return this._buffers},$i.prototype.getUniforms=function(e,t){var r={};for(var n in this.binders)for(var i=this.binders[n],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];r[s]=i.getBinding(e,t[s])}return r},$i.prototype.setUniforms=function(e,t,r,n){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var l=s[a];o.setUniforms(e,t[l],n,r.get(i),l)}},$i.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Ji){var i=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&t.push(i)}else(n instanceof Ki||n instanceof Yi)&&n.paintVertexBuffer&&t.push(n.paintVertexBuffer)}this._buffers=t},$i.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof Ki||i instanceof Yi)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},$i.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var Eo=function(e,t,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=$i.createDynamic(a,r,n),this.programConfigurations[a.id].layoutAttributes=e}this.needsUpload=!1};function Zi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Hi(e,t,r){var n={color:{source:di,composite:gi},number:{source:li,composite:di}},i=function(e){return{"line-pattern":{source:$n,composite:$n},"fill-pattern":{source:$n,composite:$n},"fill-extrusion-pattern":{source:$n,composite:$n}}[e]}(e);return i&&i[r]||n[t][r]}Eo.prototype.populatePaintArrays=function(e,t,r,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,r,n);this.needsUpload=!0},Eo.prototype.updatePaintArrays=function(e,t,r,n){for(var i=0,o=r;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,t,a,n)||this.needsUpload}},Eo.prototype.get=function(e){return this.programConfigurations[e]},Eo.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Eo.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},sn("ConstantBinder",Gi),sn("CrossFadedConstantBinder",Xi),sn("SourceExpressionBinder",Ki),sn("CrossFadedCompositeBinder",Ji),sn("CompositeExpressionBinder",Yi),sn("ProgramConfiguration",$i,{omit:["_buffers"]}),sn("ProgramConfigurationSet",Eo);var Po=8192,Co={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Wi(e){for(var t=Po/e.extent,r=e.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*t),a.y=Math.round(a.y*t),(a.x<Co.min||a.x>Co.max||a.y<Co.min||a.y>Co.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function Qi(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}var Ro=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new pi,this.segments=new Ri,this.programConfigurations=new Eo(Ai,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function ea(e,t){for(var r=0;r<e.length;r++)if(pa(t,e[r]))return!0;for(var n=0;n<t.length;n++)if(pa(e,t[n]))return!0;return!!aa(e,t)}function ra(e,t,r){return!!pa(e,t)||!!sa(t,e,r)}function na(e,t){if(1===e.length)return la(t,e[0]);for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)if(pa(e,n[i]))return!0;for(var o=0;o<e.length;o++)if(la(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(aa(e,t[a]))return!0;return!1}function ia(e,t,r){if(e.length>1){if(aa(e,t))return!0;for(var n=0;n<t.length;n++)if(sa(t[n],e,r))return!0}for(var i=0;i<e.length;i++)if(sa(e[i],t,r))return!0;return!1}function aa(e,t){if(0===e.length||0===t.length)return!1;for(var r=0;r<e.length-1;r++)for(var n=e[r],i=e[r+1],o=0;o<t.length-1;o++)if(oa(n,i,t[o],t[o+1]))return!0;return!1}function oa(e,t,r,n){return A(e,r,n)!==A(t,r,n)&&A(e,t,r)!==A(e,t,n)}function sa(e,t,r){var n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(var i=1;i<t.length;i++)if(ua(e,t[i-1],t[i])<n)return!0;return!1}function ua(e,t,r){var n=t.distSqr(r);if(0===n)return e.distSqr(t);var i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return i<0?e.distSqr(t):i>1?e.distSqr(r):e.distSqr(r.sub(t)._mult(i)._add(t))}function la(e,t){for(var r,n,i,o=!1,a=0;a<e.length;a++)for(var s=0,l=(r=e[a]).length-1;s<r.length;l=s++)n=r[s],i=r[l],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(o=!o);return o}function pa(e,t){for(var r=!1,n=0,i=e.length-1;n<e.length;i=n++){var o=e[n],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function ca(e,t,r){var n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;var o=A(e,t,r[0]);return o!==A(e,t,r[1])||o!==A(e,t,r[2])||o!==A(e,t,r[3])}function ha(e,t,r){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).binders[e].maxValue}function fa(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ya(e,t,r,n,i){if(!t[0]&&!t[1])return e;var o=E.convert(t)._mult(i);"viewport"===r&&o._rotate(-n);for(var a=[],s=0;s<e.length;s++){var l=e[s];a.push(l.sub(o))}return a}Ro.prototype.populate=function(e,t){for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kn(this.zoom),o)){var l=Wi(o);this.addFeature(o,l,a),t.featureIndex.insert(o,l,a,s,this.index)}}},Ro.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},Ro.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ro.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ai),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ro.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ro.prototype.addFeature=function(e,t,r){for(var n=0,i=t;n<i.length;n+=1)for(var o=0,a=i[n];o<a.length;o+=1){var s=a[o],l=s.x,u=s.y;if(!(l<0||l>=Po||u<0||u>=Po)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;Qi(this.layoutVertexArray,l,u,-1,-1),Qi(this.layoutVertexArray,l,u,1,-1),Qi(this.layoutVertexArray,l,u,1,1),Qi(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{})},sn("CircleBucket",Ro,{omit:["layers"]});var Mo={paint:new qn({"circle-radius":new zn(Ce.paint_circle["circle-radius"]),"circle-color":new zn(Ce.paint_circle["circle-color"]),"circle-blur":new zn(Ce.paint_circle["circle-blur"]),"circle-opacity":new zn(Ce.paint_circle["circle-opacity"]),"circle-translate":new Fn(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new Fn(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fn(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fn(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(Ce.paint_circle["circle-stroke-opacity"])})},Do="undefined"!=typeof Float32Array?Float32Array:Array;function ga(){var e=new Do(9);return Do!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function xa(){var e=new Do(3);return Do!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ba(e,t,r){var n=new Do(3);return n[0]=e,n[1]=t,n[2]=r,n}function Sa(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function ka(){var e=new Do(4);return Do!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Math.PI,xa(),function(){var e;e=new Do(4),Do!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}(),xa(),ba(1,0,0),ba(0,1,0),ka(),ka(),ga(),function(){var e;e=new Do(2),Do!=Float32Array&&(e[0]=0,e[1]=0)}();var Fo=function(t){function e(e){t.call(this,e,Mo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new Ro(e)},e.prototype.queryRadius=function(e){var t=e;return ha("circle-radius",this,t)+ha("circle-stroke-width",this,t)+fa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,o,a,s){for(var l=ya(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(e,t){return l.map(function(e){return Fa(e,t)})}(0,s),h=c?u*a:u,f=0,d=n;f<d.length;f+=1)for(var g=0,m=d[f];g<m.length;g+=1){var y=m[g],v=c?y:Fa(y,s),_=h,b=Sa([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),ra(p,v,_))return!0}return!1},e}(Gn);function Fa(e,t){var r=Sa([],[e.x,e.y,0,1],t);return new E(r[0]/r[3],r[1]/r[3])}var No=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ro);function Oa(e,t,r,n){var i=t.width,o=t.height;if(n){if(n.length!==i*o*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*o*r);return e.width=i,e.height=o,e.data=n,e}function Da(e,t,r){var n=t.width,i=t.height;if(n!==e.width||i!==e.height){var o=Oa({},{width:n,height:i},r);Ua(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=o.data}}function Ua(e,t,r,n,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((r.y+l)*e.width+r.x)*o,c=((n.y+l)*t.width+n.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[u+p];return t}sn("HeatmapBucket",No,{omit:["layers"]});var Bo=function(e,t){Oa(this,e,1,t)};Bo.prototype.resize=function(e){Da(this,e,1)},Bo.prototype.clone=function(){return new Bo({width:this.width,height:this.height},new Uint8Array(this.data))},Bo.copy=function(e,t,r,n,i){Ua(e,t,r,n,i,1)};var Uo=function(e,t){Oa(this,e,4,t)};Uo.prototype.resize=function(e){Da(this,e,4)},Uo.prototype.clone=function(){return new Uo({width:this.width,height:this.height},new Uint8Array(this.data))},Uo.copy=function(e,t,r,n,i){Ua(e,t,r,n,i,4)},sn("AlphaImage",Bo),sn("RGBAImage",Uo);var Vo={paint:new qn({"heatmap-radius":new zn(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fn(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vn(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fn(Ce.paint_heatmap["heatmap-opacity"])})};function Na(e,t){for(var r=new Uint8Array(1024),n={},i=0,o=0;i<256;i++,o+=4){n[t]=i/255;var a=e.evaluate(n);r[o+0]=Math.floor(255*a.r/a.a),r[o+1]=Math.floor(255*a.g/a.a),r[o+2]=Math.floor(255*a.b/a.a),r[o+3]=Math.floor(255*a.a)}return new Uo({width:256,height:1},r)}var Wo=function(t){function e(e){t.call(this,e,Vo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new No(e)},e.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Na(e,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Gn),Ho={paint:new qn({"hillshade-illumination-direction":new Fn(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fn(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fn(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fn(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fn(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fn(Ce.paint_hillshade["hillshade-accent-color"])})},Ko=function(t){function e(e){t.call(this,e,Ho)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Gn),Qo=Nn([{name:"a_pos",components:2,type:"Int16"}],4),ta=Qo.members,da=(Qo.size,Qo.alignment,$a),ma=$a;function $a(e,t,r){r=r||2;var n,i,o,a,s,l,u,c=t&&t.length,p=c?t[0]*r:e.length,h=Wa(e,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Wa(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(uo(a));for(s.sort(ao),i=0;i<s.length;i++)oo(s[i],r),r=Qa(r,r.next);return r}(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<p;d+=r)(s=e[d])<n&&(n=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return to(h,f,r,n,i,u),f}function Wa(e,t,r,n,i){var o,a;if(i===bo(e,t,r,n)>0)for(o=t;o<r;o+=n)a=vo(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=vo(o,e[o],e[o+1],a);return a&&ho(a,a.next)&&(go(a),a=a.next),a}function Qa(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!ho(n,n.next)&&0!==co(n.prev,n,n.next))n=n.next;else{if(go(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function to(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=so(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1)}(i)}(e,n,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?ro(e,n,i,o):eo(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),go(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?to(e=no(e,t,r),t,r,n,i,o,2):2===a&&io(e,t,r,n,i,o):to(Qa(e),t,r,n,i,o,1);break}}}function eo(e){var t=e.prev,r=e,n=e.next;if(co(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(lo(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&co(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ro(e,t,r,n){var i=e.prev,o=e,a=e.next;if(co(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=so(s,l,t,r,n),h=so(u,c,t,r,n),f=e.prevZ,d=e.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==e.prev&&f!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&co(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&co(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function no(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!ho(i,o)&&fo(i,n,n.next,o)&&yo(i,o)&&yo(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),go(n),go(n.next),n=e=o),n=n.next}while(n!==e);return n}function io(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&po(a,s)){var l=mo(a,s);return a=Qa(a,a.next),l=Qa(l,l.next),to(a,t,r,n,i,o),void to(l,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function ao(e,t){return e.x-t.x}function oo(e,t){if(t=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var l,u=r,c=r.x,p=r.y,h=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&lo(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<h||l===h&&n.x>r.x)&&yo(n,e)&&(r=n,h=l),n=n.next;return r}(e,t)){var r=mo(t,e);Qa(r,r.next)}}function so(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function uo(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function lo(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function po(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&fo(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&yo(e,t)&&yo(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function co(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ho(e,t){return e.x===t.x&&e.y===t.y}function fo(e,t,r,n){return!!(ho(e,t)&&ho(r,n)||ho(e,n)&&ho(r,t))||co(e,t,r)>0!=co(e,t,n)>0&&co(r,n,e)>0!=co(r,n,t)>0}function yo(e,t){return co(e.prev,e,e.next)<0?co(e,t,e.next)>=0&&co(e,e.prev,t)>=0:co(e,t,e.prev)<0||co(e,e.next,t)<0}function mo(e,t){var r=new xo(e.i,e.x,e.y),n=new xo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function vo(e,t,r,n){var i=new xo(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function go(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xo(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bo(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function _o(e,t,r,n,i){!function t(e,r,n,i,o){for(;i>n;){if(i-n>600){var a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}var p=e[r],h=n,f=i;for(wo(e,n,r),o(e[i],p)>0&&wo(e,n,i);h<f;){for(wo(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[n],p)?wo(e,n,f):wo(e,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}(e,t,r||0,n||e.length-1,i||Ao)}function wo(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Ao(e,t){return e<t?-1:e>t?1:0}function So(e,t){var r=e.length;if(r<=1)return[e];for(var n,i,o=[],a=0;a<r;a++){var s=S(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&o.push(n),n=[e[a]]):n.push(e[a]))}if(n&&o.push(n),t>1)for(var l=0;l<o.length;l++)o[l].length<=t||(_o(o[l],t,1,o[l].length-1,ko),o[l]=o[l].slice(0,t));return o}function ko(e,t){return t.area-e.area}function zo(e,t,r){for(var n=r.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0);var l=s.constantOr(null);l&&(i=!0,n[l.to]=!0,n[l.from]=!0)}return i}function Io(e,t,r,n,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.paint.get(e+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},r,{}),p=u.evaluate({zoom:n},r,{}),h=u.evaluate({zoom:n+1},r,{});o[c]=!0,o[p]=!0,o[h]=!0,r.patterns[l.id]={min:c,mid:p,max:h}}}return r}$a.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(bo(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(bo(e,u,c,r))}var p=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,d=n[s+2]*r;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},$a.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},da.default=ma;var va=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new pi,this.indexArray2=new hi,this.programConfigurations=new Eo(ta,e.layers,e.zoom),this.segments=new Ri,this.segments2=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};va.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("fill",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("fill",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index)}}},va.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},va.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,t)}},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},va.prototype.addFeature=function(e,t,r,n){for(var i=0,o=So(t,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],f=[],d=0,g=a;d<g.length;d+=1){var m=g[d];if(0!==m.length){m!==a[0]&&f.push(h.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(v+m.length-1,v),h.push(m[0].x),h.push(m[0].y);for(var _=1;_<m.length;_++)this.layoutVertexArray.emplaceBack(m[_].x,m[_].y),this.indexArray2.emplaceBack(v+_-1,v+_),h.push(m[_].x),h.push(m[_].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var b=da(h,f),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n)},sn("FillBucket",va,{omit:["layers","features"]});var _a={paint:new qn({"fill-antialias":new Fn(Ce.paint_fill["fill-antialias"]),"fill-opacity":new zn(Ce.paint_fill["fill-opacity"]),"fill-color":new zn(Ce.paint_fill["fill-color"]),"fill-outline-color":new zn(Ce.paint_fill["fill-outline-color"]),"fill-translate":new Fn(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new Fn(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bn(Ce.paint_fill["fill-pattern"])})},wa=function(t){function e(e){t.call(this,e,_a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(e){return new va(e)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,o,a){return na(ya(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)},e}(Gn),Ea=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Pa=Ea.members,Ca=(Ea.size,Ea.alignment,Math.pow(2,13));function To(e,t,r,n,i,o,a,s){e.emplaceBack(t,r,2*Math.floor(n*Ca)+a,i*Ca*2,o*Ca*2,Math.round(s))}var Ta=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new pi,this.programConfigurations=new Eo(Pa,e.layers,e.zoom),this.segments=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function Lo(e,t){return e.x===t.x&&(e.x<0||e.x>Po)||e.y===t.y&&(e.y<0||e.y>Po)}function Oo(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>Po})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>Po})}Ta.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("fill-extrusion",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("fill-extrusion",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index,!0)}}},Ta.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,t)}},Ta.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},Ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ta.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ta.prototype.addFeature=function(e,t,r,n){for(var i=0,o=So(t,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var f=h[p];if(0!==f.length&&!Oo(f))for(var d=0,g=0;g<f.length;g++){var m=f[g];if(g>=1){var y=f[g-1];if(!Lo(m,y)){c.vertexLength+4>Ri.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=m.sub(y)._perp()._unit(),_=y.dist(m);d+_>32768&&(d=0),To(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,d),To(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,d),d+=_,To(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d),To(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>Ri.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],S=c.vertexLength,E=0,P=a;E<P.length;E+=1){var C=P[E];if(0!==C.length){C!==a[0]&&w.push(x.length/2);for(var T=0;T<C.length;T++){var k=C[T];To(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),x.push(k.x),x.push(k.y)}}}for(var O=da(x,w),A=0;A<O.length;A+=3)this.indexArray.emplaceBack(S+O[A],S+O[A+2],S+O[A+1]);c.primitiveLength+=O.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n)},sn("FillExtrusionBucket",Ta,{omit:["layers","features"]});var Aa={paint:new qn({"fill-extrusion-opacity":new Fn(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fn(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fn(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bn(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fn(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ia=function(t){function e(e){t.call(this,e,Aa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new Ta(e)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,o,a,s){var l=ya(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(t,r),c=this.paint.get("fill-extrusion-base").evaluate(t,r),p=function(e,t,r,n){for(var i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],l=[s.x,s.y,0,1];Sa(l,l,t),i.push(new E(l[0]/l[3],l[1]/l[3]))}return i}(l,s),h=function(e,t,r,n){for(var i=[],o=[],a=n[8]*t,s=n[9]*t,l=n[10]*t,u=n[11]*t,c=n[8]*r,p=n[9]*r,h=n[10]*r,f=n[11]*r,d=0,g=e;d<g.length;d+=1){for(var m=[],y=[],v=0,_=g[d];v<_.length;v+=1){var b=_[v],x=b.x,w=b.y,S=n[0]*x+n[4]*w+n[12],P=n[1]*x+n[5]*w+n[13],C=n[2]*x+n[6]*w+n[14],T=n[3]*x+n[7]*w+n[15],k=C+l,O=T+u,A=S+c,I=P+p,R=C+h,M=T+f,L=new E((S+a)/O,(P+s)/O);L.z=k/O,m.push(L);var j=new E(A/M,I/M);j.z=R/M,y.push(j)}i.push(m),o.push(y)}return[i,o]}(n,c,u,s);return function(e,t,r){var n=1/0;na(r,t)&&(n=qo(r,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var l=o[s],u=o[s+1],c=a[s],p=[l,u,a[s+1],c,l];ea(r,p)&&(n=Math.min(n,qo(r,p)))}return n!==1/0&&n}(h[0],h[1],p)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Gn);function jo(e,t){return e.x*t.x+e.y*t.y}function qo(e,t){if(1===e.length){var r=t[0],n=t[1],i=t[3],o=e[0],a=n.sub(r),s=i.sub(r),l=o.sub(r),u=jo(a,a),c=jo(a,s),p=jo(s,s),h=jo(l,a),f=jo(l,s),d=u*p-c*c,g=(p*h-c*f)/d,m=(u*f-c*h)/d,y=1-g-m;return r.z*y+n.z*g+i.z*m}for(var v=1/0,_=0,b=t;_<b.length;_+=1){var x=b[_];v=Math.min(v,x.z)}return v}var Ra=Nn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ma=Ra.members,La=(Ra.size,Ra.alignment,Go);function Go(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(Xo,this,t)}function Xo(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Zo(e){for(var t,r,n=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n+=((r=e[a]).x-t.x)*(t.y+r.y);return n}Go.types=["Unknown","Point","LineString","Polygon"],Go.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,o=0,a=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)o+=e.readSVarint(),a+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new E(o,a));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Go.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(n<=0){var c=e.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},Go.prototype.toGeoJSON=function(e,t,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=Go.types[this.type];function p(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+s)/o;e[t]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<l.length;n++)c[n]=l[n][0];p(l=c);break;case 2:for(n=0;n<l.length;n++)p(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],o=0;o<t;o++){var a=Zo(e[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)p(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ja=Yo;function Yo(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Jo,this,t),this.length=this._features.length}function Jo(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}function $o(e,t,r){if(3===e){var n=new ja(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}Yo.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new La(this._pbf,t,this.extent,this._keys,this._values)};var za={VectorTile:function(e,t){this.layers=e.readFields($o,{},t)},VectorTileFeature:La,VectorTileLayer:ja},Ba=za.VectorTileFeature.types,Va=63,qa=Math.cos(Math.PI/180*37.5),Ga=.5,Ha=Math.pow(2,14)/Ga;function is(e,t,r,n,i,o,a){e.emplaceBack(t.x,t.y,n?1:0,i?1:-1,Math.round(Va*r.x)+128,Math.round(Va*r.y)+128,1+(0===o?0:o<0?-1:1)|(a*Ga&63)<<2,a*Ga>>6)}var Xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Qn,this.indexArray=new pi,this.programConfigurations=new Eo(Ma,e.layers,e.zoom),this.segments=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function os(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(Ha-1)}Xa.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("line",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("line",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index)}}},Xa.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},Xa.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],o=i.geometry;this.addFeature(i,o,i.index,t)}},Xa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ma),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xa.prototype.addFeature=function(e,t,r,n){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),l=i.get("line-round-limit"),u=0,c=t;u<c.length;u+=1){var p=c[u];this.addLine(p,e,o,a,s,l,r,n)}},Xa.prototype.addLine=function(e,t,r,n,i,o,a,s){var l=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===Ba[t.type],c=e.length;c>=2&&e[c-1].equals(e[c-2]);)c--;for(var p=0;p<c-1&&e[p].equals(e[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=function(e,t,r){for(var n,i,o=0,a=p;a<r-1;a++)n=e[a],i=e[a+1],o+=n.dist(i);return o}(e,0,c)),"bevel"===r&&(i=1.05);var h=Po/(512*this.overscaling)*15,f=e[p],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var g,m,y,v=n,_=u?"butt":n,b=!0,x=void 0,w=void 0,S=void 0,E=void 0;this.e1=this.e2=this.e3=-1,u&&(g=e[c-2],E=f.sub(g)._unit()._perp());for(var P=p;P<c;P++)if(!(w=u&&P===c-1?e[p+1]:e[P+1])||!e[P].equals(w)){E&&(S=E),g&&(x=g),g=e[P],E=w?w.sub(g)._unit()._perp():S;var C=(S=S||E).add(E);0===C.x&&0===C.y||C._unit();var T=C.x*E.x+C.y*E.y,k=0!==T?1/T:1/0,O=T<qa&&x&&w;if(O&&P>p){var A=g.dist(x);if(A>2*h){var I=g.sub(g.sub(x)._mult(h/A)._round());this.distance+=I.dist(x),this.addCurrentVertex(I,this.distance,S.mult(1),0,0,!1,d,l),x=I}}var R=x&&w,M=R?r:w?v:_;if(R&&"round"===M&&(k<o?M="miter":k<=2&&(M="fakeround")),"miter"===M&&k>i&&(M="bevel"),"bevel"===M&&(k>2&&(M="flipbevel"),k<i&&(M="miter")),x&&(this.distance+=g.dist(x)),"miter"===M)C._mult(k),this.addCurrentVertex(g,this.distance,C,0,0,!1,d,l);else if("flipbevel"===M){if(k>100)C=E.clone().mult(-1);else{var L=S.x*E.y-S.y*E.x>0?-1:1,j=k*S.add(E).mag()/S.sub(E).mag();C._perp()._mult(j*L)}this.addCurrentVertex(g,this.distance,C,0,0,!1,d,l),this.addCurrentVertex(g,this.distance,C.mult(-1),0,0,!1,d,l)}else if("bevel"===M||"fakeround"===M){var D=S.x*E.y-S.y*E.x>0,F=-Math.sqrt(k*k-1);if(D?(y=0,m=F):(m=0,y=F),b||this.addCurrentVertex(g,this.distance,S,m,y,!1,d,l),"fakeround"===M){for(var N=Math.floor(8*(.5-(T-.5))),z=void 0,B=0;B<N;B++)z=E.mult((B+1)/(N+1))._add(S)._unit(),this.addPieSliceVertex(g,this.distance,z,D,d,l);this.addPieSliceVertex(g,this.distance,C,D,d,l);for(var U=N-1;U>=0;U--)z=S.mult((U+1)/(N+1))._add(E)._unit(),this.addPieSliceVertex(g,this.distance,z,D,d,l)}w&&this.addCurrentVertex(g,this.distance,E,-m,-y,!1,d,l)}else"butt"===M?(b||this.addCurrentVertex(g,this.distance,S,0,0,!1,d,l),w&&this.addCurrentVertex(g,this.distance,E,0,0,!1,d,l)):"square"===M?(b||(this.addCurrentVertex(g,this.distance,S,1,1,!1,d,l),this.e1=this.e2=-1),w&&this.addCurrentVertex(g,this.distance,E,-1,-1,!1,d,l)):"round"===M&&(b||(this.addCurrentVertex(g,this.distance,S,0,0,!1,d,l),this.addCurrentVertex(g,this.distance,S,1,1,!0,d,l),this.e1=this.e2=-1),w&&(this.addCurrentVertex(g,this.distance,E,-1,-1,!0,d,l),this.addCurrentVertex(g,this.distance,E,0,0,!1,d,l)));if(O&&P<c-1){var V=g.dist(w);if(V>2*h){var q=g.add(w.sub(g)._mult(h/V)._round());this.distance+=q.dist(g),this.addCurrentVertex(q,this.distance,E.mult(1),0,0,!1,d,l),g=q}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,s)}},Xa.prototype.addCurrentVertex=function(e,t,r,n,i,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(t=os(t,s)),l=r.clone(),n&&l._sub(r.perp()._mult(n)),is(u,e,l,o,!1,n,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=r.mult(-1),i&&l._sub(r.perp()._mult(i)),is(u,e,l,o,!0,-i,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>Ha/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,r,n,i,o,a))},Xa.prototype.addPieSliceVertex=function(e,t,r,n,i,o){r=r.mult(n?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(t=os(t,o)),is(a,e,r,!1,n,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},sn("LineBucket",Xa,{omit:["layers","features"]});var Ka=new qn({"line-cap":new Fn(Ce.layout_line["line-cap"]),"line-join":new zn(Ce.layout_line["line-join"]),"line-miter-limit":new Fn(Ce.layout_line["line-miter-limit"]),"line-round-limit":new Fn(Ce.layout_line["line-round-limit"])}),Za={paint:new qn({"line-opacity":new zn(Ce.paint_line["line-opacity"]),"line-color":new zn(Ce.paint_line["line-color"]),"line-translate":new Fn(Ce.paint_line["line-translate"]),"line-translate-anchor":new Fn(Ce.paint_line["line-translate-anchor"]),"line-width":new zn(Ce.paint_line["line-width"]),"line-gap-width":new zn(Ce.paint_line["line-gap-width"]),"line-offset":new zn(Ce.paint_line["line-offset"]),"line-blur":new zn(Ce.paint_line["line-blur"]),"line-dasharray":new Un(Ce.paint_line["line-dasharray"]),"line-pattern":new Bn(Ce.paint_line["line-pattern"]),"line-gradient":new Vn(Ce.paint_line["line-gradient"])}),layout:Ka},Ya=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new kn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=c({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(zn))(Za.paint.properties["line-width"].specification);Ya.useIntegerZoom=!0;var Ja=function(t){function e(e){t.call(this,e,Za)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},e.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Na(e,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Ya.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(e){return new Xa(e)},e.prototype.queryRadius=function(e){var t=e,r=cs(ha("line-width",this,t),ha("line-gap-width",this,t)),n=ha("line-offset",this,t);return r/2+Math.abs(n)+fa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,o,a){var s=ya(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*cs(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),u=this.paint.get("line-offset").evaluate(t,r);return u&&(n=function(e,t){for(var r=[],n=new E(0,0),i=0;i<e.length;i++){for(var o=e[i],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],p=0===s?n:u.sub(l)._unit()._perp(),h=s===o.length-1?n:c.sub(u)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(t)._add(u))}r.push(a)}return r}(n,u*a)),function(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];if(e.length>=3)for(var o=0;o<i.length;o++)if(pa(e,i[o]))return!0;if(ia(e,i,r))return!0}return!1}(s,n,l)},e}(Gn);function cs(e,t){return t>0?t+2*e:e}var es=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),ts=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4),rs=(Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Nn([{name:"a_placed",components:2,type:"Uint8"}],4)),ns=(Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),as=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function vs(e,t,r){return e.sections.forEach(function(e){e.text=function(e,t,r){var n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),Tn.applyArabicShaping&&(e=Tn.applyArabicShaping(e)),e}(e.text,t,r)}),e}Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ss={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},ls=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(E);function _s(e,t){var r=t.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new kn(e+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=e;)i++;for(var o=i=Math.max(0,i-1);o<n.length&&n[o]<e+1;)o++;o=Math.min(n.length-1,o);var a={min:n[i],max:n[o]};return"composite"===r.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:r.evaluate(new kn(e+1)),zoomRange:a,sizeRange:{min:r.evaluate(new kn(a.min)),max:r.evaluate(new kn(a.max))},propertyValue:t.value}}sn("Anchor",ls);var us=za.VectorTileFeature.types,ps=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ss(e,t,r,n,i,o,a,s){e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function ks(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}var hs=function(e){this.layoutVertexArray=new ei,this.indexArray=new pi,this.programConfigurations=e,this.segments=new Ri,this.dynamicLayoutVertexArray=new ti,this.opacityVertexArray=new ri,this.placedSymbolArray=new _i};hs.prototype.upload=function(e,t,r,n){r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,es.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ts.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ps,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e)},hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},sn("SymbolBuffers",hs);var fs=function(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new Ri,this.collisionVertexArray=new oi};fs.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,rs.members,!0)},fs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},sn("CollisionBuffers",fs);var ds=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_s(this.zoom,t["text-size"]),this.iconSizeData=_s(this.zoom,t["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);var o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id}),this.sourceID=e.sourceID};ds.prototype.createArrays=function(){this.text=new hs(new Eo(es.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new hs(new Eo(es.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new fs(ii,ns.members,hi),this.collisionCircle=new fs(ii,as.members,pi),this.glyphOffsetArray=new Si,this.lineVertexArray=new Ci,this.symbolInstances=new xi},ds.prototype.calculateGlyphDependencies=function(e,t,r,n){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,r&&n){var o=ss[e.charAt(i)];o&&(t[o.charCodeAt(0)]=!0)}},ds.prototype.populate=function(e,t){var r=this.layers[0],n=r.layout,i=n.get("text-font"),o=n.get("text-field"),a=n.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),l="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,u=n.get("symbol-sort-key");if(this.features=[],s||l){for(var c=t.iconDependencies,p=t.glyphDependencies,h=new kn(this.zoom),f=0,d=e;f<d.length;f+=1){var g=d[f],m=g.feature,y=g.index,v=g.sourceLayerIndex;if(r._featureFilter(h,m)){var _=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",m);_=vs(b instanceof rt?b:rt.fromString(b),r,m)}var x=void 0;if(l&&(x=r.getValueAndResolveTokens("icon-image",m)),_||x){var w=this.sortFeaturesByKey?u.evaluate(m,{}):void 0,S={text:_,icon:x,index:y,sourceLayerIndex:v,geometry:Wi(m),properties:m.properties,type:us[m.type],sortKey:w};if(void 0!==m.id&&(S.id=m.id),this.features.push(S),x&&(c[x]=!0),_)for(var E=i.evaluate(m,{}).join(","),P="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),C=0,T=_.sections;C<T.length;C+=1){var k=T[C],O=fn(_.toString()),A=k.fontStack||E,I=p[A]=p[A]||{};this.calculateGlyphDependencies(k.text,I,P,O)}}}}"line"===n.get("symbol-placement")&&(this.features=function(e){var t={},r={},n=[],i=0;function a(t){n.push(e[t]),i++}function o(e,t,i){var o=r[e];return delete r[e],r[t]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function s(e,r,i){var o=t[r];return delete t[r],t[e]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function u(e,t,r){var n=r?t[0][t[0].length-1]:t[0][0];return e+":"+n.x+":"+n.y}for(var l=0;l<e.length;l++){var c=e[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in r&&d in t&&r[f]!==t[d]){var g=s(f,d,p),m=o(f,d,n[g].geometry);delete t[f],delete r[d],r[u(h,n[m].geometry,!0)]=m,n[g].geometry=null}else f in r?o(f,d,p):d in t?s(f,d,p):(a(l),t[f]=i-1,r[d]=i-1)}else a(l)}return n.filter(function(e){return e.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(e,t){return e.sortKey-t.sortKey})}},ds.prototype.update=function(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))},ds.prototype.isEmpty=function(){return 0===this.symbolInstances.length},ds.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ds.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ds.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},ds.prototype.addToLineVertexArray=function(e,t){var r=this.lineVertexArray.length;if(void 0!==e.segment){for(var n=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:n},a<t.length-1&&(n+=t[a+1].dist(t[a]));for(var s=e.segment||0;s>=0;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},ds.prototype.addSymbols=function(e,t,r,n,i,o,a,s,l,u){for(var c=e.indexArray,p=e.layoutVertexArray,h=e.dynamicLayoutVertexArray,f=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray,o.sortKey),d=this.glyphOffsetArray.length,g=f.vertexLength,m=0,y=t;m<y.length;m+=1){var v=y[m],_=v.tl,b=v.tr,x=v.bl,w=v.br,S=v.tex,E=f.vertexLength,P=v.glyphOffset[1];Ss(p,s.x,s.y,_.x,P+_.y,S.x,S.y,r),Ss(p,s.x,s.y,b.x,P+b.y,S.x+S.w,S.y,r),Ss(p,s.x,s.y,x.x,P+x.y,S.x,S.y+S.h,r),Ss(p,s.x,s.y,w.x,P+w.y,S.x+S.w,S.y+S.h,r),ks(h,s,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,g,l,u,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,o,o.index,{})},ds.prototype._addCollisionDebugVertex=function(e,t,r,n,i,o){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,n,i,Math.round(o.x),Math.round(o.y))},ds.prototype.addCollisionDebugVertices=function(e,t,r,n,i,o,a,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;if(this._addCollisionDebugVertex(c,p,o,h,f,new E(e,t)),this._addCollisionDebugVertex(c,p,o,h,f,new E(r,t)),this._addCollisionDebugVertex(c,p,o,h,f,new E(r,n)),this._addCollisionDebugVertex(c,p,o,h,f,new E(e,n)),l.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(u,u+1,u+2),d.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var g=i.indexArray;g.emplaceBack(u,u+1),g.emplaceBack(u+1,u+2),g.emplaceBack(u+2,u+3),g.emplaceBack(u+3,u),l.primitiveLength+=4}},ds.prototype.addDebugCollisionBoxes=function(e,t,r){for(var n=e;n<t;n++){var i=this.collisionBoxArray.get(n),o=i.x1,a=i.y1,s=i.x2,l=i.y2,u=i.radius>0;this.addCollisionDebugVertices(o,a,s,l,u?this.collisionCircle:this.collisionBox,i.anchorPoint,r,u)}},ds.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},ds.prototype._deserializeCollisionBoxesForSymbol=function(e,t,r,n,i){for(var o={},a=t;a<r;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=n;l<i;l++){var u=e.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},o.iconFeatureIndex=u.featureIndex;break}}return o},ds.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},ds.prototype.hasTextData=function(){return this.text.segments.get().length>0},ds.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ds.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},ds.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},ds.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),r=t.vertexStartIndex+4*t.numGlyphs,n=t.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},ds.prototype.sortFeatures=function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var t=[],r=0;r<this.symbolInstances.length;r++)t.push(r);for(var n=Math.sin(e),i=Math.cos(e),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var l=this.symbolInstances.get(s);o.push(0|Math.round(n*l.anchorX+i*l.anchorY)),a.push(l.featureIndex)}t.sort(function(e,t){return o[e]-o[t]||a[t]-a[e]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,c=t;u<c.length;u+=1){var p=c[u],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(p);if(f.numGlyphs){var d=f.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},sn("SymbolBucket",ds,{omit:["layers","collisionBoxArray","features","compareText"]}),ds.MAX_GLYPHS=65535,ds.addDynamicAttributes=ks;var gs=new qn({"symbol-placement":new Fn(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new Fn(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fn(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fn(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fn(Ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fn(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fn(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fn(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(Ce.layout_symbol["icon-size"]),"icon-text-fit":new Fn(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fn(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(Ce.layout_symbol["icon-image"]),"icon-rotate":new zn(Ce.layout_symbol["icon-rotate"]),"icon-padding":new Fn(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new Fn(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(Ce.layout_symbol["icon-offset"]),"icon-anchor":new zn(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fn(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fn(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fn(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new zn(Ce.layout_symbol["text-field"]),"text-font":new zn(Ce.layout_symbol["text-font"]),"text-size":new zn(Ce.layout_symbol["text-size"]),"text-max-width":new zn(Ce.layout_symbol["text-max-width"]),"text-line-height":new Fn(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new zn(Ce.layout_symbol["text-justify"]),"text-anchor":new zn(Ce.layout_symbol["text-anchor"]),"text-max-angle":new Fn(Ce.layout_symbol["text-max-angle"]),"text-rotate":new zn(Ce.layout_symbol["text-rotate"]),"text-padding":new Fn(Ce.layout_symbol["text-padding"]),"text-keep-upright":new Fn(Ce.layout_symbol["text-keep-upright"]),"text-transform":new zn(Ce.layout_symbol["text-transform"]),"text-offset":new zn(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new Fn(Ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fn(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new Fn(Ce.layout_symbol["text-optional"])}),ms={paint:new qn({"icon-opacity":new zn(Ce.paint_symbol["icon-opacity"]),"icon-color":new zn(Ce.paint_symbol["icon-color"]),"icon-halo-color":new zn(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new Fn(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fn(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(Ce.paint_symbol["text-opacity"]),"text-color":new zn(Ce.paint_symbol["text-color"]),"text-halo-color":new zn(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new zn(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(Ce.paint_symbol["text-halo-blur"]),"text-translate":new Fn(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new Fn(Ce.paint_symbol["text-translate-anchor"])}),layout:gs},ys=function(t){function e(e){t.call(this,e,ms)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(e,t){var r,n=this.layout.get(e).evaluate(t,{}),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||yr(i.value)?n:(r=t.properties,n.replace(/{([^{}]+)}/g,function(e,t){return t in r?String(r[t]):""}))},e.prototype.createBucket=function(e){return new ds(e)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Gn),bs={paint:new qn({"background-color":new Fn(Ce.paint_background["background-color"]),"background-pattern":new Un(Ce.paint_background["background-pattern"]),"background-opacity":new Fn(Ce.paint_background["background-opacity"])})},xs=function(t){function e(e){t.call(this,e,bs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Gn),ws={paint:new qn({"raster-opacity":new Fn(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fn(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fn(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fn(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new Fn(Ce.paint_raster["raster-saturation"]),"raster-contrast":new Fn(Ce.paint_raster["raster-contrast"]),"raster-resampling":new Fn(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new Fn(Ce.paint_raster["raster-fade-duration"])})},Es=function(t){function e(e){t.call(this,e,ws)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Gn),Ps=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},e.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e)},e}(Gn),Cs={circle:Fo,heatmap:Wo,hillshade:Ko,fill:wa,"fill-extrusion":Ia,line:Ja,symbol:ys,background:xs,raster:Es};function Ds(e){for(var t=0,r=0,n=0,i=e;n<i.length;n+=1){var o=i[n];t+=o.w*o.h,r=Math.max(r,o.w)}e.sort(function(e,t){return t.h-e.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}var Ts=function(e,t){var r=t.pixelRatio;this.paddedRect=e,this.pixelRatio=r},Os={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Os.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Os.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Os.tlbr.get=function(){return this.tl.concat(this.br)},Os.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ts.prototype,Os);var As=function(e,t){var r={},n={},i=[];for(var o in e){var a=e[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),r[o]=new Ts(s,a)}for(var l in t){var u=t[l],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};i.push(c),n[l]=new Ts(c,u)}var p=Ds(i),h=p.w,f=p.h,d=new Uo({width:h||1,height:f||1});for(var g in e){var m=e[g],y=r[g].paddedRect;Uo.copy(m.data,d,{x:0,y:0},{x:y.x+1,y:y.y+1},m.data)}for(var v in t){var _=t[v],b=n[v].paddedRect,x=b.x+1,w=b.y+1,S=_.data.width,E=_.data.height;Uo.copy(_.data,d,{x:0,y:0},{x:x,y:w},_.data),Uo.copy(_.data,d,{x:0,y:E-1},{x:x,y:w-1},{width:S,height:1}),Uo.copy(_.data,d,{x:0,y:0},{x:x,y:w+E},{width:S,height:1}),Uo.copy(_.data,d,{x:S-1,y:0},{x:x-1,y:w},{width:1,height:E}),Uo.copy(_.data,d,{x:0,y:0},{x:x+S,y:w},{width:1,height:E})}this.image=d,this.iconPositions=r,this.patternPositions=n};sn("ImagePosition",Ts),sn("ImageAtlas",As);var Is=self.HTMLImageElement,Rs=self.HTMLCanvasElement,Ms=self.HTMLVideoElement,Ls=self.ImageData,js=function(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)};js.prototype.update=function(e,t){var r=e.width,n=e.height,i=!this.size||this.size[0]!==r||this.size[1]!==n,o=this.context,a=o.gl;this.useMipmap=Boolean(t&&t.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),i?(this.size=[r,n],e instanceof Is||e instanceof Rs||e instanceof Ms||e instanceof Ls?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,r,n,0,this.format,a.UNSIGNED_BYTE,e.data)):e instanceof Is||e instanceof Rs||e instanceof Ms||e instanceof Ls?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,0,0,r,n,a.RGBA,a.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},js.prototype.bind=function(e,t,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)},js.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},js.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Fs=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)},Ns=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+f]=255&a,f+=d,a/=256,u-=8);e[r+f-d]|=128*g},zs=Js;function Js(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function $s(e){return e.type===Js.Bytes?e.readVarint()+e.pos:e.pos+1}function Ws(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Qs(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function tu(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function eu(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function ru(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function nu(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function iu(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function au(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function ou(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function su(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function uu(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pu(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function cu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Js.Varint=0,Js.Fixed64=1,Js.Bytes=2,Js.Fixed32=5,Js.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=cu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*cu(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Fs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Fs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Ws(e,n,t);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Ws(e,n,t);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Ws(e,n,t);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Ws(e,n,t);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Ws(e,n,t);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Ws(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,r){for(var n="",i=t;i<r;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=$s(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Js.Varint)for(;this.buf[this.pos++]>127;);else if(t===Js.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Js.Fixed32)this.pos+=4;else{if(t!==Js.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,o=0;o<t.length;o++){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Qs(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Ns(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ns(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&Qs(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Js.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,tu,t)},writePackedSVarint:function(e,t){this.writeMessage(e,eu,t)},writePackedBoolean:function(e,t){this.writeMessage(e,iu,t)},writePackedFloat:function(e,t){this.writeMessage(e,ru,t)},writePackedDouble:function(e,t){this.writeMessage(e,nu,t)},writePackedFixed32:function(e,t){this.writeMessage(e,au,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,ou,t)},writePackedFixed64:function(e,t){this.writeMessage(e,su,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,uu,t)},writeBytesField:function(e,t){this.writeTag(e,Js.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Js.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Js.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Js.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Js.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Js.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Js.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Js.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Js.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Js.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Bs=3;function fu(e,t,r){1===e&&r.readMessage(yu,t)}function yu(e,t,r){if(3===e){var n=r.readMessage(du,{}),i=n.id,o=n.bitmap,a=n.width,s=n.height,l=n.left,u=n.top,c=n.advance;t.push({id:i,bitmap:new Bo({width:a+2*Bs,height:s+2*Bs},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function du(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}var Us=Bs,Vs=function(e,t,r){this.target=e,this.parent=t,this.mapId=r,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function gu(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}Vs.prototype.send=function(e,t,r,n){var i=this,o=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[o]=r);var a=[];if(this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:e,id:String(o),data:ln(t,a)},a),r)return{cancel:function(){return i.target.postMessage({targetMapId:n,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},Vs.prototype.receive=function(e){var t,r=this,n=e.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var o=function(e,t){delete r.callbacks[i];var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:e?ln(e):null,data:ln(t,n)},n)};if("<response>"===n.type||"<cancel>"===n.type)t=this.callbacks[n.id],delete this.callbacks[n.id],t&&n.error?t(pn(n.error)):t&&t(null,pn(n.data));else if(void 0!==n.id&&this.parent[n.type]){this.callbacks[n.id]=null;var a=this.parent[n.type](n.sourceMapId,pn(n.data),o);a&&null===this.callbacks[n.id]&&(this.callbacks[n.id]=a)}else if(void 0!==n.id&&this.parent.getWorkerSource){var s=n.type.split("."),l=pn(n.data);this.parent.getWorkerSource(n.sourceMapId,s[0],l.source)[s[1]](l,o)}else this.parent[n.type](pn(n.data))}},Vs.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var qs=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};qs.prototype.setNorthEast=function(e){return this._ne=e instanceof Gs?new Gs(e.lng,e.lat):Gs.convert(e),this},qs.prototype.setSouthWest=function(e){return this._sw=e instanceof Gs?new Gs(e.lng,e.lat):Gs.convert(e),this},qs.prototype.extend=function(e){var t,r,n=this._sw,i=this._ne;if(e instanceof Gs)t=e,r=e;else{if(!(e instanceof qs))return Array.isArray(e)?e.every(Array.isArray)?this.extend(qs.convert(e)):this.extend(Gs.convert(e)):this;if(t=e._sw,r=e._ne,!t||!r)return this}return n||i?(n.lng=Math.min(t.lng,n.lng),n.lat=Math.min(t.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Gs(t.lng,t.lat),this._ne=new Gs(r.lng,r.lat)),this},qs.prototype.getCenter=function(){return new Gs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},qs.prototype.getSouthWest=function(){return this._sw},qs.prototype.getNorthEast=function(){return this._ne},qs.prototype.getNorthWest=function(){return new Gs(this.getWest(),this.getNorth())},qs.prototype.getSouthEast=function(){return new Gs(this.getEast(),this.getSouth())},qs.prototype.getWest=function(){return this._sw.lng},qs.prototype.getSouth=function(){return this._sw.lat},qs.prototype.getEast=function(){return this._ne.lng},qs.prototype.getNorth=function(){return this._ne.lat},qs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},qs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},qs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},qs.convert=function(e){return!e||e instanceof qs?e:new qs(e)};var Gs=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function _u(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function wu(e){return(180+e)/360}function Au(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Su(e,t){return e/_u(t)}function ku(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}Gs.prototype.wrap=function(){return new Gs(p(this.lng,-180,180),this.lat)},Gs.prototype.toArray=function(){return[this.lng,this.lat]},Gs.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Gs.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new qs(new Gs(this.lng-r,this.lat-t),new Gs(this.lng+r,this.lat+t))},Gs.convert=function(e){if(e instanceof Gs)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Gs(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Gs(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Hs=function(e,t,r){void 0===r&&(r=0),this.x=+e,this.y=+t,this.z=+r};Hs.fromLngLat=function(e,t){void 0===t&&(t=0);var r=Gs.convert(e);return new Hs(wu(r.lng),Au(r.lat),Su(t,r.lat))},Hs.prototype.toLngLat=function(){return new Gs(360*this.x-180,ku(this.y))},Hs.prototype.toAltitude=function(){return this.z*_u(ku(this.y))};var Xs=function(e,t,r){this.z=e,this.x=t,this.y=r,this.key=Pu(0,e,t,r)};Xs.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Xs.prototype.url=function(e,t){var r,n,i,o,a,s=(r=this.x,n=this.y,i=this.z,o=gu(256*r,256*(n=Math.pow(2,i)-n-1),i),a=gu(256*(r+1),256*(n+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(e,t,r){for(var n,i="",o=e;o>0;o--)i+=(t&(n=1<<o-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Xs.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new E((e.x*t-this.x)*Po,(e.y*t-this.y)*Po)};var Ks=function(e,t){this.wrap=e,this.canonical=t,this.key=Pu(e,t.z,t.x,t.y)},Zs=function(e,t,r,n,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Xs(r,+n,+i),this.key=Pu(t,e,n,i)};function Pu(e,t,r,n){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*n+r)+t}Zs.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Zs.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Zs(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zs(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Zs.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Zs.prototype.children=function(e){if(this.overscaledZ>=e)return[new Zs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Zs(t,this.wrap,t,r,n),new Zs(t,this.wrap,t,r+1,n),new Zs(t,this.wrap,t,r,n+1),new Zs(t,this.wrap,t,r+1,n+1)]},Zs.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Zs.prototype.wrapped=function(){return new Zs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zs.prototype.unwrapTo=function(e){return new Zs(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Zs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zs.prototype.toUnwrapped=function(){return new Ks(this.wrap,this.canonical)},Zs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zs.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Hs(e.x-this.wrap,e.y))},sn("CanonicalTileID",Xs),sn("OverscaledTileID",Zs,{omit:["posMatrix"]});var Ys=function(e,t,r){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return w('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=t.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,o="terrarium"===r?this._unpackTerrarium:this._unpackMapbox,a=0;a<n;a++)for(var s=0;s<n;s++){var l=4*(a*n+s);this.set(s,a,o(i[l],i[l+1],i[l+2]))}for(var u=0;u<n;u++)this.set(-1,u,this.get(0,u)),this.set(n,u,this.get(n-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,n,this.get(u,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))};Ys.prototype.set=function(e,t,r){this.data[this._idx(e,t)]=r+65536},Ys.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},Ys.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Ys.prototype._unpackMapbox=function(e,t,r){return(256*e*256+256*t+r)/10-1e4},Ys.prototype._unpackTerrarium=function(e,t,r){return 256*e+t+r/256-32768},Ys.prototype.getPixels=function(){return new Uo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ys.prototype.backfillBorder=function(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var n=t*this.dim,i=t*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,l=-r*this.dim,u=o;u<a;u++)for(var c=n;c<i;c++)this.set(c,u,e.get(c+s,u+l))},sn("DEMData",Ys);var el=Nn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),tl=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}};tl.prototype.encode=function(e){return this._stringToNumber[e]},tl.prototype.decode=function(e){return this._numberToString[e]};var rl=function(e,t,r,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=n,this.properties=e.properties,null!=e.id&&(this.id=e.id)},nl={geometry:{configurable:!0}};nl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},nl.geometry.set=function(e){this._geometry=e},rl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(rl.prototype,nl);var il=function(){this.state={},this.stateChanges={},this.deletedStates={}};il.prototype.updateState=function(e,t,r){var n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},c(this.stateChanges[e][n],r),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==n&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][n])for(var o in this.deletedStates[e][n]={},this.state[e][n])r[o]||(this.deletedStates[e][n][o]=null);else for(var a in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][a]&&delete this.deletedStates[e][n][a]},il.prototype.removeFeatureState=function(e,t,r){if(null!==this.deletedStates[e]){var n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}},il.prototype.getState=function(e,t){var r=String(t),n=this.state[e]||{},i=this.stateChanges[e]||{},o=c({},n[r],i[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][t];if(null===a)return{};for(var s in a)delete o[s]}return o},il.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},il.prototype.coalesceChanges=function(e,t){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),c(this.state[n][o],this.stateChanges[n][o]),i[o]=this.state[n][o];r[n]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a]){for(var l in this.state[a])s[l]={};this.state[a]={}}else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var p=0,h=Object.keys(this.deletedStates[a][u]);p<h.length;p+=1){var f=h[p];delete this.state[a][u][f]}s[u]=this.state[a][u]}r[a]=r[a]||{},c(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var d in e)e[d].setFeatureState(r,t)};var ol=function(e,t,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new un(Po,16,0),this.grid3D=new un(Po,16,0),this.featureIndexArray=r||new ki};function Du(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:t,minY:r,maxX:n,maxY:i}}function Uu(e,t){return t-e}ol.prototype.insert=function(e,t,r,n,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=o?this.grid3D:this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<Po&&c[1]<Po&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},ol.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new za.VectorTile(new zs(this.rawTileData)).layers,this.sourceLayerCoder=new tl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ol.prototype.query=function(e,t,r){var n=this;this.loadVTLayers();for(var i=e.params||{},o=Po/e.tileSize/e.scale,a=Er(i.filter),s=e.queryGeometry,l=e.queryPadding*o,u=Du(s),c=this.grid.query(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l),p=Du(e.cameraQueryGeometry),h=0,f=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,function(t,r,n,i){return function(e,t,r,n,i){for(var o=0,a=e;o<a.length;o+=1){var s=a[o];if(t<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return!0}var l=[new E(t,r),new E(t,i),new E(n,i),new E(n,r)];if(e.length>2)for(var u=0,c=l;u<c.length;u+=1)if(pa(e,c[u]))return!0;for(var p=0;p<e.length-1;p++)if(ca(e[p],e[p+1],l))return!0;return!1}(e.cameraQueryGeometry,t-l,r-l,n+l,i+l)});h<f.length;h+=1){var d=f[h];c.push(d)}c.sort(Uu);for(var g,m={},y=function(l){var u=c[l];if(u!==g){g=u;var p=n.featureIndexArray.get(u),h=null;n.loadMatchingFeature(m,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,a,i.layers,t,function(t,i){h||(h=Wi(t));var a={};return t.id&&(a=r.getState(i.sourceLayer||"_geojsonTileLayer",t.id)),i.queryIntersectsFeature(s,t,a,h,n.z,e.transform,o,e.pixelPosMatrix)})}},v=0;v<c.length;v++)y(v);return m},ol.prototype.loadMatchingFeature=function(e,t,r,n,i,o,a,s){var l=this.bucketLayerIDs[t];if(!o||function(e,t){for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(o,l)){var u=this.sourceLayerCoder.decode(r),c=this.vtLayers[u].feature(n);if(i(new kn(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f){var d=!s||s(c,f);if(d){var g=new rl(c,this.z,this.x,this.y);g.layer=f.serialize();var m=e[h];void 0===m&&(m=e[h]=[]),m.push({featureIndex:n,feature:g,intersectionZ:d})}}}}}},ol.prototype.lookupSymbolFeatures=function(e,t,r,n,i,o){var a={};this.loadVTLayers();for(var s=Er(n),l=0,u=e;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,t,r,c,s,i,o)}return a},ol.prototype.hasLayer=function(e){for(var t=0,r=this.bucketLayerIDs;t<r.length;t+=1)for(var n=0,i=r[t];n<i.length;n+=1)if(e===i[n])return!0;return!1},sn("FeatureIndex",ol,{omit:["rawTileData","sourceLayerCoder"]});var al=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};al.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<F.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},al.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},al.prototype.loadVectorData=function(e,t,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var n in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var r={};if(!t)return r;for(var n=function(){var e=o[i],n=e.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==n.length){e.layers=n,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map(function(e){return n.filter(function(t){return t.id===e})[0]}));for(var a=0,s=n;a<s.length;a+=1){var l=s[a];r[l.id]=e}}},i=0,o=e;i<o.length;i+=1)n();return r}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof ds){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(a))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new yi},al.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},al.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},al.prototype.getBucket=function(e){return this.buckets[e.id]},al.prototype.upload=function(e){for(var t in this.buckets){var r=this.buckets[t];r.uploadPending()&&r.upload(e)}var n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new js(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new js(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},al.prototype.queryRenderedFeatures=function(e,t,r,n,i,o,a,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:o,queryPadding:this.queryPadding*s},e,t):{}},al.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=t?t.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var o=Er(t&&t.filter),a=this.tileID.canonical,s=a.z,l=a.x,u=a.y,c={z:s,x:l,y:u},p=0;p<i.length;p++){var h=i.feature(p);if(o(new kn(this.tileID.overscaledZ),h)){var f=new rl(h,s,l,u);f.tile=c,e.push(f)}}}},al.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},al.prototype.setMask=function(e,t){if(!o(this.mask,e)&&(this.mask=e,this.clearMask(),!o(e,{0:!0}))){var r=new Yn,n=new pi;this.segments=new Ri,this.segments.prepareSegment(0,r,n);for(var i=Object.keys(e),a=0;a<i.length;a++){var s=e[i[a]],l=Po>>s.z,u=new E(s.x*l,s.y*l),c=new E(u.x+l,u.y+l),p=this.segments.prepareSegment(4,r,n);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(c.x,u.y,c.x,u.y),r.emplaceBack(u.x,c.y,u.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;n.emplaceBack(h,h+1,h+2),n.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(r,el.members),this.maskedIndexBuffer=t.createIndexBuffer(n)}},al.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},al.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},al.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var r=function(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(e,r,n,i){var o=n||i;return t[r]=!o||o.toLowerCase(),""}),t["max-age"]){var r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t}(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=n+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},al.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},al.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=e[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(n).queryRadius(i))))}}},al.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},al.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},al.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},al.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=F.now()+e};var sl={horizontal:1,vertical:2,horizontalOnly:3},ll=function(){this.text="",this.sectionIndex=[],this.sections=[]};ll.fromFeature=function(e,t){for(var r=new ll,n=0;n<e.sections.length;n++){var i=e.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),r.text+=i.text;for(var o=0;o<i.text.length;o++)r.sectionIndex.push(n)}return r},ll.prototype.length=function(){return this.text.length},ll.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ll.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ll.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r+1)||null,i=e.charCodeAt(r-1)||null;n&&mn(n)&&!ss[e[r+1]]||i&&mn(i)&&!ss[e[r-1]]||!ss[e[r]]?t+=e[r]:t+=ss[e[r]]}return t}(this.text)},ll.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ul[this.text.charCodeAt(t)];t++)e++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=e&&ul[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)},ll.prototype.substring=function(e,t){var r=new ll;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r},ll.prototype.toString=function(){return this.text},ll.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,r){return Math.max(t,e.sections[r].scale)},0)};var ul={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cl={};function Gu(e,t,r,n){var i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function Xu(e,t){var r=0;return 10===e&&(r-=1e4),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Zu(e,t,r,n,i,o){for(var a=null,s=Gu(t,r,i,o),l=0,u=n;l<u.length;l+=1){var c=u[l],p=Gu(t-c.x,r,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:e,x:t,priorBreak:a,badness:s}}function Hu(e,t,r,n){if(!r)return[];if(!e)return[];for(var i,o=[],a=function(e,t,r,n){for(var i=0,o=0;o<e.length();o++){var a=e.getSection(o),s=n[a.fontStack],l=s&&s[e.getCharCode(o)];l&&(i+=l.metrics.advance*a.scale+t)}return i/Math.max(1,Math.ceil(i/r))}(e,t,r,n),s=0,l=0;l<e.length();l++){var u=e.getSection(l),c=e.getCharCode(l),p=n[u.fontStack],h=p&&p[c];h&&!ul[c]&&(s+=h.metrics.advance*u.scale+t),l<e.length()-1&&(cl[c]||!((i=c)<11904)&&(xn["Bopomofo Extended"](i)||xn.Bopomofo(i)||xn["CJK Compatibility Forms"](i)||xn["CJK Compatibility Ideographs"](i)||xn["CJK Compatibility"](i)||xn["CJK Radicals Supplement"](i)||xn["CJK Strokes"](i)||xn["CJK Symbols and Punctuation"](i)||xn["CJK Unified Ideographs Extension A"](i)||xn["CJK Unified Ideographs"](i)||xn["Enclosed CJK Letters and Months"](i)||xn["Halfwidth and Fullwidth Forms"](i)||xn.Hiragana(i)||xn["Ideographic Description Characters"](i)||xn["Kangxi Radicals"](i)||xn["Katakana Phonetic Extensions"](i)||xn.Katakana(i)||xn["Vertical Forms"](i)||xn["Yi Radicals"](i)||xn["Yi Syllables"](i)))&&o.push(Zu(l+1,s,a,o,Xu(c,e.getCharCode(l+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Zu(e.length(),s,a,o,0,!0))}function Yu(e){var t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Ju(e,t,r,n,i){if(i){var o=e[n],a=t[o.fontStack],s=a&&a[o.glyph];if(s)for(var l=s.metrics.advance*o.scale,u=(e[n].x+l)*i,c=r;c<=n;c++)e[c].x-=u}}cl[10]=!0,cl[32]=!0,cl[38]=!0,cl[40]=!0,cl[41]=!0,cl[43]=!0,cl[45]=!0,cl[47]=!0,cl[173]=!0,cl[183]=!0,cl[8203]=!0,cl[8208]=!0,cl[8211]=!0,cl[8231]=!0,u.createCommonjsModule=e,u.window=self,u.Point=E,u.browser=F,u.getJSON=function(e,t){return ge(c(e,{type:"json"}),t)},u.normalizeSpriteURL=function(e,t,r,n){var i=X(e);return U(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+r,D(i,n)):(i.path+=""+t+r,Z(i))},u.ResourceType=ce,u.getImage=ve,u.RGBAImage=Uo,u.ImagePosition=Ts,u.Texture=js,u.potpack=Ds,u.normalizeGlyphsURL=function(e,t){if(!U(e))return e;var r=X(e);return r.path="/fonts/v1"+r.path,D(r,t)},u.getArrayBuffer=me,u.parseGlyphPBF=function(e){return new zs(e).readFields(fu,[])},u.asyncAll=function(e,t,r){if(!e.length)return r(null,[]);var n=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--n&&r(o,i)})})},u.isChar=xn,u.AlphaImage=Bo,u.Properties=qn,u.DataConstantProperty=Fn,u.styleSpec=Ce,u.validateLight=rn,u.endsWith=v,u.emitValidationErrors=tn,u.validateStyle=en,u.extend=c,u.Evented=Pe,u.sphericalToCartesian=function(e){var t=e[0],r=e[1],n=e[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n)}},u.number=le,u.Transitionable=In,u.warnOnce=w,u.uniqueId=f,u.Actor=Vs,u.normalizeSourceURL=function(e,t){if(!U(e))return e;var r=X(e);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),D(r,t)},u.pick=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n];i in e&&(r[i]=e[i])}return r},u.canonicalizeTileset=function(e,t){if(!U(t))return e.tiles||[];for(var r=[],n=0,i=e.tiles;n<i.length;n+=1){var o=i[n],a=J(o);r.push(a)}return r},u.LngLatBounds=qs,u.mercatorXfromLng=wu,u.mercatorYfromLat=Au,u.Event=xe,u.ErrorEvent=Ee,u.postTurnstileEvent=oe,u.postMapLoadEvent=ue,u.normalizeTileURL=function(e,t,r){if(!t||!U(t))return e;var n=X(e),i=F.devicePixelRatio>=2||512===r?"@2x":"",o=z.supported?".webp":"$1";return n.path=n.path.replace(K,""+i+o),n.path="/v4"+n.path,D(n)},u.OverscaledTileID=Zs,u.EXTENT=Po,u.MercatorCoordinate=Hs,u.CanonicalTileID=Xs,u.StructArrayLayout4i8=Yn,u.rasterBoundsAttributes=el,u.SegmentVector=Ri,u.getVideo=function(e,t){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var o=0;o<e.length;o++){var a=self.document.createElement("source");r=e[o],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=e[o],i.appendChild(a)}return{cancel:function(){}}},u.ValidationError=Te,u.bindAll=m,u.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=r[0],b=r[1],x=r[2],w=r[3];return e[0]=_*n+b*s+x*p+w*g,e[1]=_*i+b*l+x*h+w*m,e[2]=_*o+b*u+x*f+w*y,e[3]=_*a+b*c+x*d+w*v,_=r[4],b=r[5],x=r[6],w=r[7],e[4]=_*n+b*s+x*p+w*g,e[5]=_*i+b*l+x*h+w*m,e[6]=_*o+b*u+x*f+w*y,e[7]=_*a+b*c+x*d+w*v,_=r[8],b=r[9],x=r[10],w=r[11],e[8]=_*n+b*s+x*p+w*g,e[9]=_*i+b*l+x*h+w*m,e[10]=_*o+b*u+x*f+w*y,e[11]=_*a+b*c+x*d+w*v,_=r[12],b=r[13],x=r[14],w=r[15],e[12]=_*n+b*s+x*p+w*g,e[13]=_*i+b*l+x*h+w*m,e[14]=_*o+b*u+x*f+w*y,e[15]=_*a+b*c+x*d+w*v,e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.translate=function(e,t,r){var n,i,o,a,s,l,u,c,p,h,f,d,g=r[0],m=r[1],y=r[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=n*g+s*m+p*y+t[12],e[13]=i*g+l*m+h*y+t[13],e[14]=o*g+u*m+f*y+t[14],e[15]=a*g+c*m+d*y+t[15]),e},u.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.Color=Ze,u.isEqual=o,u.keysDifference=function(e,t){var r=[];for(var n in e)n in t||r.push(n);return r},u.Tile=al,u.SourceFeatureState=il,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+p*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=p*i-s*n,e[7]=h*i-l*n,e},u.evaluateSizeForZoom=function(e,t,r){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var n=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=l(br(n,r.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=e.propertyValue,u=e.zoomRange;return{uSizeT:l(br(s,r.specification).interpolationFactor(t,u.min,u.max),0,1),uSize:0}},u.WritingMode=sl,u.transformMat4=Sa,u.evaluateSizeForFeature=function(e,t,r){var n=t;return"source"===e.functionType?r.lowerSize/256:"composite"===e.functionType?le(r.lowerSize/256,r.upperSize/256,n.uSizeT):n.uSize},u.addDynamicAttributes=ks,u.properties=ms,u.polygonIntersectsPolygon=ea,u.isMapboxURL=U,u.normalizeStyleURL=function(e,t){if(!U(e))return e;var r=X(e);return r.path="/styles/v1"+r.path,D(r,t)},u.createStyleLayer=function(e){return"custom"===e.type?new Ps(e):new Cs[e.type](e)},u.clone=b,u.validateCustomStyleLayer=function(e){var t=[],r=e.id;return void 0===r&&t.push({message:"layers."+r+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+r+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),t},u.filterObject=x,u.mapObject=g,u.evented=Cn,u.makeRequest=ge,u.registerForPluginAvailability=function(e){return En?e({pluginURL:En,completionCallback:wn}):Cn.once("pluginAvailable",e),e},u.ZoomHistory=bn,u.getReferrer=de,u.createLayout=Nn,u.UniformMatrix4f=qi,u.Uniform3f=Ni,u.Uniform1f=Di,u.Uniform1i=ji,u.Uniform2f=Fi,u.Uniform4f=zi,u.create=ga,u.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.transformMat3=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e},u.create$1=function(){var e=new Do(16);return Do!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},u.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e},u.UniformColor=Bi,u.clamp=l,u.StructArrayLayout2i4=Zn,u.StructArrayLayout2ui4=hi,u.ProgramConfiguration=$i,u.StructArrayLayout1ui2=fi,u.StructArrayLayout3ui6=pi,u.wrap=p,u.create$2=function(){var e=new Do(4);return Do!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},u.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=n*-s+o*l,e[3]=i*-s+a*l,e},u.LngLat=Gs,u.UnwrappedTileID=Ks,u.perspective=function(e,t,r,n,i){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e},u.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+p*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=p*i-s*n,e[11]=h*i-l*n,e},u.mercatorZfromAltitude=Su,u.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=r*s-n*a,_=r*l-i*a,b=r*u-o*a,x=n*l-i*s,w=n*u-o*s,S=i*u-o*l,E=c*g-p*d,P=c*m-h*d,C=c*y-f*d,T=p*m-h*g,k=p*y-f*g,O=h*y-f*m,A=v*O-_*k+b*T+x*C-w*P+S*E;return A?(A=1/A,e[0]=(s*O-l*k+u*T)*A,e[1]=(i*k-n*O-o*T)*A,e[2]=(g*S-m*w+y*x)*A,e[3]=(h*w-p*S-f*x)*A,e[4]=(l*C-a*O-u*P)*A,e[5]=(r*O-i*C+o*P)*A,e[6]=(m*b-d*S-y*_)*A,e[7]=(c*S-h*b+f*_)*A,e[8]=(a*k-s*C+u*E)*A,e[9]=(n*C-r*k-o*E)*A,e[10]=(d*w-g*b+y*v)*A,e[11]=(p*b-c*w-f*v)*A,e[12]=(s*P-a*T-l*E)*A,e[13]=(r*T-n*P+i*E)*A,e[14]=(g*_-d*x-m*v)*A,e[15]=(c*x-p*_+h*v)*A,e):null},u.ease=P,u.bezier=s,u.config=N,u.webpSupported=z,u.EvaluationParameters=kn,u.version="0.53.0-beta.1",u.setRTLTextPlugin=function(e,t){if(Sn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Sn=!0,En=F.resolveURL(e),wn=function(e){e?(Sn=!1,En=null,t&&t(e)):Pn=!0},Cn.fire(new xe("pluginAvailable",{pluginURL:En,completionCallback:wn}))},u.featureFilter=Er,u.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},u.Anchor=ls,u.GLYPH_PBF_BORDER=Us,u.distToSegmentSquared=ua,u.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1)if(!yn(r[t].charCodeAt(0)))return!1;return!0},u.shapeText=function(e,t,r,n,i,o,a,s,l,u,c){var p=ll.fromFeature(e,r);c===sl.vertical&&p.verticalizePunctuation();var h,f=[],d={positionedGlyphs:f,text:p,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c},g=Tn.processBidirectionalText,m=Tn.processStyledBidirectionalText;if(g&&1===p.sections.length){h=[];for(var y=0,v=g(p.toString(),Hu(p,s,n,t));y<v.length;y+=1){var _=v[y],b=new ll;b.text=_,b.sections=p.sections;for(var x=0;x<_.length;x++)b.sectionIndex.push(0);h.push(b)}}else if(m){h=[];for(var w=0,S=m(p.text,p.sectionIndex,Hu(p,s,n,t));w<S.length;w+=1){var E=S[w],P=new ll;P.text=E[0],P.sectionIndex=E[1],P.sections=p.sections,h.push(P)}}else h=function(e,t){for(var r=[],n=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];r.push(e.substring(i,s)),i=s}return i<n.length&&r.push(e.substring(i,n.length)),r}(p,Hu(p,s,n,t));return function(e,t,r,n,i,o,a,s,l){for(var u=0,c=-17,p=0,h=e.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,g=r;d<g.length;d+=1){var m=g[d];m.trim();var y=m.getMaxScale();if(m.length()){for(var v=h.length,_=0;_<m.length();_++){var b=m.getSection(_),x=m.getCharCode(_),w=24*(y-b.scale),S=t[b.fontStack],E=S&&S[x];E&&(dn(x)&&a!==sl.horizontal?(h.push({glyph:x,x:u,y:w,vertical:!0,scale:b.scale,fontStack:b.fontStack}),u+=l*b.scale+s):(h.push({glyph:x,x:u,y:c+w,vertical:!1,scale:b.scale,fontStack:b.fontStack}),u+=E.metrics.advance*b.scale+s))}if(h.length!==v){var P=u-s;p=Math.max(P,p),Ju(h,t,v,h.length-1,f)}u=0,c+=n*y}else c+=n}var C=Yu(i),T=C.horizontalAlign,k=C.verticalAlign;!function(e,t,r,n,i,o,a){for(var s=(t-r)*i,l=(-n*a+.5)*o,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l}(h,f,T,k,p,n,r.length);var O=c- -17;e.top+=-k*O,e.bottom=e.top+O,e.left+=-T*p,e.right=e.left+p}(d,t,h,i,o,a,c,s,u),!!f.length&&(d.text=d.text.toString(),d)},u.allowsVerticalWritingMode=fn,u.shapeIcon=function(e,t,r){var n=Yu(r),i=n.horizontalAlign,o=n.verticalAlign,a=t[0],s=t[1],l=a-e.displaySize[0]*i,u=l+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}},u.classifyRings=So,u.SIZE_PACK_FACTOR=256,u.SymbolBucket=ds,u.register=sn,u.CollisionBoxArray=yi,u.DictionaryCoder=tl,u.FeatureIndex=ol,u.ImageAtlas=As,u.LineBucket=Xa,u.FillBucket=va,u.FillExtrusionBucket=Ta,u.mvt=za,u.Protobuf=zs,u.DEMData=Ys,u.vectorTile=za,u.Point$1=E,u.pbf=zs,u.createExpression=dr,u.plugin=Tn}),define(0,function(n){function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",i=0,o=e;i<o.length;i+=1)n+=t(o[i])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}function r(e){for(var r="",i=0,o=n.refProperties;i<o.length;i+=1)r+="/"+t(e[o[i]]);return r}var c=function(e){e&&this.replace(e)};function o(e,t,r,n,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<r/2;){var c=e[a-1],p=e[a],h=e[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=p.dist(h)}return!0}function i(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function a(e,t,r){return e?.6*t*r:0}function s(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function l(e,t,r,l,u,c){for(var p=a(r,u,c),h=s(r,l)*c,f=0,d=i(e)/2,g=0;g<e.length-1;g++){var m=e[g],y=e[g+1],v=m.dist(y);if(f+v>d){var _=(d-f)/v,b=n.number(m.x,y.x,_),x=n.number(m.y,y.y,_),w=new n.Anchor(b,x,y.angleTo(m),g);return w._round(),!p||o(e,w,h,p,t)?w:void 0}f+=v}}function u(e,t,r,l,u,c,p,h,f){var d=a(l,c,p),g=s(l,u),m=g*p,y=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;return t-m<t/4&&(t=m+t/4),function t(e,r,a,s,l,u,c,p,h){for(var f=u/2,d=i(e),g=0,m=r-a,y=[],v=0;v<e.length-1;v++){for(var _=e[v],b=e[v+1],x=_.dist(b),w=b.angleTo(_);m+a<g+x;){var S=((m+=a)-g)/x,E=n.number(_.x,b.x,S),P=n.number(_.y,b.y,S);if(E>=0&&E<h&&P>=0&&P<h&&m-f>=0&&m+f<=d){var C=new n.Anchor(E,P,w,v);C._round(),s&&!o(e,C,u,s,l)||y.push(C)}}g+=x}return p||y.length||c||(y=t(e,g/2,a,s,l,u,c,!0,h)),y}(e,y?t/2*h%t:(g/2+2*c)*p*h%t,t,d,r,m,y,!1,f)}c.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},c.prototype.update=function(e,t){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=n.createStyleLayer(s);l._featureFilter=n.featureFilter(l.filter)}for(var u=0,c=t;u<c.length;u+=1){var p=c[u];delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,f=function(e){for(var t={},n=0;n<e.length;n++){var i=r(e[n]),o=t[i];o||(o=t[i]=[]),o.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}(n.values(this._layerConfigs));h<f.length;h+=1){var d=f[h].map(function(e){return i._layers[e.id]}),g=d[0];if("none"!==g.visibility){var m=g.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var v=g.sourceLayer||"_geojsonTileLayer",_=y[v];_||(_=y[v]=[]),_.push(d)}}};var h=function(e,t,r,i,o,a,s,l,u,c,p,h){var f=s.top*l-u,d=s.bottom*l+u,g=s.left*l-u,m=s.right*l+u;if(this.boxStartIndex=e.length,c){var y=d-f,v=m-g;y>0&&(y=Math.max(10*l,y),this._addLineCollisionCircles(e,t,r,r.segment,v,y,i,o,a,p))}else{if(h){var _=new n.Point(g,f),b=new n.Point(m,f),x=new n.Point(g,d),w=new n.Point(m,d),S=h*Math.PI/180;_._rotate(S),b._rotate(S),x._rotate(S),w._rotate(S),g=Math.min(_.x,b.x,x.x,w.x),m=Math.max(_.x,b.x,x.x,w.x),f=Math.min(_.y,b.y,x.y,w.y),d=Math.max(_.y,b.y,x.y,w.y)}e.emplaceBack(r.x,r.y,g,f,m,d,i,o,a,0,0)}this.boxEndIndex=e.length};h.prototype._addLineCollisionCircles=function(e,t,r,n,i,o,a,s,l,u){var c=o/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(u)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,g=r,m=n+1,y=d,v=-i/2,_=v-i/4;do{if(--m<0){if(y>v)return;m=0;break}y-=t[m].dist(g),g=t[m]}while(y>_);for(var b=t[m].dist(t[m+1]),x=-f;x<p+f;x++){var w=x*c,S=v+w;if(w<0&&(S+=w),w>i&&(S+=w-i),!(S<y)){for(;y+b<S;){if(y+=b,++m+1>=t.length)return;b=t[m].dist(t[m+1])}var E=S-y,P=t[m],C=t[m+1].sub(P)._unit()._mult(E)._add(P)._round(),T=Math.abs(S-d)<c?0:.8*(S-d);e.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,T)}}};var m=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=p),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function p(e,t){return e<t?-1:e>t?1:0}function f(e,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<i)&&(i=c.x),(!u||c.y<o)&&(o=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var p=a-i,h=s-o,f=Math.min(p,h),y=f/2,v=new m([],d);if(0===f)return new n.Point(i,o);for(var _=i;_<a;_+=f)for(var b=o;b<s;b+=f)v.push(new g(_+y,b+y,y,e));for(var x=function(e){for(var t=0,r=0,n=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,n+=(l.y+u.y)*c,t+=3*c}return new g(r/t,n/t,0,e)}(e),w=v.length;v.length;){var S=v.pop();(S.d>x.d||!x.d)&&(x=S,r&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,w)),S.max-x.d<=t||(y=S.h/2,v.push(new g(S.p.x-y,S.p.y-y,y,e)),v.push(new g(S.p.x+y,S.p.y-y,y,e)),v.push(new g(S.p.x-y,S.p.y+y,y,e)),v.push(new g(S.p.x+y,S.p.y+y,y,e)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}function d(e,t){return t.max-e.max}function g(e,t,r,i){this.p=new n.Point(e,t),this.h=r,this.d=function(e,t){for(var r=!1,i=1/0,o=0;o<t.length;o++)for(var a=t[o],s=0,l=a.length,u=l-1;s<l;u=s++){var c=a[s],p=a[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,n.distToSegmentSquared(e,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}m.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},m.prototype.pop=function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},m.prototype.peek=function(){return this.data[0]},m.prototype._up=function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n},m.prototype._down=function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&r(t[s],a)<0&&(o=s,a=t[s]),r(a,i)>=0)break;t[e]=a,e=o}t[e]=i};var y=n.createCommonjsModule(function(e){e.exports=function(e,t){var r,n,i,o,a,s,l,u;for(r=3&e.length,n=e.length-r,i=t,a=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),v=n.createCommonjsModule(function(e){e.exports=function(e,t){for(var r,n=e.length,i=t^n,o=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),_=y,x=y,w=v;function M(e,t,r,i,o,a){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=n.EXTENT/s,e.compareText={},e.iconsNeedLinear=!1;var l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,h=p.min,f=p.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new n.EvaluationParameters(h)),u["text-size"].possiblyEvaluate(new n.EvaluationParameters(f))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,g=d.min,m=d.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(g)),u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(m))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new n.EvaluationParameters(e.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(e.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new n.EvaluationParameters(18));for(var y=24*l.get("text-line-height"),v="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),_=l.get("text-keep-upright"),b=0,x=e.features;b<x.length;b+=1){var w=x[b],E=l.get("text-font").evaluate(w,{}).join(","),P=r,C={},T=w.text;if(T){var k=T.toString(),O=l.get("text-offset").evaluate(w,{}).map(function(e){return 24*e}),A=24*l.get("text-letter-spacing").evaluate(w,{}),I=n.allowsLetterSpacing(k)?A:0,R=l.get("text-anchor").evaluate(w,{}),M=l.get("text-justify").evaluate(w,{}),L="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(w,{}):0;C.horizontal=n.shapeText(T,t,E,L,y,R,M,I,O,24,n.WritingMode.horizontal),n.allowsVerticalWritingMode(k)&&v&&_&&(C.vertical=n.shapeText(T,t,E,L,y,R,M,I,O,24,n.WritingMode.vertical))}var j=void 0;if(w.icon){var D=i[w.icon];D&&(j=n.shapeIcon(o[w.icon],l.get("icon-offset").evaluate(w,{}),l.get("icon-anchor").evaluate(w,{})),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&n.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||j)&&S(e,w,C,j,P,c)}a&&e.generateCollisionDebugBuffers()}function S(e,t,r,i,o,a){var s=a.layoutTextSize.evaluate(t,{}),c=a.layoutIconSize.evaluate(t,{}),p=a.textMaxSize.evaluate(t,{});void 0===p&&(p=s);var d=e.layers[0].layout,g=d.get("text-offset").evaluate(t,{}),m=d.get("icon-offset").evaluate(t,{}),y=s/24,v=e.tilePixelRatio*y,x=e.tilePixelRatio*p/24,w=e.tilePixelRatio*c,S=e.tilePixelRatio*d.get("symbol-spacing"),E=d.get("text-padding")*e.tilePixelRatio,T=d.get("icon-padding")*e.tilePixelRatio,k=d.get("text-max-angle")/180*Math.PI,O="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),A="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),I=d.get("symbol-placement"),R=S/2,M=function(s,l){l.x<0||l.x>=n.EXTENT||l.y<0||l.y>=n.EXTENT||function(e,t,r,i,o,a,s,l,u,c,p,f,d,g,m,y,v,b,x,w,S){var E,T,k=e.addToLineVertexArray(t,r),O=0,A=0,I=0,R=_(i.horizontal?i.horizontal.text:""),M=[];if(i.horizontal){var L=a.layout.get("text-rotate").evaluate(x,{});E=new h(s,r,t,l,u,c,i.horizontal,p,f,d,e.overscaling,L),A+=P(e,t,i.horizontal,a,d,x,g,k,i.vertical?n.WritingMode.horizontal:n.WritingMode.horizontalOnly,M,w,S),i.vertical&&(I+=P(e,t,i.vertical,a,d,x,g,k,n.WritingMode.vertical,M,w,S))}var j=E?E.boxStartIndex:e.collisionBoxArray.length,D=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,t,r,i,o,a){var s,l,u,c,p=t.image,h=r.layout,f=t.top-1/p.pixelRatio,d=t.left-1/p.pixelRatio,g=t.bottom+1/p.pixelRatio,m=t.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var y=m-d,v=g-f,_=h.get("text-size").evaluate(a,{})/24,b=o.left*_,x=o.right*_,w=o.top*_,S=x-b,E=o.bottom*_-w,P=h.get("icon-text-fit-padding")[0],C=h.get("icon-text-fit-padding")[1],T=h.get("icon-text-fit-padding")[2],k=h.get("icon-text-fit-padding")[3],O="width"===h.get("icon-text-fit")?.5*(E-v):0,A="height"===h.get("icon-text-fit")?.5*(S-y):0,I="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?S:y,R="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:v;s=new n.Point(b+A-k,w+O-P),l=new n.Point(b+A+C+I,w+O-P),u=new n.Point(b+A+C+I,w+O+T+R),c=new n.Point(b+A-k,w+O+T+R)}else s=new n.Point(d,f),l=new n.Point(m,f),u=new n.Point(m,g),c=new n.Point(d,g);var M=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(M){var L=Math.sin(M),j=Math.cos(M),D=[j,-L,L,j];s._matMult(D),l._matMult(D),c._matMult(D),u._matMult(D)}return[{tl:s,tr:l,bl:c,br:u,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,x),N=a.layout.get("icon-rotate").evaluate(x,{});T=new h(s,r,t,l,u,c,o,m,y,!1,e.overscaling,N),O=4*F.length;var z=e.iconSizeData,B=null;"source"===z.functionType?(B=[n.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(x,{})])[0]>C&&n.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===z.functionType&&((B=[n.SIZE_PACK_FACTOR*S.compositeIconSizes[0].evaluate(x,{}),n.SIZE_PACK_FACTOR*S.compositeIconSizes[1].evaluate(x,{})])[0]>C||B[1]>C)&&n.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,B,b,v,x,!1,t,k.lineStartIndex,k.lineLength)}var U=T?T.boxStartIndex:e.collisionBoxArray.length,V=T?T.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=n.SymbolBucket.MAX_GLYPHS&&n.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(t.x,t.y,M.length>0?M[0]:-1,M.length>1?M[1]:-1,R,j,D,U,V,l,A,I,O,0)}(e,l,s,r,i,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,E,O,g,w,T,A,m,t,o,a)};if("line"===I)for(var L=0,j=function(e,t,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<0&&h.x<0||(p.x<0?p=new n.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new n.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new n.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new n.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new n.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new n.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new n.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new n.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(h)))))}return a}(t.geometry,0,0,n.EXTENT,n.EXTENT);L<j.length;L+=1)for(var D=j[L],F=0,N=u(D,S,k,r.vertical||r.horizontal,i,24,x,e.overscaling,n.EXTENT);F<N.length;F+=1){var z=N[F],B=r.horizontal;B&&b(e,B.text,R,z)||M(D,z)}else if("line-center"===I)for(var U=0,V=t.geometry;U<V.length;U+=1){var q=V[U];if(q.length>1){var G=l(q,k,r.vertical||r.horizontal,i,24,x);G&&M(q,G)}}else if("Polygon"===t.type)for(var W=0,H=n.classifyRings(t.geometry,0);W<H.length;W+=1){var X=H[W],K=f(X,16);M(X[0],new n.Anchor(K.x,K.y,0))}else if("LineString"===t.type)for(var Z=0,Y=t.geometry;Z<Y.length;Z+=1){var J=Y[Z];M(J,new n.Anchor(J[0].x,J[0].y,0))}else if("Point"===t.type)for(var Q=0,$=t.geometry;Q<$.length;Q+=1)for(var ee=0,te=$[Q];ee<te.length;ee+=1){var re=te[ee];M([re],new n.Anchor(re.x,re.y,0))}}_.murmur3=x,_.murmur2=w;var C=65535;function P(e,t,r,i,o,a,s,l,u,c,p,h){var f=function(e,t,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=r.layout.get("text-offset").evaluate(o,{}).map(function(e){return 24*e}),u=t.positionedGlyphs,c=[],p=0;p<u.length;p++){var h=u[p],f=a[h.fontStack],d=f&&f[h.glyph];if(d){var g=d.rect;if(g){var m=n.GLYPH_PBF_BORDER+1,y=d.metrics.advance*h.scale/2,v=i?[h.x+y,h.y]:[0,0],_=i?[0,0]:[h.x+y+l[0],h.y+l[1]],b=(d.metrics.left-m)*h.scale-y+_[0],x=(-d.metrics.top-m)*h.scale+_[1],w=b+g.w*h.scale,S=x+g.h*h.scale,E=new n.Point(b,x),P=new n.Point(w,x),C=new n.Point(b,S),T=new n.Point(w,S);if(i&&h.vertical){var k=new n.Point(-y,y),O=-Math.PI/2,A=new n.Point(5,0);E._rotateAround(O,k)._add(A),P._rotateAround(O,k)._add(A),C._rotateAround(O,k)._add(A),T._rotateAround(O,k)._add(A)}if(s){var I=Math.sin(s),R=Math.cos(s),M=[R,-I,I,R];E._matMult(M),P._matMult(M),C._matMult(M),T._matMult(M)}c.push({tl:E,tr:P,bl:C,br:T,tex:g,writingMode:t.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,p),d=e.textSizeData,g=null;return"source"===d.functionType?(g=[n.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>C&&n.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((g=[n.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(a,{}),n.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(a,{})])[0]>C||g[1]>C)&&n.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,f,g,s,o,a,u,t,l.lineStartIndex,l.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function b(e,t,r,n){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(n.dist(o[a])<r)return!0}else i[t]=[];return i[t].push(n),!1}var T=function(e){var t={},r=[];for(var i in e){var o=e[i],a=t[i]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),a[s]={rect:u,metrics:l.metrics}}}}var c=n.potpack(r),p=c.w,h=c.h,f=new n.AlphaImage({width:p||1,height:h||1});for(var d in e){var g=e[d];for(var m in g){var y=g[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var v=t[d][m].rect;n.AlphaImage.copy(y.bitmap,f,{x:0,y:0},{x:v.x+1,y:v.y+1},y.bitmap)}}}this.image=f,this.positions=t};n.register("GlyphAtlas",T);var O=function(e){this.tileID=new n.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function k(e,t){for(var r=new n.EvaluationParameters(t),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}O.prototype.parse=function(e,t,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new n.CollisionBoxArray;var a=new n.DictionaryCoder(Object.keys(e.layers).sort()),s=new n.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var l,u,c,p,h={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=t.familiesBySource[this.source];for(var g in d){var m=e.layers[g];if(m){1===m.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(g),v=[],_=0;_<m.length;_++){var b=m.feature(_);v.push({feature:b,index:_,sourceLayerIndex:y})}for(var x=0,w=d[g];x<w.length;x+=1){var S=w[x],P=S[0];P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(k(S,this.zoom),(h[P.id]=P.createBucket({index:s.bucketLayerIDs.length,layers:S,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(v,f),s.bucketLayerIDs.push(S.map(function(e){return e.id})))}}}var C=n.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(C).length?r.send("getGlyphs",{uid:this.uid,stacks:C},function(e,t){l||(l=e,u=t,E.call(o))}):u={};var O=Object.keys(f.iconDependencies);O.length?r.send("getImages",{icons:O},function(e,t){l||(l=e,c=t,E.call(o))}):c={};var A=Object.keys(f.patternDependencies);function E(){if(l)return i(l);if(u&&c&&p){var e=new T(u),t=new n.ImageAtlas(c,p);for(var r in h){var o=h[r];o instanceof n.SymbolBucket?(k(o.layers,this.zoom),M(o,u,e.positions,c,t.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof n.LineBucket||o instanceof n.FillBucket||o instanceof n.FillExtrusionBucket)&&(k(o.layers,this.zoom),o.addFeatures(f,t.patternPositions))}this.status="done",i(null,{buckets:n.values(h).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}A.length?r.send("getImages",{icons:A},function(e,t){l||(l=e,p=t,E.call(o))}):p={},E.call(this)};var I="undefined"!=typeof performance,L={getEntriesByName:function(e){return!!(I&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(I&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(I&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(I&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(I&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},D=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},L.mark(this._marks.start)};function A(e,t){var r=n.getArrayBuffer(e.request,function(e,r,i,o){e?t(e):r&&t(null,{vectorTile:new n.mvt.VectorTile(new n.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),t()}}D.prototype.finish=function(){L.mark(this._marks.end);var e=L.getEntriesByName(this._marks.measure);return 0===e.length&&(L.measure(this._marks.measure,this._marks.start,this._marks.end),e=L.getEntriesByName(this._marks.measure),L.clearMarks(this._marks.start),L.clearMarks(this._marks.end),L.clearMeasures(this._marks.measure)),e},L.Performance=D;var z=function(e,t,r){this.actor=e,this.layerIndex=t,this.loadVectorData=r||A,this.loading={},this.loaded={}};z.prototype.loadTile=function(e,t){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new L.Performance(e.request),a=this.loading[i]=new O(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,t(e);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return t(e);t(null,n.extend({rawTileData:l.slice(0)},r,u,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},z.prototype.reloadTile=function(e,t){var r=this.loaded,n=e.uid,i=this;if(r&&r[n]){var o=r[n];o.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,r){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,n)),t(e,r)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},z.prototype.abortTile=function(e,t){var r=this.loading,n=e.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),t()},z.prototype.removeTile=function(e,t){var r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()};var B=function(){this.loaded={}};B.prototype.loadTile=function(e,t){var r=e.uid,i=e.encoding,o=e.rawImageData,a=new n.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=a,t(null,a)},B.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var V={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function N(e){var t=0;if(e&&e.length>0){t+=Math.abs(R(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(R(e[r]))}return t}function R(e){var t,r,n,i,o,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(n=l-2,i=l-1,o=0):a===l-1?(n=l-1,i=0,o=1):(n=a,i=a+1,o=a+2),t=e[n],r=e[i],s+=(F(e[o][0])-F(t[0]))*Math.sin(F(r[1]));s=s*V.RADIUS*V.RADIUS/2}return s}function F(e){return e*Math.PI/180}var q={geometry:function e(t){var r,n=0;switch(t.type){case"Polygon":return N(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)n+=N(t.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)n+=e(t.geometries[r]);return n}},ring:R},W=function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(j(e,r)),t;case"GeometryCollection":return t.geometries=t.geometries.map(j(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=G(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(j(G,t))),e}(t,r);default:return t}};function j(e,t){return function(r){return e(r,t)}}function G(e,t){t=!!t,e[0]=J(e[0],t);for(var r=1;r<e.length;r++)e[r]=J(e[r],!t);return e}function J(e,t){return function(e){return q.ring(e)>=0}(e)===t?e:e.reverse()}var H=n.mvt.VectorTileFeature.prototype.toGeoJSON,X=function(e){this._feature=e,this.extent=n.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};X.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],t=0,r=this._feature.geometry;t<r.length;t+=1){var i=r[t];e.push([new n.Point(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new n.Point(p[0],p[1]))}o.push(l)}return o},X.prototype.toGeoJSON=function(e,t,r){return H.call(this,e,t,r)};var Z=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=e.length,this._features=e};Z.prototype.feature=function(e){return new X(this._features[e])};var Y=n.vectorTile.VectorTileFeature,Q=U;function U(e,t){this.options=t||{},this.features=e,this.length=e.length}function K(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}U.prototype.feature=function(e){return new K(this.features[e],this.options.extent)},K.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],i=[],o=0;o<r.length;o++)i.push(new n.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},K.prototype.toGeoJSON=Y.prototype.toGeoJSON;var $=te,ee=te,fe=Q;function te(e){var t=new n.pbf;return function(e,t){for(var r in e.layers)t.writeMessage(3,re,e.layers[r])}(e,t),t.finish()}function re(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,ne,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)t.writeMessage(4,le,o[r])}function ne(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,oe,e),t.writeVarintField(3,r.type),t.writeMessage(4,se,r)}function oe(e,t){var r=e.feature,n=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in r.properties){var l=o[s];void 0===l&&(n.push(s),l=n.length-1,o[s]=l),t.writeVarint(l);var u=r.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=a[p];void 0===h&&(i.push(u),h=i.length-1,a[p]=h),t.writeVarint(h)}}function ie(e,t){return(t<<3)+(7&e)}function ae(e){return e<<1^e>>31}function se(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===n&&(u=l.length),t.writeVarint(ie(1,u));for(var c=3===n?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==n&&t.writeVarint(ie(2,c-1));var h=l[p].x-i,f=l[p].y-o;t.writeVarint(ae(h)),t.writeVarint(ae(f)),i+=h,o+=f}3===n&&t.writeVarint(ie(7,1))}}function le(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function ue(e,t,r,n,i,o){if(!(i-n<=r)){var a=n+i>>1;!function e(t,r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,n,Math.max(i,Math.floor(n-l*c/s+p)),Math.min(o,Math.floor(n+(s-l)*c/s+p)),a)}var h=r[2*n+a],f=i,d=o;for(he(t,r,i,n),r[2*o+a]>h&&he(t,r,i,o);f<d;){for(he(t,r,f,d),f++,d--;r[2*f+a]<h;)f++;for(;r[2*d+a]>h;)d--}r[2*i+a]===h?he(t,r,i,d):he(t,r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(e,t,a,n,i,o%2),ue(e,t,r,n,a-1,o+1),ue(e,t,r,a+1,i,o+1)}}function he(e,t,r,n){ce(e,r,n),ce(t,2*r,2*n),ce(t,2*r+1,2*n+1)}function ce(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function pe(e,t,r,n){var i=e-r,o=t-n;return i*i+o*o}$.fromVectorTileJs=ee,$.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new Q(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return te({layers:r})},$.GeoJSONWrapper=fe;var de=function(e){return e[0]},ge=function(e){return e[1]},me=function(e,t,r,n,i){void 0===t&&(t=de),void 0===r&&(r=ge),void 0===n&&(n=64),void 0===i&&(i=Float64Array),this.nodeSize=n,this.points=e;for(var o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length),l=0;l<e.length;l++)a[l]=l,s[2*l]=t(e[l]),s[2*l+1]=r(e[l]);ue(a,s,n,0,a.length-1,0)};me.prototype.range=function(e,t,r,n){return function(e,t,r,n,i,o,a){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=t[2*d],l=t[2*d+1],s>=r&&s<=i&&l>=n&&l<=o&&c.push(e[d]);else{var g=Math.floor((f+h)/2);s=t[2*g],l=t[2*g+1],s>=r&&s<=i&&l>=n&&l<=o&&c.push(e[g]);var m=(p+1)%2;(0===p?r<=s:n<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===p?i>=s:o>=l)&&(u.push(g+1),u.push(h),u.push(m))}}return c}(this.ids,this.coords,e,t,r,n,this.nodeSize)},me.prototype.within=function(e,t,r){return function(e,t,r,n,i,o){for(var a=[0,e.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)pe(t[2*h],t[2*h+1],r,n)<=l&&s.push(e[h]);else{var f=Math.floor((p+c)/2),d=t[2*f],g=t[2*f+1];pe(d,g,r,n)<=l&&s.push(e[f]);var m=(u+1)%2;(0===u?r-i<=d:n-i<=g)&&(a.push(p),a.push(f-1),a.push(m)),(0===u?r+i>=d:n+i>=g)&&(a.push(f+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,e,t,r,this.nodeSize)};var ve={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},et=function(e){this.options=Pe(Object.create(ve),e),this.trees=new Array(this.options.maxZoom+1)};function ye(e,t,r,n,i){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function xe(e,t){var r=e.geometry.coordinates,n=r[0],i=r[1];return{x:Se(n),y:_e(i),zoom:1/0,index:t,parentId:-1}}function we(e){return{type:"Feature",id:e.id,properties:Me(e),geometry:{type:"Point",coordinates:[(n=e.x,360*(n-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,n}function Me(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return Pe(Pe({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function Se(e){return e/360+.5}function _e(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Pe(e,t){for(var r in t)e[r]=t[r];return e}function be(e){return e.x}function Te(e){return e.y}function Ie(e,t,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=i,n=o):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function ke(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ze(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)ze(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)ze(e,t[n][i])}(i),i}function ze(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Ce(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)Ee(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)Ee(i[u],s);else if("LineString"===o)Ae(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)s=[],Ae(i[u],s,a,!1),e.push(ke(l,"LineString",s,t.properties));return}Le(i,s,a,!1)}else if("Polygon"===o)Le(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<t.geometry.geometries.length;u++)Ce(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];Le(i[u],c,a,!0),s.push(c)}}e.push(ke(l,o,s,t.properties))}}function Ee(e,t){t.push(De(e[0])),t.push(Oe(e[1])),t.push(0)}function Ae(e,t,r,n){for(var i,o,a=0,s=0;s<e.length;s++){var l=De(e[s][0]),u=Oe(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=t.length-3;t[2]=1,function e(t,r,n,i){for(var o,a=i,s=n-r>>1,l=n-r,u=t[r],c=t[r+1],p=t[n],h=t[n+1],f=r+3;f<n;f+=3){var d=Ie(t[f],t[f+1],u,c,p,h);if(d>a)o=f,a=d;else if(d===a){var g=Math.abs(f-s);g<l&&(o=f,l=g)}}a>i&&(o-r>3&&e(t,r,o,i),t[o+2]=a,n-o>3&&e(t,o,n,i))}(t,0,c,r),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function Le(e,t,r,n){for(var i=0;i<e.length;i++){var o=[];Ae(e[i],o,r,n),t.push(o)}}function De(e){return e/360+.5}function Oe(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Ne(e,t,r,n,i,o,a,s){if(n/=t,o>=(r/=t)&&a<n)return e;if(a<r||o>=n)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=r&&d<n)l.push(c);else if(!(d<r||f>=n)){var g=[];if("Point"===h||"MultiPoint"===h)Re(p,g,r,n,i);else if("LineString"===h)Fe(p,g,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)Ze(p,g,r,n,i,!1);else if("Polygon"===h)Ze(p,g,r,n,i,!0);else if("MultiPolygon"===h)for(var m=0;m<p.length;m++){var y=[];Ze(p[m],y,r,n,i,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<g.length;m++)l.push(ke(c.id,h,g[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===g.length?(h="LineString",g=g[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===g.length?"Point":"MultiPoint"),l.push(ke(c.id,h,g,c.tags))}}}return l.length?l:null}function Re(e,t,r,n,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=r&&a<=n&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Fe(e,t,r,n,i,o,a){for(var s,l,u=Be(e),c=0===i?Ge:Je,p=e.start,h=0;h<e.length-3;h+=3){var f=e[h],d=e[h+1],g=e[h+2],m=e[h+3],y=e[h+4],v=0===i?f:d,_=0===i?m:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-y,2))),v<r?_>r&&(l=c(u,f,d,m,y,r),a&&(u.start=p+s*l)):v>n?_<n&&(l=c(u,f,d,m,y,n),a&&(u.start=p+s*l)):je(u,f,d,g),_<r&&v>=r&&(l=c(u,f,d,m,y,r),b=!0),_>n&&v<=n&&(l=c(u,f,d,m,y,n),b=!0),!o&&b&&(a&&(u.end=p+s*l),t.push(u),u=Be(e)),a&&(p+=s)}var x=e.length-3;f=e[x],d=e[x+1],g=e[x+2],(v=0===i?f:d)>=r&&v<=n&&je(u,f,d,g),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&je(u,u[0],u[1],u[2]),u.length&&t.push(u)}function Be(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ze(e,t,r,n,i,o){for(var a=0;a<e.length;a++)Fe(e[a],t,r,n,i,o,!1)}function je(e,t,r,n){e.push(t),e.push(r),e.push(n)}function Ge(e,t,r,n,i,o){var a=(o-t)/(n-t);return e.push(o),e.push(r+(i-r)*a),e.push(1),a}function Je(e,t,r,n,i,o){var a=(o-r)/(i-r);return e.push(t+(n-t)*a),e.push(o),e.push(1),a}function Xe(e,t){for(var r=[],n=0;n<e.length;n++){var i,o=e[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ve(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ve(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ve(o.geometry[s][u],t));i.push(l)}r.push(ke(o.id,a,i,o.tags))}return r}function Ve(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function We(e,t){if(e.transformed)return e;var r,n,i,o=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(Ye(u[n],u[n+1],t,o,a,s));else for(n=0;n<u.length;n++){var p=[];for(i=0;i<u[n].length;i+=2)p.push(Ye(u[n][i],u[n][i+1],t,o,a,s));l.geometry.push(p)}}return e.transformed=!0,e}function Ye(e,t,r,n,i,o){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-o))]}function qe(e,t,r,n,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Ue(a,e[s],o,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function Ue(e,t,r,n){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ke(a,i,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Ke(a,i[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Ke(a,u[s],e,r,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&n.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function Ke(e,t,r,n,i,o){var a=n*n;if(n>0&&t.size<(i?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,n=0,i=e.length,o=i-2;n<i;o=n,n+=2)r+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=a,e[i-1-n]=s}}(s,o),e.push(s)}}function He(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)Ce(r,e.features[n],t,n);else"Feature"===e.type?Ce(r,e,t):Ce(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var r=t.buffer/t.extent,n=e,i=Ne(e,1,-1-r,r,0,-1,2,t),o=Ne(e,1,1-r,2+r,0,-1,2,t);return(i||o)&&(n=Ne(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=Xe(i,1).concat(n)),o&&(n=n.concat(Xe(o,-1)))),n}(n,t)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qe(e,t,r){return 32*((1<<e)*r+t)+e}function $e(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);var i=new Z(n.features),o=$(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}et.prototype.load=function(e){var t=this.options,r=t.log,n=t.minZoom,i=t.maxZoom,o=t.nodeSize;r&&console.time("total time");var a="prepare "+e.length+" points";r&&console.time(a),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(xe(e[l],l));this.trees[i+1]=new me(s,be,Te,o,Float32Array),r&&console.timeEnd(a);for(var u=i;u>=n;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new me(s,be,Te,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return r&&console.timeEnd("total time"),this},et.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){var a=this.getClusters([r,n,180,o],t),s=this.getClusters([-180,n,i,o],t);return a.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],c=0,p=l.range(Se(r),_e(o),Se(i),_e(n));c<p.length;c+=1){var h=p[c],f=l.points[h];u.push(f.numPoints?we(f):this.points[f.index])}return u},et.prototype.getChildren=function(e){var t=e>>5,r=e%32,n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var o=i.points[t];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=i.within(o.x,o.y,a);l<u.length;l+=1){var c=u[l],p=i.points[c];p.parentId===e&&s.push(p.numPoints?we(p):this.points[p.index])}if(0===s.length)throw new Error(n);return s},et.prototype.getLeaves=function(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n},et.prototype.getTile=function(e,t,r){var n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius/a,l=(r-s)/i,u=(r+1+s)/i,c={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,u),n.points,t,r,i,c),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,u),n.points,i,r,i,c),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,u),n.points,-1,r,i,c),c.features.length?c:null},et.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},et.prototype._appendLeaves=function(e,t,r,n,i){for(var o=0,a=this.getChildren(t);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?i+l.point_count<=n?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,r,n,i):i<n?i++:e.push(s),e.length===r)break}return i},et.prototype._addTileFeatures=function(e,t,r,n,i,o){for(var a=0,s=e;a<s.length;a+=1){var l=t[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-r)),Math.round(this.options.extent*(l.y*i-n))]],tags:l.numPoints?Me(l):this.points[l.index].properties},c=l.numPoints?l.id:this.points[l.index].id;void 0!==c&&(u.id=c),o.features.push(u)}},et.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},et.prototype._cluster=function(e,t){for(var r=[],n=this.options,i=n.radius,o=n.extent,a=n.reduce,s=i/(o*Math.pow(2,t)),l=0;l<e.length;l++){var u=e[l];if(!(u.zoom<=t)){u.zoom=t;for(var c=this.trees[t+1],p=c.within(u.x,u.y,s),h=u.numPoints||1,f=u.x*h,d=u.y*h,g=a?this._map(u,!0):null,m=(l<<5)+(t+1),y=0,v=p;y<v.length;y+=1){var _=v[y],b=c.points[_];if(!(b.zoom<=t)){b.zoom=t;var x=b.numPoints||1;f+=b.x*x,d+=b.y*x,h+=x,b.parentId=m,a&&a(g,this._map(b))}}1===h?r.push(u):(u.parentId=m,r.push(ye(f/h,d/h,m,h,g)))}}return r},et.prototype._map=function(e,t){if(e.numPoints)return t?Pe({},e.properties):e.properties;var r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?Pe({},n):n},He.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},He.prototype.splitTile=function(e,t,r,n,i,o,a){for(var s=[e,t,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=Qe(t,r,n),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=qe(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var d=1<<i-t;if(r!==Math.floor(o/d)||n!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,E=1+x;g=m=y=v=null,_=Ne(e,c,r-x,r+S,0,h.minX,h.maxX,l),b=Ne(e,c,r+w,r+E,0,h.minX,h.maxX,l),e=null,_&&(g=Ne(_,c,n-x,n+S,1,h.minY,h.maxY,l),m=Ne(_,c,n+w,n+E,1,h.minY,h.maxY,l),_=null),b&&(y=Ne(b,c,n-x,n+S,1,h.minY,h.maxY,l),v=Ne(b,c,n+w,n+E,1,h.minY,h.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*r,2*n),s.push(m||[],t+1,2*r,2*n+1),s.push(y||[],t+1,2*r+1,2*n),s.push(v||[],t+1,2*r+1,2*n+1)}}},He.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,o=n.debug;if(e<0||e>24)return null;var a=1<<e,s=Qe(e,t=(t%a+a)%a,r);if(this.tiles[s])return We(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,c=t,p=r;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[Qe(u,c,p)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,p),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?We(this.tiles[s],i):null):null};var tt=function(e){function r(t,r,n){e.call(this,t,r,$e),n&&(this.loadGeoJSON=n)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new L.Performance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return t(o);if("object"!=typeof a)return t(new Error("Input data is not a valid GeoJSON object."));W(a,!0);try{e._geoJSONIndex=r.cluster?new et(function(e){var t=e.superclusterOptions,r=e.clusterProperties;if(!r||!t)return t;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var p=c[u],h=r[p],f=h[0],d=h[1],g=n.createExpression(d),m=n.createExpression("string"==typeof f?[f,["accumulated"],["get",p]]:f);i[p]=g.value,o[p]=m.value}return t.map=function(e){s.properties=e;for(var t={},r=0,n=l;r<n.length;r+=1){var o=n[r];t[o]=i[o].evaluate(a,s)}return t},t.reduce=function(e,t){s.properties=t;for(var r=0,n=l;r<n.length;r+=1){var i=n[r];a.accumulated=e[i],e[i]=o[i].evaluate(a,s)}},t}(r)).load(a.features):new He(a,r.geojsonVtOptions)}catch(o){return t(o)}e.loaded={};var s={};if(i){var l=i.finish();l&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}t(null,s)})}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(t,r){var n=this.loaded,i=t.uid;return n&&n[i]?e.prototype.reloadTile.call(this,t,r):this.loadTile(t,r)},r.prototype.loadGeoJSON=function(e,t){if(e.request)n.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},r.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},r.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},r}(z),rt=function(e){var t=this;this.self=e,this.actor=new n.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:z,geojson:tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,r){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=r},this.self.registerRTLTextPlugin=function(e){if(n.plugin.isLoaded())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=e.applyArabicShaping,n.plugin.processBidirectionalText=e.processBidirectionalText,n.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return rt.prototype.setReferrer=function(e,t){this.referrer=t},rt.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},rt.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},rt.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},rt.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},rt.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},rt.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},rt.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},rt.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},rt.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}},rt.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},rt.prototype.loadRTLTextPlugin=function(e,t,r){try{n.plugin.isLoaded()||(this.self.importScripts(t),r(n.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){r(e.toString())}},rt.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new c),t},rt.prototype.getWorkerSource=function(e,t,r){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var i={send:function(t,r,i){n.actor.send(t,r,i,e)}};this.workerSources[e][t][r]=new this.workerSourceTypes[t](i,this.getLayerIndex(e))}return this.workerSources[e][t][r]},rt.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new B),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new rt(self)),rt}),define(0,function(t){var n=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===r[t]&&(r[t]=function(t){var r=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",n)||r.probablySupportsContext("experimental-webgl",n):r.supportsContext?r.supportsContext("webgl",n)||r.supportsContext("experimental-webgl",n):r.getContext("webgl",n)||r.getContext("experimental-webgl",n)}(t)),r[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),l={create:function(e,r,n){var i=t.window.document.createElement(e);return r&&(i.className=r),n&&n.appendChild(i),i},createNS:function(e,r){return t.window.document.createElementNS(e,r)}},c=t.window.document?t.window.document.documentElement.style:null;function r(e){if(!c)return null;for(var t=0;t<e.length;t++)if(e[t]in c)return e[t];return e[0]}var p,h=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);l.disableDrag=function(){c&&h&&(p=c[h],c[h]="none")},l.enableDrag=function(){c&&h&&(c[h]=p)};var d=r(["transform","WebkitTransform"]);l.setTransform=function(e,t){e.style[d]=t};var g=!1;try{var y=Object.defineProperty({},"passive",{get:function(){g=!0}});t.window.addEventListener("test",y,y),t.window.removeEventListener("test",y,y)}catch(t){g=!1}l.addEventListener=function(e,t,r,n){void 0===n&&(n={}),"passive"in n&&g?e.addEventListener(t,r,n):e.addEventListener(t,r,n.capture)},l.removeEventListener=function(e,t,r,n){void 0===n&&(n={}),"passive"in n&&g?e.removeEventListener(t,r,n):e.removeEventListener(t,r,n.capture)};var v=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",v,!0)};l.suppressClick=function(){t.window.addEventListener("click",v,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",v,!0)},0)},l.mousePos=function(e,r){var n=e.getBoundingClientRect();return r=r.touches?r.touches[0]:r,new t.Point(r.clientX-n.left-e.clientLeft,r.clientY-n.top-e.clientTop)},l.touchPos=function(e,r){for(var n=e.getBoundingClientRect(),i=[],o="touchend"===r.type?r.changedTouches:r.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return i},l.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},l.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var b=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};b.prototype.isLoaded=function(){return this.loaded},b.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,r=this.requestors;t<r.length;t+=1){var n=r[t],i=n.ids,o=n.callback;this._notify(i,o)}this.requestors=[]}},b.prototype.getImage=function(e){return this.images[e]},b.prototype.addImage=function(e,t){this.images[e]=t},b.prototype.removeImage=function(e){delete this.images[e],delete this.patterns[e]},b.prototype.listImages=function(){return Object.keys(this.images)},b.prototype.getImages=function(e,t){var r=!0;if(!this.isLoaded())for(var n=0,i=e;n<i.length;n+=1){var o=i[n];this.images[o]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},b.prototype._notify=function(e,t){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=this.images[o];a&&(r[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}t(null,r)},b.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},b.prototype.getPattern=function(e){var r=this.patterns[e];if(r)return r.position;var n=this.getImage(e);if(!n)return null;var i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},o=new t.ImagePosition(i,n);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},b.prototype.bind=function(e){var r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)},b.prototype._updatePatternAtlas=function(){var e=[];for(var r in this.patterns)e.push(this.patterns[r].bin);var n=t.potpack(e),i=n.w,o=n.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,h=p.width,f=p.height;t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c},{width:h,height:f}),t.RGBAImage.copy(p,a,{x:0,y:f-1},{x:u,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c+f},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:f}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u+h,y:c},{width:1,height:f})}this.dirty=!0};var x=_,w=1e20;function _(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(e,t,r,n,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<r;l++)n[l]=e[l*t+s];for(m(n,i,o,a,r),l=0;l<r;l++)e[l*t+s]=i[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)n[s]=e[l*t+s];for(m(n,i,o,a,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function m(e,t,r,n,i){r[0]=0,n[0]=-w,n[1]=+w;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);s<=n[a];)a--,s=(e[o]+o*o-(e[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);r[++a]=o,n[a]=s,n[a+1]=+w}for(o=0,a=0;o<i;o++){for(;n[a+1]<o;)a++;t[o]=(o-r[a])*(o-r[a])+e[r[a]]}}_.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var i=t.data[4*n+3]/255;this.gridOuter[n]=1===i?0:0===i?w:Math.pow(Math.max(0,.5-i),2),this.gridInner[n]=1===i?w:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var o=this.gridOuter[n]-this.gridInner[n];r[n]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return r};var S=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};S.prototype.setURL=function(e){this.url=e},S.prototype.getGlyphs=function(e,r){var n=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var l=s[a];i.push({stack:o,id:l})}t.asyncAll(i,function(e,t){var r=e.stack,i=e.id,o=n.entries[r];o||(o=n.entries[r]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=n._tinySDF(o,r,i))t(null,{stack:r,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else{var l=o.requests[s];l||(l=o.requests[s]=[],S.loadGlyphRange(r,s,n.url,n.requestTransform,function(e,t){if(t)for(var r in t)o.glyphs[+r]=t[+r];for(var n=0,i=l;n<i.length;n+=1)(0,i[n])(e,t);delete o.requests[s]})),l.push(function(e,n){e?t(e):n&&t(null,{stack:r,id:i,glyph:n[i]||null})})}}else t(null,{stack:r,id:i,glyph:a})},function(e,t){if(e)r(e);else if(t){for(var n={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.stack,l=a.id,u=a.glyph;(n[s]||(n[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}r(null,n)}})},S.prototype._tinySDF=function(e,r,n){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](n)||t.isChar["Hangul Syllables"](n))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(r)?a="900":/medium/i.test(r)?a="500":/light/i.test(r)&&(a="200"),o=e.tinySDF=new S.TinySDF(24,3,8,.25,i,a)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=function(e,r,n,i,o){var a=256*r,s=a+255,l=i(t.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,r){if(e)o(e);else if(r){for(var n={},i=0,a=t.parseGlyphPBF(r);i<a.length;i+=1){var s=a[i];n[s.id]=s}o(null,n)}})},S.TinySDF=x;var P=function(){this.specification=t.styleSpec.light.position};P.prototype.possiblyEvaluate=function(e,r){return t.sphericalToCartesian(e.expression.evaluate(r))},P.prototype.interpolate=function(e,r,n){return{x:t.number(e.x,r.x,n),y:t.number(e.y,r.y,n),z:t.number(e.z,r.z,n)}};var k=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new P,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),O=function(e){function i(r){e.call(this),this._transitionable=new t.Transitionable(k),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,r){if(void 0===r&&(r={}),!this._validate(t.validateLight,e,r))for(var n in e){var i=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),i):this._transitionable.setValue(n,i)}},i.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},i.prototype._validate=function(e,r,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),L=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};L.prototype.getDash=function(e,t){var r=e.join(",")+String(t);return this.positions[r]||(this.positions[r]=this.addDash(e,t)),this.positions[r]},L.prototype.addDash=function(e,r){var n=r?7:0,i=2*n+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,l=s/2,u=e.length%2==1,c=-n;c<=n;c++)for(var p=this.nextRow+n+c,h=this.width*p,f=u?-e[e.length-1]:0,d=e[0],g=1,m=0;m<this.width;m++){for(;d<m/s;)f=d,d+=e[g],u&&g===e.length-1&&(d+=e[0]),g++;var y=Math.abs(m-f*s),v=Math.abs(m-d*s),_=Math.min(y,v),b=g%2==1,x=void 0;if(r){var w=n?c/n*(l+1):0;if(b){var S=l-Math.abs(w);x=Math.sqrt(_*_+S*S)}else x=l-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,x+128))}var E={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=i,this.dirty=!0,E},L.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var j=function e(r,n){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,n,this.id);s.name="Worker "+o,this.actors.push(s)}};function E(e,r,n){var i=function(r,i){if(r)return n(r);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(e){return e.id})),e.url&&(o.tiles=t.canonicalizeTileset(o,e.url)),n(null,o)}};return e.url?t.getJSON(r(t.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}j.prototype.broadcast=function(e,r,n){n=n||function(){},t.asyncAll(this.actors,function(t,n){t.send(e,r,n)},n)},j.prototype.send=function(e,t,r,n){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(e,t,r),n},j.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},j.Actor=t.Actor;var D=function(e,r,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=n||24};D.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},D.prototype.contains=function(e){var r=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r);return e.x>=n&&e.x<o&&e.y>=i&&e.y<a};var F=function(e){function i(r,n,i,o){if(e.call(this),this.id=r,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(n,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(r,n){e._tileJSONRequest=null,r?e.fire(new t.ErrorEvent(r)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new D(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,r){var n=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(t,n){return e.aborted?r(null):t&&404!==t.status?r(t):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,a.bind(this)):"loading"===e.state?e.reloadCallback=r:this.dispatcher.send("reloadTile",i,a.bind(this),e.workerID)},i.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),N=function(e){function i(r,n,i,o){e.call(this),this.id=r,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(r,n){e._tileJSONRequest=null,r?e.fire(new t.ErrorEvent(r)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new D(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.loadTile=function(e,r){var n=this,i=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(i)e.state="errored",r(i);else if(o){n.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=n.map.painter.context,s=a.gl;e.texture=n.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",r(null)}})},i.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},i.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),z=function(e){function i(r,n,i,o){e.call(this,r,n,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},n),this.encoding=n.encoding||"mapbox"}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,r){var n=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(n,t.ResourceType.Tile),function(n,i){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,n){t&&(e.state="errored",r(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",r(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var r=e.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+n)%n,s=r.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},i}(N),B=function(e){function i(r,n,i,o){e.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(n.clusterRadius||50)*a,log:!1},clusterProperties:n.clusterProperties},n.workerOptions)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(r){if(r)e.fire(new t.ErrorEvent(r));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n))}})},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)r.fire(new t.ErrorEvent(e));else{var n={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(n.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new t.Event("data",n))}}),this},i.prototype.getClusterExpansionZoom=function(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},i.prototype.getClusterChildren=function(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},i.prototype.getClusterLeaves=function(e,t,r,n){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n,this.workerID),this},i.prototype._updateWorkerData=function(e){var r=this,n=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(t,i){r._removed||i&&i.abandoned||(r._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[r.id]&&(r._resourceTiming=i.resourceTiming[r.id].slice(0)),r.dispatcher.send(r.type+".coalesce",{source:n.source},null,r.workerID),e(t))},this.workerID)},i.prototype.loadTile=function(e,r){var n=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(o,n.map.painter,"reloadTile"===i),r(null))},this.workerID)},i.prototype.abortTile=function(e){e.aborted=!0},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),U=function(e){function i(t,r,n,i){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=r}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(e,r){var n=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?n.fire(new t.ErrorEvent(i)):o&&(n.image=o,e&&(n.coordinates=e),r&&r(),n._finishLoading())})},i.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,function(){t.texture=null}),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setCoordinates=function(e){var r=this;this.coordinates=e;var n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var r=1/0,n=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];r=Math.min(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}var u=i-r,c=o-n,p=Math.max(u,c),h=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),f=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((r+i)/2*f),Math.floor((n+o)/2*f))}(n),this.minzoom=this.maxzoom=this.tileID.z;var i=n.map(function(e){return r.tileID.getTilePoint(e)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},i.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),V={vector:F,raster:N,"raster-dem":z,geojson:B,video:function(e){function i(t,r,n,i){e.call(this,t,r,n,i),this.roundZoom=!0,this.type="video",this.options=r}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this,r=this.options;this.urls=[];for(var n=0,i=r.urls;n<i.length;n+=1){var o=i[n];this.urls.push(this.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(r,n){r?e.fire(new t.ErrorEvent(r)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(U),image:U,canvas:function(e){function i(r,n,i,o){e.call(this,r,n,i,o),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,n=r.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var r=t[e];if(isNaN(r)||r<=0)return!0}return!1},i}(U)},q=function(e,r,n,i){var o=new V[r.type](e,r,n,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function R(e,r){var n=t.identity([]);return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(r.toUnwrapped()))}function M(e,t,r,n,i){var o=function(e,t,r){if(e)for(var n=0,i=e;n<i.length;n+=1){var o=t[i[n]];if(o&&o.source===r&&"fill-extrusion"===o.type)return!0}else for(var a in t){var s=t[a];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,t,e.id),a=i.maxPitchScaleFactor(),s=e.tilesIn(r,a,o);s.sort(A);for(var l=[],u=0,c=s;u<c.length;u+=1){var p=c[u];l.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(t,e._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,n,i,a,R(e.transform,p.tileID))})}var h=function(e){for(var t={},r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},h=t[u]=t[u]||[],f=0,d=c;f<d.length;f+=1){var g=d[f];p[g.featureIndex]||(p[g.featureIndex]=!0,h.push(g))}}return t}(l);for(var f in h)h[f].forEach(function(t){var r=t.feature,n=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n});return h}function A(e,t){var r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}var G=function(e,t){this.max=e,this.onRemove=t,this.reset()};G.prototype.reset=function(){for(var e in this.data)for(var t=0,r=this.data[e];t<r.length;t+=1){var n=r[t];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},G.prototype.add=function(e,t,r){var n=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout(function(){n.remove(e,o)},r)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},G.prototype.has=function(e){return e.wrapped().key in this.data},G.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},G.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},G.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},G.prototype.remove=function(e,t){if(!this.has(e))return this;var r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this},G.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var W=function(e,t,r){this.context=e;var n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};W.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},W.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},W.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var H={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},X=function(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};X.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},X.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},X.prototype.enableAttributes=function(e,t){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],i=t.attributes[n.name];void 0!==i&&e.enableVertexAttribArray(i)}},X.prototype.setVertexAttribPointers=function(e,t,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[H[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}},X.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var K=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};K.prototype.get=function(){return this.current},K.prototype.set=function(e){},K.prototype.getDefault=function(){return this.default},K.prototype.setDefault=function(){this.set(this.default)};var Z=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(K),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},e}(K),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},e}(K),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},e}(K),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},e}(K),ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},e}(K),ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},e}(K),le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},e}(K),ue=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},e}(K),ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},e}(K),pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},e}(K),he=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},e}(K),fe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},e}(K),de=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},e}(K),ge=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(K),me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},e}(K),ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},e}(K),ve=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},e}(K),be=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},e}(K),xe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},e}(K),Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},e}(K),Ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},e}(K),Pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},e}(K),Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},e}(K),Te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},e}(K),ke=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},e}(K),Oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},e}(K),Ae=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},e}(K),Ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},e}(K),Re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},e}(K),Me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},e}(K),Le=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(K),je=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},e}(Le),De=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},e}(Le),Fe=function(e,t,r){this.context=e,this.width=t,this.height=r;var n=e.gl,i=this.framebuffer=n.createFramebuffer();this.colorAttachment=new je(e,i),this.depthAttachment=new De(e,i)};Fe.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var r=this.depthAttachment.get();r&&e.deleteRenderbuffer(r),e.deleteFramebuffer(this.framebuffer)};var Ne=function(e,t,r){this.func=e,this.mask=t,this.range=r};Ne.ReadOnly=!1,Ne.ReadWrite=!0,Ne.disabled=new Ne(519,Ne.ReadOnly,[0,1]);var ze=function(e,t,r,n,i,o){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o};ze.disabled=new ze({func:519,mask:0},0,0,7680,7680,7680);var Be=function(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r};Be.disabled=new Be(Be.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Be.unblended=new Be(Be.Replace,t.Color.transparent,[!0,!0,!0,!0]),Be.alphaBlended=new Be([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ue=function(e,t,r){this.enable=e,this.mode=t,this.frontFace=r};Ue.disabled=new Ue(!1,1029,2305),Ue.backCCW=new Ue(!0,1029,2305);var Ve=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Z(this),this.clearDepth=new Y(this),this.clearStencil=new J(this),this.colorMask=new Q(this),this.depthMask=new $(this),this.stencilMask=new ie(this),this.stencilFunc=new ae(this),this.stencilOp=new le(this),this.stencilTest=new ue(this),this.depthRange=new ce(this),this.depthTest=new pe(this),this.depthFunc=new he(this),this.blend=new fe(this),this.blendFunc=new de(this),this.blendColor=new ge(this),this.blendEquation=new me(this),this.cullFace=new ye(this),this.cullFaceSide=new ve(this),this.frontFace=new be(this),this.program=new xe(this),this.activeTexture=new Se(this),this.viewport=new Ee(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ce(this),this.bindTexture=new Te(this),this.bindVertexBuffer=new ke(this),this.bindElementBuffer=new Oe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ae(this),this.pixelStoreUnpack=new Ie(this),this.pixelStoreUnpackPremultiplyAlpha=new Re(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Ve.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ve.prototype.createIndexBuffer=function(e,t){return new W(this,e,t)},Ve.prototype.createVertexBuffer=function(e,t,r){return new X(this,e,t,r)},Ve.prototype.createRenderbuffer=function(e,t,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i},Ve.prototype.createFramebuffer=function(e,t){return new Fe(this,e,t)},Ve.prototype.clear=function(e){var t=e.color,r=e.depth,n=this.gl,i=0;t&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),n.clear(i)},Ve.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ve.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ve.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ve.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,Be.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Ve.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var qe=function(e){function i(r,n,i){var o=this;e.call(this),this.id=r,this.dispatcher=i,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=q(r,n,i,this),this._tiles={},this._cache=new G(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},i.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},i.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},i.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[t].upload(e)},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(St)},i.prototype.getRenderableIds=function(e){var r=this,n=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&n.push(+i);return e?n.sort(function(e,n){var i=r._tiles[e].tileID,o=r._tiles[n].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(r.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(r.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):n.sort(St)},i.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},i.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},i.prototype._reloadTile=function(e,t){var r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))},i.prototype._tileLoaded=function(e,r,n,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),r=0;r<t.length;r++){var n=t[r];if(e.neighboringTiles&&e.neighboringTiles[n]){var i=this.getTileByID(n);a(e,i),a(i,e)}}function a(e,t){e.needsHillshadePrepare=!0;var r=t.tileID.canonical.x-e.tileID.canonical.x,n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}},i.prototype.getTile=function(e){return this.getTileByID(e.key)},i.prototype.getTileByID=function(e){return this._tiles[e]},i.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(e,t,r,n){for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>r)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},i.prototype.findLoadedParent=function(e,t){for(var r=e.overscaledZ-1;r>=t;r--){var n=e.scaledTo(r);if(!n)return;var i=String(n.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(n))return this._cache.get(n)}},i.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),r=Math.floor(5*t),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},i.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,r=Math.round(t);if(this._prevLng=e,r){var n={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+r),n[o.tileID.key]=o}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},i.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter(function(e){return r._source.hasTile(e)}))):n=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-i.maxOverzooming,this._source.minzoom),s=Math.max(o+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,o);if(zt(this._source.type)){for(var u={},c={},p=0,h=Object.keys(l);p<h.length;p+=1){var f=h[p],d=l[f],g=this._tiles[f];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(d,a);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,o,s,l),u)l[y]||(this._coveredTiles[y]=!0,l[y]=u[y])}for(var v in l)this._tiles[v].clearFadeHold();for(var _=0,b=t.keysDifference(this._tiles,l);_<b.length;_+=1){var x=b[_],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},i.prototype._updateRetainedTiles=function(e,t){for(var r={},n={},o=Math.max(t-i.maxOverzooming,this._source.minzoom),a=Math.max(t+i.maxUnderzooming,this._source.minzoom),s={},l=0,u=e;l<u.length;l+=1){var c=u[l],p=this._addTile(c);r[c.key]=c,p.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,a,r);for(var h=0,f=e;h<f.length;h+=1){var d=f[h],g=this._tiles[d.key];if(!g.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var v=d.children(this._source.maxzoom);if(r[v[0].key]&&r[v[1].key]&&r[v[2].key]&&r[v[3].key])continue}for(var _=g.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(n[x.key])break;if(n[x.key]=!0,!(g=this.getTile(x))&&_&&(g=this._addTile(x)),g&&(r[x.key]=x,_=g.wasRequested(),g.hasData()))break}}}return r},i.prototype._addTile=function(e){var r=this._tiles[e.key];if(r)return r;(r=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));var n=Boolean(r);return n||(r=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))),r?(r.uses++,this._tiles[e.key]=r,n||this._source.fire(new t.Event("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null},i.prototype._setTileReloadTimer=function(e,t){var r=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(function(){r._reloadTile(e,"expired"),delete r._timers[e]},n))},i.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},i.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},i.prototype.tilesIn=function(e,r,n){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=n?a.getCameraQueryGeometry(e):e,l=e.map(function(e){return a.pointCoordinate(e)}),u=s.map(function(e){return a.pointCoordinate(e)}),c=this.getIds(),p=1/0,h=1/0,f=-1/0,d=-1/0,g=0,m=u;g<m.length;g+=1){var y=m[g];p=Math.min(p,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),d=Math.max(d,y.y)}for(var v=function(e){var n=i._tiles[c[e]];if(!n.holdingForFade()){var s=n.tileID,g=Math.pow(2,a.zoom-n.tileID.overscaledZ),m=r*n.queryPadding*t.EXTENT/n.tileSize/g,y=[s.getTilePoint(new t.MercatorCoordinate(p,h)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(y[0].x-m<t.EXTENT&&y[0].y-m<t.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var v=l.map(function(e){return s.getTilePoint(e)}),_=u.map(function(e){return s.getTilePoint(e)});o.push({tile:n,tileID:s,queryGeometry:v,cameraQueryGeometry:_,scale:g})}}},_=0;_<c.length;_++)v(_);return o},i.prototype.getVisibleCoordinates=function(e){for(var t=this,r=this.getRenderableIds(e).map(function(e){return t._tiles[e].tileID}),n=0,i=r;n<i.length;n+=1){var o=i[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var e in this._tiles){var r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(e,t,r){e=e||"_geojsonTileLayer",this._state.updateState(e,t,r)},i.prototype.removeFeatureState=function(e,t,r){e=e||"_geojsonTileLayer",this._state.removeFeatureState(e,t,r)},i.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},i}(t.Evented);function St(e,t){return e%32-t%32||t-e}function zt(e){return"raster"===e||"image"===e||"video"===e}function Lt(){return new t.window.Worker(Ln.workerUrl)}qe.maxOverzooming=10,qe.maxUnderzooming=3;var Ge=function(){this.active={}};Ge.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Lt);return this.active[e]=!0,this.workers.slice()},Ge.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)};var We,He=Math.floor(t.browser.hardwareConcurrency/2);function Mt(e,r){var n={};for(var i in e)"ref"!==i&&(n[i]=e[i]);return t.refProperties.forEach(function(e){e in r&&(n[e]=r[e])}),n}function At(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Mt(e[n],t[e[n].ref]));return e}Ge.workerCount=Math.max(Math.min(He,6),1);var Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(e,t,r){r.push({command:Xe.addSource,args:[e,t[e]]})}function Ot(e,t,r){t.push({command:Xe.removeSource,args:[e]}),r[e]=!0}function Ft(e,t,r,n){Ot(e,r,n),Bt(e,t,r)}function Ut(e,r,n){var i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[n][i],r[n][i]))return!1;return!0}function Nt(e,r,n,i,o,a){var s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}))}function Zt(e){return e.id}function jt(e,t){return e[t.id]=t,e}function Vt(e,r){if(!e)return[{command:Xe.setStyle,args:[r]}];var n=[];try{if(!t.isEqual(e.version,r.version))return[{command:Xe.setStyle,args:[r]}];t.isEqual(e.center,r.center)||n.push({command:Xe.setCenter,args:[r.center]}),t.isEqual(e.zoom,r.zoom)||n.push({command:Xe.setZoom,args:[r.zoom]}),t.isEqual(e.bearing,r.bearing)||n.push({command:Xe.setBearing,args:[r.bearing]}),t.isEqual(e.pitch,r.pitch)||n.push({command:Xe.setPitch,args:[r.pitch]}),t.isEqual(e.sprite,r.sprite)||n.push({command:Xe.setSprite,args:[r.sprite]}),t.isEqual(e.glyphs,r.glyphs)||n.push({command:Xe.setGlyphs,args:[r.glyphs]}),t.isEqual(e.transition,r.transition)||n.push({command:Xe.setTransition,args:[r.transition]}),t.isEqual(e.light,r.light)||n.push({command:Xe.setLight,args:[r.light]});var i={},o=[];!function(e,r,n,i){var o;for(o in r=r||{},e=e||{})e.hasOwnProperty(o)&&(r.hasOwnProperty(o)||Ot(o,n,i));for(o in r)r.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],r[o])||("geojson"===e[o].type&&"geojson"===r[o].type&&Ut(e,r,o)?n.push({command:Xe.setGeoJSONSourceData,args:[o,r[o].data]}):Ft(o,r,n,i)):Bt(o,r,n))}(e.sources,r.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(e){i[e.source]?n.push({command:Xe.removeLayer,args:[e.id]}):a.push(e)}),n=n.concat(o),function(e,r,n){r=r||[];var i,o,a,s,l,u,c,p=(e=e||[]).map(Zt),h=r.map(Zt),f=e.reduce(jt,{}),d=r.reduce(jt,{}),g=p.slice(),m=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(n.push({command:Xe.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],g[g.length-1-i]!==a&&(f.hasOwnProperty(a)?(n.push({command:Xe.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,u=g[g.length-i],n.push({command:Xe.addLayer,args:[d[a],u]}),g.splice(g.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],l=d[a],!m[a]&&!t.isEqual(s,l))if(t.isEqual(s.source,l.source)&&t.isEqual(s["source-layer"],l["source-layer"])&&t.isEqual(s.type,l.type)){for(c in Nt(s.layout,l.layout,n,a,null,Xe.setLayoutProperty),Nt(s.paint,l.paint,n,a,null,Xe.setPaintProperty),t.isEqual(s.filter,l.filter)||n.push({command:Xe.setFilter,args:[a,l.filter]}),t.isEqual(s.minzoom,l.minzoom)&&t.isEqual(s.maxzoom,l.maxzoom)||n.push({command:Xe.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Nt(s[c],l[c],n,a,c.slice(6),Xe.setPaintProperty):t.isEqual(s[c],l[c])||n.push({command:Xe.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Nt(s[c],l[c],n,a,c.slice(6),Xe.setPaintProperty):t.isEqual(s[c],l[c])||n.push({command:Xe.setLayerProperty,args:[a,c,l[c]]}))}else n.push({command:Xe.removeLayer,args:[a]}),u=g[g.lastIndexOf(a)+1],n.push({command:Xe.addLayer,args:[l,u]})}(a,r.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:Xe.setStyle,args:[r]}]}return n}var Ke=function(e,t,r){var n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};Ke.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ke.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Ke.prototype.insertCircle=function(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)},Ke.prototype._insertBoxCell=function(e,t,r,n,i,o){this.boxCells[i].push(o)},Ke.prototype._insertCircleCell=function(e,t,r,n,i,o){this.circleCells[i].push(o)},Ke.prototype._query=function(e,t,r,n,i,o){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,r,n,this._queryCell,a,h,o),i?a.length>0:a},Ke.prototype._queryCircle=function(e,t,r,n,i){var o=e-r,a=e+r,s=t-r,l=t+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var u=[],c={hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),n?u.length>0:u},Ke.prototype.query=function(e,t,r,n,i){return this._query(e,t,r,n,!1,i)},Ke.prototype.hitTest=function(e,t,r,n,i){return this._query(e,t,r,n,!0,i)},Ke.prototype.hitTestCircle=function(e,t,r,n){return this._queryCircle(e,t,r,!0,n)},Ke.prototype._queryCell=function(e,t,r,n,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(e<=c[d+2]&&t<=c[d+3]&&r>=c[d+0]&&n>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var g=this.circleCells[i];if(null!==g)for(var m=this.circles,y=0,v=g;y<v.length;y+=1){var _=v[y];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,r,n)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],S=m[b+2];o.push({key:this.circleKeys[_],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Ke.prototype._queryCellCircle=function(e,t,r,n,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var g=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,v=0,_=m;v<_.length;v+=1){var b=_[v];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Ke.prototype._forEachCell=function(e,t,r,n,i,o,a,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,e,t,r,n,d,o,a,s))return}},Ke.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Ke.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Ke.prototype._circlesCollide=function(e,t,r,n,i,o){var a=n-e,s=i-t,l=r+o;return l*l>a*a+s*s},Ke.prototype._circleAndRectCollide=function(e,t,r,n,i,o,a){var s=(o-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;var u=(a-i)/2,c=Math.abs(t-(i+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r};var Ze=t.properties.layout;function Wt(e,r,n,i,o){var a=t.identity(new Float32Array(16));return r?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),n||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function Xt(e,r,n,i,o){var a=t.identity(new Float32Array(16));return r?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),n||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function Ht(e,r){var n=[e.x,e.y,0,1];re(n,n,r);var i=n[3];return{point:new t.Point(n[0]/i,n[1]/i),signedDistanceFromCamera:i}}function Kt(e,t){var r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function Yt(e,r,n,i,o,a,s,l){var u=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,n.transform.zoom,Ze.properties[i?"text-size":"icon-size"]),p=[256/n.width*2+1,256/n.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=n.transform.width/n.transform.height,m=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)oe(v.numGlyphs,h);else{m=!1;var _=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(_,_,r),Kt(_,p)){var b=.5+_[3]/n.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(u,c,v),w=s?x*b:x/b,S=new t.Point(v.anchorX,v.anchorY),E=Ht(S,o).point,P={},C=$t(v,w,!1,l,r,o,a,e.glyphOffsetArray,f,h,E,S,P,g);m=C.useVertical,(C.notEnoughRoom||m||C.needsFlipping&&$t(v,w,!0,l,r,o,a,e.glyphOffsetArray,f,h,E,S,P,g).notEnoughRoom)&&oe(v.numGlyphs,h)}else oe(v.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function Jt(e,t,r,n,i,o,a,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),m=t.getoffsetX(h-1),y=ee(e*g,r,n,i,o,a,s.segment,f,d,l,u,c,p);if(!y)return null;var v=ee(e*m,r,n,i,o,a,s.segment,f,d,l,u,c,p);return v?{first:y,last:v}:null}function Qt(e,r,n,i){return e===t.WritingMode.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?r.y<n.y:r.x>n.x)?{needsFlipping:!0}:null}function $t(e,r,n,i,o,a,s,l,u,c,p,h,f,d){var g,m=r/24,y=e.lineOffsetX*r,v=e.lineOffsetY*r;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=Jt(m,l,y,v,n,p,h,e,u,a,f,!1);if(!w)return{notEnoughRoom:!0};var S=Ht(w.first.point,s).point,E=Ht(w.last.point,s).point;if(i&&!n){var P=Qt(e.writingMode,S,E,d);if(P)return P}g=[w.first];for(var C=e.glyphStartIndex+1;C<_-1;C++)g.push(ee(m*l.getoffsetX(C),y,v,n,p,h,e.segment,b,x,u,a,f,!1));g.push(w.last)}else{if(i&&!n){var T=Ht(h,o).point,k=e.lineStartIndex+e.segment+1,O=new t.Point(u.getx(k),u.gety(k)),A=Ht(O,o),I=A.signedDistanceFromCamera>0?A.point:te(h,O,T,1,o),R=Qt(e.writingMode,T,I,d);if(R)return R}var M=ee(m*l.getoffsetX(e.glyphStartIndex),y,v,n,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,!1);if(!M)return{notEnoughRoom:!0};g=[M]}for(var L=0,j=g;L<j.length;L+=1){var D=j[L];t.addDynamicAttributes(c,D.point,D.angle)}return{}}function te(e,t,r,n,i){var o=Ht(e.add(e.sub(t)._unit()),i).point,a=r.sub(o);return r.add(a._mult(n/a.mag()))}function ee(e,r,n,i,o,a,s,l,u,c,p,h,f){var d=i?e-r:e+r,g=d>0?1:-1,m=0;i&&(g*=-1,m=Math.PI),g<0&&(m+=Math.PI);for(var y=g>0?l+s:l+s+1,v=y,_=o,b=o,x=0,w=0,S=Math.abs(d);x+w<=S;){if((y+=g)<l||y>=u)return null;if(b=_,void 0===(_=h[y])){var E=new t.Point(c.getx(y),c.gety(y)),P=Ht(E,p);if(P.signedDistanceFromCamera>0)_=h[y]=P.point;else{var C=y-g;_=te(0===x?a:new t.Point(c.getx(C),c.gety(C)),E,b,S-x+1,p)}}x+=w,w=b.dist(_)}var T=(S-x)/w,k=_.sub(b),O=k.mult(T)._add(b);return O._add(k._unit()._perp()._mult(n*g)),{point:O,angle:m+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:f?{prevTileDistance:y-g===v?0:c.gettileUnitDistanceFromAnchor(y-g),lastSegmentViewportDistance:S-x}:null}}var Ye=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(e,t){for(var r=0;r<e;r++){var n=t.length;t.resize(n+4),t.float32.set(Ye,3*n)}}function re(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}var Je=function(e,t,r){void 0===t&&(t=new Ke(e.width+200,e.height+200,25)),void 0===r&&(r=new Ke(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function ne(e,t,r){e[t+4]=r?1:0}function se(e,r,n){return r*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}Je.prototype.placeCollisionBox=function(e,t,r,n,i){var o=this.projectAndGetPerspectiveRatio(n,e.anchorPointX,e.anchorPointY),a=r*o.perspectiveRatio,s=e.x1*a+o.point.x,l=e.y1*a+o.point.y,u=e.x2*a+o.point.x,c=e.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!t&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},Je.prototype.approximateTileDistance=function(e,t,r,n,i){var o=i?1:n/this.pitchfactor,a=e.lastSegmentViewportDistance*r;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},Je.prototype.placeCollisionCircles=function(e,r,n,i,o,a,s,l,u,c,p,h,f){var d=[],g=this.projectAnchor(u,o.anchorX,o.anchorY),m=l/24,y=o.lineOffsetX*l,v=o.lineOffsetY*l,_=new t.Point(o.anchorX,o.anchorY),b=Jt(m,s,y,v,!1,Ht(_,c).point,_,o,a,c,{},!0),x=!1,w=!1,S=!0,E=g.perspectiveRatio*i,P=1/(i*n),C=0,T=0;b&&(C=this.approximateTileDistance(b.first.tileDistance,b.first.angle,P,g.cameraDistance,h),T=this.approximateTileDistance(b.last.tileDistance,b.last.angle,P,g.cameraDistance,h));for(var k=0;k<e.length;k+=5){var O=e[k],A=e[k+1],I=e[k+2],R=e[k+3];if(!b||R<-C||R>T)ne(e,k,!1);else{var M=this.projectPoint(u,O,A),L=I*E;if(d.length>0){var j=M.x-d[d.length-4],D=M.y-d[d.length-3];if(L*L*2>j*j+D*D&&k+8<e.length){var F=e[k+8];if(F>-C&&F<T){ne(e,k,!1);continue}}}var N=k/5;d.push(M.x,M.y,L,N),ne(e,k,!0);var z=M.x-L,B=M.y-L,U=M.x+L,V=M.y+L;if(S=S&&this.isOffscreen(z,B,U,V),w=w||this.isInsideGrid(z,B,U,V),!r&&this.grid.hitTestCircle(M.x,M.y,L,f)){if(!p)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:S}},Je.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var r=[],n=1/0,i=1/0,o=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);n=Math.min(n,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),r.push(c)}for(var p={},h={},f=0,d=this.grid.query(n,i,o,a).concat(this.ignoredGrid.query(n,i,o,a));f<d.length;f+=1){var g=d[f],m=g.key;if(void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]={}),!p[m.bucketInstanceId][m.featureIndex]){var y=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(r,y)&&(p[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},Je.prototype.insertCollisionBox=function(e,t,r,n,i){var o={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(o,e[0],e[1],e[2],e[3])},Je.prototype.insertCollisionCircles=function(e,t,r,n,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},Je.prototype.projectAnchor=function(e,t,r){var n=[t,r,0,1];return re(n,n,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},Je.prototype.projectPoint=function(e,r,n){var i=[r,n,0,1];return re(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},Je.prototype.projectAndGetPerspectiveRatio=function(e,r,n){var i=[r,n,0,1];return re(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Je.prototype.isOffscreen=function(e,t,r,n){return r<100||e>=this.screenRightBoundary||n<100||t>this.screenBottomBoundary},Je.prototype.isInsideGrid=function(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary};var Qe=function(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r};Qe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(e,t,r,n,i){this.text=new Qe(e?e.text:null,t,r,i),this.icon=new Qe(e?e.icon:null,t,n,i)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var et=function(e,t,r){this.text=e,this.icon=t,this.skipFade=r},tt=function(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i},rt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};rt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var nt=function(e,t,r){this.transform=e.clone(),this.collisionIndex=new Je(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new rt(r)};function _e(e,t,r){e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0)}nt.prototype.placeLayerTile=function(e,r,n,i){var o=r.getBucket(e),a=r.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h=Wt(p,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,se(r,1,this.transform.zoom)),f=Wt(p,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,se(r,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new tt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID),this.placeLayerBucket(o,p,h,f,u,c,n,r.holdingForFade(),i,s)}},nt.prototype.placeLayerBucket=function(e,r,n,i,o,a,s,l,u,c){var p=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),f=p.get("text-optional"),d=p.get("icon-optional"),g=p.get("text-allow-overlap"),m=p.get("icon-allow-overlap"),y=g&&(m||!e.hasIconData()||d),v=m&&(g||!e.hasTextData()||f),_=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var b=0;b<e.symbolInstances.length;b++){var x=e.symbolInstances.get(b);if(!u[x.crossTileID]){if(l){this.placements[x.crossTileID]=new et(!1,!1,!1);continue}var w=!1,S=!1,E=!0,P=null,C=null,T=null,k=0,O=0,A=e.collisionArrays[b];A.textFeatureIndex&&(k=A.textFeatureIndex),A.textBox&&(w=(P=this.collisionIndex.placeCollisionBox(A.textBox,p.get("text-allow-overlap"),a,r,_.predicate)).box.length>0,E=E&&P.offscreen);var I=A.textCircles;if(I){var R=e.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),M=t.evaluateSizeForFeature(e.textSizeData,h,R);C=this.collisionIndex.placeCollisionCircles(I,p.get("text-allow-overlap"),o,a,R,e.lineVertexArray,e.glyphOffsetArray,M,r,n,s,"map"===p.get("text-pitch-alignment"),_.predicate),w=p.get("text-allow-overlap")||C.circles.length>0,E=E&&C.offscreen}A.iconFeatureIndex&&(O=A.iconFeatureIndex),A.iconBox&&(S=(T=this.collisionIndex.placeCollisionBox(A.iconBox,p.get("icon-allow-overlap"),a,r,_.predicate)).box.length>0,E=E&&T.offscreen);var L=f||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices,j=d||0===x.numIconVertices;L||j?j?L||(S=S&&w):w=S&&w:S=w=S&&w,w&&P&&this.collisionIndex.insertCollisionBox(P.box,p.get("text-ignore-placement"),e.bucketInstanceId,k,_.ID),S&&T&&this.collisionIndex.insertCollisionBox(T.box,p.get("icon-ignore-placement"),e.bucketInstanceId,O,_.ID),w&&C&&this.collisionIndex.insertCollisionCircles(C.circles,p.get("text-ignore-placement"),e.bucketInstanceId,k,_.ID),this.placements[x.crossTileID]=new et(w||y,S||v,E||e.justReloaded),u[x.crossTileID]=!0}}e.justReloaded=!1},nt.prototype.commit=function(e,t){this.commitTime=t;var r=!1,n=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new $e(s,n,a.text,a.icon),r=r||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new $e(null,n,a.text,a.icon,a.skipFade),r=r||a.text||a.icon)}for(var l in i){var u=i[l];if(!this.opacities[l]){var c=new $e(u,n,!1,!1);c.isHidden()||(this.opacities[l]=c,r=r||u.text.placed||u.icon.placed)}}r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},nt.prototype.updateLayerOpacities=function(e,t){for(var r={},n=0,i=t;n<i.length;n+=1){var o=i[n],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},nt.prototype.updateBucketOpacities=function(e,t,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var n=e.layers[0].layout,i=new $e(null,0,!1,!1,!0),o=n.get("text-allow-overlap"),a=n.get("icon-allow-overlap"),s=new $e(null,0,o&&(a||!e.hasIconData()||n.get("icon-optional")),a&&(o||!e.hasTextData()||n.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(r);for(var l=0;l<e.symbolInstances.length;l++){var u=e.symbolInstances.get(l),c=t[u.crossTileID],p=this.opacities[u.crossTileID];c?p=i:p||(p=s,this.opacities[u.crossTileID]=p),t[u.crossTileID]=!0;var h=u.numGlyphVertices>0||u.numVerticalGlyphVertices>0,f=u.numIconVertices>0;if(h){for(var d=we(p.text),g=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,m=0;m<g;m++)e.text.opacityVertexArray.emplaceBack(d);e.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),u.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(f){for(var y=we(p.icon),v=0;v<u.numIconVertices/4;v++)e.icon.opacityVertexArray.emplaceBack(y);e.icon.placedSymbolArray.get(l).hidden=p.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var _=e.collisionArrays[l];if(_){_.textBox&&_e(e.collisionBox.collisionVertexArray,p.text.placed,!1),_.iconBox&&_e(e.collisionBox.collisionVertexArray,p.icon.placed,!1);var b=_.textCircles;if(b&&e.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=c||0===b[x+4];_e(e.collisionCircle.collisionVertexArray,p.text.placed,w)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},nt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},nt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},nt.prototype.stillRecent=function(e){return this.commitTime+this.fadeDuration>e},nt.prototype.setStale=function(){this.stale=!0};var it=Math.pow(2,25),ot=Math.pow(2,24),at=Math.pow(2,17),st=Math.pow(2,16),lt=Math.pow(2,9),ut=Math.pow(2,8),ct=Math.pow(2,1);function we(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*it+t*ot+r*at+t*st+r*lt+t*ut+r*ct+t}var pt=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};pt.prototype.continuePlacement=function(e,t,r,n,i){for(;this._currentTileIndex<e.length;){var o=e[this._currentTileIndex];if(t.placeLayerTile(n,o,r,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var ht=function(e,t,r,n,i,o){this.placement=new nt(e,i,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1};ht.prototype.isDone=function(){return this._done},ht.prototype.continuePlacement=function(e,r,n){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=r[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new pt),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ht.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement};var ft=512/t.EXTENT/2,dt=function(e,t,r){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0;n<t.length;n++){var i=t.get(n),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};dt.prototype.getScaledCoordinates=function(e,r){var n=r.canonical.z-this.tileID.canonical.z,i=ft/Math.pow(2,n);return{x:Math.floor((r.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((r.canonical.y*t.EXTENT+e.anchorY)*i)}},dt.prototype.findMatches=function(e,t,r){for(var n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!r[c.crossTileID]){r[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var gt=function(){this.maxCrossTileID=0};gt.prototype.generate=function(){return++this.maxCrossTileID};var mt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};mt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var r in this.indexes){var n=this.indexes[r],i={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[r]=i}this.lng=e},mt.prototype.addBucket=function(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var u=a[e.scaledTo(Number(o)).key];u&&u.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=r.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new dt(e,t.symbolInstances,t.bucketInstanceId),!0},mt.prototype.removeBucketCrossTileIDs=function(e,t){for(var r in t.indexedSymbolInstances)for(var n=0,i=t.indexedSymbolInstances[r];n<i.length;n+=1){var o=i[n];delete this.usedCrossTileIDs[e][o.crossTileID]}},mt.prototype.removeStaleBuckets=function(e){var t=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t};var yt=function(){this.layerIndexes={},this.crossTileIDs=new gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};yt.prototype.addLayer=function(e,t,r){var n=this.layerIndexes[e.id];void 0===n&&(n=this.layerIndexes[e.id]=new mt);var i=!1,o={};n.handleWrapJump(r);for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(i=!0),i},yt.prototype.pruneUnusedLayers=function(e){var t={};for(var r in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[r]||delete this.layerIndexes[r]};var vt=function(e,r){return t.emitValidationErrors(e,r&&r.filter(function(e){return"source.canvas"!==e.identifier}))},_t=t.pick(Xe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),bt=t.pick(Xe,["setCenter","setZoom","setBearing","setPitch"]),xt=function(e){function i(r,n){var o=this;void 0===n&&(n={}),e.call(this),this.map=r,this.dispatcher=new j((We||(We=new Ge),We),this),this.imageManager=new b,this.glyphManager=new S(r._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new yt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(e){for(var t in a.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),a.sourceCaches)a.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId];if(t){var r=t.getSource();if(r&&r.vectorLayerIds)for(var n in o._layers){var i=o._layers[n];i.source===r.id&&o._validateLayer(i)}}}})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,r){var n=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,r.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,r){n._request=null,e?n.fire(new t.ErrorEvent(e)):r&&n._load(r,i)})},i.prototype.loadJSON=function(e,r){var n=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){n._request=null,n._load(e,!1!==r.validate)})},i.prototype._load=function(e,r){var n=this;if(!r||!vt(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,r,n){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(r(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(e,t){l=null,a||(a=e,i=t,u())}),c=t.getImage(r(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(e,t){c=null,a||(a=e,o=t,u())});function u(){if(a)n(a);else if(i&&o){var e=t.browser.getImageData(o),r={};for(var s in i){var l=i[s],u=l.width,c=l.height,p=l.x,h=l.y,f=l.sdf,d=l.pixelRatio,g=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,g,{x:p,y:h},{x:0,y:0},{width:u,height:c}),r[s]={data:g,pixelRatio:d,sdf:f}}n(null,r)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=At(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var l=s[a];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var r=this.sourceCaches[e.source];if(r){var n=e.sourceLayer;if(n){var i=r.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(e){for(var t=[],r=0,n=e;r<n.length;r+=1){var i=n[r],o=this._layers[i];"custom"!==o.type&&t.push(o.serialize())}return t},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var r=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=c[u],h=this._layers[p];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var r=this;if(this._checkLoaded(),vt(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=At(e.layers);var n=Vt(this.serialize(),e).filter(function(e){return!(e.command in bt)});if(0===n.length)return!1;var i=n.filter(function(e){return!(e.command in _t)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&r[e.command].apply(r,e.args)}),this.stylesheet=e,!0},i.prototype.addImage=function(e,r){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,r),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.getImage=function(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,r,n){var i=this;if(void 0===n&&(n={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(r).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,r,null,n))){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var o=this.sourceCaches[e]=new qe(e,r,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+r+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},i.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function(e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(vt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},i.prototype.moveLayer=function(e,r){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==r){var n=this._order.indexOf(e);this._order.splice(n,1);var i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var r=this._layers[e];if(r){r.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(e){return this._layers[e]},i.prototype.setLayerZoomRange=function(e,r,n){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.isEqual(i.filter,r))return null==r?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",r,null,n)||(i.filter=t.clone(r),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,r,n,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getLayoutProperty(r),n)||(o.setLayoutProperty(r,n,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,r){var n=this.getLayer(e);if(n)return n.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,r,n,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getPaintProperty(r),n)||(o.setPaintProperty(r,n,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function(e,r){this._checkLoaded();var n=e.source,i=e.sourceLayer,o=this.sourceCaches[n],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,r){this._checkLoaded();var n=e.source,i=this.sourceCaches[n];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!r||e.id?i.removeFeatureState(a,s,r):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var r=e.source,n=e.sourceLayer,i=this.sourceCaches[r],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||n){if(!(isNaN(o)||o<0))return i.getFeatureState(n,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return void 0!==e})},i.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=[],r=[],n=this._order.length-1;n>=0;n--)for(var i=this._order[n],o=0,a=e;o<a.length;o+=1){var s=a[o][i];if(s)if("fill-extrusion"===this._layers[i].type)for(var l=0,u=s;l<u.length;l+=1){var c=u[l];r.push(c)}else for(var p=0,h=s;p<h.length;p+=1){var f=h[p];t.push(f.feature)}}r.sort(function(e,t){return e.intersectionZ-t.intersectionZ});for(var d=0,g=r;d<g.length;d+=1){var m=g[d];t.push(m.feature)}return t},i.prototype.queryRenderedFeatures=function(e,r,n){r&&r.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",r.filter);var i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=r.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var u=[];for(var c in this.sourceCaches)r.layers&&!i[c]||u.push(M(this.sourceCaches[c],this._layers,e,r,n));return this.placement&&u.push(function(e,t,r,n,i,o){for(var a={},s=i.queryRenderedSymbols(r),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var p=c[u];l.push(o[p])}l.sort(A);for(var h=function(){var t=d[f],r=t.featureIndex.lookupSymbolFeatures(s[t.bucketInstanceId],t.bucketIndex,t.sourceLayerIndex,n.filter,n.layers,e);for(var i in r){var o=a[i]=a[i]||[],l=r[i];l.sort(function(e,r){var n=t.featureSortOrder;if(n){var i=n.indexOf(e.featureIndex);return n.indexOf(r.featureIndex)-i}return r.featureIndex-e.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var p=c[u];o.push(p)}}},f=0,d=l;f<d.length;f+=1)h();var g=function(r){a[r].forEach(function(n){var i=n.feature,o=e[r],a=t[o.source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a})};for(var m in a)g(m);return a}(this._layers,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(e,r){r&&r.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",r.filter);var n=this.sourceCaches[e];return n?function(e,t){for(var r=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),n=[],i={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(n,t))}return n}(n,r):[]},i.prototype.addSourceType=function(e,t,r){return i.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,r){void 0===r&&(r={}),this._checkLoaded();var n=this.light.getLight(),i=!1;for(var o in e)if(!t.isEqual(e[o],n[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}},i.prototype._validate=function(e,r,n,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&vt(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:n,styleSpec:t.styleSpec},i)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function(e,r,n,i){for(var o=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(e){return h.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===n;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new ht(e,this._order,d,r,n,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var g=0,m=this._order;g<m.length;g+=1){var y=m[g],v=this._layers[y];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function(e,t,r){this.imageManager.getImages(t.icons,r)},i.prototype.getGlyphs=function(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)},i.prototype.getResource=function(e,r,n){return t.makeRequest(r,n)},i}(t.Evented);xt.getSourceType=function(e){return V[e]},xt.setSourceType=function(e,t){V[e]=t},xt.registerForPluginAvailability=t.registerForPluginAvailability;var wt=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Et=si("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Pt=si("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ct=si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Tt=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),kt=si("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),It=si("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Rt=si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Dt=si("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),qt=si("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Gt=si("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),er=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),tr=si("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rr=si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),nr=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ir=si("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),or=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),ar=si("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),sr=si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),lr=si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ur=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),cr=si("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pr=si("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),hr=si("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),fr=si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),dr=si("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),gr=si("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function si(e,t){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n={};return{fragmentSource:e=e.replace(r,function(e,t,r,i,o){return n[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:t=t.replace(r,function(e,t,r,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return n[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var mr=Object.freeze({prelude:Et,background:Pt,backgroundPattern:Ct,circle:Tt,clippingMask:kt,heatmap:It,heatmapTexture:Rt,collisionBox:Dt,collisionCircle:qt,debug:Gt,fill:er,fillOutline:tr,fillOutlinePattern:rr,fillPattern:nr,fillExtrusion:ir,fillExtrusionPattern:or,extrusionTexture:ar,hillshadePrepare:sr,hillshade:lr,line:ur,lineGradient:cr,linePattern:pr,lineSDF:hr,raster:fr,symbolIcon:dr,symbolSDF:gr}),yr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};yr.prototype.bind=function(e,t,r,n,i,o,a,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,r,n,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},yr.prototype.freshBind=function(e,t,r,n,i,o,a){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var h=0,f=r;h<f.length;h+=1)f[h].enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var d=0,g=r;d<g.length;d+=1){var m=g[d];m.bind(),m.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),u.currentNumAttributes=l},yr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var vr=function(e,r,n,i,o){var a=e.gl;this.program=a.createProgram();var s=n.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(Et.fragmentSource,r.fragmentSource).join("\n"),u=s.concat(Et.vertexSource,r.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);var p=a.createShader(a.VERTEX_SHADER);a.shaderSource(p,u),a.compileShader(p),a.attachShader(this.program,p);for(var h=n.layoutAttributes||[],f=0;f<h.length;f++)a.bindAttribLocation(this.program,f,h[f].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},g=0;g<this.numAttributes;g++){var m=a.getActiveAttrib(this.program,g);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),v=0;v<y;v++){var _=a.getActiveUniform(this.program,v);_&&(d[_.name]=a.getUniformLocation(this.program,_.name))}this.fixedUniforms=i(e,d),this.binderUniforms=n.getUniforms(e,d)};function hi(e,r,n){var i=1/se(n,1,r.transform.tileZoom),o=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,r.transform.tileZoom)/o,s=a*(n.tileID.canonical.x+n.tileID.wrap*o),l=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}vr.prototype.draw=function(e,t,r,n,i,o,a,s,l,u,c,p,h,f,d,g){var m,y=e.gl;for(var v in e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var _=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new yr)).bind(e,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,g),y.drawElements(t,w.primitiveLength*_,y.UNSIGNED_SHORT,w.primitiveOffset*_*2)}};var _r=function(e,r,n){var i=r.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-r.transform.angle),t.transformMat3(a,a,s);var l=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+n}},br=function(e,r,n,i,o,a){return t.extend(_r(e,r,n),hi(o,r,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},xr=function(e,r,n){var i=t.create$1();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:n,u_opacity:r}},wr=function(e){return{u_matrix:e}},Sr=function(e,r,n,i){return t.extend(wr(e),hi(n,r,i))},Er=function(e,t){return{u_matrix:e,u_world:t}},Pr=function(e,r,n,i,o){return t.extend(Sr(e,r,n,i),{u_world:o})},Cr=function(e,t,r,n){var i,o,a=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var s=se(r,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},Tr=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,r.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,r.u_overscale_factor)}},kr=function(e,t,r){var n=se(r,1,t.zoom),i=Math.pow(2,t.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[t.pixelsToGLUnits[0]/(n*i),t.pixelsToGLUnits[1]/(n*i)],u_overscale_factor:o}},Or=function(e,t){return{u_matrix:e,u_color:t}},Ar=function(e){return{u_matrix:e}},Ir=function(e,t,r,n){return{u_matrix:e,u_extrude_scale:se(t,1,r),u_intensity:n}},Rr=function(e,r,n,i){var o=t.create$1();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:n,u_color_ramp:i,u_opacity:r.paint.get("heatmap-opacity")}},Mr=function(e,t,r){var n=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);var s=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),s),u_image:0,u_latrange:zi(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:i,u_accent:o}},Lr=function(e,r){var n=e.dem.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:e.tileID.overscaledZ,u_maxzoom:r}};function zi(e,r){var n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new t.MercatorCoordinate(0,i/n).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}var jr=function(e,t,r){var n=e.transform;return{u_matrix:Ai(e,t,r),u_ratio:1/se(t,1,n.zoom),u_gl_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Dr=function(e,r,n){return t.extend(jr(e,r,n),{u_image:0})},Fr=function(e,r,n,i){var o=e.transform,a=Mi(r,o);return{u_matrix:Ai(e,r,n),u_texsize:r.imageAtlasTexture.size,u_ratio:1/se(r,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Nr=function(e,r,n,i,o){var a=e.transform,s=e.lineAtlas,l=Mi(r,a),u="round"===n.layout.get("line-cap"),c=s.getDash(i.from,u),p=s.getDash(i.to,u),h=c.width*o.fromScale,f=p.width*o.toScale;return t.extend(jr(e,r,n),{u_patternscale_a:[l/h,-c.height/2],u_patternscale_b:[l/f,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:o.t})};function Mi(e,t){return 1/se(e,1,t.tileZoom)}function Ai(e,t,r){return e.translatePosMatrix(t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var zr=function(e,t,r,n,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bi(i.paint.get("raster-hue-rotate"))};var o,a};function Bi(e){e*=Math.PI/180;var t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}var Br=function(e,t,r,n,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}},Ur=function(e,r,n,i,o,a,s,l,u,c,p){var h=o.transform;return t.extend(Br(e,r,n,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+p})},Vr=function(e,t,r){return{u_matrix:e,u_opacity:t,u_color:r}},qr=function(e,r,n,i,o,a){return t.extend(function(e,t,r,n){var i=r.imageManager.getPattern(e.from),o=r.imageManager.getPattern(e.to),a=r.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,r.transform.tileZoom)/u,p=c*(n.tileID.canonical.x+n.tileID.wrap*u),h=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/se(n,1,r.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(i,a,n,o),{u_matrix:e,u_opacity:r})},Gr={fillExtrusion:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient)}},fillExtrusionPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,r.u_height_factor),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},extrusionTexture:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fill:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},fillPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},fillOutline:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world)}},fillOutlinePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},circle:function(e,r){return{u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,r.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},collisionBox:Tr,collisionCircle:Tr,debug:function(e,r){return{u_color:new t.UniformColor(e,r.u_color),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},clippingMask:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmap:function(e,r){return{u_extrude_scale:new t.Uniform1f(e,r.u_extrude_scale),u_intensity:new t.Uniform1f(e,r.u_intensity),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmapTexture:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_color_ramp:new t.Uniform1i(e,r.u_color_ramp),u_opacity:new t.Uniform1f(e,r.u_opacity)}},hillshade:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_latrange:new t.Uniform2f(e,r.u_latrange),u_light:new t.Uniform2f(e,r.u_light),u_shadow:new t.UniformColor(e,r.u_shadow),u_highlight:new t.UniformColor(e,r.u_highlight),u_accent:new t.UniformColor(e,r.u_accent)}},hillshadePrepare:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_dimension:new t.Uniform2f(e,r.u_dimension),u_zoom:new t.Uniform1f(e,r.u_zoom),u_maxzoom:new t.Uniform1f(e,r.u_maxzoom)}},line:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,r.u_gl_units_to_pixels)}},lineGradient:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,r.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,r.u_image)}},linePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_texsize:new t.Uniform2f(e,r.u_texsize),u_ratio:new t.Uniform1f(e,r.u_ratio),u_image:new t.Uniform1i(e,r.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,r.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},lineSDF:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,r.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,r.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,r.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,r.u_sdfgamma),u_image:new t.Uniform1i(e,r.u_image),u_tex_y_a:new t.Uniform1f(e,r.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,r.u_tex_y_b),u_mix:new t.Uniform1f(e,r.u_mix)}},raster:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_tl_parent:new t.Uniform2f(e,r.u_tl_parent),u_scale_parent:new t.Uniform1f(e,r.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,r.u_buffer_scale),u_fade_t:new t.Uniform1f(e,r.u_fade_t),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image0:new t.Uniform1i(e,r.u_image0),u_image1:new t.Uniform1i(e,r.u_image1),u_brightness_low:new t.Uniform1f(e,r.u_brightness_low),u_brightness_high:new t.Uniform1f(e,r.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,r.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,r.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,r.u_spin_weights)}},symbolIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,r.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture)}},symbolSDF:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,r.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},background:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_color:new t.UniformColor(e,r.u_color)}},backgroundPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image:new t.Uniform1i(e,r.u_image),u_pattern_tl_a:new t.Uniform2f(e,r.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,r.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,r.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,r.u_pattern_br_b),u_texsize:new t.Uniform2f(e,r.u_texsize),u_mix:new t.Uniform1f(e,r.u_mix),u_pattern_size_a:new t.Uniform2f(e,r.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,r.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,r.u_scale_a),u_scale_b:new t.Uniform1f(e,r.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,r.u_tile_units_to_pixels)}}};function ji(e,r){for(var n=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<n.length;i++){var o={},a=n[i],s=n.slice(i+1);Vi(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,r)}}function Vi(e,r,n,i,o){for(var a=0;a<n.length;a++){var s=n[a];if(i.isLessThan(s.tileID))break;if(r.key===s.tileID.key)return;if(s.tileID.isChildOf(r)){for(var l=r.children(1/0),u=0;u<l.length;u++)Vi(e,l[u],n.slice(a),i,o);return}}var c=r.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,r.canonical.x-(e.canonical.x<<c),r.canonical.y-(e.canonical.y<<c));o[p.key]=o[p.key]||p}function qi(e,t,r,n,i){for(var o=e.context,a=o.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),l=0;l<n.length;l++){var u=n[l],c=t.getTile(u),p=c.getBucket(r);if(p){var h=i?p.collisionCircle:p.collisionBox;h&&s.draw(o,i?a.TRIANGLES:a.LINES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Ue.disabled,kr(u.posMatrix,e.transform,c),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,e.transform.zoom,null,null,h.collisionVertexBuffer)}}}var Wr=t.identity(new Float32Array(16)),Hr=t.properties.layout;function Xi(e,r,n,i,o,a,s,l,u,c,p,h){for(var f,d,g=e.context,m=g.gl,y=e.transform,v="map"===l,_="map"===u,b=v&&"point"!==n.layout.get("symbol-placement"),x=v&&!_&&!b,w=void 0!==n.layout.get("symbol-sort-key").constantOr(1),S=e.depthModeForSublayer(0,Ne.ReadOnly),E=[],P=0,C=i;P<C.length;P+=1){var T=C[P],k=r.getTile(T),O=k.getBucket(n);if(O){var A=o?O.text:O.icon;if(A&&A.segments.get().length){var I=A.programConfigurations.get(n.id),R=o||O.sdfIcons,M=o?O.textSizeData:O.iconSizeData;f||(f=e.useProgram(R?"symbolSDF":"symbolIcon",I),d=t.evaluateSizeForZoom(M,y.zoom,Hr.properties[o?"text-size":"icon-size"])),g.activeTexture.set(m.TEXTURE0);var L=void 0,j=void 0,D=void 0;if(o)j=k.glyphAtlasTexture,D=m.LINEAR,L=k.glyphAtlasTexture.size;else{var F=1!==n.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear,N=_||0!==y.pitch;j=k.imageAtlasTexture,D=R||e.options.rotating||e.options.zooming||F||N?m.LINEAR:m.NEAREST,L=k.imageAtlasTexture.size}var z=se(k,1,e.transform.zoom),B=Wt(T.posMatrix,_,v,e.transform,z),U=Xt(T.posMatrix,_,v,e.transform,z);b&&Yt(O,T.posMatrix,e,o,B,U,_,c);var V=e.translatePosMatrix(T.posMatrix,k,a,s),q=b?Wr:B,G=e.translatePosMatrix(U,k,a,s,!0),W=R&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),H={program:f,buffers:A,uniformValues:R?Ur(M.functionType,d,x,_,e,V,q,G,o,L,!0):Br(M.functionType,d,x,_,e,V,q,G,o,L),atlasTexture:j,atlasInterpolation:D,isSDF:R,hasHalo:W};if(w)for(var X=0,K=A.segments.get();X<K.length;X+=1){var Z=K[X];E.push({segments:new t.SegmentVector([Z]),sortKey:Z.sortKey,state:H})}else E.push({segments:A.segments,sortKey:0,state:H})}}}w&&E.sort(function(e,t){return e.sortKey-t.sortKey});for(var Y=0,J=E;Y<J.length;Y+=1){var Q=J[Y],$=Q.state;if($.atlasTexture.bind($.atlasInterpolation,m.CLAMP_TO_EDGE),$.isSDF){var ee=$.uniformValues;$.hasHalo&&(ee.u_is_halo=1,Hi($.buffers,Q.segments,n,e,$.program,S,p,h,ee)),ee.u_is_halo=0}Hi($.buffers,Q.segments,n,e,$.program,S,p,h,$.uniformValues)}}function Hi(e,t,r,n,i,o,a,s,l){var u=n.context,c=u.gl;i.draw(u,c.TRIANGLES,o,a,s,Ue.disabled,l,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,n.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Ki(e,t,r,n,i,o,a){var s,l,u,c,p,h=e.context.gl,f=r.paint.get("fill-pattern"),d=f&&f.constantOr(1),g=r.getCrossfadeParameters();a?(l=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=d?"fillPattern":"fill",s=h.TRIANGLES);for(var m=0,y=n;m<y.length;m+=1){var v=y[m],_=t.getTile(v);if(!d||_.patternsLoaded()){var b=_.getBucket(r);if(b){var x=b.programConfigurations.get(r.id),w=e.useProgram(l,x);d&&(e.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(g));var S=f.constantOr(null);if(S&&_.imageAtlas){var E=_.imageAtlas.patternPositions[S.to],P=_.imageAtlas.patternPositions[S.from];E&&P&&x.setConstantPatternPositions(E,P)}var C=e.translatePosMatrix(v.posMatrix,_,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,p=b.segments2;var T=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&d?Pr(C,e,g,_,T):Er(C,T)}else c=b.indexBuffer,p=b.segments,u=d?Sr(C,e,g,_):wr(C);w.draw(e.context,s,i,e.stencilModeForClipping(v),o,Ue.disabled,u,r.id,b.layoutVertexBuffer,c,p,r.paint,e.transform.zoom,x)}}}}function Yi(e,r){var n=e.context,i=n.gl,o=r.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(n,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=r.viewportFrame=n.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}n.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:t.Color.transparent}),n.setStencilMode(ze.disabled),n.setDepthMode(new Ne(i.LEQUAL,Ne.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass())}function Ji(e,t,r){var n=t.viewportFrame;if(n){var i=e.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n.colorAttachment.get()),e.useProgram("extrusionTexture").draw(i,o.TRIANGLES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Ue.disabled,xr(e,r,0),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function Qi(e,t,r,n,i,o){var a=e.context,s=a.gl,l=t.fbo;if(l){var u=e.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=Mr(e,t,r);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?u.draw(a,s.TRIANGLES,n,i,o,Ue.disabled,c,r.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):u.draw(a,s.TRIANGLES,n,i,o,Ue.disabled,c,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function $i(e,r,n,i,o,a,s){var l=e.context,u=l.gl;if(r.dem&&r.dem.data){var c=r.dem.dim,p=r.dem.stride,h=r.dem.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(p),r.demTexture){var f=r.demTexture;f.update(h,{premultiply:!1}),f.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else r.demTexture=new t.Texture(l,h,u.RGBA,{premultiply:!1}),r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var d=r.fbo;if(!d){var g=new t.Texture(l,{width:c,height:c,data:null},u.RGBA);g.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=r.fbo=l.createFramebuffer(c,c)).colorAttachment.set(g.texture)}l.bindFramebuffer.set(d.framebuffer),l.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,o,a,s,Ue.disabled,Lr(r,i),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function to(e,r,n,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,u=r?(s-r.timeAdded)/a:-1,c=n.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function eo(e,r,n){var i=e.context,o=i.gl,a=n.posMatrix,s=e.useProgram("debug"),l=Ne.disabled,u=ze.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(i,o.LINE_STRIP,l,u,c,Ue.disabled,Or(a,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var h=function(e,t,r,n){n=n||1;var i,o,a,s,l,u,c,p,h=[];for(i=0,o=e.length;i<o;i++)if(l=Xr[e[i]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=t+l[1][a]*n,c=200-l[1][a+1]*n,p&&h.push(p.x,p.y,u,c),p={x:u,y:c});t+=l[0]*n}return h}(n.toString(),50,0,5),f=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,g=0;g<h.length;g+=2)f.emplaceBack(h[g],h[g+1]),d.emplaceBack(g,g+1);for(var m=i.createVertexBuffer(f,wt.members),y=i.createIndexBuffer(d),v=t.SegmentVector.simpleSegment(0,0,f.length/2,f.length/2),_=r.getTile(n).tileSize,b=t.EXTENT/(Math.pow(2,e.transform.zoom-n.overscaledZ)*_),x=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<x.length;w++){var S=x[w];s.draw(i,o.LINES,l,u,c,Ue.disabled,Or(t.translate([],a,[b*S[0],b*S[1],0]),t.Color.white),p,m,y,v)}s.draw(i,o.LINES,l,u,c,Ue.disabled,Or(a,t.Color.black),p,m,y,v)}var Xr={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Kr={symbol:function(e,t,r,n){if("translucent"===e.renderPass){var i=ze.disabled,o=e.colorModeForRenderPass();0!==r.paint.get("icon-opacity").constantOr(1)&&Xi(e,t,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),i,o),0!==r.paint.get("text-opacity").constantOr(1)&&Xi(e,t,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),i,o),t.map.showCollisionBoxes&&function(e,t,r,n){qi(e,t,r,n,!1),qi(e,t,r,n,!0)}(e,t,r,n)}},circle:function(e,t,r,n){if("translucent"===e.renderPass){var i=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.context,l=s.gl,u=e.depthModeForSublayer(0,Ne.ReadOnly),c=ze.disabled,p=e.colorModeForRenderPass(),h=0;h<n.length;h++){var f=n[h],d=t.getTile(f),g=d.getBucket(r);if(g){var m=g.programConfigurations.get(r.id);e.useProgram("circle",m).draw(s,l.TRIANGLES,u,c,p,Ue.disabled,Cr(e,f,d,r),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,e.transform.zoom,m)}}}},heatmap:function(e,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,Ne.ReadOnly),l=ze.disabled,u=new Be([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r){var n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),i=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),function t(e,r,n,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r.width/4,r.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,r,n,i))}(e,t,o,i)}}(o,e,n),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var p=i[c];if(!r.hasRenderableParent(p)){var h=r.getTile(p),f=h.getBucket(n);if(f){var d=f.programConfigurations.get(n.id),g=e.useProgram("heatmap",d),m=e.transform.zoom;g.draw(o,a.TRIANGLES,s,l,u,Ue.disabled,Ir(p.posMatrix,h,m,n.paint.get("heatmap-intensity")),n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){var n=e.context,i=n.gl,o=r.heatmapFbo;if(o){n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);var a=r.colorRampTexture;a||(a=r.colorRampTexture=new t.Texture(n,r.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Ue.disabled,Rr(e,r,0,1),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}}(e,n))},line:function(e,r,n,i){if("translucent"===e.renderPass){var o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Ne.ReadOnly),l=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),c=n.paint.get("line-pattern"),p=c.constantOr(1),h=n.paint.get("line-gradient"),f=n.getCrossfadeParameters(),d=u?"lineSDF":p?"linePattern":h?"lineGradient":"line",g=e.context,m=g.gl,y=!0;if(h){g.activeTexture.set(m.TEXTURE0);var v=n.gradientTexture;if(!n.gradient)return;v||(v=n.gradientTexture=new t.Texture(g,n.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var _=0,b=i;_<b.length;_+=1){var x=b[_],w=r.getTile(x);if(!p||w.patternsLoaded()){var S=w.getBucket(n);if(S){var E=S.programConfigurations.get(n.id),P=e.context.program.get(),C=e.useProgram(d,E),T=y||C.program!==P,k=c.constantOr(null);if(k&&w.imageAtlas){var O=w.imageAtlas.patternPositions[k.to],A=w.imageAtlas.patternPositions[k.from];O&&A&&E.setConstantPatternPositions(O,A)}var I=u?Nr(e,w,n,u,f):p?Fr(e,w,n,f):h?Dr(e,w,n):jr(e,w,n);u&&(T||e.lineAtlas.dirty)?(g.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(g)):p&&(g.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(f)),C.draw(g,m.TRIANGLES,s,e.stencilModeForClipping(x),l,Ue.disabled,I,n.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,n.paint,e.transform.zoom,E),y=!1}}}}}},fill:function(e,r,n,i){var o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";if(e.renderPass===l){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?Ne.ReadWrite:Ne.ReadOnly);Ki(e,r,n,i,u,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var c=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Ne.ReadOnly);Ki(e,r,n,i,c,s,!0)}}},"fill-extrusion":function(e,t,r,n){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){Yi(e,r);var i=new Ne(e.context.gl.LEQUAL,Ne.ReadWrite,[0,1]),o=ze.disabled,a=e.colorModeForRenderPass();!function(e,t,r,n,i,o,a){for(var s=e.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=r.getCrossfadeParameters(),h=0,f=n;h<f.length;h+=1){var d=f[h],g=t.getTile(d),m=g.getBucket(r);if(m){var y=m.programConfigurations.get(r.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(l.TEXTURE0),g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(p));var _=u.constantOr(null);if(_&&g.imageAtlas){var b=g.imageAtlas.patternPositions[_.to],x=g.imageAtlas.patternPositions[_.from];b&&x&&y.setConstantPatternPositions(b,x)}var w=e.translatePosMatrix(d.posMatrix,g,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),S=r.paint.get("fill-extrusion-vertical-gradient"),E=c?br(w,e,S,d,p,g):_r(w,e,S);v.draw(s,s.gl.TRIANGLES,i,o,a,Ue.backCCW,E,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,e.transform.zoom,y)}}}(e,t,r,n,i,o,a)}else"translucent"===e.renderPass&&Ji(e,r,r.paint.get("fill-extrusion-opacity"))},hillshade:function(e,t,r,n){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,o=t.getSource().maxzoom,a=e.depthModeForSublayer(0,Ne.ReadOnly),s=ze.disabled,l=e.colorModeForRenderPass(),u=0,c=n;u<c.length;u+=1){var p=c[u],h=t.getTile(p);h.needsHillshadePrepare&&"offscreen"===e.renderPass?$i(e,h,r,o,a,s,l):"translucent"===e.renderPass&&Qi(e,h,r,a,s,l)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,r,n){if("translucent"===e.renderPass&&0!==r.paint.get("raster-opacity"))for(var i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),l=ze.disabled,u=e.colorModeForRenderPass(),c=n.length&&n[0].overscaledZ,p=!e.options.moving,h=0,f=n;h<f.length;h+=1){var d=f[h],g=e.depthModeForSublayer(d.overscaledZ-c,1===r.paint.get("raster-opacity")?Ne.ReadWrite:Ne.ReadOnly,o.LESS),m=t.getTile(d),y=e.transform.calculatePosMatrix(d.toUnwrapped(),p);m.registerFadeDuration(r.paint.get("raster-fade-duration"));var v=t.findLoadedParent(d,0),_=to(m,v,t,r,e.transform),b=void 0,x=void 0,w="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*b%1,m.tileID.canonical.y*b%1]):m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=zr(y,x||[0,0],b||1,_,r);a instanceof U?s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,r.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,r.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,r.paint,e.transform.zoom):s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,r){var n=r.paint.get("background-color"),i=r.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=e.transform,l=s.tileSize,u=r.paint.get("background-pattern");if(!e.isPatternMissing(u)){var c=u||1!==n.a||1!==i?"translucent":"opaque";if(e.renderPass===c){var p=ze.disabled,h=e.depthModeForSublayer(0,"opaque"===c?Ne.ReadWrite:Ne.ReadOnly),f=e.colorModeForRenderPass(),d=e.useProgram(u?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var m=r.getCrossfadeParameters(),y=0,v=g;y<v.length;y+=1){var _=v[y],b=e.transform.calculatePosMatrix(_.toUnwrapped()),x=u?qr(b,i,e,u,{tileID:_,tileSize:l},m):Vr(b,i,n);d.draw(o,a.TRIANGLES,h,p,f,Ue.disabled,x,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,r){for(var n=0;n<r.length;n++)eo(e,t,r[n])},custom:function(e,t,r){var n=e.context,i=r.implementation;if("offscreen"===e.renderPass){var o=i.prerender;o&&(e.setCustomLayerDefaults(),o.call(i,n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState()),"3d"===i.renderingMode&&(e.setCustomLayerDefaults(),Yi(e,r),i.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass)if("3d"===i.renderingMode)Ji(e,r,1);else{e.setCustomLayerDefaults(),n.setColorMode(e.colorModeForRenderPass()),n.setStencilMode(ze.disabled);var a=e.depthModeForSublayer(0,Ne.ReadOnly);n.setDepthMode(a),i.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState(),n.bindFramebuffer.set(null)}}},Zr=function(e,r){this.context=new Ve(e),this.transform=r,this._tileTextures={},this.setup(),this.numSublayers=qe.maxUnderzooming+qe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new yt};function ao(e,t){if(e.y>t.y){var r=e;e=t,t=r}return{x0:e.x,y0:e.y,x1:t.x,y1:t.y,dx:t.x-e.x,dy:t.y-e.y}}function no(e,t,r,n,i){var o=Math.max(r,Math.floor(t.y0)),a=Math.min(n,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,p=t.dx<0,h=o;h<a;h++){var f=l*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,d=u*Math.max(0,Math.min(t.dy,h+p-t.y0))+t.x0;i(Math.floor(d),Math.ceil(f),h)}}function so(e,t,r,n,i,o){var a,s=ao(e,t),l=ao(t,r),u=ao(r,e);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&no(u,s,n,i,o),l.dy&&no(u,l,n,i,o)}Zr.prototype.resize=function(e,r){var n=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=r*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Zr.prototype.setup=function(){var e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,wt.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,wt.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,wt.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new ze({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},Zr.prototype.clearStencil=function(){var e=this.context,r=e.gl,n=t.create$1();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,Ne.disabled,this.stencilClearMode,Be.disabled,Ue.disabled,Ar(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Zr.prototype._renderTileClippingMasks=function(e){var t=this.context,r=t.gl;t.setColorMode(Be.disabled),t.setDepthMode(Ne.disabled);var n=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=i++;n.draw(t,r.TRIANGLES,Ne.disabled,new ze({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Be.disabled,Ue.disabled,Ar(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Zr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new ze({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},Zr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Be([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Be.unblended:Be.alphaBlended},Zr.prototype.depthModeForSublayer=function(e,t,r){var n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ne(r||this.context.gl.LEQUAL,t,[n,n])},Zr.prototype.render=function(e,r){this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var n=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,l={},u={},c={};for(var p in i){var h=i[p];l[p]=h.getVisibleCoordinates(),u[p]=l[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var f in i){var d=i[f],g=d.getSource();if("raster"===g.type||"raster-dem"===g.type){for(var m=[],y=0,v=l[f];y<v.length;y+=1){var _=v[y];m.push(d.getTile(_))}ji(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,x=n;b<x.length;b+=1){var w=x[b],S=this.style._layers[w];if(S.hasOffscreenPass()&&!S.isHidden(this.transform.zoom)){var E=u[S.source];("custom"===S.type||E.length)&&this.renderLayer(this,i[S.source],S,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var P=this.style._layers[n[this.currentLayer]],C=i[P.source],T=l[P.source];P.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(T)),this.renderLayer(this,C,P,T),s=P.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<n.length;this.currentLayer++){var k=this.style._layers[n[this.currentLayer]],O=i[k.source],A=("symbol"===k.type?c:u)[k.source];k.source!==s&&O&&(this.clearStencil(),O.getSource().isTileClipped&&this._renderTileClippingMasks(l[k.source])),this.renderLayer(this,O,k,A),s=k.source}if(this.options.showTileBoundaries)for(var I in i){Kr.debug(this,i[I],l[I]);break}this.setCustomLayerDefaults()},Zr.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},Zr.prototype.renderLayer=function(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||n.length)&&(this.id=r.id,Kr[r.type](e,t,r,n))},Zr.prototype.translatePosMatrix=function(e,r,n,i,o){if(!n[0]&&!n[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var u=[o?n[0]:se(r,n[0],this.transform.zoom),o?n[1]:se(r,n[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},Zr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},Zr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},Zr.prototype.isPatternMissing=function(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),r=this.imageManager.getPattern(e.to);return!t||!r},Zr.prototype.useProgram=function(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new vr(this.context,mr[e],t,Gr[e],this._showOverdrawInspector)),this.cache[r]},Zr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Zr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var Yr=function(e,r,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=r||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Yr.prototype.clone=function(){var e=new Yr(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerPoint.get=function(){return this.size._div(2)},Jr.size.get=function(){return new t.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(e){var r=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(e){var r=t.clamp(e,0,60)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Yr.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},Yr.prototype.getVisibleUnwrappedCoordinates=function(e){var r=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(n.x,i.x,o.x,a.x)),l=Math.floor(Math.max(n.x,i.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&r.push(new t.UnwrappedTileID(u,e));return r},Yr.prototype.coveringTiles=function(e){var r=this.coveringZoomLevel(e),n=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,r),a=new t.Point(o*i.x-.5,o*i.y-.5);return function(e,r,n,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(r,s,l){var u,c,p,h;if(l>=0&&l<=o)for(u=r;u<s;u++)c=Math.floor(u/o),p=(u%o+o)%o,0!==c&&!0!==i||(h=new t.OverscaledTileID(n,c,e,p,l),a[h.key]=h)}var l=r.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return so(l[0],l[1],l[2],0,o,s),so(l[2],l[3],l[0],0,o,s),Object.keys(a).map(function(e){return a[e]})}(r,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?n:r,this._renderWorldCopies).sort(function(e,t){return a.dist(e.canonical)-a.dist(t.canonical)})},Yr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},Yr.prototype.zoomScale=function(e){return Math.pow(2,e)},Yr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Yr.prototype.project=function(e){var r=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(r)*this.worldSize)},Yr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},Yr.prototype.setLocationAtPoint=function(e,r){var n=this.pointCoordinate(r),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(n.x-i.x),o.y-(n.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Yr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Yr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Yr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Yr.prototype.coordinateLocation=function(e){return e.toLngLat()},Yr.prototype.pointCoordinate=function(e){var r=[e.x,e.y,0,1],n=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse);var i=r[3],o=n[3],a=r[0]/i,s=n[0]/o,l=r[1]/i,u=n[1]/o,c=r[2]/i,p=n[2]/o,h=c===p?0:(0-c)/(p-c);return new t.MercatorCoordinate(t.number(a,s,h)/this.worldSize,t.number(l,u,h)/this.worldSize)},Yr.prototype.coordinatePoint=function(e){var r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},Yr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Yr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Yr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Yr.prototype.calculatePosMatrix=function(e,r){void 0===r&&(r=!1);var n=e.key,i=r?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,r?this.alignedProjMatrix:this.projMatrix,l),i[n]=new Float32Array(l),i[n]},Yr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Yr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,r,n,i,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=t.mercatorYfromLat(p[1])*this.worldSize,e=(a=t.mercatorYfromLat(p[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,r=(l=t.mercatorXfromLng(h[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var f=this.point,d=Math.max(r||0,e||0);if(d)return this.center=this.unproject(new t.Point(r?(l+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=f.y,m=u.y/2;g-m<o&&(i=o+m),g+m>a&&(i=a-m)}if(this.lngRange){var y=f.x,v=u.x/2;y-v<s&&(n=s+v),y+v>l&&(n=l-v)}void 0===n&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==n?n:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},Yr.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,r=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-r-e),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-o,-a,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l;var u=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),f=o-Math.round(o)+p*u+h*c,d=a-Math.round(a)+p*c+h*u,g=new Float64Array(l);if(t.translate(g,g,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=g,l=t.create$1(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),l,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance},Yr.prototype.getCameraPoint=function(){var e=this._pitch,r=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,r))},Yr.prototype.getCameraQueryGeometry=function(e){var r=this.getCameraPoint();if(1===e.length)return[e[0],r];for(var n=r.x,i=r.y,o=r.x,a=r.y,s=0,l=e;s<l.length;s+=1){var u=l[s];n=Math.min(n,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new t.Point(n,i),new t.Point(o,i),new t.Point(o,a),new t.Point(n,a),new t.Point(n,i)]},Object.defineProperties(Yr.prototype,Jr);var Qr=function(){var e,r,n,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),r=!1,n=0,i=function(){n=0,r&&(e(),n=setTimeout(i,300),r=!1)},function(){return r=!0,n||i(),n})};Qr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qr.prototype.getHashString=function(e){var t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=e?"#/"+o+"/"+a+"/"+r:"#"+r+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},Qr.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},Qr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(e){}};var $r=function(e){function o(r,n,i,o){void 0===o&&(o={});var a=l.mousePos(n.getCanvasContainer(),i),s=n.unproject(a);e.call(this,r,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=n}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),en=function(e){function o(r,n,i){var o=l.touchPos(n.getCanvasContainer(),i),a=o.map(function(e){return n.unproject(e)}),s=o.reduce(function(e,t,r,n){return e.add(t.div(n.length))},new t.Point(0,0)),u=n.unproject(s);e.call(this,r,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),tn=function(t){function e(e,r,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(t.Event),rn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};rn.prototype.isEnabled=function(){return!!this._enabled},rn.prototype.isActive=function(){return!!this._active},rn.prototype.isZooming=function(){return!!this._zooming},rn.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},rn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rn.prototype.onWheel=function(e){if(this.isEnabled()){var r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.browser.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this.isActive()||this._start(e)),e.preventDefault()}},rn.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},rn.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=l.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},rn.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var r=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:r.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(c);r.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else r.zoom=a,u=!0;r.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},rn.prototype._smoothOutEasing=function(e){var r=t.ease;if(this._prevEase){var n=this._prevEase,i=(t.browser.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:r},r};var nn=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};nn.prototype.isEnabled=function(){return!!this._enabled},nn.prototype.isActive=function(){return!!this._active},nn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},nn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},nn.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),l.disableDrag(),this._startPos=this._lastPos=l.mousePos(this._el,e),this._active=!0)},nn.prototype._onMouseMove=function(e){var t=l.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=t,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var n=Math.min(r.x,t.x),i=Math.max(r.x,t.x),o=Math.min(r.y,t.y),a=Math.max(r.y,t.y);l.setTransform(this._box,"translate("+n+"px,"+o+"px)"),this._box.style.width=i-n+"px",this._box.style.height=a-o+"px"}},nn.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,n=l.mousePos(this._el,e);this._finish(),l.suppressClick(),r.x===n.x&&r.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,n,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},nn.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},nn.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},nn.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))};var on=t.bezier(0,0,.25,1),an=function(e,r){this._map=e,this._el=r.element||e.getCanvasContainer(),this._state="disabled",this._button=r.button||"right",this._bearingSnap=r.bearingSnap||0,this._pitchWithRotate=!1!==r.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};an.prototype.isEnabled=function(){return"disabled"!==this._state},an.prototype.isActive=function(){return"active"===this._state},an.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},an.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},an.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=l.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==l.mouseButton(e))return;this._eventButton=0}l.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=l.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},an.prototype._onMouseMove=function(e){var t=l.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},an.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var r=this._map.transform,n=this._startPos,i=this._lastPos,o=.8*(n.x-i.x),a=-.5*(n.y-i.y),s=r.bearing-o,l=r.pitch-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]),r.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),r.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},an.prototype._onMouseUp=function(e){if(l.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",l.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},an.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},an.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),l.enableDrag()},an.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},an.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var r=this._map,n=r.getBearing(),i=this._inertia,o=function(){Math.abs(n)<t._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],l=i[i.length-2],u=r._normalizeBearing(n,l[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;u+=p*f*(d/2),Math.abs(r._normalizeBearing(u,0))<this._bearingSnap&&(u=r._normalizeBearing(0,u)),r.rotateTo(u,{duration:1e3*d,easing:on,noMoveStart:!0},{originalEvent:e})}else o()}},an.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},an.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var sn=t.bezier(0,0,.3,1),ln=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};ln.prototype.isEnabled=function(){return"disabled"!==this._state},ln.prototype.isActive=function(){return"active"===this._state},ln.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},ln.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ln.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==l.mouseButton(e)||(l.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),l.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},ln.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(l.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),l.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},ln.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=l.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},ln.prototype._onMove=function(e){e.preventDefault();var r=l.mousePos(this._el,e);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ln.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},ln.prototype._onMouseUp=function(e){if(0===l.mouseButton(e))switch(this._state){case"active":this._state="enabled",l.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},ln.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},ln.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},ln.prototype._unbind=function(){l.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),l.removeEventListener(t.window.document,"touchend",this._onTouchEnd),l.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),l.removeEventListener(t.window.document,"mouseup",this._onMouseUp),l.removeEventListener(t.window,"blur",this._onBlur)},ln.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},ln.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var r=t[t.length-1],n=t[0],i=r[1].sub(n[1]),o=(r[0]-n[0])/1e3;if(0===o||r[1].equals(n[1]))this._fireEvent("moveend",e);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var l=s/750,u=a.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:sn,noMoveStart:!0},{originalEvent:e})}}},ln.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},ln.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var un=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function wo(e){return e*(2-e)}un.prototype.isEnabled=function(){return!!this._enabled},un.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},un.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},un.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,r=0,n=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?n=-1:(o=1,e.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:wo,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+15*r,pitch:a.getPitch()+10*n,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:e})}};var cn=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};cn.prototype.isEnabled=function(){return!!this._enabled},cn.prototype.isActive=function(){return!!this._active},cn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},cn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},cn.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout(function(){t._tapped=null},300)))},cn.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},cn.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},cn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var pn=t.bezier(0,0,.15,1),hn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};hn.prototype.isEnabled=function(){return!!this._enabled},hn.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},hn.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},hn.prototype.disableRotation=function(){this._rotationDisabled=!0},hn.prototype.enableRotation=function(){this._rotationDisabled=!1},hn.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=l.mousePos(this._el,e.touches[0]),n=l.mousePos(this._el,e.touches[1]),i=r.add(n).div(2);this._startVec=r.sub(n),this._startAround=this._map.transform.pointLocation(i),this._gestureIntent=void 0,this._inertia=[],l.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),l.addEventListener(t.window.document,"touchend",this._onEnd)}},hn.prototype._getTouchEventData=function(e){var t=l.mousePos(this._el,e.touches[0]),r=l.mousePos(this._el,e.touches[1]),n=t.sub(r);return{vec:n,center:t.add(r).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},hn.prototype._onMove=function(e){if(2===e.touches.length){var r=this._getTouchEventData(e),n=r.vec,i=r.scale,o=r.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=n)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},hn.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var r=this._map.transform;this._startScale||(this._startScale=r.scale,this._startBearing=r.bearing);var n=this._getTouchEventData(this._lastTouchEvent),i=n.center,o=n.bearing,a=n.scale,s=r.pointLocation(i),l=r.locationPoint(s);"rotate"===e&&(r.bearing=this._startBearing+o),r.zoom=r.scaleZoom(this._startScale*a),r.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},hn.prototype._onEnd=function(e){l.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),l.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(n*a[1]),c=o.transform.scaleZoom(n*s[1]),p=u-c,h=(a[0]-s[0])/1e3,f=a[2];if(0!==h&&u!==c){var d=.15*p/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var g=1e3*Math.abs(d/(12*.15)),m=u+d*g/2e3;m<0&&(m=0),o.easeTo({zoom:m,duration:g,easing:pn,around:this._aroundCenter?o.getCenter():o.unproject(f),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},hn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>2&&r-e[0][0]>160;)e.shift()};var fn={scrollZoom:rn,boxZoom:nn,dragRotate:an,dragPan:ln,keyboard:un,doubleClickZoom:cn,touchZoomRotate:hn},dn=function(e){function i(r,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},i.prototype.panBy=function(e,r,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),n)},i.prototype.panTo=function(e,r,n){return this.easeTo(t.extend({center:e},r),n)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},i.prototype.zoomTo=function(e,r,n){return this.easeTo(t.extend({zoom:e},r),n)},i.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},i.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},i.prototype.rotateTo=function(e,r,n){return this.easeTo(t.extend({bearing:e},r),n)},i.prototype.resetNorth=function(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this},i.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},i.prototype.cameraForBounds=function(e,r){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,r)},i.prototype._cameraForBoxAndBearing=function(e,r,n,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),l=a.project(t.LngLat.convert(r)),u=s.rotate(-n*Math.PI/180),c=l.rotate(-n*Math.PI/180),p=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),h=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),f=p.sub(h),d=(a.width-i.padding.left-i.padding.right)/f.x,g=(a.height-i.padding.top-i.padding.bottom)/f.y;if(!(g<0||d<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(d,g)),i.maxZoom),y=t.Point.convert(i.offset),v=(i.padding.left-i.padding.right)/2,_=(i.padding.top-i.padding.bottom)/2,b=new t.Point(y.x+v,y.y+_).mult(a.scale/a.zoomScale(m));return{center:a.unproject(s.add(l).div(2).sub(b)),zoom:m,bearing:n}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)},i.prototype.fitScreenCoordinates=function(e,r,n,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(r)),n,i),i,o)},i.prototype._fitInternal=function(e,r,n){return e?(r=t.extend(e,r)).linear?this.easeTo(r,n):this.flyTo(r,n):this},i.prototype.jumpTo=function(e,r){this.stop();var n=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(i=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),i&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),o&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),a&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r))},i.prototype.easeTo=function(e,r){var n=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.centerPoint.add(t.Point.convert(e.offset)),h=i.pointLocation(p),f=t.LngLat.convert(e.center||h);this._normalizeCenter(f);var d,g,m=i.project(h),y=i.project(f).sub(m),v=i.zoomScale(l-o);return e.around&&(d=t.LngLat.convert(e.around),g=i.locationPoint(d)),this._zooming=l!==o,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(r,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(n._zooming&&(i.zoom=t.number(o,l,e)),n._rotating&&(i.bearing=t.number(a,u,e)),n._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,g);else{var h=i.zoomScale(i.zoom-o),f=l>o?Math.min(2,v):Math.max(.5,v),_=Math.pow(f,1-e),b=i.unproject(m.add(y.mult(e*_)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,p)}n._fireMoveEvents(r)},function(){e.delayEndEvents?n._easeEndTimeoutID=setTimeout(function(){return n._afterEase(r)},e.delayEndEvents):n._afterEase(r)},e),this},i.prototype._prepareEase=function(e,r){this._moving=!0,r||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e){var r=this._zooming,n=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},i.prototype.flyTo=function(e,r){var n=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.zoomScale(l-o),h=i.centerPoint.add(t.Point.convert(e.offset)),f=i.pointLocation(h),d=t.LngLat.convert(e.center||f);this._normalizeCenter(d);var g=i.project(f),m=i.project(d).sub(g),y=e.curve,v=Math.max(i.width,i.height),_=v/p,b=m.mag();if("minZoom"in e){var x=t.clamp(Math.min(e.minZoom,o,l),i.minZoom,i.maxZoom),w=v/i.zoomScale(x-o);y=Math.sqrt(w/b*2)}var S=y*y;function T(e){var t=(_*_-v*v+(e?-1:1)*S*S*b*b)/(2*(e?_:v)*S*b);return Math.log(Math.sqrt(t*t+1)-t)}function I(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}var E=T(0),P=function(e){return C(E)/C(E+y*e)},k=function(e){return v*((C(E)*(I(t=E+y*e)/C(t))-I(E))/S)/b;var t},O=(T(1)-E)/y;if(Math.abs(b)<1e-6||!isFinite(O)){if(Math.abs(v-_)<1e-6)return this.easeTo(e,r);var A=_<v?-1:1;O=Math.abs(Math.log(_/v))/y,k=function(){return 0},P=function(e){return Math.exp(A*y*e)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/y:+e.speed;e.duration=1e3*O/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(r,!1),this._ease(function(e){var p=e*O,f=1/P(p);i.zoom=1===e?l:o+i.scaleZoom(f),n._rotating&&(i.bearing=t.number(a,u,e)),n._pitching&&(i.pitch=t.number(s,c,e));var y=1===e?d:i.unproject(g.add(m.mult(k(p))).mult(f));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,h),n._fireMoveEvents(r)},function(){return n._afterEase(r)},e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},i.prototype._ease=function(e,r,n){!1===n.animate||0===n.duration?(e(1),r()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,r){e=t.wrap(e,-180,180);var n=Math.abs(e-r);return Math.abs(e-360-r)<n&&(e-=360),Math.abs(e+360-r)<n&&(e+=360),e},i.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}},i}(t.Evented),gn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};gn.prototype.getDefaultPosition=function(){return"bottom-right"},gn.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gn.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},gn.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var n=r.reduce(function(e,t,n){return t.value&&(e+=t.key+"="+t.value+(n<r.length-1?"&":"")),e},"?");e.href=t.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},gn.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},gn.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(function(e){return"string"!=typeof e?"":e})):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var r=this._map.style.sourceCaches;for(var n in r){var i=r[n];if(i.used){var o=i.getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}}e.sort(function(e,t){return e.length-t.length}),(e=e.filter(function(t,r){for(var n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},gn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var mn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};mn.prototype.onAdd=function(e){this._map=e,this._container=l.create("div","mapboxgl-ctrl");var t=l.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},mn.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},mn.prototype.getDefaultPosition=function(){return"bottom-left"},mn.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},mn.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},mn.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var yn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};yn.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},yn.prototype.remove=function(e){for(var t=this._currentlyRunning,r=0,n=t?this._queue.concat(t):this._queue;r<n.length;r+=1){var i=n[r];if(i.id===e)return void(i.cancelled=!0)}},yn.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},yn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var vn=t.window.HTMLImageElement,_n=t.window.HTMLElement,bn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xn=function(e){function r(r){var n=this;if(null!=(r=t.extend({},bn,r)).minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than minZoom");var i=new Yr(r.minZoom,r.maxZoom,r.renderWorldCopies);e.call(this,i,r),this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=r.preserveDrawingBuffer,this._trackResize=r.trackResize,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=r.collectResourceTiming,this._renderTaskQueue=new yn,this._controls=[],this._mapId=t.uniqueId();var o=r.transformRequest;if(this._transformRequest=o?function(e,t){return o(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof r.container){if(this._container=t.window.document.getElementById(r.container),!this._container)throw new Error("Container '"+r.container+"' not found.")}else{if(!(r.container instanceof _n))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return n._update(!1)}),this.on("moveend",function(){return n._update(!1)}),this.on("zoom",function(){return n._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(e,t){var r=e.getCanvasContainer(),n=null,i=!1,o=null;for(var a in fn)e[a]=new fn[a](e,t),t.interactive&&t[a]&&e[a].enable(t[a]);l.addEventListener(r,"mouseout",function(t){e.fire(new $r("mouseout",e,t))}),l.addEventListener(r,"mousedown",function(n){i=!0,o=l.mousePos(r,n);var a=new $r("mousedown",e,n);e.fire(a),a.defaultPrevented||(t.interactive&&!e.doubleClickZoom.isActive()&&e.stop(),e.boxZoom.onMouseDown(n),e.boxZoom.isActive()||e.dragPan.isActive()||e.dragRotate.onMouseDown(n),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onMouseDown(n))}),l.addEventListener(r,"mouseup",function(t){var r=e.dragRotate.isActive();n&&!r&&e.fire(new $r("contextmenu",e,n)),n=null,i=!1,e.fire(new $r("mouseup",e,t))}),l.addEventListener(r,"mousemove",function(t){if(!e.dragPan.isActive()&&!e.dragRotate.isActive()){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new $r("mousemove",e,t))}}),l.addEventListener(r,"mouseover",function(t){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new $r("mouseover",e,t))}),l.addEventListener(r,"touchstart",function(r){var n=new en("touchstart",e,r);e.fire(n),n.defaultPrevented||(t.interactive&&e.stop(),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onTouchStart(r),e.touchZoomRotate.onStart(r),e.doubleClickZoom.onTouchStart(n))},{passive:!1}),l.addEventListener(r,"touchmove",function(t){e.fire(new en("touchmove",e,t))},{passive:!1}),l.addEventListener(r,"touchend",function(t){e.fire(new en("touchend",e,t))}),l.addEventListener(r,"touchcancel",function(t){e.fire(new en("touchcancel",e,t))}),l.addEventListener(r,"click",function(n){var i=l.mousePos(r,n);(i.equals(o)||i.dist(o)<t.clickTolerance)&&e.fire(new $r("click",e,n))}),l.addEventListener(r,"dblclick",function(t){var r=new $r("dblclick",e,t);e.fire(r),r.defaultPrevented||e.doubleClickZoom.onDblClick(r)}),l.addEventListener(r,"contextmenu",function(t){var r=e.dragRotate.isActive();i||r?i&&(n=t):e.fire(new $r("contextmenu",e,t)),(e.dragRotate.isEnabled()||e.listens("contextmenu"))&&t.preventDefault()}),l.addEventListener(r,"wheel",function(r){t.interactive&&e.stop();var n=new tn("wheel",e,r);e.fire(n),n.defaultPrevented||e.scrollZoom.onWheel(r)},{passive:!1})}(this,r),this._hash=r.hash&&(new Qr).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,t.extend({},r.fitBoundsOptions,{duration:0})))),this.resize(),r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new gn({customAttribution:r.customAttribution})),this.addControl(new mn,r.logoPosition),this.on("style.load",function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)}),this.on("data",function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){n.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,r){if(void 0===r&&e.getDefaultPosition&&(r=e.getDefaultPosition()),void 0===r&&(r="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this},r.prototype.resize=function(e){var r=this._containerDimensions(),n=r[0],i=r[1];return this._resizeCanvas(n,i),this.transform.resize(n,i),this.painter.resize(n,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(e){if((e=null==e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,r,n){var i=this;if(void 0===n)return e.prototype.on.call(this,t,r);var o=function(){var e;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:r,listener:n,delegates:{mousemove:function(e){var a=i.getLayer(r)?i.queryRenderedFeatures(e.point,{layers:[r]}):[];a.length?o||(o=!0,n.call(i,new $r(t,i,e.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:r,listener:n,delegates:{mousemove:function(e){(i.getLayer(r)?i.queryRenderedFeatures(e.point,{layers:[r]}):[]).length?a=!0:a&&(a=!1,n.call(i,new $r(t,i,e.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new $r(t,i,e.originalEvent)))}}}}return{layer:r,listener:n,delegates:(e={},e[t]=function(e){var t=i.getLayer(r)?i.queryRenderedFeatures(e.point,{layers:[r]}):[];t.length&&(e.features=t,n.call(i,e),delete e.features)},e)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},r.prototype.off=function(t,r,n){if(void 0===n)return e.prototype.off.call(this,t,r);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===r&&a.listener===n){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,r){if(!this.style)return[];var n;if(void 0!==r||void 0===e||e instanceof t.Point||Array.isArray(e)||(r=e,e=void 0),r=r||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])n=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);n=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(n,r,this.transform)},r.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},r.prototype.setStyle=function(e,t){return(!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e?(this._diffStyle(e,t),this):this._updateStyle(e,t)},r.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new xt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},r.prototype._diffStyle=function(e,r){var n=this;if("string"==typeof e){var i=t.normalizeStyleURL(e),o=this._transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?n.fire(new t.ErrorEvent(e)):i&&n._updateDiff(i,r)})}else"object"==typeof e&&this._updateDiff(e,r)},r.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0)},r.prototype.isSourceLoaded=function(e){var r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var r=e[t]._tiles;for(var n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},r.prototype.addSourceType=function(e,t,r){return this.style.addSourceType(e,t,r)},r.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},r.prototype.getSource=function(e){return this.style.getSource(e)},r.prototype.addImage=function(e,r,n){void 0===n&&(n={});var i=n.pixelRatio;void 0===i&&(i=1);var o=n.sdf;if(void 0===o&&(o=!1),r instanceof vn){var a=t.browser.getImageData(r),s=a.width,l=a.height,u=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},u),pixelRatio:i,sdf:o})}else{if(void 0===r.width||void 0===r.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=r.width,p=r.height,h=r.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:i,sdf:o})}},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(e){this.style.removeImage(e)},r.prototype.loadImage=function(e,r){t.getImage(this._transformRequest(e,t.ResourceType.Image),r)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0)},r.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},r.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},r.prototype.getLayer=function(e){return this.style.getLayer(e)},r.prototype.setFilter=function(e,t,r){return void 0===r&&(r={}),this.style.setFilter(e,t,r),this._update(!0)},r.prototype.setLayerZoomRange=function(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)},r.prototype.getFilter=function(e){return this.style.getFilter(e)},r.prototype.setPaintProperty=function(e,t,r,n){return void 0===n&&(n={}),this.style.setPaintProperty(e,t,r,n),this._update(!0)},r.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},r.prototype.setLayoutProperty=function(e,t,r,n){return void 0===n&&(n={}),this.style.setLayoutProperty(e,t,r,n),this._update(!0)},r.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},r.prototype.setLight=function(e,t){return void 0===t&&(t={}),this.style.setLight(e,t),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},r.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},r.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=l.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=l.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=l.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=l.create("div","mapboxgl-ctrl-"+e,n)})},r.prototype._resizeCanvas=function(e,r){var n=t.window.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*r,this._canvas.style.width=e+"px",this._canvas.style.height=r+"px"},r.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},n.webGLContextAttributes),r=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);r?(this.painter=new Zr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},r.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var r=this.transform.zoom,n=t.browser.now();this.style.zoomHistory.update(r,n);var i=new t.EvaluationParameters(r,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,r=this._controls;e<r.length;e+=1)r[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(r.prototype,i),r}(dn);function ko(e){e.parentNode&&e.parentNode.removeChild(e)}var wn={showCompass:!0,showZoom:!0},Sn=function(e){var r=this;this.options=t.extend({},wn,e),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return r._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return r._map.resetNorth()}),this._compassArrow=l.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Fo(e,r,n){if(e=new t.LngLat(e.lng,e.lat),r){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(r);n.locationPoint(i).distSqr(r)<a?e=i:n.locationPoint(o).distSqr(r)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}Sn.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},Sn.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new an(e,{button:"left",element:this._compass}),l.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Sn.prototype.onRemove=function(){l.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),l.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Sn.prototype._createButton=function(e,t,r){var n=l.create("button",e,this._container);return n.type="button",n.title=t,n.setAttribute("aria-label",t),n.addEventListener("click",r),n};var En={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function No(e,t,r){var n=e.classList;for(var i in En)n.remove("mapboxgl-"+r+"-anchor-"+i);n.add("mapboxgl-"+r+"-anchor-"+t)}var Pn,Cn=function(e){function o(r,n){if(e.call(this),(r instanceof t.window.HTMLElement||n)&&(r=t.extend({element:r},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=l.create("div");var i=l.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=l.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=l.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=l.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var p=c[u],h=l.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),s.appendChild(h)}var f=l.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=l.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var g=l.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var m=l.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(m);var y=l.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=l.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=l.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=l.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),v.appendChild(_),v.appendChild(b),a.appendChild(s),a.appendChild(f),a.appendChild(g),a.appendChild(y),a.appendChild(v),i.appendChild(a),this._element.appendChild(i),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},o.prototype._onMapClick=function(e){var t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},o.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),l.setTransform(this._element,En[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),No(this._element,this._anchor,"marker"))},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o}(t.Evented),Tn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},kn=function(e){function o(r){e.call(this),this.options=t.extend({},Tn,r),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(e){var r;return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Pn?r(Pn):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(e){Pn="denied"!==e.state,r(Pn)}):(Pn=!!t.window.navigator.geolocation,r(Pn)),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),l.remove(this._container),this._map=void 0},o.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},o.prototype._updateCamera=function(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(r.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},o.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var r=this;!1!==e?(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Cn(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),On={maxWidth:100,unit:"metric"},An=function(e){this.options=t.extend({},On,e),t.bindAll(["_onMove","setUnit"],this)};function Xo(e,t,r){var n,i,o,a,s,l,u=r&&r.maxWidth||100,c=e._container.clientHeight/2,p=(n=e.unproject([0,c]),i=e.unproject([u,c]),o=Math.PI/180,a=n.lat*o,s=i.lat*o,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-n.lng)*o),6371e3*Math.acos(Math.min(l,1)));if(r&&"imperial"===r.unit){var h=3.2808*p;h>5280?Ho(t,u,h/5280,"mi"):Ho(t,u,h,"ft")}else r&&"nautical"===r.unit?Ho(t,u,p/1852,"nm"):Ho(t,u,p,"m")}function Ho(e,t,r,n){var i,o,a,s=(i=r,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(a))),l=s/r;"m"===n&&s>=1e3&&(s/=1e3,n="km"),e.style.width=t*l+"px",e.innerHTML=s+n}An.prototype.getDefaultPosition=function(){return"bottom-left"},An.prototype._onMove=function(){Xo(this._map,this._container,this.options)},An.prototype.onAdd=function(e){return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},An.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},An.prototype.setUnit=function(e){this.options.unit=e,Xo(this._map,this._container,this.options)};var In=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};In.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},In.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},In.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},In.prototype._setupUI=function(){var e=this._fullscreenButton=l.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},In.prototype._isFullscreen=function(){return this._fullscreen},In.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},In.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Rn={closeButton:!0,closeOnClick:!0,className:""},Mn=function(e){function o(r){e.call(this),this.options=t.extend(Object.create(Rn),r),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var r,n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return this.setDOMContent(n)},o.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},o.prototype._createContent=function(){this._content&&l.remove(this._content),this._content=l.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},o.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),n=this.options.anchor,i=function e(r){if(r){if("number"==typeof r){var n=Math.round(Math.sqrt(.5*Math.pow(r,2)));return{center:new t.Point(0,0),top:new t.Point(0,r),"top-left":new t.Point(n,n),"top-right":new t.Point(-n,n),bottom:new t.Point(0,-r),"bottom-left":new t.Point(n,-n),"bottom-right":new t.Point(-n,-n),left:new t.Point(r,0),right:new t.Point(-r,0)}}if(r instanceof t.Point||Array.isArray(r)){var i=t.Point.convert(r);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(r.center||[0,0]),top:t.Point.convert(r.top||[0,0]),"top-left":t.Point.convert(r["top-left"]||[0,0]),"top-right":t.Point.convert(r["top-right"]||[0,0]),bottom:t.Point.convert(r.bottom||[0,0]),"bottom-left":t.Point.convert(r["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(r["bottom-right"]||[0,0]),left:t.Point.convert(r.left||[0,0]),right:t.Point.convert(r.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!n){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=r.y+i.bottom.y<s?["top"]:r.y>this._map.transform.height-s?["bottom"]:[],r.x<a/2?o.push("left"):r.x>this._map.transform.width-a/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}var u=r.add(i[n]).round();l.setTransform(this._container,En[n]+" translate("+u.x+"px,"+u.y+"px)"),No(this._container,n,"popup")}},o.prototype._onClickClose=function(){this.remove()},o}(t.Evented),Ln={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,Map:xn,NavigationControl:Sn,GeolocateControl:kn,AttributionControl:gn,ScaleControl:An,FullscreenControl:In,Popup:Mn,Marker:Cn,Style:xt,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ge.workerCount},set workerCount(e){Ge.workerCount=e},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Ln}),r}()},function(n,i,o){"use strict";
/** @license React v16.7.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=o(1),s=o(152),u=o(226);function ca(e,t,r,n,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function t(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);ca(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}function da(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}a||t("227");var p=!1,v=null,_=!1,x=null,S={onError:function(e){p=!0,v=e}};function ka(e,t,r,n,i,o,a,s,l){p=!1,v=null,da.apply(S,arguments)}function la(e,r,n,i,o,a,s,l,u){if(ka.apply(this,arguments),p){if(p){var c=v;p=!1,v=null}else t("198"),c=void 0;_||(_=!0,x=c)}}var C=null,T={};function oa(){if(C)for(var e in T){var r=T[e],n=C.indexOf(e);if(-1<n||t("96",e),!O[n])for(var i in r.extractEvents||t("97",e),O[n]=r,n=r.eventTypes){var o=void 0,a=n[i],s=r,l=i;A.hasOwnProperty(l)&&t("99",l),A[l]=a;var u=a.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&ra(u[o],s,l);o=!0}else a.registrationName?(ra(a.registrationName,s,l),o=!0):o=!1;o||t("98",i,e)}}}function ra(e,r,n){L[e]&&t("100",e),L[e]=r,j[e]=r.eventTypes[n].dependencies}var O=[],A={},L={},j={},D=null,F=null,U=null;function xa(e,t,r){var n=e.type||"unknown-event";e.currentTarget=U(r),la(n,t,void 0,e),e.currentTarget=null}function ya(e,r){return null==r&&t("30"),null==e?r:Array.isArray(e)?Array.isArray(r)?(e.push.apply(e,r),e):(e.push(r),e):Array.isArray(r)?[e].concat(r):[e,r]}function za(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var V=null;function Ba(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)xa(e,t[n],r[n]);else t&&xa(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var q={injectEventPluginOrder:function(e){C&&t("101"),C=Array.prototype.slice.call(e),oa()},injectEventPluginsByName:function(e){var r,n=!1;for(r in e)if(e.hasOwnProperty(r)){var i=e[r];T.hasOwnProperty(r)&&T[r]===i||(T[r]&&t("102",r),T[r]=i,n=!0)}n&&oa()}};function Da(e,r){var n=e.stateNode;if(!n)return null;var i=D(n);if(!i)return null;n=i[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&t("231",r,typeof n),n)}function Ea(e){if(null!==e&&(V=ya(V,e)),e=V,V=null,e&&(za(e,Ba),V&&t("95"),_))throw e=x,_=!1,x=null,e}var G=Math.random().toString(36).slice(2),W="__reactInternalInstance$"+G,X="__reactEventHandlers$"+G;function Ia(e){if(e[W])return e[W];for(;!e[W];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[W]).tag||6===e.tag?e:null}function Ja(e){return!(e=e[W])||5!==e.tag&&6!==e.tag?null:e}function Ka(e){if(5===e.tag||6===e.tag)return e.stateNode;t("33")}function La(e){return e[X]||null}function Ma(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Na(e,t,r){(t=Da(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=ya(r._dispatchListeners,t),r._dispatchInstances=ya(r._dispatchInstances,e))}function Oa(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Ma(t);for(t=r.length;0<t--;)Na(r[t],"captured",e);for(t=0;t<r.length;t++)Na(r[t],"bubbled",e)}}function Pa(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Da(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=ya(r._dispatchListeners,t),r._dispatchInstances=ya(r._dispatchInstances,e))}function Qa(e){e&&e.dispatchConfig.registrationName&&Pa(e._targetInst,null,e)}function Ra(e){za(e,Oa)}var K=!("undefined"==typeof window||!window.document||!window.document.createElement);function Ta(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Z={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},Y={},$={};function Xa(e){if(Y[e])return Y[e];if(!Z[e])return e;var t,r=Z[e];for(t in r)if(r.hasOwnProperty(t)&&t in $)return Y[e]=r[t];return e}K&&($=document.createElement("div").style,"AnimationEvent"in window||(delete Z.animationend.animation,delete Z.animationiteration.animation,delete Z.animationstart.animation),"TransitionEvent"in window||delete Z.transitionend.transition);var re=Xa("animationend"),ne=Xa("animationiteration"),oe=Xa("animationstart"),ue=Xa("transitionend"),ce="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_e=null,be=null,Ee=null;function gb(){if(Ee)return Ee;var e,t,r=be,n=r.length,i="value"in _e?_e.value:_e.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Ee=i.slice(e,1<t?1-t:void 0)}function hb(){return!0}function ib(){return!1}function z(e,t,r,n){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?hb:ib,this.isPropagationStopped=ib,this}function kb(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function lb(e){e instanceof this||t("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function jb(e){e.eventPool=[],e.getPooled=kb,e.release=lb}s(z.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hb)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hb)},persist:function(){this.isPersistent=hb},isPersistent:ib,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ib,this._dispatchInstances=this._dispatchListeners=null}}),z.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},z.extend=function(e){function b(){}function c(){return t.apply(this,arguments)}var t=this;b.prototype=t.prototype;var r=new b;return s(r,c.prototype),c.prototype=r,c.prototype.constructor=c,c.Interface=s({},t.Interface,e),c.extend=t.extend,jb(c),c},jb(z);var Te=z.extend({data:null}),ke=z.extend({data:null}),Ae=[9,13,27,32],Ie=K&&"CompositionEvent"in window,Le=null;K&&"documentMode"in document&&(Le=document.documentMode);var De=K&&"TextEvent"in window&&!Le,ze=K&&(!Ie||Le&&8<Le&&11>=Le),Ue=String.fromCharCode(32),qe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ke=!1;function wb(e,t){switch(e){case"keyup":return-1!==Ae.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xb(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Je=!1;function zb(e,t){switch(e){case"compositionend":return xb(t);case"keypress":return 32!==t.which?null:(Ke=!0,Ue);case"textInput":return(e=t.data)===Ue&&Ke?null:e;default:return null}}function Ab(e,t){if(Je)return"compositionend"===e||!Ie&&wb(e,t)?(e=gb(),Ee=be=_e=null,Je=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ze&&"ko"!==t.locale?null:t.data;default:return null}}var et={eventTypes:qe,extractEvents:function(e,t,r,n){var i=void 0,o=void 0;if(Ie)e:{switch(e){case"compositionstart":i=qe.compositionStart;break e;case"compositionend":i=qe.compositionEnd;break e;case"compositionupdate":i=qe.compositionUpdate;break e}i=void 0}else Je?wb(e,r)&&(i=qe.compositionEnd):"keydown"===e&&229===r.keyCode&&(i=qe.compositionStart);return i?(ze&&"ko"!==r.locale&&(Je||i!==qe.compositionStart?i===qe.compositionEnd&&Je&&(o=gb()):(be="value"in(_e=n)?_e.value:_e.textContent,Je=!0)),i=Te.getPooled(i,t,r,n),o?i.data=o:null!==(o=xb(r))&&(i.data=o),Ra(i),o=i):o=null,(e=De?zb(e,r):Ab(e,r))?((t=ke.getPooled(qe.beforeInput,t,r,n)).data=e,Ra(t)):t=null,null===o?t:null===t?o:[o,t]}},tt=null,rt=null,nt=null;function Hb(e){if(e=F(e)){"function"!=typeof tt&&t("280");var r=D(e.stateNode);tt(e.stateNode,e.type,r)}}function Ib(e){rt?nt?nt.push(e):nt=[e]:rt=e}function Jb(){if(rt){var e=rt,t=nt;if(nt=rt=null,Hb(e),t)for(e=0;e<t.length;e++)Hb(t[e])}}function Kb(e,t){return e(t)}function Lb(e,t,r){return e(t,r)}function Mb(){}var it=!1;function Ob(e,t){if(it)return e(t);it=!0;try{return Kb(e,t)}finally{it=!1,(null!==rt||null!==nt)&&(Mb(),Jb())}}var ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ot[e.type]:"textarea"===t}function Rb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Sb(e){if(!K)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Tb(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ub(e){var t=Tb(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vb(e){e._valueTracker||(e._valueTracker=Ub(e))}function Wb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Tb(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}var at=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,st=/^(.*)[\\\/]/,lt="function"==typeof Symbol&&Symbol.for,ut=lt?Symbol.for("react.element"):60103,ct=lt?Symbol.for("react.portal"):60106,pt=lt?Symbol.for("react.fragment"):60107,ht=lt?Symbol.for("react.strict_mode"):60108,ft=lt?Symbol.for("react.profiler"):60114,dt=lt?Symbol.for("react.provider"):60109,gt=lt?Symbol.for("react.context"):60110,mt=lt?Symbol.for("react.concurrent_mode"):60111,yt=lt?Symbol.for("react.forward_ref"):60112,vt=lt?Symbol.for("react.suspense"):60113,_t=lt?Symbol.for("react.memo"):60115,bt=lt?Symbol.for("react.lazy"):60116,xt="function"==typeof Symbol&&Symbol.iterator;function lc(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=xt&&e[xt]||e["@@iterator"])?e:null}function mc(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case mt:return"ConcurrentMode";case pt:return"Fragment";case ct:return"Portal";case ft:return"Profiler";case ht:return"StrictMode";case vt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case gt:return"Context.Consumer";case dt:return"Context.Provider";case yt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case _t:return mc(e.type);case bt:if(e=1===e._status?e._result:null)return mc(e)}return null}function nc(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,o=mc(e.type);r=null,n&&(r=mc(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(st,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}t+=r,e=e.return}while(e);return t}var wt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,St=Object.prototype.hasOwnProperty,Et={},Pt={};function sc(e){return!!St.call(Pt,e)||!St.call(Et,e)&&(wt.test(e)?Pt[e]=!0:(Et[e]=!0,!1))}function tc(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function uc(e,t,r,n){if(null==t||tc(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function E(e,t,r,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ct[e]=new E(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ct[t]=new E(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ct[e]=new E(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ct[e]=new E(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ct[e]=new E(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Ct[e]=new E(e,3,!0,e,null)}),["capture","download"].forEach(function(e){Ct[e]=new E(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){Ct[e]=new E(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){Ct[e]=new E(e,5,!1,e.toLowerCase(),null)});var Tt=/[\-:]([a-z])/g;function wc(e){return e[1].toUpperCase()}function xc(e,t,r,n){var i=Ct.hasOwnProperty(t)?Ct[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(uc(t,r,i,n)&&(r=null),n||null===i?sc(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function yc(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function zc(e,t){var r=t.checked;return s({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Ac(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=yc(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Bc(e,t){null!=(t=t.checked)&&xc(e,"checked",t,!1)}function Cc(e,t){Bc(e,t);var r=yc(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Dc(e,t.type,r):t.hasOwnProperty("defaultValue")&&Dc(e,t.type,yc(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ec(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Dc(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tt,wc);Ct[t]=new E(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tt,wc);Ct[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tt,wc);Ct[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Ct.tabIndex=new E("tabIndex",1,!1,"tabindex",null);var kt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Gc(e,t,r){return(e=z.getPooled(kt.change,e,t,r)).type="change",Ib(r),Ra(e),e}var Ot=null,At=null;function Lc(e){Ea(e)}function Mc(e){if(Wb(Ka(e)))return e}function Nc(e,t){if("change"===e)return t}var It=!1;function Pc(){Ot&&(Ot.detachEvent("onpropertychange",Qc),At=Ot=null)}function Qc(e){"value"===e.propertyName&&Mc(At)&&Ob(Lc,e=Gc(At,e,Rb(e)))}function Rc(e,t,r){"focus"===e?(Pc(),At=r,(Ot=t).attachEvent("onpropertychange",Qc)):"blur"===e&&Pc()}function Sc(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mc(At)}function Tc(e,t){if("click"===e)return Mc(t)}function Uc(e,t){if("input"===e||"change"===e)return Mc(t)}K&&(It=Sb("input")&&(!document.documentMode||9<document.documentMode));var Rt={eventTypes:kt,_isInputEventSupported:It,extractEvents:function(e,t,r,n){var i=t?Ka(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Nc:Qb(i)?It?o=Uc:(o=Sc,a=Rc):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Tc),o&&(o=o(e,t)))return Gc(o,r,n);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Dc(i,"number",i.value)}},Mt=z.extend({view:null,detail:null}),Lt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Lt[e])&&!!t[e]}function Zc(){return Yc}var jt=0,Dt=0,Ft=!1,Nt=!1,zt=Mt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Zc,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=jt;return jt=e.screenX,Ft?"mousemove"===e.type?e.screenX-t:0:(Ft=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Dt;return Dt=e.screenY,Nt?"mousemove"===e.type?e.screenY-t:0:(Nt=!0,0)}}),Bt=zt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ut={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Vt={eventTypes:Ut,extractEvents:function(e,t,r,n){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(r.relatedTarget||r.fromElement)||!o&&!i)return null;if(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=r.relatedTarget||r.toElement)?Ia(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=zt,s=Ut.mouseLeave,l=Ut.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Bt,s=Ut.pointerLeave,l=Ut.pointerEnter,u="pointer");var c=null==o?i:Ka(o);if(i=null==t?i:Ka(t),(e=a.getPooled(s,o,r,n)).type=u+"leave",e.target=c,e.relatedTarget=i,(r=a.getPooled(l,t,r,n)).type=u+"enter",r.target=i,r.relatedTarget=c,n=t,o&&n)e:{for(i=n,u=0,a=t=o;a;a=Ma(a))u++;for(a=0,l=i;l;l=Ma(l))a++;for(;0<u-a;)t=Ma(t),u--;for(;0<a-u;)i=Ma(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=Ma(t),i=Ma(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=Ma(o);for(o=[];n&&n!==i&&(null===(u=n.alternate)||u!==i);)o.push(n),n=Ma(n);for(n=0;n<t.length;n++)Pa(t[n],"bubbled",e);for(n=o.length;0<n--;)Pa(o[n],"captured",r);return[e,r]}},qt=Object.prototype.hasOwnProperty;function id(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function jd(e,t){if(id(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!qt.call(t,r[n])||!id(e[r[n]],t[r[n]]))return!1;return!0}function kd(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function ld(e){2!==kd(e)&&t("188")}function md(e){var r=e.alternate;if(!r)return 3===(r=kd(e))&&t("188"),1===r?null:e;for(var n=e,i=r;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return ld(o),e;if(s===i)return ld(o),r;s=s.sibling}t("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var l=o.child;l;){if(l===n){s=!0,n=o,i=a;break}if(l===i){s=!0,i=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=o;break}if(l===i){s=!0,i=a,n=o;break}l=l.sibling}s||t("189")}}n.alternate!==i&&t("190")}return 3!==n.tag&&t("188"),n.stateNode.current===n?e:r}function nd(e){if(!(e=md(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var Gt=z.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Wt=z.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ht=Mt.extend({relatedTarget:null});function rd(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Xt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zt=Mt.extend({key:function(e){if(e.key){var t=Xt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rd(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Kt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Zc,charCode:function(e){return"keypress"===e.type?rd(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rd(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Yt=zt.extend({dataTransfer:null}),Jt=Mt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Zc}),Qt=z.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),$t=zt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),er=[["abort","abort"],[re,"animationEnd"],[ne,"animationIteration"],[oe,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ue,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],tr={},rr={};function Cd(e,t){var r=e[0],n="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r],isInteractive:t},tr[e]=t,rr[r]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Cd(e,!0)}),er.forEach(function(e){Cd(e,!1)});var nr={eventTypes:tr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=rr[e])&&!0===e.isInteractive},extractEvents:function(e,t,r,n){var i=rr[e];if(!i)return null;switch(e){case"keypress":if(0===rd(r))return null;case"keydown":case"keyup":e=Zt;break;case"blur":case"focus":e=Ht;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Jt;break;case re:case ne:case oe:e=Gt;break;case ue:e=Qt;break;case"scroll":e=Mt;break;case"wheel":e=$t;break;case"copy":case"cut":case"paste":e=Wt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Bt;break;default:e=z}return Ra(t=e.getPooled(i,t,r,n)),t}},ir=nr.isInteractiveTopLevelEventType,or=[];function Gd(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n;for(n=r;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(r),r=Ia(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=Rb(e.nativeEvent);n=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<O.length;s++){var l=O[s];l&&(l=l.extractEvents(n,t,o,i))&&(a=ya(a,l))}Ea(a)}}var ar=!0;function H(e,t){if(!t)return null;var r=(ir(e)?Id:Jd).bind(null,e);t.addEventListener(e,r,!1)}function Kd(e,t){if(!t)return null;var r=(ir(e)?Id:Jd).bind(null,e);t.addEventListener(e,r,!0)}function Id(e,t){Lb(Jd,e,t)}function Jd(e,t){if(ar){var r=Rb(t);if(null===(r=Ia(r))||"number"!=typeof r.tag||2===kd(r)||(r=null),or.length){var n=or.pop();n.topLevelType=e,n.nativeEvent=t,n.targetInst=r,e=n}else e={topLevelType:e,nativeEvent:t,targetInst:r,ancestors:[]};try{Ob(Gd,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>or.length&&or.push(e)}}}var sr={},lr=0,ur="_reactListenersID"+(""+Math.random()).slice(2);function Od(e){return Object.prototype.hasOwnProperty.call(e,ur)||(e[ur]=lr++,sr[e[ur]]={}),sr[e[ur]]}function Pd(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rd(e,t){var r,n=Qd(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qd(n)}}function Sd(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Sd(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Td(){for(var e=window,t=Pd();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Pd(e.document)}return t}function Ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var cr=K&&"documentMode"in document&&11>=document.documentMode,pr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},hr=null,fr=null,dr=null,gr=!1;function ae(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return gr||null==hr||hr!==Pd(r)?null:("selectionStart"in(r=hr)&&Ud(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},dr&&jd(dr,r)?null:(dr=r,(e=z.getPooled(pr.select,fr,e,t)).type="select",e.target=hr,Ra(e),e))}var mr={eventTypes:pr,extractEvents:function(e,t,r,n){var i,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(i=!o)){e:{o=Od(o),i=j.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?Ka(t):window,e){case"focus":(Qb(o)||"true"===o.contentEditable)&&(hr=o,fr=t,dr=null);break;case"blur":dr=fr=hr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":return gr=!1,ae(r,n);case"selectionchange":if(cr)break;case"keydown":case"keyup":return ae(r,n)}return null}};function de(e){var t="";return a.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function ee(e,t){return e=s({children:void 0},t),(t=de(t.children))&&(e.children=t),e}function fe(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+yc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ge(e,r){return null!=r.dangerouslySetInnerHTML&&t("91"),s({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function he(e,r){var n=r.value;null==n&&(n=r.defaultValue,null!=(r=r.children)&&(null!=n&&t("92"),Array.isArray(r)&&(1>=r.length||t("93"),r=r[0]),n=r),null==n&&(n="")),e._wrapperState={initialValue:yc(n)}}function ie(e,t){var r=yc(t.value),n=yc(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}q.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),D=La,F=Ja,U=Ka,q.injectEventPluginsByName({SimpleEventPlugin:nr,EnterLeaveEventPlugin:Vt,ChangeEventPlugin:Rt,SelectEventPlugin:mr,BeforeInputEventPlugin:et});var yr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var vr,_r=void 0,br=(vr=function(e,t){if(e.namespaceURI!==yr.svg||"innerHTML"in e)e.innerHTML=t;else{for((_r=_r||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=_r.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return vr(e,t)})}:vr);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var xr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wr=["Webkit","ms","Moz","O"];function se(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||xr.hasOwnProperty(e)&&xr[e]?(""+t).trim():t+"px"}function te(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=se(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(xr).forEach(function(e){wr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xr[t]=xr[e]})});var Sr=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,r){r&&(Sr[e]&&(null!=r.children||null!=r.dangerouslySetInnerHTML)&&t("137",e,""),null!=r.dangerouslySetInnerHTML&&(null!=r.children&&t("60"),"object"==typeof r.dangerouslySetInnerHTML&&"__html"in r.dangerouslySetInnerHTML||t("61")),null!=r.style&&"object"!=typeof r.style&&t("62",""))}function we(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xe(e,t){var r=Od(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=j[t];for(var n=0;n<t.length;n++){var i=t[n];if(!r.hasOwnProperty(i)||!r[i]){switch(i){case"scroll":Kd("scroll",e);break;case"focus":case"blur":Kd("focus",e),Kd("blur",e),r.blur=!0,r.focus=!0;break;case"cancel":case"close":Sb(i)&&Kd(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===ce.indexOf(i)&&H(i,e)}r[i]=!0}}}function ye(){}var Er=null,Pr=null;function Be(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ce(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Cr="function"==typeof setTimeout?setTimeout:void 0,Tr="function"==typeof clearTimeout?clearTimeout:void 0;function Fe(e,t,r,n,i){e[X]=i,"input"===r&&"radio"===i.type&&null!=i.name&&Bc(e,i),we(r,n),n=we(r,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?te(e,s):"dangerouslySetInnerHTML"===a?br(e,s):"children"===a?pe(e,s):xc(e,a,s,n)}switch(r){case"input":Cc(e,i);break;case"textarea":ie(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(r=i.value)?fe(e,!!i.multiple,r,!1):t!==!!i.multiple&&(null!=i.defaultValue?fe(e,!!i.multiple,i.defaultValue,!0):fe(e,!!i.multiple,i.multiple?[]:"",!1))}}function Ge(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function He(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var kr=[],Or=-1;function I(e){0>Or||(e.current=kr[Or],kr[Or]=null,Or--)}function J(e,t){kr[++Or]=e.current,e.current=t}var Ar={},Ir={current:Ar},Rr={current:!1},Mr=Ar;function Me(e,t){var r=e.type.contextTypes;if(!r)return Ar;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function M(e){return null!=(e=e.childContextTypes)}function Ne(e){I(Rr),I(Ir)}function Oe(e){I(Rr),I(Ir)}function Pe(e,r,n){Ir.current!==Ar&&t("168"),J(Ir,r),J(Rr,n)}function Qe(e,r,n){var i=e.stateNode;if(e=r.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var o in i=i.getChildContext())o in e||t("108",mc(r)||"Unknown",o);return s({},n,i)}function Re(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Ar,Mr=Ir.current,J(Ir,t),J(Rr,Rr.current),!0}function Se(e,r,n){var i=e.stateNode;i||t("169"),n?(r=Qe(e,r,Mr),i.__reactInternalMemoizedMergedChildContext=r,I(Rr),I(Ir),J(Ir,r)):I(Rr),J(Rr,n)}var Lr=null,jr=null;function Ve(e){return function(t){try{return e(t)}catch(e){}}}function We(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);Lr=Ve(function(e){return t.onCommitFiberRoot(r,e)}),jr=Ve(function(e){return t.onCommitFiberUnmount(r,e)})}catch(e){}return!0}function Xe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function N(e,t,r,n){return new Xe(e,t,r,n)}function Ye(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ze(e){if("function"==typeof e)return Ye(e)?1:0;if(null!=e){if((e=e.$$typeof)===yt)return 11;if(e===_t)return 14}return 2}function $e(e,t){var r=e.alternate;return null===r?((r=N(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.firstContextDependency=e.firstContextDependency,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function af(e,r,n,i,o,a){var s=2;if(i=e,"function"==typeof e)Ye(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case pt:return bf(n.children,o,a,r);case mt:return cf(n,3|o,a,r);case ht:return cf(n,2|o,a,r);case ft:return(e=N(12,n,r,4|o)).elementType=ft,e.type=ft,e.expirationTime=a,e;case vt:return(e=N(13,n,r,o)).elementType=vt,e.type=vt,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case dt:s=10;break e;case gt:s=9;break e;case yt:s=11;break e;case _t:s=14;break e;case bt:s=16,i=null;break e}t("130",null==e?e:typeof e,"")}return(r=N(s,n,r,o)).elementType=e,r.type=i,r.expirationTime=a,r}function bf(e,t,r,n){return(e=N(7,e,n,t)).expirationTime=r,e}function cf(e,t,r,n){return e=N(8,e,n,t),t=0==(1&t)?ht:mt,e.elementType=t,e.type=t,e.expirationTime=r,e}function df(e,t,r){return(e=N(6,e,null,t)).expirationTime=r,e}function ef(e,t,r){return(t=N(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ff(e,t){e.didError=!1;var r=e.earliestPendingTime;0===r?e.earliestPendingTime=e.latestPendingTime=t:r<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),gf(t,e)}function hf(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var r=e.earliestPendingTime,n=e.latestPendingTime;r===t?e.earliestPendingTime=n===t?e.latestPendingTime=0:n:n===t&&(e.latestPendingTime=r),r=e.earliestSuspendedTime,n=e.latestSuspendedTime,0===r?e.earliestSuspendedTime=e.latestSuspendedTime=t:r<t?e.earliestSuspendedTime=t:n>t&&(e.latestSuspendedTime=t),gf(t,e)}function jf(e,t){var r=e.earliestPendingTime;return r>t&&(t=r),(e=e.earliestSuspendedTime)>t&&(t=e),t}function gf(e,t){var r=t.earliestSuspendedTime,n=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||n<e)&&(i=n),0!==(e=i)&&r>e&&(e=r),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}var Dr=!1;function lf(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mf(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function nf(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function of(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function pf(e,t){var r=e.alternate;if(null===r){var n=e.updateQueue,i=null;null===n&&(n=e.updateQueue=lf(e.memoizedState))}else n=e.updateQueue,i=r.updateQueue,null===n?null===i?(n=e.updateQueue=lf(e.memoizedState),i=r.updateQueue=lf(r.memoizedState)):n=e.updateQueue=mf(i):null===i&&(i=r.updateQueue=mf(n));null===i||n===i?of(n,t):null===n.lastUpdate||null===i.lastUpdate?(of(n,t),of(i,t)):(of(n,t),i.lastUpdate=t)}function qf(e,t){var r=e.updateQueue;null===(r=null===r?e.updateQueue=lf(e.memoizedState):rf(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t)}function rf(e,t){var r=e.alternate;return null!==r&&t===r.updateQueue&&(t=e.updateQueue=mf(t)),t}function sf(e,t,r,n,i,o){switch(r.tag){case 1:return"function"==typeof(e=r.payload)?e.call(o,n,i):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=r.payload)?e.call(o,n,i):e))break;return s({},n,i);case 2:Dr=!0}return n}function tf(e,t,r,n,i){Dr=!1;for(var o=(t=rf(e,t)).baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=sf(e,0,l,u,r,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var p=l.expirationTime;p<i?(null===c&&(c=l,null===a&&(o=u)),s<p&&(s=p)):(u=sf(e,0,l,u,r,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function uf(e,t,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),vf(t.firstEffect,r),t.firstEffect=t.lastEffect=null,vf(t.firstCapturedEffect,r),t.firstCapturedEffect=t.lastCapturedEffect=null}function vf(e,r){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var i=r;"function"!=typeof n&&t("191",n),n.call(i)}e=e.nextEffect}}function wf(e,t){return{value:e,source:t,stack:nc(t)}}var Fr={current:null},Nr=null,zr=null,Br=null;function Bf(e,t){var r=e.type._context;J(Fr,r._currentValue),r._currentValue=t}function Cf(e){var t=Fr.current;I(Fr),e.type._context._currentValue=t}function Df(e){Nr=e,Br=zr=null,e.firstContextDependency=null}function Ef(e,r){return Br!==e&&!1!==r&&0!==r&&("number"==typeof r&&1073741823!==r||(Br=e,r=1073741823),r={context:e,observedBits:r,next:null},null===zr?(null===Nr&&t("293"),Nr.firstContextDependency=zr=r):zr=zr.next=r),e._currentValue}var Ur={},Vr={current:Ur},qr={current:Ur},Gr={current:Ur};function If(e){return e===Ur&&t("174"),e}function Jf(e,t){J(Gr,t),J(qr,e),J(Vr,Ur);var r=t.nodeType;switch(r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:me(null,"");break;default:t=me(t=(r=8===r?t.parentNode:t).namespaceURI||null,r=r.tagName)}I(Vr),J(Vr,t)}function Kf(e){I(Vr),I(qr),I(Gr)}function Lf(e){If(Gr.current);var t=If(Vr.current),r=me(t,e.type);t!==r&&(J(qr,e),J(Vr,r))}function Mf(e){qr.current===e&&(I(Vr),I(qr))}function P(e,t){if(e&&e.defaultProps)for(var r in t=s({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}function Nf(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t,t}}var Wr=at.ReactCurrentOwner,Hr=(new a.Component).refs;function Qf(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:s({},t,r),e.memoizedState=r,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=r)}var Xr={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===kd(e)},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Rf(),i=nf(n=Sf(n,e));i.payload=t,null!=r&&(i.callback=r),Tf(),pf(e,i),Uf(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Rf(),i=nf(n=Sf(n,e));i.tag=1,i.payload=t,null!=r&&(i.callback=r),Tf(),pf(e,i),Uf(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Rf(),n=nf(r=Sf(r,e));n.tag=2,null!=t&&(n.callback=t),Tf(),pf(e,n),Uf(e,r)}};function Wf(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!jd(r,n)||!jd(i,o))}function Xf(e,t,r){var n=!1,i=Ar,o=t.contextType;return"object"==typeof o&&null!==o?o=Wr.currentDispatcher.readContext(o):(i=M(t)?Mr:Ir.current,o=(n=null!=(n=t.contextTypes))?Me(e,i):Ar),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Xr,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zf(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Xr.enqueueReplaceState(t,t.state,null)}function $f(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Hr;var o=t.contextType;"object"==typeof o&&null!==o?i.context=Wr.currentDispatcher.readContext(o):(o=M(t)?Mr:Ir.current,i.context=Me(e,o)),null!==(o=e.updateQueue)&&(tf(e,o,r,i,n),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Qf(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Xr.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(tf(e,o,r,i,n),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Kr=Array.isArray;function bg(e,r,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var i=void 0;n&&(1!==n.tag&&t("289"),i=n.stateNode),i||t("147",e);var o=""+e;return null!==r&&null!==r.ref&&"function"==typeof r.ref&&r.ref._stringRef===o?r.ref:((r=function(e){var t=i.refs;t===Hr&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,r)}"string"!=typeof e&&t("284"),n._owner||t("290",e)}return e}function cg(e,r){"textarea"!==e.type&&t("31","[object Object]"===Object.prototype.toString.call(r)?"object with keys {"+Object.keys(r).join(", ")+"}":r,"")}function dg(n){function b(e,t){if(n){var r=e.lastEffect;null!==r?(r.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function c(e,t){if(!n)return null;for(;null!==t;)b(e,t),t=t.sibling;return null}function d(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function e(e,t,r){return(e=$e(e,t)).index=0,e.sibling=null,e}function f(e,t,r){return e.index=r,n?null!==(r=e.alternate)?(r=r.index)<t?(e.effectTag=2,t):r:(e.effectTag=2,t):t}function g(e){return n&&null===e.alternate&&(e.effectTag=2),e}function h(t,r,n,i){return null===r||6!==r.tag?((r=df(n,t.mode,i)).return=t,r):((r=e(r,n)).return=t,r)}function k(t,r,n,i){return null!==r&&r.elementType===n.type?((i=e(r,n.props)).ref=bg(t,r,n),i.return=t,i):((i=af(n.type,n.key,n.props,null,t.mode,i)).ref=bg(t,r,n),i.return=t,i)}function l(t,r,n,i){return null===r||4!==r.tag||r.stateNode.containerInfo!==n.containerInfo||r.stateNode.implementation!==n.implementation?((r=ef(n,t.mode,i)).return=t,r):((r=e(r,n.children||[])).return=t,r)}function m(t,r,n,i,o){return null===r||7!==r.tag?((r=bf(n,t.mode,i,o)).return=t,r):((r=e(r,n)).return=t,r)}function r(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=df(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ut:return(r=af(t.type,t.key,t.props,null,e.mode,r)).ref=bg(e,null,t),r.return=e,r;case ct:return(t=ef(t,e.mode,r)).return=e,t}if(Kr(t)||lc(t))return(t=bf(t,e.mode,r,null)).return=e,t;cg(e,t)}return null}function w(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:h(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ut:return r.key===i?r.type===pt?m(e,t,r.props.children,n,i):k(e,t,r,n):null;case ct:return r.key===i?l(e,t,r,n):null}if(Kr(r)||lc(r))return null!==i?null:m(e,t,r,n,null);cg(e,r)}return null}function y(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return h(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ut:return e=e.get(null===n.key?r:n.key)||null,n.type===pt?m(t,e,n.props.children,i,n.key):k(t,e,n,i);case ct:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(Kr(n)||lc(n))return m(t,e=e.get(r)||null,n,i,null);cg(t,n)}return null}function B(e,t,i,o){for(var a=null,s=null,l=t,u=t=0,p=null;null!==l&&u<i.length;u++){l.index>u?(p=l,l=null):p=l.sibling;var h=w(e,l,i[u],o);if(null===h){null===l&&(l=p);break}n&&l&&null===h.alternate&&b(e,l),t=f(h,t,u),null===s?a=h:s.sibling=h,s=h,l=p}if(u===i.length)return c(e,l),a;if(null===l){for(;u<i.length;u++)(l=r(e,i[u],o))&&(t=f(l,t,u),null===s?a=l:s.sibling=l,s=l);return a}for(l=d(e,l);u<i.length;u++)(p=y(l,e,u,i[u],o))&&(n&&null!==p.alternate&&l.delete(null===p.key?u:p.key),t=f(p,t,u),null===s?a=p:s.sibling=p,s=p);return n&&l.forEach(function(t){return b(e,t)}),a}function R(e,i,o,a){var s=lc(o);"function"!=typeof s&&t("150"),null==(o=s.call(o))&&t("151");for(var l=s=null,u=i,p=i=0,h=null,g=o.next();null!==u&&!g.done;p++,g=o.next()){u.index>p?(h=u,u=null):h=u.sibling;var m=w(e,u,g.value,a);if(null===m){u||(u=h);break}n&&u&&null===m.alternate&&b(e,u),i=f(m,i,p),null===l?s=m:l.sibling=m,l=m,u=h}if(g.done)return c(e,u),s;if(null===u){for(;!g.done;p++,g=o.next())null!==(g=r(e,g.value,a))&&(i=f(g,i,p),null===l?s=g:l.sibling=g,l=g);return s}for(u=d(e,u);!g.done;p++,g=o.next())null!==(g=y(u,e,p,g.value,a))&&(n&&null!==g.alternate&&u.delete(null===g.key?p:g.key),i=f(g,i,p),null===l?s=g:l.sibling=g,l=g);return n&&u.forEach(function(t){return b(e,t)}),s}return function(r,n,i,o){var a="object"==typeof i&&null!==i&&i.type===pt&&null===i.key;a&&(i=i.props.children);var s="object"==typeof i&&null!==i;if(s)switch(i.$$typeof){case ut:e:{for(s=i.key,a=n;null!==a;){if(a.key===s){if(7===a.tag?i.type===pt:a.elementType===i.type){c(r,a.sibling),(n=e(a,i.type===pt?i.props.children:i.props)).ref=bg(r,a,i),n.return=r,r=n;break e}c(r,a);break}b(r,a),a=a.sibling}i.type===pt?((n=bf(i.props.children,r.mode,o,i.key)).return=r,r=n):((o=af(i.type,i.key,i.props,null,r.mode,o)).ref=bg(r,n,i),o.return=r,r=o)}return g(r);case ct:e:{for(a=i.key;null!==n;){if(n.key===a){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){c(r,n.sibling),(n=e(n,i.children||[])).return=r,r=n;break e}c(r,n);break}b(r,n),n=n.sibling}(n=ef(i,r.mode,o)).return=r,r=n}return g(r)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==n&&6===n.tag?(c(r,n.sibling),(n=e(n,i)).return=r,r=n):(c(r,n),(n=df(i,r.mode,o)).return=r,r=n),g(r);if(Kr(i))return B(r,n,i,o);if(lc(i))return R(r,n,i,o);if(s&&cg(r,i),void 0===i&&!a)switch(r.tag){case 1:case 0:t("152",(o=r.type).displayName||o.name||"Component")}return c(r,n)}}var Zr=dg(!0),Yr=dg(!1),Jr=null,Qr=null,$r=!1;function jg(e,t){var r=N(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function kg(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function lg(e){if($r){var t=Qr;if(t){var r=t;if(!kg(e,t)){if(!(t=Ge(r))||!kg(e,t))return e.effectTag|=2,$r=!1,void(Jr=e);jg(Jr,r)}Jr=e,Qr=He(t)}else e.effectTag|=2,$r=!1,Jr=e}}function mg(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Jr=e}function ng(e){if(e!==Jr)return!1;if(!$r)return mg(e),$r=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ce(t,e.memoizedProps))for(t=Qr;t;)jg(e,t),t=Ge(t);return mg(e),Qr=Jr?Ge(e.stateNode):null,!0}function og(){Qr=Jr=null,$r=!1}var en=at.ReactCurrentOwner;function Q(e,t,r,n){t.child=null===e?Yr(t,null,r,n):Zr(t,e.child,r,n)}function qg(e,t,r,n,i){r=r.render;var o=t.ref;return Df(t),n=r(n,o),t.effectTag|=1,Q(e,t,n,i),t.child}function rg(e,t,r,n,i,o){if(null===e){var a=r.type;return"function"!=typeof a||Ye(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=af(r.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,sg(e,t,a,n,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(r=null!==(r=r.compare)?r:jd)(i,n)&&e.ref===t.ref)?tg(e,t,o):(t.effectTag|=1,(e=$e(a,n)).ref=t.ref,e.return=t,t.child=e)}function sg(e,t,r,n,i,o){return null!==e&&i<o&&jd(e.memoizedProps,n)&&e.ref===t.ref?tg(e,t,o):ug(e,t,r,n,o)}function vg(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function ug(e,t,r,n,i){var o=M(r)?Mr:Ir.current;return o=Me(t,o),Df(t),r=r(n,o),t.effectTag|=1,Q(e,t,r,i),t.child}function wg(e,t,r,n,i){if(M(r)){var o=!0;Re(t)}else o=!1;if(Df(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Xf(t,r,n),$f(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"==typeof u&&null!==u?u=Wr.currentDispatcher.readContext(u):u=Me(t,u=M(r)?Mr:Ir.current);var c=r.getDerivedStateFromProps,p="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==u)&&Zf(t,a,n,u),Dr=!1;var h=t.memoizedState;l=a.state=h;var f=t.updateQueue;null!==f&&(tf(t,f,n,a,i),l=t.memoizedState),s!==n||h!==l||Rr.current||Dr?("function"==typeof c&&(Qf(t,r,c,n),l=t.memoizedState),(s=Dr||Wf(t,r,s,n,h,l,u))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:P(t.type,s),l=a.context,"object"==typeof(u=r.contextType)&&null!==u?u=Wr.currentDispatcher.readContext(u):u=Me(t,u=M(r)?Mr:Ir.current),(p="function"==typeof(c=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==u)&&Zf(t,a,n,u),Dr=!1,l=t.memoizedState,h=a.state=l,null!==(f=t.updateQueue)&&(tf(t,f,n,a,i),h=t.memoizedState),s!==n||l!==h||Rr.current||Dr?("function"==typeof c&&(Qf(t,r,c,n),h=t.memoizedState),(c=Dr||Wf(t,r,s,n,l,h,u))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,h,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=u,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return xg(e,t,r,n,o,i)}function xg(e,t,r,n,i,o){vg(e,t);var a=0!=(64&t.effectTag);if(!n&&!a)return i&&Se(t,r,!1),tg(e,t,o);n=t.stateNode,en.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=Zr(t,e.child,null,o),t.child=Zr(t,null,s,o)):Q(e,t,s,o),t.memoizedState=n.state,i&&Se(t,r,!0),t.child}function yg(e){var t=e.stateNode;t.pendingContext?Pe(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pe(0,t.context,!1),Jf(e,t.containerInfo)}function zg(e,t,r){var n=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=bf(null,n,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),n=bf(s,n,r,null),e.sibling=n,(r=e).return=n.return=t}else r=n=Yr(t,null,i.children,r);else null!==e.memoizedState?(s=(n=e.child).sibling,a?(r=i.fallback,i=$e(n,n.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==n.child&&(i.child=a)),n=i.sibling=$e(s,r,s.expirationTime),r=i,i.childExpirationTime=0,r.return=n.return=t):r=n=Zr(t,n.child,i.children,r)):(s=e.child,a?(a=i.fallback,(i=bf(null,n,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(n=i.sibling=bf(a,n,r,null)).effectTag|=2,r=i,i.childExpirationTime=0,r.return=n.return=t):n=r=Zr(t,s,i.children,r)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=r,n}function tg(e,r,n){if(null!==e&&(r.firstContextDependency=e.firstContextDependency),r.childExpirationTime<n)return null;if(null!==e&&r.child!==e.child&&t("153"),null!==r.child){for(n=$e(e=r.child,e.pendingProps,e.expirationTime),r.child=n,n.return=r;null!==e.sibling;)e=e.sibling,(n=n.sibling=$e(e,e.pendingProps,e.expirationTime)).return=r;n.sibling=null}return r.child}function Ag(e,r,n){var i=r.expirationTime;if(null!==e&&e.memoizedProps===r.pendingProps&&!Rr.current&&i<n){switch(r.tag){case 3:yg(r),og();break;case 5:Lf(r);break;case 1:M(r.type)&&Re(r);break;case 4:Jf(r,r.stateNode.containerInfo);break;case 10:Bf(r,r.memoizedProps.value);break;case 13:if(null!==r.memoizedState)return 0!==(i=r.child.childExpirationTime)&&i>=n?zg(e,r,n):null!==(r=tg(e,r,n))?r.sibling:null}return tg(e,r,n)}switch(r.expirationTime=0,r.tag){case 2:i=r.elementType,null!==e&&(e.alternate=null,r.alternate=null,r.effectTag|=2),e=r.pendingProps;var o=Me(r,Ir.current);if(Df(r),o=i(e,o),r.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(r.tag=1,M(i)){var a=!0;Re(r)}else a=!1;r.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&Qf(r,i,s,e),o.updater=Xr,r.stateNode=o,o._reactInternalFiber=r,$f(r,i,e,n),r=xg(null,r,i,!0,a,n)}else r.tag=0,Q(null,r,o,n),r=r.child;return r;case 16:switch(o=r.elementType,null!==e&&(e.alternate=null,r.alternate=null,r.effectTag|=2),a=r.pendingProps,e=Nf(o),r.type=e,o=r.tag=Ze(e),a=P(e,a),s=void 0,o){case 0:s=ug(null,r,e,a,n);break;case 1:s=wg(null,r,e,a,n);break;case 11:s=qg(null,r,e,a,n);break;case 14:s=rg(null,r,e,P(e.type,a),i,n);break;default:t("306",e,"")}return s;case 0:return i=r.type,o=r.pendingProps,ug(e,r,i,o=r.elementType===i?o:P(i,o),n);case 1:return i=r.type,o=r.pendingProps,wg(e,r,i,o=r.elementType===i?o:P(i,o),n);case 3:return yg(r),null===(i=r.updateQueue)&&t("282"),o=null!==(o=r.memoizedState)?o.element:null,tf(r,i,r.pendingProps,null,n),(i=r.memoizedState.element)===o?(og(),r=tg(e,r,n)):(o=r.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(Qr=He(r.stateNode.containerInfo),Jr=r,o=$r=!0),o?(r.effectTag|=2,r.child=Yr(r,null,i,n)):(Q(e,r,i,n),og()),r=r.child),r;case 5:return Lf(r),null===e&&lg(r),i=r.type,o=r.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,Ce(i,o)?s=null:null!==a&&Ce(i,a)&&(r.effectTag|=16),vg(e,r),1!==n&&1&r.mode&&o.hidden?(r.expirationTime=1,r=null):(Q(e,r,s,n),r=r.child),r;case 6:return null===e&&lg(r),null;case 13:return zg(e,r,n);case 4:return Jf(r,r.stateNode.containerInfo),i=r.pendingProps,null===e?r.child=Zr(r,null,i,n):Q(e,r,i,n),r.child;case 11:return i=r.type,o=r.pendingProps,qg(e,r,i,o=r.elementType===i?o:P(i,o),n);case 7:return Q(e,r,r.pendingProps,n),r.child;case 8:case 12:return Q(e,r,r.pendingProps.children,n),r.child;case 10:e:{if(i=r.type._context,o=r.pendingProps,s=r.memoizedProps,Bf(r,a=o.value),null!==s){var l=s.value;if(0===(a=l===a&&(0!==l||1/l==1/a)||l!=l&&a!=a?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(s.children===o.children&&!Rr.current){r=tg(e,r,n);break e}}else for(null!==(s=r.child)&&(s.return=r);null!==s;){if(null!==(l=s.firstContextDependency))do{if(l.context===i&&0!=(l.observedBits&a)){if(1===s.tag){var u=nf(n);u.tag=2,pf(s,u)}s.expirationTime<n&&(s.expirationTime=n),null!==(u=s.alternate)&&u.expirationTime<n&&(u.expirationTime=n);for(var c=s.return;null!==c;){if(u=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==u&&u.childExpirationTime<n&&(u.childExpirationTime=n);else{if(!(null!==u&&u.childExpirationTime<n))break;u.childExpirationTime=n}c=c.return}}u=s.child,l=l.next}while(null!==l);else u=10===s.tag&&s.type===r.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===r){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}Q(e,r,o.children,n),r=r.child}return r;case 9:return o=r.type,i=(a=r.pendingProps).children,Df(r),i=i(o=Ef(o,a.unstable_observedBits)),r.effectTag|=1,Q(e,r,i,n),r.child;case 14:return a=P(o=r.type,r.pendingProps),rg(e,r,o,a=P(o.type,a),i,n);case 15:return sg(e,r,r.type,r.pendingProps,i,n);case 17:return i=r.type,o=r.pendingProps,o=r.elementType===i?o:P(i,o),null!==e&&(e.alternate=null,r.alternate=null,r.effectTag|=2),r.tag=1,M(i)?(e=!0,Re(r)):e=!1,Df(r),Xf(r,i,o),$f(r,i,o,n),xg(null,r,i,!0,e,n);default:t("156")}}function Bg(e){e.effectTag|=4}var tn=void 0,rn=void 0,nn=void 0,on=void 0;tn=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},rn=function(){},nn=function(e,t,r,n,i){var o=e.memoizedProps;if(o!==n){var a=t.stateNode;switch(If(Vr.current),e=null,r){case"input":o=zc(a,o),n=zc(a,n),e=[];break;case"option":o=ee(a,o),n=ee(a,n),e=[];break;case"select":o=s({},o,{value:void 0}),n=s({},n,{value:void 0}),e=[];break;case"textarea":o=ge(a,o),n=ge(a,n),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof n.onClick&&(a.onclick=ye)}ve(r,n),a=r=void 0;var l=null;for(r in o)if(!n.hasOwnProperty(r)&&o.hasOwnProperty(r)&&null!=o[r])if("style"===r){var u=o[r];for(a in u)u.hasOwnProperty(a)&&(l||(l={}),l[a]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(L.hasOwnProperty(r)?e||(e=[]):(e=e||[]).push(r,null));for(r in n){var c=n[r];if(u=null!=o?o[r]:void 0,n.hasOwnProperty(r)&&c!==u&&(null!=c||null!=u))if("style"===r)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(l||(l={}),l[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(l||(l={}),l[a]=c[a])}else l||(e||(e=[]),e.push(r,l)),l=c;else"dangerouslySetInnerHTML"===r?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(r,""+c)):"children"===r?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(r,""+c):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(L.hasOwnProperty(r)?(null!=c&&xe(i,r),e||u===c||(e=[])):(e=e||[]).push(r,c))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&Bg(t)}},on=function(e,t,r,n){r!==n&&Bg(t)};var an="function"==typeof WeakSet?WeakSet:Set;function Kg(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=nc(r)),null!==r&&mc(r.type),t=t.value,null!==e&&1===e.tag&&mc(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function Lg(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Mg(e,t)}else t.current=null}function Ng(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)n.style.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,n.style.display=se("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else{if(13===r.tag&&null!==r.memoizedState){(n=r.child.sibling).return=r,r=n;continue}if(null!==r.child){r.child.return=r,r=r.child;continue}}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Og(e){switch("function"==typeof jr&&jr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r.destroy;if(null!==n){var i=e;try{n()}catch(e){Mg(i,e)}}r=r.next}while(r!==t)}break;case 1:if(Lg(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Mg(e,t)}break;case 5:Lg(e);break;case 4:Pg(e)}}function Qg(e){return 5===e.tag||3===e.tag||4===e.tag}function Rg(e){e:{for(var r=e.return;null!==r;){if(Qg(r)){var n=r;break e}r=r.return}t("160"),n=void 0}var i=r=void 0;switch(n.tag){case 5:r=n.stateNode,i=!1;break;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break;default:t("161")}16&n.effectTag&&(pe(r,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Qg(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(i){var a=r,s=o.stateNode,l=n;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else r.insertBefore(o.stateNode,n);else i?(s=r,l=o.stateNode,8===s.nodeType?(a=s.parentNode).insertBefore(l,s):(a=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=ye)):r.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function Pg(e){for(var r=e,n=!1,i=void 0,o=void 0;;){if(!n){n=r.return;e:for(;;){switch(null===n&&t("160"),n.tag){case 5:i=n.stateNode,o=!1;break e;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===r.tag||6===r.tag){e:for(var a=r,s=a;;)if(Og(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=i,s=r.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(r.stateNode)}else if(4===r.tag?(i=r.stateNode.containerInfo,o=!0):Og(r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Sg(e,r){switch(r.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=r.stateNode;if(null!=n){var i=r.memoizedProps;e=null!==e?e.memoizedProps:i;var o=r.type,a=r.updateQueue;r.updateQueue=null,null!==a&&Fe(n,a,o,e,i)}break;case 6:null===r.stateNode&&t("162"),r.stateNode.nodeValue=r.memoizedProps;break;case 3:case 12:break;case 13:if(n=r.memoizedState,i=void 0,e=r,null===n?i=!1:(i=!0,e=r.child,0===n.timedOutAt&&(n.timedOutAt=Rf())),null!==e&&Ng(e,i),null!==(n=r.updateQueue)){r.updateQueue=null;var s=r.stateNode;null===s&&(s=r.stateNode=new an),n.forEach(function(e){var t=Tg.bind(null,r,e);s.has(e)||(s.add(e),e.then(t,t))})}break;case 17:break;default:t("163")}}var sn="function"==typeof WeakMap?WeakMap:Map;function Vg(e,t,r){(r=nf(r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wg(n),Kg(e,t)},r}function Xg(e,t,r){(r=nf(r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===wn?wn=new Set([this]):wn.add(this));var r=t.value,i=t.stack;Kg(e,t),this.componentDidCatch(r,{componentStack:null!==i?i:""})}),r}function Zg(e){switch(e.tag){case 1:M(e.type)&&Ne();var r=e.effectTag;return 2048&r?(e.effectTag=-2049&r|64,e):null;case 3:return Kf(),Oe(),0!=(64&(r=e.effectTag))&&t("285"),e.effectTag=-2049&r|64,e;case 5:return Mf(e),null;case 13:return 2048&(r=e.effectTag)?(e.effectTag=-2049&r|64,e):null;case 4:return Kf(),null;case 10:return Cf(e),null;default:return null}}var ln={readContext:Ef},un=at.ReactCurrentOwner,cn=1073741822,pn=0,hn=!1,fn=null,dn=null,gn=0,mn=-1,yn=!1,vn=null,_n=!1,bn=null,xn=null,wn=null;function jh(){if(null!==fn)for(var e=fn.return;null!==e;){var t=e;switch(t.tag){case 1:var r=t.type.childContextTypes;null!=r&&Ne();break;case 3:Kf(),Oe();break;case 5:Mf(t);break;case 4:Kf();break;case 10:Cf(t)}e=e.return}dn=null,gn=0,mn=-1,yn=!1,fn=null}function Tf(){null!==xn&&(u.unstable_cancelCallback(bn),xn())}function kh(e){for(;;){var r=e.alternate,n=e.return,i=e.sibling;if(0==(1024&e.effectTag)){fn=e;e:{var o=r,a=gn,l=(r=e).pendingProps;switch(r.tag){case 2:case 16:break;case 15:case 0:break;case 1:M(r.type)&&Ne();break;case 3:Kf(),Oe(),(l=r.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==o&&null!==o.child||(ng(r),r.effectTag&=-3),rn(r);break;case 5:Mf(r);var u=If(Gr.current);if(a=r.type,null!==o&&null!=r.stateNode)nn(o,r,a,l,u),o.ref!==r.ref&&(r.effectTag|=128);else if(l){var c=If(Vr.current);if(ng(r)){o=(l=r).stateNode;var p=l.type,h=l.memoizedProps,f=u;switch(o[W]=l,o[X]=h,a=void 0,u=p){case"iframe":case"object":H("load",o);break;case"video":case"audio":for(p=0;p<ce.length;p++)H(ce[p],o);break;case"source":H("error",o);break;case"img":case"image":case"link":H("error",o),H("load",o);break;case"form":H("reset",o),H("submit",o);break;case"details":H("toggle",o);break;case"input":Ac(o,h),H("invalid",o),xe(f,"onChange");break;case"select":o._wrapperState={wasMultiple:!!h.multiple},H("invalid",o),xe(f,"onChange");break;case"textarea":he(o,h),H("invalid",o),xe(f,"onChange")}for(a in ve(u,h),p=null,h)h.hasOwnProperty(a)&&(c=h[a],"children"===a?"string"==typeof c?o.textContent!==c&&(p=["children",c]):"number"==typeof c&&o.textContent!==""+c&&(p=["children",""+c]):L.hasOwnProperty(a)&&null!=c&&xe(f,a));switch(u){case"input":Vb(o),Ec(o,h,!0);break;case"textarea":Vb(o),je(o);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(o.onclick=ye)}a=p,l.updateQueue=a,(l=null!==a)&&Bg(r)}else{h=r,o=a,f=l,p=9===u.nodeType?u:u.ownerDocument,c===yr.html&&(c=le(o)),c===yr.html?"script"===o?((o=p.createElement("div")).innerHTML="<script><\/script>",p=o.removeChild(o.firstChild)):"string"==typeof f.is?p=p.createElement(o,{is:f.is}):(p=p.createElement(o),"select"===o&&f.multiple&&(p.multiple=!0)):p=p.createElementNS(c,o),(o=p)[W]=h,o[X]=l,tn(o,r,!1,!1),f=o;var d=u,g=we(p=a,h=l);switch(p){case"iframe":case"object":H("load",f),u=h;break;case"video":case"audio":for(u=0;u<ce.length;u++)H(ce[u],f);u=h;break;case"source":H("error",f),u=h;break;case"img":case"image":case"link":H("error",f),H("load",f),u=h;break;case"form":H("reset",f),H("submit",f),u=h;break;case"details":H("toggle",f),u=h;break;case"input":Ac(f,h),u=zc(f,h),H("invalid",f),xe(d,"onChange");break;case"option":u=ee(f,h);break;case"select":f._wrapperState={wasMultiple:!!h.multiple},u=s({},h,{value:void 0}),H("invalid",f),xe(d,"onChange");break;case"textarea":he(f,h),u=ge(f,h),H("invalid",f),xe(d,"onChange");break;default:u=h}ve(p,u),c=void 0;var m=p,y=f,v=u;for(c in v)if(v.hasOwnProperty(c)){var _=v[c];"style"===c?te(y,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&br(y,_):"children"===c?"string"==typeof _?("textarea"!==m||""!==_)&&pe(y,_):"number"==typeof _&&pe(y,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(L.hasOwnProperty(c)?null!=_&&xe(d,c):null!=_&&xc(y,c,_,g))}switch(p){case"input":Vb(f),Ec(f,h,!1);break;case"textarea":Vb(f),je(f);break;case"option":null!=h.value&&f.setAttribute("value",""+yc(h.value));break;case"select":(u=f).multiple=!!h.multiple,null!=(f=h.value)?fe(u,!!h.multiple,f,!1):null!=h.defaultValue&&fe(u,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof u.onClick&&(f.onclick=ye)}(l=Be(a,l))&&Bg(r),r.stateNode=o}null!==r.ref&&(r.effectTag|=128)}else null===r.stateNode&&t("166");break;case 6:o&&null!=r.stateNode?on(o,r,o.memoizedProps,l):("string"!=typeof l&&(null===r.stateNode&&t("166")),o=If(Gr.current),If(Vr.current),ng(r)?(a=(l=r).stateNode,o=l.memoizedProps,a[W]=l,(l=a.nodeValue!==o)&&Bg(r)):(a=r,(l=(9===o.nodeType?o:o.ownerDocument).createTextNode(l))[W]=r,a.stateNode=l));break;case 11:break;case 13:if(l=r.memoizedState,0!=(64&r.effectTag)){r.expirationTime=a,fn=r;break e}l=null!==l,a=null!==o&&null!==o.memoizedState,null!==o&&!l&&a&&(null!==(o=o.child.sibling)&&(null!==(u=r.firstEffect)?(r.firstEffect=o,o.nextEffect=u):(r.firstEffect=r.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(l!==a||0==(1&r.effectTag)&&l)&&(r.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Kf(),rn(r);break;case 10:Cf(r);break;case 9:case 14:break;case 17:M(r.type)&&Ne();break;default:t("156")}fn=null}if(r=e,1===gn||1!==r.childExpirationTime){for(l=0,a=r.child;null!==a;)(o=a.expirationTime)>l&&(l=o),(u=a.childExpirationTime)>l&&(l=u),a=a.sibling;r.childExpirationTime=l}if(null!==fn)return fn;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Zg(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==i)return i;if(null===n)break;e=n}return null}function lh(e){var t=Ag(e.alternate,e,gn);return e.memoizedProps=e.pendingProps,null===t&&(t=kh(e)),un.current=null,t}function mh(e,r){hn&&t("243"),Tf(),hn=!0,un.currentDispatcher=ln;var n=e.nextExpirationTimeToWorkOn;n===gn&&e===dn&&null!==fn||(jh(),gn=n,fn=$e((dn=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(r)for(;null!==fn&&!nh();)fn=lh(fn);else for(;null!==fn;)fn=lh(fn)}catch(r){if(Br=zr=Nr=null,null===fn)i=!0,Wg(r);else{null===fn&&t("271");var o=fn,a=o.return;if(null!==a){e:{var s=e,l=a,u=o,c=r;if(a=gn,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var p=c;c=l;var h=-1,f=-1;do{if(13===c.tag){var d=c.alternate;if(null!==d&&null!==(d=d.memoizedState)){f=10*(1073741822-d.timedOutAt);break}"number"==typeof(d=c.pendingProps.maxDuration)&&(0>=d?h=0:(-1===h||d<h)&&(h=d))}c=c.return}while(null!==c);c=l;do{if((d=13===c.tag)&&(d=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),d){if(null===(l=c.updateQueue)?c.updateQueue=new Set([p]):l.add(p),0==(1&c.mode)){c.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((a=nf(1073741823)).tag=2,pf(u,a))),u.expirationTime=1073741823;break e}null===(u=s.pingCache)?(u=s.pingCache=new sn,l=new Set,u.set(p,l)):void 0===(l=u.get(p))&&(l=new Set,u.set(p,l)),l.has(a)||(l.add(a),u=oh.bind(null,s,p,a),p.then(u,u)),-1===h?s=1073741823:(-1===f&&(f=10*(1073741822-jf(s,a))-5e3),s=f+h),0<=s&&mn<s&&(mn=s),c.effectTag|=2048,c.expirationTime=a;break e}c=c.return}while(null!==c);c=Error((mc(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+nc(u))}yn=!0,c=wf(c,u),s=l;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=a,qf(s,a=Vg(s,c,a));break e;case 1:if(p=c,h=s.type,f=s.stateNode,0==(64&s.effectTag)&&("function"==typeof h.getDerivedStateFromError||null!==f&&"function"==typeof f.componentDidCatch&&(null===wn||!wn.has(f)))){s.effectTag|=2048,s.expirationTime=a,qf(s,a=Xg(s,p,a));break e}}s=s.return}while(null!==s)}fn=kh(o);continue}i=!0,Wg(r)}}break}if(hn=!1,Br=zr=Nr=un.currentDispatcher=null,i)dn=null,e.finishedWork=null;else if(null!==fn)e.finishedWork=null;else{if(null===(i=e.current.alternate)&&t("281"),dn=null,yn){if(o=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==o&&o<n||0!==a&&a<n||0!==s&&s<n)return hf(e,n),void ph(e,i,n,e.expirationTime,-1);if(!e.didError&&r)return e.didError=!0,n=e.nextExpirationTimeToWorkOn=n,r=e.expirationTime=1073741823,void ph(e,i,n,r,-1)}r&&-1!==mn?(hf(e,n),(r=10*(1073741822-jf(e,n)))<mn&&(mn=r),r=10*(1073741822-Rf()),r=mn-r,ph(e,i,n,e.expirationTime,0>r?0:r)):(e.pendingCommitExpirationTime=n,e.finishedWork=i)}}function Mg(e,t){for(var r=e.return;null!==r;){switch(r.tag){case 1:var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===wn||!wn.has(n)))return pf(r,e=Xg(r,e=wf(t,e),1073741823)),void Uf(r,1073741823);break;case 3:return pf(r,e=Vg(r,e=wf(t,e),1073741823)),void Uf(r,1073741823)}r=r.return}3===e.tag&&(pf(e,r=Vg(e,r=wf(t,e),1073741823)),Uf(e,1073741823))}function Sf(e,t){return 0!==pn?e=pn:hn?e=_n?1073741823:gn:1&t.mode?(e=jn?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==dn&&e===gn&&--e):e=1073741823,jn&&(0===An||e<An)&&(An=e),e}function oh(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),null!==dn&&gn===r?dn=null:(t=e.earliestSuspendedTime,n=e.latestSuspendedTime,0!==t&&r<=t&&r>=n&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>r)&&(e.latestPingedTime=r),gf(r,e),0!==(r=e.expirationTime)&&sh(e,r)))}function Tg(e,t){var r=e.stateNode;null!==r&&r.delete(t),null!==(e=th(e,t=Sf(t=Rf(),e)))&&(ff(e,t),0!==(t=e.expirationTime)&&sh(e,t))}function th(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return i}function Uf(e,r){null!==(e=th(e,r))&&(!hn&&0!==gn&&r>gn&&jh(),ff(e,r),hn&&!_n&&dn===e||sh(e,e.expirationTime),Un>Bn&&(Un=0,t("185")))}function wh(e,t,r,n,i){var o=pn;pn=1073741823;try{return e(t,r,n,i)}finally{pn=o}}var Sn=null,En=null,Pn=0,Cn=void 0,Tn=!1,kn=null,On=0,An=0,In=!1,Rn=null,Mn=!1,Ln=!1,jn=!1,Dn=null,Fn=u.unstable_now(),Nn=1073741822-(Fn/10|0),zn=Nn,Bn=50,Un=0,Vn=null;function Jh(){Nn=1073741822-((u.unstable_now()-Fn)/10|0)}function Kh(e,t){if(0!==Pn){if(t<Pn)return;null!==Cn&&u.unstable_cancelCallback(Cn)}Pn=t,e=u.unstable_now()-Fn,Cn=u.unstable_scheduleCallback(Lh,{timeout:10*(1073741822-t)-e})}function ph(e,t,r,n,i){e.expirationTime=n,0!==i||nh()?0<i&&(e.timeoutHandle=Cr(Mh.bind(null,e,t,r),i)):(e.pendingCommitExpirationTime=r,e.finishedWork=t)}function Mh(e,t,r){e.pendingCommitExpirationTime=r,e.finishedWork=t,Jh(),zn=Nn,Nh(e,r)}function Rf(){return Tn?zn:(Oh(),0!==On&&1!==On||(Jh(),zn=Nn),zn)}function sh(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===En?(Sn=En=e,e.nextScheduledRoot=e):(En=En.nextScheduledRoot=e).nextScheduledRoot=Sn):t>e.expirationTime&&(e.expirationTime=t),Tn||(Mn?Ln&&(kn=e,On=1073741823,Ph(e,1073741823,!1)):1073741823===t?Qh(1073741823,!1):Kh(e,t))}function Oh(){var e=0,r=null;if(null!==En)for(var n=En,i=Sn;null!==i;){var o=i.expirationTime;if(0===o){if((null===n||null===En)&&t("244"),i===i.nextScheduledRoot){Sn=En=i.nextScheduledRoot=null;break}if(i===Sn)Sn=o=i.nextScheduledRoot,En.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===En){(En=n).nextScheduledRoot=Sn,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if(o>e&&(e=o,r=i),i===En)break;if(1073741823===e)break;n=i,i=i.nextScheduledRoot}}kn=r,On=e}var qn=!1;function nh(){return!!qn||!!u.unstable_shouldYield()&&(qn=!0)}function Lh(){try{if(!nh()&&null!==Sn){Jh();var e=Sn;do{var t=e.expirationTime;0!==t&&Nn<=t&&(e.nextExpirationTimeToWorkOn=Nn),e=e.nextScheduledRoot}while(e!==Sn)}Qh(0,!0)}finally{qn=!1}}function Qh(e,t){if(Oh(),t)for(Jh(),zn=Nn;null!==kn&&0!==On&&e<=On&&!(qn&&Nn>On);)Ph(kn,On,Nn>On),Oh(),Jh(),zn=Nn;else for(;null!==kn&&0!==On&&e<=On;)Ph(kn,On,!1),Oh();if(t&&(Pn=0,Cn=null),0!==On&&Kh(kn,On),Un=0,Vn=null,null!==Dn)for(e=Dn,Dn=null,t=0;t<e.length;t++){var r=e[t];try{r._onComplete()}catch(e){In||(In=!0,Rn=e)}}if(In)throw e=Rn,Rn=null,In=!1,e}function Nh(e,r){Tn&&t("253"),kn=e,On=r,Ph(e,r,!1),Qh(1073741823,!1)}function Ph(e,r,n){if(Tn&&t("245"),Tn=!0,n){var i=e.finishedWork;null!==i?Sh(e,i,r):(e.finishedWork=null,-1!==(i=e.timeoutHandle)&&(e.timeoutHandle=-1,Tr(i)),mh(e,n),null!==(i=e.finishedWork)&&(nh()?e.finishedWork=i:Sh(e,i,r)))}else null!==(i=e.finishedWork)?Sh(e,i,r):(e.finishedWork=null,-1!==(i=e.timeoutHandle)&&(e.timeoutHandle=-1,Tr(i)),mh(e,n),null!==(i=e.finishedWork)&&Sh(e,i,r));Tn=!1}function Sh(e,r,n){var i=e.firstBatch;if(null!==i&&i._expirationTime>=n&&(null===Dn?Dn=[i]:Dn.push(i),i._defer))return e.finishedWork=r,void(e.expirationTime=0);e.finishedWork=null,e===Vn?Un++:(Vn=e,Un=0),_n=hn=!0,e.current===r&&t("177"),0===(n=e.pendingCommitExpirationTime)&&t("261"),e.pendingCommitExpirationTime=0,i=r.expirationTime;var o=r.childExpirationTime;if(i=o>i?o:i,e.didError=!1,0===i?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(i<e.latestPingedTime&&(e.latestPingedTime=0),0!==(o=e.latestPendingTime)&&(o>i?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>i&&(e.earliestPendingTime=e.latestPendingTime)),0===(o=e.earliestSuspendedTime)?ff(e,i):i<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,ff(e,i)):i>o&&ff(e,i)),gf(0,e),un.current=null,1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,Er=ar,Ud(o=Td())){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{var s=(a=(a=o.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var l=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{a.nodeType,u.nodeType}catch(e){a=null;break e}var c=0,p=-1,h=-1,f=0,d=0,g=o,m=null;t:for(;;){for(var y;g!==a||0!==l&&3!==g.nodeType||(p=c+l),g!==u||0!==s&&3!==g.nodeType||(h=c+s),3===g.nodeType&&(c+=g.nodeValue.length),null!==(y=g.firstChild);)m=g,g=y;for(;;){if(g===o)break t;if(m===a&&++f===l&&(p=c),m===u&&++d===s&&(h=c),null!==(y=g.nextSibling))break;m=(g=m).parentNode}g=y}a=-1===p||-1===h?null:{start:p,end:h}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pr={focusedElem:o,selectionRange:a},ar=!1,vn=i;null!==vn;){o=!1,a=void 0;try{for(;null!==vn;){if(256&vn.effectTag)e:{var v=vn.alternate;switch((l=vn).tag){case 0:case 11:case 15:break e;case 1:if(256&l.effectTag&&null!==v){var _=v.memoizedProps,b=v.memoizedState,x=l.stateNode,w=x.getSnapshotBeforeUpdate(l.elementType===l.type?_:P(l.type,_),b);x.__reactInternalSnapshotBeforeUpdate=w}break e;case 3:case 5:case 6:case 4:case 17:break e;default:t("163")}}vn=vn.nextEffect}}catch(e){o=!0,a=e}o&&(null===vn&&t("178"),Mg(vn,a),null!==vn&&(vn=vn.nextEffect))}for(vn=i;null!==vn;){v=!1,_=void 0;try{for(;null!==vn;){var S=vn.effectTag;if(16&S&&pe(vn.stateNode,""),128&S){var E=vn.alternate;if(null!==E){var C=E.ref;null!==C&&("function"==typeof C?C(null):C.current=null)}}switch(14&S){case 2:Rg(vn),vn.effectTag&=-3;break;case 6:Rg(vn),vn.effectTag&=-3,Sg(vn.alternate,vn);break;case 4:Sg(vn.alternate,vn);break;case 8:Pg(b=vn),b.return=null,b.child=null,b.memoizedState=null,b.updateQueue=null;var T=b.alternate;null!==T&&(T.return=null,T.child=null,T.memoizedState=null,T.updateQueue=null)}vn=vn.nextEffect}}catch(e){v=!0,_=e}v&&(null===vn&&t("178"),Mg(vn,_),null!==vn&&(vn=vn.nextEffect))}if(C=Pr,E=Td(),S=C.focusedElem,v=C.selectionRange,E!==S&&S&&S.ownerDocument&&Sd(S.ownerDocument.documentElement,S)){null!==v&&Ud(S)&&(E=v.start,void 0===(C=v.end)&&(C=E),"selectionStart"in S?(S.selectionStart=E,S.selectionEnd=Math.min(C,S.value.length)):(C=(E=S.ownerDocument||document)&&E.defaultView||window).getSelection&&(C=C.getSelection(),_=S.textContent.length,T=Math.min(v.start,_),v=void 0===v.end?T:Math.min(v.end,_),!C.extend&&T>v&&(_=v,v=T,T=_),_=Rd(S,T),b=Rd(S,v),_&&b&&(1!==C.rangeCount||C.anchorNode!==_.node||C.anchorOffset!==_.offset||C.focusNode!==b.node||C.focusOffset!==b.offset)&&((E=E.createRange()).setStart(_.node,_.offset),C.removeAllRanges(),T>v?(C.addRange(E),C.extend(b.node,b.offset)):(E.setEnd(b.node,b.offset),C.addRange(E))))),E=[];for(C=S;C=C.parentNode;)1===C.nodeType&&E.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"==typeof S.focus&&S.focus(),S=0;S<E.length;S++)(C=E[S]).element.scrollLeft=C.left,C.element.scrollTop=C.top}for(Pr=null,ar=!!Er,Er=null,e.current=r,vn=i;null!==vn;){i=!1,S=void 0;try{for(E=n;null!==vn;){var k=vn.effectTag;if(36&k){var O=vn.alternate;switch(T=E,(C=vn).tag){case 0:case 11:case 15:break;case 1:var A=C.stateNode;if(4&C.effectTag)if(null===O)A.componentDidMount();else{var I=C.elementType===C.type?O.memoizedProps:P(C.type,O.memoizedProps);A.componentDidUpdate(I,O.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var R=C.updateQueue;null!==R&&uf(0,R,A);break;case 3:var M=C.updateQueue;if(null!==M){if(v=null,null!==C.child)switch(C.child.tag){case 5:v=C.child.stateNode;break;case 1:v=C.child.stateNode}uf(0,M,v)}break;case 5:var L=C.stateNode;null===O&&4&C.effectTag&&Be(C.type,C.memoizedProps)&&L.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:t("163")}}if(128&k){var j=vn.ref;if(null!==j){var D=vn.stateNode;switch(vn.tag){case 5:var F=D;break;default:F=D}"function"==typeof j?j(F):j.current=F}}vn=vn.nextEffect}}catch(e){i=!0,S=e}i&&(null===vn&&t("178"),Mg(vn,S),null!==vn&&(vn=vn.nextEffect))}hn=_n=!1,"function"==typeof Lr&&Lr(r.stateNode),k=r.expirationTime,0===(r=(r=r.childExpirationTime)>k?r:k)&&(wn=null),e.expirationTime=r,e.finishedWork=null}function Wg(e){null===kn&&t("246"),kn.expirationTime=0,In||(In=!0,Rn=e)}function Th(e,t){var r=Mn;Mn=!0;try{return e(t)}finally{(Mn=r)||Tn||Qh(1073741823,!1)}}function Uh(e,t){if(Mn&&!Ln){Ln=!0;try{return e(t)}finally{Ln=!1}}return e(t)}function Wh(e,t,r){if(jn)return e(t,r);Mn||Tn||0===An||(Qh(An,!1),An=0);var n=jn,i=Mn;Mn=jn=!0;try{return e(t,r)}finally{jn=n,(Mn=i)||Tn||Qh(1073741823,!1)}}function Xh(e,r,n,i,o){var a=r.current;e:if(n){t:{2===kd(n=n._reactInternalFiber)&&1===n.tag||t("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(M(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);t("171"),s=void 0}if(1===n.tag){var l=n.type;if(M(l)){n=Qe(n,l,s);break e}}n=s}else n=Ar;return null===r.context?r.context=n:r.pendingContext=n,r=o,(o=nf(i)).payload={element:e},null!==(r=void 0===r?null:r)&&(o.callback=r),Tf(),pf(a,o),Uf(a,i),i}function Yh(e,t,r,n){var i=t.current;return Xh(e,t,r,i=Sf(Rf(),i),n)}function Zh(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function $h(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ct,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function ai(e){var t=1073741822-25*(1+((1073741822-Rf()+500)/25|0));t>=cn&&(t=cn-1),this._expirationTime=cn=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function bi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ci(e,t,r){e={current:t=N(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:r,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function di(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ei(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new ci(e,!1,t)}function fi(e,r,n,i,o){di(n)||t("200");var a=n._reactRootContainer;if(a){if("function"==typeof o){var s=o;o=function(){var e=Zh(a._internalRoot);s.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,r,o):a.render(r,o)}else{if(a=n._reactRootContainer=ei(n,i),"function"==typeof o){var l=o;o=function(){var e=Zh(a._internalRoot);l.call(e)}}Uh(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,r,o):a.render(r,o)})}return Zh(a._internalRoot)}function gi(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return di(r)||t("200"),$h(e,r,null,n)}tt=function(e,r,n){switch(r){case"input":if(Cc(e,n),r=n.name,"radio"===n.type&&null!=r){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<n.length;r++){var i=n[r];if(i!==e&&i.form===e.form){var o=La(i);o||t("90"),Wb(i),Cc(i,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(r=n.value)&&fe(e,!!n.multiple,r,!1)}},ai.prototype.render=function(e){this._defer||t("250"),this._hasChildren=!0,this._children=e;var r=this._root._internalRoot,n=this._expirationTime,i=new bi;return Xh(e,r,null,n,i._onCommit),i},ai.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},ai.prototype.commit=function(){var e=this._root._internalRoot,r=e.firstBatch;if(this._defer&&null!==r||t("251"),this._hasChildren){var n=this._expirationTime;if(r!==this){this._hasChildren&&(n=this._expirationTime=r._expirationTime,this.render(this._children));for(var i=null,o=r;o!==this;)i=o,o=o._next;null===i&&t("251"),i._next=o._next,this._next=r,e.firstBatch=this}this._defer=!1,Nh(e,n),r=this._next,this._next=null,null!==(r=e.firstBatch=r)&&r._hasChildren&&r.render(r._children)}else this._next=null,this._defer=!1},ai.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},bi.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},bi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var r=0;r<e.length;r++){var n=e[r];"function"!=typeof n&&t("191",n),n()}}},ci.prototype.render=function(e,t){var r=this._internalRoot,n=new bi;return null!==(t=void 0===t?null:t)&&n.then(t),Yh(e,r,null,n._onCommit),n},ci.prototype.unmount=function(e){var t=this._internalRoot,r=new bi;return null!==(e=void 0===e?null:e)&&r.then(e),Yh(null,t,null,r._onCommit),r},ci.prototype.legacy_renderSubtreeIntoContainer=function(e,t,r){var n=this._internalRoot,i=new bi;return null!==(r=void 0===r?null:r)&&i.then(r),Yh(t,n,e,i._onCommit),i},ci.prototype.createBatch=function(){var e=new ai(this),t=e._expirationTime,r=this._internalRoot,n=r.firstBatch;if(null===n)r.firstBatch=e,e._next=null;else{for(r=null;null!==n&&n._expirationTime>=t;)r=n,n=n._next;e._next=n,null!==r&&(r._next=e)}return e},Kb=Th,Lb=Wh,Mb=function(){Tn||0===An||(Qh(An,!1),An=0)};var Gn={createPortal:gi,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var r=e._reactInternalFiber;return void 0===r&&("function"==typeof e.render?t("188"):t("268",Object.keys(e))),e=null===(e=nd(r))?null:e.stateNode},hydrate:function(e,t,r){return fi(null,e,t,!0,r)},render:function(e,t,r){return fi(null,e,t,!1,r)},unstable_renderSubtreeIntoContainer:function(e,r,n,i){return(null==e||void 0===e._reactInternalFiber)&&t("38"),fi(e,r,n,!1,i)},unmountComponentAtNode:function(e){return di(e)||t("40"),!!e._reactRootContainer&&(Uh(function(){fi(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return gi.apply(void 0,arguments)},unstable_batchedUpdates:Th,unstable_interactiveUpdates:Wh,flushSync:function(e,r){Tn&&t("187");var n=Mn;Mn=!0;try{return wh(e,r)}finally{Mn=n,Qh(1073741823,!1)}},unstable_createRoot:function hi(e,r){return di(e)||t("299","unstable_createRoot"),new ci(e,!0,null!=r&&!0===r.hydrate)},unstable_flushControlled:function(e){var t=Mn;Mn=!0;try{wh(e)}finally{(Mn=t)||Tn||Qh(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ja,Ka,La,q.injectEventPluginsByName,A,Ra,function(e){za(e,Qa)},Ib,Jb,Jd,Ea]}};!function(e){var t=e.findFiberByHostInstance;We(s({},e,{overrideProps:null,findHostInstanceByFiber:function(e){return null===(e=nd(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:Ia,bundleType:0,version:"16.7.0",rendererPackageName:"react-dom"});var Wn={default:Gn},Hn=Wn&&Gn||Wn;n.exports=Hn.default||Hn},function(e,t,r){"use strict";e.exports=r(227)},function(e,r,n){"use strict";(function(e){
/** @license React v0.12.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(r,"__esModule",{value:!0});var n=null,i=!1,o=3,a=-1,s=-1,l=!1,c=!1;function p(){if(!l){var e=n.expirationTime;c?w():c=!0,x(t,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=o,a=s;o=e,s=t;try{var l=r()}finally{o=i,s=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,p()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function v(){if(-1===a&&null!==n&&1===n.priorityLevel){l=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{l=!1,null!==n?p():c=!1}}}function t(e){l=!0;var t=i;i=e;try{if(e)for(;null!==n;){var o=r.unstable_now();if(!(n.expirationTime<=o))break;do{u()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{u()}while(null!==n&&!S())}finally{l=!1,i=t,null!==n?p():c=!1,v()}}var h,f,d=Date,g="function"==typeof setTimeout?setTimeout:void 0,m="function"==typeof clearTimeout?clearTimeout:void 0,y="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function E(e){h=y(function(t){m(f),e(t)}),f=g(function(){_(h),e(r.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var b=performance;r.unstable_now=function(){return b.now()}}else r.unstable_now=function(){return d.now()};var x,w,S,P=null;if("undefined"!=typeof window?P=window:void 0!==e&&(P=e),P&&P._schedMock){var C=P._schedMock;x=C[0],w=C[1],S=C[2],r.unstable_now=C[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,k=function(e){if(null!==T)try{T(e)}finally{T=null}};x=function(e){null!==T?setTimeout(x,0,e):(T=e,setTimeout(k,0,!1))},w=function(){T=null},S=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var O=null,A=!1,I=-1,R=!1,M=!1,L=0,j=33,D=33;S=function(){return L<=r.unstable_now()};var F=new MessageChannel,N=F.port2;F.port1.onmessage=function(){A=!1;var e=O,t=I;O=null,I=-1;var n=r.unstable_now(),i=!1;if(0>=L-n){if(!(-1!==t&&t<=n))return R||(R=!0,E(z)),O=e,void(I=t);i=!0}if(null!==e){M=!0;try{e(i)}finally{M=!1}}};var z=function(e){if(null!==O){E(z);var t=e-L+D;t<D&&j<D?(8>t&&(t=8),D=t<j?j:t):j=t,L=e+D,A||(A=!0,N.postMessage(void 0))}else R=!1};x=function(e,t){O=e,I=t,M||0>t?N.postMessage(void 0):R||(R=!0,E(z))},w=function(){O=null,A=!1,I=-1}}r.unstable_ImmediatePriority=1,r.unstable_UserBlockingPriority=2,r.unstable_NormalPriority=3,r.unstable_IdlePriority=5,r.unstable_LowPriority=4,r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=o,i=a;o=e,a=r.unstable_now();try{return t()}finally{o=n,a=i,v()}},r.unstable_scheduleCallback=function(e,t){var i=-1!==a?a:r.unstable_now();if("object"==typeof t&&null!==t&&"number"==typeof t.timeout)t=i+t.timeout;else switch(o){case 1:t=i+-1;break;case 2:t=i+250;break;case 5:t=i+1073741823;break;case 4:t=i+1e4;break;default:t=i+5e3}if(e={callback:e,priorityLevel:o,expirationTime:t,next:null,previous:null},null===n)n=e.next=e.previous=e,p();else{i=null;var s=n;do{if(s.expirationTime>t){i=s;break}s=s.next}while(s!==n);null===i?i=n:i===n&&(n=e,p()),(t=i.previous).next=i.previous=e,e.next=i,e.previous=t}return e},r.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},r.unstable_wrapCallback=function(e){var t=o;return function(){var n=o,i=a;o=t,a=r.unstable_now();try{return e.apply(this,arguments)}finally{o=n,a=i,v()}}},r.unstable_getCurrentPriorityLevel=function(){return o},r.unstable_shouldYield=function(){return!i&&(null!==n&&n.expirationTime<s||S())},r.unstable_continueExecution=function(){null!==n&&p()},r.unstable_pauseExecution=function(){},r.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(28))},function(e,t){!function(){var e=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var t,r;return this===Function||this===Function.prototype.constructor?r="Function":this!==Function.prototype&&(r=(t=(""+this).match(e))&&t[1]),r||""}var t=!("name"in Function.prototype&&"name"in function x(){}),r="function"==typeof Object.defineProperty&&function(){var e;try{Object.defineProperty(Function.prototype,"_xyz",{get:function(){return"blah"},configurable:!0}),e="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(t){e=!1}return e}(),n="function"==typeof Object.prototype.__defineGetter__&&function(){var e;try{Function.prototype.__defineGetter__("_abc",function(){return"foo"}),e="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(t){e=!1}return e}();Function.prototype._name=_name,t&&(r?Object.defineProperty(Function.prototype,"name",{get:function(){var e=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:e,configurable:!0}),e},configurable:!0}):n&&Function.prototype.__defineGetter__("name",function(){var e=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",function(){return e}),e}))}()},function(e,t,r){"use strict";r(230).polyfill()},function(e,t,r){"use strict";function assign(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var l=o[a],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(r[l]=i[l])}}return r}e.exports={assign:assign,polyfill:function polyfill(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign})}}},function(e,t,r){"use strict";e.exports=r(232).polyfill()},function(e,t,r){(function(t,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var n;n=function(){"use strict";function isFunction(e){return"function"==typeof e}var e=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,o=void 0,a=function asap(e,t){h[n]=e,h[n+1]=t,2===(n+=2)&&(o?o(flush):f())};var s="undefined"!=typeof window?window:void 0,l=s||{},u=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}var h=new Array(1e3);function flush(){for(var e=0;e<n;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}n=0}var f=void 0;function then(e,t){var r=this,n=new this.constructor(noop);void 0===n[d]&&makePromise(n);var i=r._state;if(i){var o=arguments[i-1];a(function(){return invokeCallback(i,n,o,r._result)})}else subscribe(r,n,e,t);return n}function resolve$1(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(noop);return resolve(t,e),t}f=c?function useNextTick(){return function(){return t.nextTick(flush)}}():u?function useMutationObserver(){var e=0,t=new u(flush),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():p?function useMessageChannel(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}():void 0===s?function attemptVertx(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(flush)}:useSetTimeout()}catch(e){return useSetTimeout()}}():useSetTimeout();var d=Math.random().toString(36).substring(2);function noop(){}var g=void 0,m=1,y=2,v={error:null};function getThen(e){try{return e.then}catch(e){return v.error=e,v}}function tryThen(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function handleForeignThenable(e,t,r){a(function(e){var n=!1,i=tryThen(r,t,function(r){n||(n=!0,t!==r?resolve(e,r):fulfill(e,r))},function(t){n||(n=!0,reject(e,t))},e._label);!n&&i&&(n=!0,reject(e,i))},e)}function handleOwnThenable(e,t){t._state===m?fulfill(e,t._result):t._state===y?reject(e,t._result):subscribe(t,void 0,function(t){return resolve(e,t)},function(t){return reject(e,t)})}function handleMaybeThenable(e,t,r){t.constructor===e.constructor&&r===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):r===v?(reject(e,v.error),v.error=null):void 0===r?fulfill(e,t):isFunction(r)?handleForeignThenable(e,t,r):fulfill(e,t)}function resolve(e,t){var r,n;e===t?reject(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=t),null===r||"object"!==n&&"function"!==n?fulfill(e,t):handleMaybeThenable(e,t,getThen(t)))}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===g&&(e._result=t,e._state=m,0!==e._subscribers.length&&a(publish,e))}function reject(e,t){e._state===g&&(e._state=y,e._result=t,a(publishRejection,e))}function subscribe(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+m]=r,i[o+y]=n,0===o&&e._state&&a(publish,e)}function publish(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?invokeCallback(r,n,i,o):i(o);e._subscribers.length=0}}function tryCatch(e,t){try{return e(t)}catch(e){return v.error=e,v}}function invokeCallback(e,t,r,n){var i=isFunction(r),o=void 0,a=void 0,s=void 0,l=void 0;if(i){if((o=tryCatch(r,n))===v?(l=!0,a=o.error,o.error=null):s=!0,t===o)return void reject(t,new TypeError("A promises callback cannot return that same promise."))}else o=n,s=!0;t._state!==g||(i&&s?resolve(t,o):l?reject(t,a):e===m?fulfill(t,o):e===y&&reject(t,o))}function initializePromise(e,t){try{t(function resolvePromise(t){resolve(e,t)},function rejectPromise(t){reject(e,t)})}catch(t){reject(e,t)}}var _=0;function makePromise(e){e[d]=_++,e._state=void 0,e._result=void 0,e._subscribers=[]}var b=function(){function Enumerator(t,r){this._instanceConstructor=t,this.promise=new t(noop),this.promise[d]||makePromise(this.promise),e(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function _enumerate(e){for(var t=0;this._state===g&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator.prototype._eachEntry=function _eachEntry(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===resolve$1){var i=getThen(e);if(i===then&&e._state!==g)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===x){var o=new r(noop);handleMaybeThenable(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},Enumerator.prototype._settledAt=function _settledAt(e,t,r){var n=this.promise;n._state===g&&(this._remaining--,e===y?reject(n,r):this._result[t]=r),0===this._remaining&&fulfill(n,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(e,t){var r=this;subscribe(e,void 0,function(e){return r._settledAt(m,t,e)},function(e){return r._settledAt(y,t,e)})},Enumerator}();function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var x=function(){function Promise(e){this[d]=_++,this._result=this._state=void 0,this._subscribers=[],noop!==e&&("function"!=typeof e&&needsResolver(),this instanceof Promise?initializePromise(this,e):needsNew())}return Promise.prototype.catch=function _catch(e){return this.then(null,e)},Promise.prototype.finally=function _finally(e){var t=this.constructor;return isFunction(e)?this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})}):this.then(e,e)},Promise}();return x.prototype.then=then,x.all=function all(e){return new b(this,e).promise},x.race=function race(t){var r=this;return e(t)?new r(function(e,n){for(var i=t.length,o=0;o<i;o++)r.resolve(t[o]).then(e,n)}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},x.resolve=resolve$1,x.reject=function reject$1(e){var t=new this(noop);return reject(t,e),t},x._setScheduler=function setScheduler(e){o=e},x._setAsap=function setAsap(e){a=e},x._asap=a,x.polyfill=function polyfill(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=x},x.Promise=x,x},e.exports=n()}).call(this,r(58),r(28))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function getDynamicStyles(e){var t=null;for(var r in e){var i=e[r],o=void 0===i?"undefined":n(i);if("function"===o)t||(t={}),t[r]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=getDynamicStyles(i);a&&(t||(t={}),t[r]=a)}}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(59));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function SheetsManager(){_classCallCheck(this,SheetsManager),this.sheets=[],this.refs=[],this.keys=[]}return n(SheetsManager,[{key:"get",value:function get(e){var t=this.keys.indexOf(e);return this.sheets[t]}},{key:"add",value:function add(e,t){var r=this.sheets,n=this.refs,i=this.keys,o=r.indexOf(t);return-1!==o?o:(r.push(t),n.push(0),i.push(e),r.length-1)}},{key:"manage",value:function manage(e){var t=this.keys.indexOf(e),r=this.sheets[t];return 0===this.refs[t]&&r.attach(),this.refs[t]++,this.keys[t]||this.keys.splice(t,0,e),r}},{key:"unmanage",value:function unmanage(e){var t=this.keys.indexOf(e);-1!==t?this.refs[t]>0&&(this.refs[t]--,0===this.refs[t]&&this.sheets[t].detach()):(0,i.default)(!1,"SheetsManager: can't find sheet to unmanage")}},{key:"size",get:function get(){return this.keys.length}}]),SheetsManager}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function cloneStyle(e){if(null==e)return e;var t=void 0===e?"undefined":n(e);if("string"===t||"number"===t||"function"===t)return e;if(o(e))return e.map(cloneStyle);if((0,i.default)(e))return e;var r={};for(var a in e){var s=e[a];"object"!==(void 0===s?"undefined":n(s))?r[a]=s:r[a]=cloneStyle(s)}return r};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(154));var o=Array.isArray},function(e,t,r){"use strict";r.r(t),function(e,n){var i,o=r(187);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var a=Object(o.a)(i);t.default=a}.call(this,r(28),r(237)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});e.CSS;t.default=function(e){return e}}).call(this,r(28))},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r="2f1acc6c3a606b082e5eef5e54414ffb";null==e[r]&&(e[r]=0),t.default=e[r]++}).call(this,r(28))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),a=_interopRequireDefault(r(241)),s=_interopRequireDefault(r(157)),l=_interopRequireDefault(r(242)),u=_interopRequireDefault(r(243)),c=_interopRequireDefault(r(249)),p=_interopRequireDefault(r(250)),h=_interopRequireDefault(r(130)),f=_interopRequireDefault(r(72)),d=_interopRequireDefault(r(156)),g=_interopRequireDefault(r(92)),m=_interopRequireDefault(r(251)),y=_interopRequireDefault(r(252));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=u.default.concat([c.default,p.default]),_=0,b=function(){function Jss(e){_classCallCheck(this,Jss),this.id=_++,this.version="9.8.7",this.plugins=new l.default,this.options={createGenerateClassName:d.default,Renderer:a.default?m.default:y.default,plugins:[]},this.generateClassName=(0,d.default)(),this.use.apply(this,v),this.setup(e)}return o(Jss,[{key:"setup",value:function setup(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createGenerateClassName&&(this.options.createGenerateClassName=e.createGenerateClassName,this.generateClassName=e.createGenerateClassName()),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),(e.virtual||e.Renderer)&&(this.options.Renderer=e.Renderer||(e.virtual?y.default:m.default)),e.plugins&&this.use.apply(this,e.plugins),this}},{key:"createStyleSheet",value:function createStyleSheet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index;"number"!=typeof r&&(r=0===h.default.index?0:h.default.index+1);var n=new s.default(e,i({},t,{jss:this,generateClassName:t.generateClassName||this.generateClassName,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:r}));return this.plugins.onProcessSheet(n),n}},{key:"removeStyleSheet",value:function removeStyleSheet(e){return e.detach(),h.default.remove(e),this}},{key:"createRule",value:function createRule(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===e?"undefined":n(e))&&(r=t,t=e,e=void 0);var i=r;i.jss=this,i.Renderer=this.options.Renderer,i.generateClassName||(i.generateClassName=this.generateClassName),i.classes||(i.classes={});var o=(0,g.default)(e,t,i);return!i.selector&&o instanceof f.default&&(o.selector="."+i.generateClassName(o)),this.plugins.onProcessRule(o),o}},{key:"use",value:function use(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){-1===e.options.plugins.indexOf(t)&&(e.options.plugins.push(t),e.plugins.use(t))}),this}}]),Jss}();t.default=b},function(e,t,r){"use strict";r.r(t),r.d(t,"isBrowser",function(){return i});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document))&&9===document.nodeType;t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(59));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function PluginsRegistry(){_classCallCheck(this,PluginsRegistry),this.hooks={onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}}return n(PluginsRegistry,[{key:"onCreateRule",value:function onCreateRule(e,t,r){for(var n=0;n<this.hooks.onCreateRule.length;n++){var i=this.hooks.onCreateRule[n](e,t,r);if(i)return i}return null}},{key:"onProcessRule",value:function onProcessRule(e){if(!e.isProcessed){for(var t=e.options.sheet,r=0;r<this.hooks.onProcessRule.length;r++)this.hooks.onProcessRule[r](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}}},{key:"onProcessStyle",value:function onProcessStyle(e,t,r){for(var n=e,i=0;i<this.hooks.onProcessStyle.length;i++)n=this.hooks.onProcessStyle[i](n,t,r),t.style=n}},{key:"onProcessSheet",value:function onProcessSheet(e){for(var t=0;t<this.hooks.onProcessSheet.length;t++)this.hooks.onProcessSheet[t](e)}},{key:"onUpdate",value:function onUpdate(e,t,r){for(var n=0;n<this.hooks.onUpdate.length;n++)this.hooks.onUpdate[n](e,t,r)}},{key:"onChangeValue",value:function onChangeValue(e,t,r){for(var n=e,i=0;i<this.hooks.onChangeValue.length;i++)n=this.hooks.onChangeValue[i](n,t,r);return n}},{key:"use",value:function use(e){for(var t in e)this.hooks[t]?this.hooks[t].push(e[t]):(0,i.default)(!1,'[JSS] Unknown hook "%s".',t)}}]),PluginsRegistry}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(244)),i=_interopRequireDefault(r(245)),o=_interopRequireDefault(r(246)),a=_interopRequireDefault(r(247)),s=_interopRequireDefault(r(248));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l={"@charset":n.default,"@import":n.default,"@namespace":n.default,"@keyframes":i.default,"@media":o.default,"@supports":o.default,"@font-face":a.default,"@viewport":s.default,"@-ms-viewport":s.default},u=Object.keys(l).map(function(e){var t=new RegExp("^"+e),r=l[e];return{onCreateRule:function onCreateRule(e,n,i){return t.test(e)?new r(e,n,i):null}}});t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function SimpleRule(e,t,r){_classCallCheck(this,SimpleRule),this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=r}return n(SimpleRule,[{key:"toString",value:function toString(e){if(Array.isArray(this.value)){for(var t="",r=0;r<this.value.length;r++)t+=this.key+" "+this.value[r]+";",this.value[r+1]&&(t+="\n");return t}return this.key+" "+this.value+";"}}]),SimpleRule}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(83));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function KeyframesRule(e,t,r){for(var i in _classCallCheck(this,KeyframesRule),this.type="keyframes",this.isProcessed=!1,this.key=e,this.options=r,this.rules=new o.default(n({},r,{parent:this})),t)this.rules.add(i,t[i],n({},this.options,{parent:this,selector:i}));this.rules.process()}return i(KeyframesRule,[{key:"toString",value:function toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t&&(t+="\n"),this.key+" {\n"+t+"}"}}]),KeyframesRule}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(83));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function ConditionalRule(e,t,r){for(var i in _classCallCheck(this,ConditionalRule),this.type="conditional",this.isProcessed=!1,this.key=e,this.options=r,this.rules=new o.default(n({},r,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}return i(ConditionalRule,[{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"addRule",value:function addRule(e,t,r){var n=this.rules.add(e,t,r);return this.options.jss.plugins.onProcessRule(n),n}},{key:"toString",value:function toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""}}]),ConditionalRule}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(129));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function FontFaceRule(e,t,r){_classCallCheck(this,FontFaceRule),this.type="font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return n(FontFaceRule,[{key:"toString",value:function toString(e){if(Array.isArray(this.style)){for(var t="",r=0;r<this.style.length;r++)t+=(0,i.default)(this.key,this.style[r]),this.style[r+1]&&(t+="\n");return t}return(0,i.default)(this.key,this.style,e)}}]),FontFaceRule}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(129));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function ViewportRule(e,t,r){_classCallCheck(this,ViewportRule),this.type="viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return n(ViewportRule,[{key:"toString",value:function toString(e){return(0,i.default)(this.key,this.style,e)}}]),ViewportRule}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(72)),i=_interopRequireDefault(r(92)),o=_interopRequireDefault(r(154));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default={onCreateRule:function onCreateRule(e,t,r){if(!(0,o.default)(t))return null;var n=t,a=(0,i.default)(e,{},r);return n.subscribe(function(e){for(var t in e)a.prop(t,e[t])}),a},onProcessRule:function onProcessRule(e){if(e instanceof n.default){var t=e,r=t.style,i=function _loop(e){var n=r[e];if(!(0,o.default)(n))return"continue";delete r[e],n.subscribe({next:function next(r){t.prop(e,r)}})};for(var a in r)i(a)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(83)),i=_interopRequireDefault(r(72)),o=_interopRequireDefault(r(92));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=Date.now(),s="fnValues"+a,l="fnStyle"+ ++a;t.default={onCreateRule:function onCreateRule(e,t,r){if("function"!=typeof t)return null;var n=(0,o.default)(e,{},r);return n[l]=t,n},onProcessStyle:function onProcessStyle(e,t){var r={};for(var n in e){var i=e[n];"function"==typeof i&&(delete e[n],r[n]=i)}return(t=t)[s]=r,e},onUpdate:function onUpdate(e,t){if(t.rules instanceof n.default)t.rules.update(e);else if(t instanceof i.default){if((t=t)[s])for(var r in t[s])t.prop(r,t[s][r](e));var o=(t=t)[l];if(o){var a=o(e);for(var u in a)t.prop(u,a[u])}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=_interopRequireDefault(r(59)),o=_interopRequireDefault(r(130)),a=_interopRequireDefault(r(72)),s=_interopRequireDefault(r(91));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function memoize(e){var t=void 0;return function(){return t||(t=e()),t}};function getPropertyValue(e,t){try{return e.style.getPropertyValue(t)}catch(e){return""}}function setProperty(e,t,r){try{var n=r;if(Array.isArray(r)&&(n=(0,s.default)(r,!0),"!important"===r[r.length-1]))return e.style.setProperty(t,n,"important"),!0;e.style.setProperty(t,n)}catch(e){return!1}return!0}function removeProperty(e,t){try{e.style.removeProperty(t)}catch(e){(0,i.default)(!1,'[JSS] DOMException "%s" was thrown. Tried to remove property "%s".',e.message,t)}}var u,c=1,p=7,h=(u=function extractKey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.substr(t,e.indexOf("{")-1)},function(e){if(e.type===c)return e.selectorText;if(e.type===p){var t=e.name;if(t)return"@keyframes "+t;var r=e.cssText;return"@"+u(r,r.indexOf("keyframes"))}return u(e.cssText)});function setSelector(e,t){return e.selectorText=t,e.selectorText===t}var f,d,g=l(function(){return document.head||document.getElementsByTagName("head")[0]}),m=(f=void 0,d=!1,function(e){var t={};f||(f=document.createElement("style"));for(var r=0;r<e.length;r++){var n=e[r];if(n instanceof a.default){var i=n.selector;if(i&&-1!==i.indexOf("\\")){d||(g().appendChild(f),d=!0),f.textContent=i+" {}";var o=f.sheet;if(o){var s=o.cssRules;s&&(t[s[0].selectorText]=n.key)}}}}return d&&(g().removeChild(f),d=!1),t});function findHigherSheet(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}function findHighestSheet(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}function findCommentNode(e){for(var t=g(),r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}function findPrevNode(e){var t=o.default.registry;if(t.length>0){var r=findHigherSheet(t,e);if(r)return r.renderer.element;if(r=findHighestSheet(t,e))return r.renderer.element.nextElementSibling}var n=e.insertionPoint;if(n&&"string"==typeof n){var a=findCommentNode(n);if(a)return a.nextSibling;(0,i.default)("jss"===n,'[JSS] Insertion point "%s" not found.',n)}return null}function insertStyle(e,t){var r=t.insertionPoint,n=findPrevNode(t);if(n){var o=n.parentNode;o&&o.insertBefore(e,n)}else if(r&&"number"==typeof r.nodeType){var a=r,s=a.parentNode;s?s.insertBefore(e,a.nextSibling):(0,i.default)(!1,"[JSS] Insertion point is not in the DOM.")}else g().insertBefore(e,n)}var y=l(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),v=function(){function DomRenderer(e){_classCallCheck(this,DomRenderer),this.getPropertyValue=getPropertyValue,this.setProperty=setProperty,this.removeProperty=removeProperty,this.setSelector=setSelector,this.getKey=h,this.getUnescapedKeysMap=m,this.hasInsertedRules=!1,e&&o.default.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},r=t.media,n=t.meta,i=t.element;this.element=i||document.createElement("style"),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),n&&this.element.setAttribute("data-meta",n);var a=y();a&&this.element.setAttribute("nonce",a)}return n(DomRenderer,[{key:"attach",value:function attach(){!this.element.parentNode&&this.sheet&&(this.hasInsertedRules&&(this.deploy(),this.hasInsertedRules=!1),insertStyle(this.element,this.sheet.options))}},{key:"detach",value:function detach(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function deploy(){this.sheet&&(this.element.textContent="\n"+this.sheet.toString()+"\n")}},{key:"insertRule",value:function insertRule(e,t){var r=this.element.sheet,n=r.cssRules,o=e.toString();if(t||(t=n.length),!o)return!1;try{r.insertRule(o,t)}catch(t){return(0,i.default)(!1,"[JSS] Can not insert an unsupported rule \n\r%s",e),!1}return this.hasInsertedRules=!0,n[t]}},{key:"deleteRule",value:function deleteRule(e){var t=this.element.sheet,r=this.indexOf(e);return-1!==r&&(t.deleteRule(r),!0)}},{key:"indexOf",value:function indexOf(e){for(var t=this.element.sheet.cssRules,r=0;r<t.length;r++)if(e===t[r])return r;return-1}},{key:"replaceRule",value:function replaceRule(e,t){var r=this.indexOf(e),n=this.insertRule(t,r);return this.element.sheet.deleteRule(r),n}},{key:"getRules",value:function getRules(){return this.element.sheet.cssRules}}]),DomRenderer}();t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function VirtualRenderer(){_classCallCheck(this,VirtualRenderer)}return n(VirtualRenderer,[{key:"setProperty",value:function setProperty(){return!0}},{key:"getPropertyValue",value:function getPropertyValue(){return""}},{key:"removeProperty",value:function removeProperty(){}},{key:"setSelector",value:function setSelector(){return!0}},{key:"getKey",value:function getKey(){return""}},{key:"attach",value:function attach(){}},{key:"detach",value:function detach(){}},{key:"deploy",value:function deploy(){}},{key:"insertRule",value:function insertRule(){return!1}},{key:"deleteRule",value:function deleteRule(){return!0}},{key:"replaceRule",value:function replaceRule(){return!1}},{key:"getRules",value:function getRules(){}},{key:"indexOf",value:function indexOf(){return-1}}]),VirtualRenderer}();t.default=i},function(e,t){e.exports={azimuth:"center","border-collapse":"separate","border-spacing":"0","caption-side":"top","caret-color":"auto",color:"initial",cursor:"auto","empty-cells":"show","font-family":"initial","font-feature-settings":"normal","font-kerning":"auto","font-language-override":"normal","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-synthesis":"weight style","font-variant":"normal","font-variant-alternates":"normal","font-variant-caps":"normal","font-variant-east-asian":"normal","font-variant-ligatures":"normal","font-variant-numeric":"normal","font-variant-position":"normal","font-weight":"normal",hyphens:"manual","image-orientation":"0deg","image-rendering":"auto","image-resolution":"1dppx","letter-spacing":"normal","line-height":"normal","list-style-image":"none","list-style-position":"outside","list-style-type":"disc","object-position":"50% 50%",orphans:"2","overflow-wrap":"normal","pointer-events":"auto",quotes:"initial","ruby-align":"space-around","ruby-merge":"separate","ruby-position":"over","tab-size":"8","text-align":"initial","text-align-last":"auto","text-combine-upright":"none","text-indent":"0","text-justify":"auto","text-orientation":"mixed","text-rendering":"auto","text-shadow":"none","text-transform":"none","text-underline-position":"auto",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"normal","word-wrap":"normal","writing-mode":"horizontal-tb","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"}},function(e,t){e.exports={"align-content":"stretch","align-items":"stretch","align-self":"auto","animation-delay":"0s","animation-direction":"normal","animation-duration":"0s","animation-fill-mode":"none","animation-iteration-count":"1","animation-name":"none","animation-play-state":"running","animation-timing-function":"ease",azimuth:"center","backface-visibility":"visible","background-attachment":"scroll","background-blend-mode":"normal","background-clip":"border-box","background-color":"transparent","background-image":"none","background-origin":"padding-box","background-position":"0% 0%","background-repeat":"repeat","background-size":"auto auto","block-size":"auto","border-block-end-color":"currentcolor","border-block-end-style":"none","border-block-end-width":"medium","border-block-start-color":"currentcolor","border-block-start-style":"none","border-block-start-width":"medium","border-bottom-color":"currentcolor","border-bottom-left-radius":"0","border-bottom-right-radius":"0","border-bottom-style":"none","border-bottom-width":"medium","border-collapse":"separate","border-image-outset":"0s","border-image-repeat":"stretch","border-image-slice":"100%","border-image-source":"none","border-image-width":"1","border-inline-end-color":"currentcolor","border-inline-end-style":"none","border-inline-end-width":"medium","border-inline-start-color":"currentcolor","border-inline-start-style":"none","border-inline-start-width":"medium","border-left-color":"currentcolor","border-left-style":"none","border-left-width":"medium","border-right-color":"currentcolor","border-right-style":"none","border-right-width":"medium","border-spacing":"0","border-top-color":"currentcolor","border-top-left-radius":"0","border-top-right-radius":"0","border-top-style":"none","border-top-width":"medium",bottom:"auto","box-decoration-break":"slice","box-shadow":"none","box-sizing":"content-box","break-after":"auto","break-before":"auto","break-inside":"auto","caption-side":"top","caret-color":"auto",clear:"none",clip:"auto","clip-path":"none",color:"initial","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"currentcolor","column-rule-style":"none","column-rule-width":"medium","column-span":"none","column-width":"auto",content:"normal","counter-increment":"none","counter-reset":"none",cursor:"auto",display:"inline","empty-cells":"show",filter:"none","flex-basis":"auto","flex-direction":"row","flex-grow":"0","flex-shrink":"1","flex-wrap":"nowrap",float:"none","font-family":"initial","font-feature-settings":"normal","font-kerning":"auto","font-language-override":"normal","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-synthesis":"weight style","font-variant":"normal","font-variant-alternates":"normal","font-variant-caps":"normal","font-variant-east-asian":"normal","font-variant-ligatures":"normal","font-variant-numeric":"normal","font-variant-position":"normal","font-weight":"normal","grid-auto-columns":"auto","grid-auto-flow":"row","grid-auto-rows":"auto","grid-column-end":"auto","grid-column-gap":"0","grid-column-start":"auto","grid-row-end":"auto","grid-row-gap":"0","grid-row-start":"auto","grid-template-areas":"none","grid-template-columns":"none","grid-template-rows":"none",height:"auto",hyphens:"manual","image-orientation":"0deg","image-rendering":"auto","image-resolution":"1dppx","ime-mode":"auto","inline-size":"auto",isolation:"auto","justify-content":"flex-start",left:"auto","letter-spacing":"normal","line-break":"auto","line-height":"normal","list-style-image":"none","list-style-position":"outside","list-style-type":"disc","margin-block-end":"0","margin-block-start":"0","margin-bottom":"0","margin-inline-end":"0","margin-inline-start":"0","margin-left":"0","margin-right":"0","margin-top":"0","mask-clip":"border-box","mask-composite":"add","mask-image":"none","mask-mode":"match-source","mask-origin":"border-box","mask-position":"0% 0%","mask-repeat":"repeat","mask-size":"auto","mask-type":"luminance","max-height":"none","max-width":"none","min-block-size":"0","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","object-position":"50% 50%","offset-block-end":"auto","offset-block-start":"auto","offset-inline-end":"auto","offset-inline-start":"auto",opacity:"1.0",order:"0",orphans:"2","outline-color":"initial","outline-offset":"0","outline-style":"none","outline-width":"medium",overflow:"visible","overflow-wrap":"normal","overflow-x":"visible","overflow-y":"visible","padding-block-end":"0","padding-block-start":"0","padding-bottom":"0","padding-inline-end":"0","padding-inline-start":"0","padding-left":"0","padding-right":"0","padding-top":"0","page-break-after":"auto","page-break-before":"auto","page-break-inside":"auto",perspective:"none","perspective-origin":"50% 50%","pointer-events":"auto",position:"static",quotes:"initial",resize:"none",right:"auto","ruby-align":"space-around","ruby-merge":"separate","ruby-position":"over","scroll-behavior":"auto","scroll-snap-coordinate":"none","scroll-snap-destination":"0px 0px","scroll-snap-points-x":"none","scroll-snap-points-y":"none","scroll-snap-type":"none","shape-image-threshold":"0.0","shape-margin":"0","shape-outside":"none","tab-size":"8","table-layout":"auto","text-align":"initial","text-align-last":"auto","text-combine-upright":"none","text-decoration-color":"currentcolor","text-decoration-line":"none","text-decoration-style":"solid","text-emphasis-color":"currentcolor","text-emphasis-position":"over right","text-emphasis-style":"none","text-indent":"0","text-justify":"auto","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none","transform-box":"border-box ","transform-origin":"50% 50% 0","transform-style":"flat","transition-delay":"0s","transition-duration":"0s","transition-property":"all","transition-timing-function":"ease","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2",width:"auto","will-change":"auto","word-break":"normal","word-spacing":"normal","word-wrap":"normal","writing-mode":"horizontal-tb","z-index":"auto","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"}},function(e,t,r){"use strict";var n=/[A-Z]/g,i=/^ms-/,o={};e.exports=function hyphenateStyleName(e){return e in o?o[e]:o[e]=e.replace(n,"-$&").toLowerCase().replace(i,"-ms-")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"animation-delay":"ms","animation-duration":"ms","background-position":"px","background-position-x":"px","background-position-y":"px","background-size":"px",border:"px","border-bottom":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px","border-bottom-width":"px","border-left":"px","border-left-width":"px","border-radius":"px","border-right":"px","border-right-width":"px","border-spacing":"px","border-top":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-top-width":"px","border-width":"px","border-after-width":"px","border-before-width":"px","border-end-width":"px","border-horizontal-spacing":"px","border-start-width":"px","border-vertical-spacing":"px",bottom:"px","box-shadow":"px","column-gap":"px","column-rule":"px","column-rule-width":"px","column-width":"px","flex-basis":"px","font-size":"px","font-size-delta":"px",height:"px",left:"px","letter-spacing":"px","logical-height":"px","logical-width":"px",margin:"px","margin-after":"px","margin-before":"px","margin-bottom":"px","margin-left":"px","margin-right":"px","margin-top":"px","max-height":"px","max-width":"px","margin-end":"px","margin-start":"px","mask-position-x":"px","mask-position-y":"px","mask-size":"px","max-logical-height":"px","max-logical-width":"px","min-height":"px","min-width":"px","min-logical-height":"px","min-logical-width":"px",motion:"px","motion-offset":"px",outline:"px","outline-offset":"px","outline-width":"px",padding:"px","padding-bottom":"px","padding-left":"px","padding-right":"px","padding-top":"px","padding-after":"px","padding-before":"px","padding-end":"px","padding-start":"px","perspective-origin-x":"%","perspective-origin-y":"%",perspective:"px",right:"px","shape-margin":"px",size:"px","text-indent":"px","text-stroke":"px","text-stroke-width":"px",top:"px","transform-origin":"%","transform-origin-x":"%","transform-origin-y":"%","transform-origin-z":"%","transition-delay":"ms","transition-duration":"ms","vertical-align":"px",width:"px","word-spacing":"px","box-shadow-x":"px","box-shadow-y":"px","box-shadow-blur":"px","box-shadow-spread":"px","font-line-height":"px","text-shadow-x":"px","text-shadow-y":"px","text-shadow-blur":"px"}},function(e,t,r){var n=r(131),i=r(160),o=r(162),a=r(287),s=r(53),l=r(167),u=r(166);e.exports=function baseMerge(e,t,r,c,p){e!==t&&o(t,function(o,l){if(s(o))p||(p=new n),a(e,t,l,r,baseMerge,c,p);else{var h=c?c(u(e,l),o,l+"",e,t,p):void 0;void 0===h&&(h=o),i(e,l,h)}},l)}},function(e,t){e.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(94),i=Array.prototype.splice;e.exports=function listCacheDelete(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},function(e,t,r){var n=r(94);e.exports=function listCacheGet(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(94);e.exports=function listCacheHas(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(94);e.exports=function listCacheSet(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},function(e,t,r){var n=r(93);e.exports=function stackClear(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function stackGet(e){return this.__data__.get(e)}},function(e,t){e.exports=function stackHas(e){return this.__data__.has(e)}},function(e,t,r){var n=r(93),i=r(132),o=r(134),a=200;e.exports=function stackSet(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(s)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(133),i=r(271),o=r(53),a=r(159),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,h=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function baseIsNative(e){return!(!o(e)||i(e))&&(n(e)?h:s).test(a(e))}},function(e,t,r){var n=r(95),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function getRawTag(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},function(e,t){var r=Object.prototype.toString;e.exports=function objectToString(e){return r.call(e)}},function(e,t,r){var n,i=r(272),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function isMasked(e){return!!o&&o in e}},function(e,t,r){var n=r(48)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function getValue(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(275),i=r(93),o=r(132);e.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},function(e,t,r){var n=r(276),i=r(277),o=r(278),a=r(279),s=r(280);function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=n,Hash.prototype.delete=i,Hash.prototype.get=o,Hash.prototype.has=a,Hash.prototype.set=s,e.exports=Hash},function(e,t,r){var n=r(96);e.exports=function hashClear(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(96),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function hashGet(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(96),i=Object.prototype.hasOwnProperty;e.exports=function hashHas(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},function(e,t,r){var n=r(96),i="__lodash_hash_undefined__";e.exports=function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?i:t,this}},function(e,t,r){var n=r(97);e.exports=function mapCacheDelete(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(97);e.exports=function mapCacheGet(e){return n(this,e).get(e)}},function(e,t,r){var n=r(97);e.exports=function mapCacheHas(e){return n(this,e).has(e)}},function(e,t,r){var n=r(97);e.exports=function mapCacheSet(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},function(e,t){e.exports=function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}},function(e,t,r){var n=r(160),i=r(288),o=r(289),a=r(291),s=r(292),l=r(99),u=r(49),c=r(295),p=r(100),h=r(133),f=r(53),d=r(297),g=r(101),m=r(166),y=r(301);e.exports=function baseMergeDeep(e,t,r,v,_,b,x){var w=m(e,r),S=m(t,r),E=x.get(S);if(E)n(e,r,E);else{var P=b?b(w,S,r+"",e,t,x):void 0,C=void 0===P;if(C){var T=u(S),k=!T&&p(S),O=!T&&!k&&g(S);P=S,T||k||O?u(w)?P=w:c(w)?P=a(w):k?(C=!1,P=i(S,!0)):O?(C=!1,P=o(S,!0)):P=[]:d(S)||l(S)?(P=w,l(w)?P=y(w):f(w)&&!h(w)||(P=s(S))):C=!1}C&&(x.set(S,P),_(P,S,v,b,x),x.delete(S)),n(e,r,P)}}},function(e,t,r){(function(e){var n=r(48),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(136)(e))},function(e,t,r){var n=r(290);e.exports=function cloneTypedArray(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(163);e.exports=function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t){e.exports=function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(293),i=r(164),o=r(98);e.exports=function initCloneObject(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},function(e,t,r){var n=r(53),i=Object.create,o=function(){function object(){}return function(e){if(!n(e))return{};if(i)return i(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();e.exports=o},function(e,t,r){var n=r(67),i=r(60),o="[object Arguments]";e.exports=function baseIsArguments(e){return i(e)&&n(e)==o}},function(e,t,r){var n=r(61),i=r(60);e.exports=function isArrayLikeObject(e){return i(e)&&n(e)}},function(e,t){e.exports=function stubFalse(){return!1}},function(e,t,r){var n=r(67),i=r(164),o=r(60),a="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,p=u.call(Object);e.exports=function isPlainObject(e){if(!o(e)||n(e)!=a)return!1;var t=i(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==p}},function(e,t,r){var n=r(67),i=r(137),o=r(60),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return o(e)&&i(e.length)&&!!a[n(e)]}},function(e,t){e.exports=function baseUnary(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(158),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,r(136)(e))},function(e,t,r){var n=r(302),i=r(167);e.exports=function toPlainObject(e){return n(e,i(e))}},function(e,t,r){var n=r(303),i=r(135);e.exports=function copyObject(e,t,r,o){var a=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),a?i(r,u,c):n(r,u,c)}return r}},function(e,t,r){var n=r(135),i=r(84),o=Object.prototype.hasOwnProperty;e.exports=function assignValue(e,t,r){var a=e[t];o.call(e,t)&&i(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t){e.exports=function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(53),i=r(98),o=r(306),a=Object.prototype.hasOwnProperty;e.exports=function baseKeysIn(e){if(!n(e))return o(e);var t=i(e),r=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&r.push(s);return r}},function(e,t){e.exports=function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(308),i=r(315);e.exports=function createAssigner(e){return n(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var l=r[n];l&&e(t,l,n,a)}return t})}},function(e,t,r){var n=r(139),i=r(309),o=r(311);e.exports=function baseRest(e,t){return o(i(e,t,n),e+"")}},function(e,t,r){var n=r(310),i=Math.max;e.exports=function overRest(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=r(l),n(e,this,u)}}},function(e,t){e.exports=function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(312),i=r(314)(n);e.exports=i},function(e,t,r){var n=r(313),i=r(161),o=r(139),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function constant(e){return function(){return e}}},function(e,t){var r=800,n=16,i=Date.now;e.exports=function shortOut(e){var t=0,o=0;return function(){var a=i(),s=n-(a-o);if(o=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(84),i=r(61),o=r(138),a=r(53);e.exports=function isIterateeCall(e,t,r){if(!a(r))return!1;var s=typeof t;return!!("number"==s?i(r)&&o(t,r.length):"string"==s&&t in r)&&n(r[t],e)}},function(e,t,r){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function toByteArray(e){for(var t,r=getLens(e),n=r[0],a=r[1],s=new o(_byteLength(e,n,a)),l=0,u=a>0?n-4:n,c=0;c<u;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===a&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,s[l++]=255&t);1===a&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function fromByteArray(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(encodeChunk(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function _byteLength(e,t,r){return 3*(t+r)/4-r}function encodeChunk(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+f]=255&a,f+=d,a/=256,u-=8);e[r+f-d]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(320);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(151)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(150)(!1)).push([e.i,"/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */\n\n/* Tomorrow Comment */\n.hljs-comment,\n.hljs-quote {\n  color: #8e908c;\n}\n\n/* Tomorrow Red */\n.hljs-variable,\n.hljs-template-variable,\n.hljs-tag,\n.hljs-name,\n.hljs-selector-id,\n.hljs-selector-class,\n.hljs-regexp,\n.hljs-deletion {\n  color: #c82829;\n}\n\n/* Tomorrow Orange */\n.hljs-number,\n.hljs-built_in,\n.hljs-builtin-name,\n.hljs-literal,\n.hljs-type,\n.hljs-params,\n.hljs-meta,\n.hljs-link {\n  color: #f5871f;\n}\n\n/* Tomorrow Yellow */\n.hljs-attribute {\n  color: #eab700;\n}\n\n/* Tomorrow Green */\n.hljs-string,\n.hljs-symbol,\n.hljs-bullet,\n.hljs-addition {\n  color: #718c00;\n}\n\n/* Tomorrow Blue */\n.hljs-title,\n.hljs-section {\n  color: #4271ae;\n}\n\n/* Tomorrow Purple */\n.hljs-keyword,\n.hljs-selector-tag {\n  color: #8959a8;\n}\n\n.hljs {\n  display: block;\n  overflow-x: auto;\n  background: white;\n  color: #4d4d4c;\n  padding: 0.5em;\n}\n\n.hljs-emphasis {\n  font-style: italic;\n}\n\n.hljs-strong {\n  font-weight: bold;\n}\n",""])},function(e,t,r){var n=r(322),i=r(344),o=r(177);e.exports=function baseMatches(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(131),i=r(172),o=1,a=2;e.exports=function baseIsMatch(e,t,r,s){var l=r.length,u=l,c=!s;if(null==e)return!u;for(e=Object(e);l--;){var p=r[l];if(c&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++l<u;){var h=(p=r[l])[0],f=e[h],d=p[1];if(c&&p[2]){if(void 0===f&&!(h in e))return!1}else{var g=new n;if(s)var m=s(f,d,h,e,t,g);if(!(void 0===m?i(d,f,o|a,s,g):m))return!1}}return!0}},function(e,t,r){var n=r(131),i=r(173),o=r(329),a=r(332),s=r(175),l=r(49),u=r(100),c=r(101),p=1,h="[object Arguments]",f="[object Array]",d="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function baseIsEqualDeep(e,t,r,m,y,v){var _=l(e),b=l(t),x=_?f:s(e),w=b?f:s(t),S=(x=x==h?d:x)==d,E=(w=w==h?d:w)==d,P=x==w;if(P&&u(e)){if(!u(t))return!1;_=!0,S=!1}if(P&&!S)return v||(v=new n),_||c(e)?i(e,t,r,m,y,v):o(e,t,x,r,m,y,v);if(!(r&p)){var C=S&&g.call(e,"__wrapped__"),T=E&&g.call(t,"__wrapped__");if(C||T){var k=C?e.value():e,O=T?t.value():t;return v||(v=new n),y(k,O,r,m,v)}}return!!P&&(v||(v=new n),a(e,t,r,m,y,v))}},function(e,t,r){var n=r(134),i=r(325),o=r(326);function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=i,SetCache.prototype.has=o,e.exports=SetCache},function(e,t){var r="__lodash_hash_undefined__";e.exports=function setCacheAdd(e){return this.__data__.set(e,r),this}},function(e,t){e.exports=function setCacheHas(e){return this.__data__.has(e)}},function(e,t){e.exports=function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function cacheHas(e,t){return e.has(t)}},function(e,t,r){var n=r(95),i=r(163),o=r(84),a=r(173),s=r(330),l=r(331),u=1,c=2,p="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w=n?n.prototype:void 0,S=w?w.valueOf:void 0;e.exports=function equalByTag(e,t,r,n,w,E,P){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case p:case h:case g:return o(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case d:var C=s;case y:var T=n&u;if(C||(C=l),e.size!=t.size&&!T)return!1;var k=P.get(e);if(k)return k==t;n|=c,P.set(e,t);var O=a(C(e),C(t),n,w,E,P);return P.delete(e),O;case _:if(S)return S.call(e)==S.call(t)}return!1}},function(e,t){e.exports=function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},function(e,t){e.exports=function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},function(e,t,r){var n=r(333),i=1,o=Object.prototype.hasOwnProperty;e.exports=function equalObjects(e,t,r,a,s,l){var u=r&i,c=n(e),p=c.length;if(p!=n(t).length&&!u)return!1;for(var h=p;h--;){var f=c[h];if(!(u?f in t:o.call(t,f)))return!1}var d=l.get(e);if(d&&l.get(t))return d==t;var g=!0;l.set(e,t),l.set(t,e);for(var m=u;++h<p;){var y=e[f=c[h]],v=t[f];if(a)var _=u?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(!(void 0===_?y===v||s(y,v,r,a,l):_)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var b=e.constructor,x=t.constructor;b!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(g=!1)}return l.delete(e),l.delete(t),g}},function(e,t,r){var n=r(334),i=r(336),o=r(102);e.exports=function getAllKeys(e){return n(e,o,i)}},function(e,t,r){var n=r(335),i=r(49);e.exports=function baseGetAllKeys(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},function(e,t){e.exports=function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},function(e,t,r){var n=r(337),i=r(338),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return o.call(e,t)}))}:i;e.exports=s},function(e,t){e.exports=function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function stubArray(){return[]}},function(e,t,r){var n=r(165)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(66)(r(48),"DataView");e.exports=n},function(e,t,r){var n=r(66)(r(48),"Promise");e.exports=n},function(e,t,r){var n=r(66)(r(48),"Set");e.exports=n},function(e,t,r){var n=r(66)(r(48),"WeakMap");e.exports=n},function(e,t,r){var n=r(176),i=r(102);e.exports=function getMatchData(e){for(var t=i(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,n(a)]}return t}},function(e,t,r){var n=r(172),i=r(146),o=r(349),a=r(141),s=r(176),l=r(177),u=r(104),c=1,p=2;e.exports=function baseMatchesProperty(e,t){return a(e)&&s(t)?l(u(e),t):function(r){var a=i(r,e);return void 0===a&&a===t?o(r,e):n(t,a,c|p)}}},function(e,t,r){var n=r(347),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)}),t});e.exports=a},function(e,t,r){var n=r(145),i=500;e.exports=function memoizeCapped(e){var t=n(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=r(95),i=r(171),o=r(49),a=r(103),s=1/0,l=n?n.prototype:void 0,u=l?l.toString:void 0;e.exports=function baseToString(e){if("string"==typeof e)return e;if(o(e))return i(e,baseToString)+"";if(a(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}},function(e,t,r){var n=r(350),i=r(351);e.exports=function hasIn(e,t){return null!=e&&i(e,t,n)}},function(e,t){e.exports=function baseHasIn(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(179),i=r(99),o=r(49),a=r(138),s=r(137),l=r(104);e.exports=function hasPath(e,t,r){for(var u=-1,c=(t=n(t,e)).length,p=!1;++u<c;){var h=l(t[u]);if(!(p=null!=e&&r(e,h)))break;e=e[h]}return p||++u!=c?p:!!(c=null==e?0:e.length)&&s(c)&&a(h,c)&&(o(e)||i(e))}},function(e,t,r){var n=r(353),i=r(354),o=r(141),a=r(104);e.exports=function property(e){return o(e)?n(a(e)):i(e)}},function(e,t){e.exports=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(178);e.exports=function basePropertyDeep(e){return function(t){return n(t,e)}}},function(e,t,r){var n=r(356),i=r(61);e.exports=function baseMap(e,t){var r=-1,o=i(e)?Array(e.length):[];return n(e,function(e,n,i){o[++r]=t(e,n,i)}),o}},function(e,t,r){var n=r(357),i=r(358)(n);e.exports=i},function(e,t,r){var n=r(162),i=r(102);e.exports=function baseForOwn(e,t){return e&&n(e,t,i)}},function(e,t,r){var n=r(61);e.exports=function createBaseEach(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var o=r.length,a=t?o:-1,s=Object(r);(t?a--:++a<o)&&!1!==i(s[a],a,s););return r}}},function(e,t,r){var n=r(48);e.exports=function(){return n.Date.now()}},function(e,t,r){var n=r(140),i=r(61),o=r(102);e.exports=function createFind(e){return function(t,r,a){var s=Object(t);if(!i(t)){var l=n(r,3);t=o(t),r=function(e){return l(s[e],e,s)}}var u=e(t,r,a);return u>-1?s[l?t[u]:u]:void 0}}},function(e,t,r){var n=r(362),i=r(140),o=r(363),a=Math.max;e.exports=function findIndex(e,t,r){var s=null==e?0:e.length;if(!s)return-1;var l=null==r?0:o(r);return l<0&&(l=a(s+l,0)),n(e,i(t,3),l)}},function(e,t){e.exports=function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,r){var n=r(364);e.exports=function toInteger(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},function(e,t,r){var n=r(182),i=1/0,o=1.7976931348623157e308;e.exports=function toFinite(e){return e?(e=n(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},function(e,t,r){var n=r(67),i=r(60),o="[object Number]";e.exports=function isNumber(e){return"number"==typeof e||i(e)&&n(e)==o}},function(e,t,r){e.exports={config:{title:"Urbica React Map GL",version:void 0,showCode:!1,showUsage:!1,showSidebar:!0,previewDelay:500,theme:{},styles:{},compilerConfig:{objectAssign:"Object.assign"},editorConfig:{theme:"base16-light",mode:"jsx",lineWrapping:!0,smartIndent:!1,matchBrackets:!0,viewportMargin:1/0,lineNumbers:!1},ribbon:void 0,pagePerSection:!1,mountPointId:"rsg-root"},welcomeScreen:!1,patterns:void 0,sections:[{name:"Introduction",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"introduction",sections:[],filepath:"docs/introduction.md",href:void 0,components:[],content:r(367),external:void 0},{name:"Installation",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"installation",sections:[],filepath:"docs/installation.md",href:void 0,components:[],content:r(368),external:void 0},{name:"Props",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"props",sections:[],filepath:void 0,href:void 0,components:[{filepath:"src/components/MapGL/index.js",slug:"mapgl",pathLine:"src/components/MapGL/index.js",module:r(120),props:r(369),hasExamples:!1,metadata:{}},{filepath:"src/components/MapContext.js",slug:"mapcontext",pathLine:"src/components/MapContext.js",module:r(23),props:r(370),hasExamples:!1,metadata:{}},{filepath:"src/components/Source/index.js",slug:"source",pathLine:"src/components/Source/index.js",module:r(122),props:r(371),hasExamples:!1,metadata:{}},{filepath:"src/components/Layer/index.js",slug:"layer",pathLine:"src/components/Layer/index.js",module:r(86),props:r(372),hasExamples:!1,metadata:{}},{filepath:"src/components/CustomLayer/index.js",slug:"customlayer",pathLine:"src/components/CustomLayer/index.js",module:r(121),props:r(373),hasExamples:!1,metadata:{}},{filepath:"src/components/Popup/index.js",slug:"popup",pathLine:"src/components/Popup/index.js",module:r(123),props:r(374),hasExamples:!1,metadata:{}},{filepath:"src/components/Marker/index.js",slug:"marker",pathLine:"src/components/Marker/index.js",module:r(85),props:r(375),hasExamples:!1,metadata:{}},{filepath:"src/components/Cluster/index.js",slug:"cluster",pathLine:"src/components/Cluster/index.js",module:r(143),props:r(376),hasExamples:!1,metadata:{}},{filepath:"src/components/AttributionControl/index.js",slug:"attributioncontrol",pathLine:"src/components/AttributionControl/index.js",module:r(124),props:r(377),hasExamples:!1,metadata:{}},{filepath:"src/components/FullscreenControl/index.js",slug:"fullscreencontrol",pathLine:"src/components/FullscreenControl/index.js",module:r(125),props:r(378),hasExamples:!1,metadata:{}},{filepath:"src/components/GeolocateControl/index.js",slug:"geolocatecontrol",pathLine:"src/components/GeolocateControl/index.js",module:r(126),props:r(379),hasExamples:!1,metadata:{}},{filepath:"src/components/NavigationControl/index.js",slug:"navigationcontrol",pathLine:"src/components/NavigationControl/index.js",module:r(127),props:r(380),hasExamples:!1,metadata:{}},{filepath:"src/components/ScaleControl/index.js",slug:"scalecontrol",pathLine:"src/components/ScaleControl/index.js",module:r(128),props:r(381),hasExamples:!1,metadata:{}}],content:void 0,external:void 0},{name:"Examples",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"examples",sections:[{name:"Static Map",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"static-map",sections:[],filepath:"docs/static-map.md",href:void 0,components:[],content:r(382),external:void 0},{name:"Interactive Map",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"interactive-map",sections:[],filepath:"docs/interactive-map.md",href:void 0,components:[],content:r(383),external:void 0},{name:"Events",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"events",sections:[],filepath:"docs/events.md",href:void 0,components:[],content:r(384),external:void 0},{name:"Using with Immutable.js",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"using-with-immutablejs",sections:[],filepath:"docs/immutable-map.md",href:void 0,components:[],content:r(385),external:void 0},{name:"Map Instance",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"map-instance",sections:[],filepath:"docs/map-instance.md",href:void 0,components:[],content:r(386),external:void 0},{name:"Custom Layers",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"custom-layers",sections:[],filepath:"docs/custom-layers.md",href:void 0,components:[],content:r(387),external:void 0},{name:"Popups",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"popups",sections:[],filepath:"docs/popup.md",href:void 0,components:[],content:r(402),external:void 0},{name:"Markers",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"markers",sections:[],filepath:"docs/marker.md",href:void 0,components:[],content:r(403),external:void 0},{name:"Marker Clustering",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"marker-clustering",sections:[],filepath:"docs/cluster.md",href:void 0,components:[],content:r(405),external:void 0},{name:"Cluster Instance",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"cluster-instance",sections:[],filepath:"docs/cluster-instance.md",href:void 0,components:[],content:r(406),external:void 0},{name:"onClick",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"onclick",sections:[],filepath:"docs/clickable-map.md",href:void 0,components:[],content:r(407),external:void 0},{name:"onHover",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"onhover",sections:[],filepath:"docs/hoverable-map.md",href:void 0,components:[],content:r(408),external:void 0},{name:"onEnter and onLeave",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"onenter-and-onleave",sections:[],filepath:"docs/another-hoverable-map.md",href:void 0,components:[],content:r(409),external:void 0},{name:"Change Map style",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"change-map-style",sections:[],filepath:"docs/change-map-style.md",href:void 0,components:[],content:r(410),external:void 0},{name:"Controls",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"controls",sections:[],filepath:"docs/controls.md",href:void 0,components:[],content:r(411),external:void 0}],filepath:void 0,href:void 0,components:[],content:void 0,external:void 0}]}},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n);r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"[Mapbox GL JS](https://github.com/mapbox/mapbox-gl-js) is a JavaScript library that renders interactive maps from vector tiles and Mapbox styles using WebGL.\n\nTo use any of Mapboxs tools, APIs, or SDKs, youll need a Mapbox [access token](https://www.mapbox.com/help/define-access-token/). Mapbox uses access tokens to associate requests to API resources with your account. You can find all your access tokens, create new ones, or delete existing ones on your [API access tokens page](https://www.mapbox.com/studio/account/tokens/).\n\nThis package is heavily inspired by [uber/react-map-gl](https://github.com/uber/react-map-gl)."}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n);r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"`@urbica/react-map-gl` expects `mapbox-gl` and `immutable` as peer dependencies.\n\n```shell\nnpm install --save mapbox-gl immutable@4.0.0-rc.11 @urbica/react-map-gl\n```"}]},function(e,t,r){e.exports={description:"",displayName:"MapGL",methods:[],props:[{required:!0,flowType:{name:"number"},description:"The latitude of the center of the map.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the map.",tags:{},name:"longitude"},{required:!0,flowType:{name:"number"},description:"The tile zoom level of the map.",tags:{},name:"zoom"},{required:!1,flowType:{name:"string"},description:"Mapbox API access token for mapbox-gl-js.\nRequired when using Mapbox vector tiles/styles.",defaultValue:{value:"null",computed:!1},tags:{},name:"accessToken"},{required:!1,flowType:{name:"boolean"},description:"If `true`, an AttributionControl will be added to the map.",defaultValue:{value:"true",computed:!1},tags:{},name:"attributionControl"},{required:!1,flowType:{name:"number"},description:"Specify the bearing of the viewport",defaultValue:{value:"0",computed:!1},tags:{},name:"bearing"},{required:!1,flowType:{name:"number"},description:"The threshold, measured in degrees, that determines when\nthe map's bearing (rotation) will snap to north. For\nexample, with a  bearingSnap of 7, if the user rotates the\nmap within 7 degrees of north, the map will automatically\nsnap to exact north.",defaultValue:{value:"7",computed:!1},tags:{},name:"bearingSnap"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "box zoom" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"boxZoom"},{required:!1,flowType:{name:"Node"},description:"Sources and Layers",defaultValue:{value:"null",computed:!1},tags:{},name:"children"},{required:!1,flowType:{name:"string"},description:"container className",defaultValue:{value:"null",computed:!1},tags:{},name:"className"},{required:!1,flowType:{name:"boolean"},description:"If true, Resource Timing API information will be collected for\nrequests made by GeoJSON and Vector Tile web workers (this information\nis normally inaccessible from the main Javascript thread). Information\nwill be returned in a resourceTiming property of relevant data events.",defaultValue:{value:"false",computed:!1},tags:{},name:"collectResourceTiming"},{required:!1,flowType:{name:"string"},description:"Map cursor style as CSS value",defaultValue:{value:"null",computed:!1},tags:{},name:"cursorStyle"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "double click to zoom" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"doubleClickZoom"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "drag to pan" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"dragPan"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "drag to rotate" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"dragRotate"},{required:!1,flowType:{name:"boolean"},description:"If `true`, map creation will fail if the performance of Mapbox\nGL JS would be dramatically worse than expected (i.e. a software\nrenderer would be used).",defaultValue:{value:"false",computed:!1},tags:{},name:"failIfMajorPerformanceCaveat"},{required:!1,flowType:{name:"boolean"},description:"If `true`, the map's position (zoom, center latitude,\ncenter longitude, bearing, and pitch) will be synced\nwith the hash fragment of the page's URL. For example,\nhttp://path/to/my/page.html#2.59/39.26/53.07/-24.1/60.",defaultValue:{value:"false",computed:!1},tags:{},name:"hash"},{required:!1,flowType:{name:"boolean"},description:"If `true`, keyboard shortcuts are enabled",defaultValue:{value:"true",computed:!1},tags:{},name:"keyboard"},{required:!1,flowType:{name:"boolean"},description:"If specified, defines a CSS font-family for locally overriding\ngeneration of glyphs in the 'CJK Unified Ideographs' and\n'Hangul Syllables' ranges. In these ranges, font settings from the\nmap's style will be ignored, except for font-weight keywords\n(light/regular/medium/bold). The purpose of this option is to avoid\nbandwidth-intensive glyph server requests.\n(see https://www.mapbox.com/mapbox-gl-js/example/local-ideographs )",defaultValue:{value:"null",computed:!1},tags:{},name:"localIdeographFontFamily"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-left'",computed:!1},tags:{},name:"logoPosition"},{required:!1,flowType:{name:"union",raw:"string | MapStyle",elements:[{name:"string"},{name:"MapStyle"}]},description:"The Mapbox style. A string url or a MapboxGL style Immutable.Map object.",defaultValue:{value:"'mapbox://styles/mapbox/light-v8'",computed:!1},tags:{},name:"mapStyle"},{required:!1,flowType:{name:"MapboxLngLatBoundsLike"},description:"If set, the map will be constrained to the given bounds.",defaultValue:{value:"null",computed:!1},tags:{},name:"maxBounds"},{required:!1,flowType:{name:"number"},description:"The maxiumum number of tiles stored in the tile cache for a given\nsource. If omitted, the cache will be dynamically sized based on\nthe current viewport.",defaultValue:{value:"null",computed:!1},tags:{},name:"maxTileCacheSize"},{required:!1,flowType:{name:"number"},description:"The maximum zoom level of the map (0-22).",defaultValue:{value:"22",computed:!1},tags:{},name:"maxZoom"},{required:!1,flowType:{name:"number"},description:"The minimum zoom level of the map (0-22).",defaultValue:{value:"0",computed:!1},tags:{},name:"minZoom"},{required:!1,flowType:{name:"Function"},description:"The onLoad callback for the map",defaultValue:{value:"null",computed:!1},tags:{},name:"onLoad"},{required:!1,flowType:{name:"signature",type:"function",raw:"(viewport: Viewport) => void",signature:{arguments:[{name:"viewport",type:{name:"Viewport"}}],return:{name:"void"}}},description:"`onViewportChange` callback is fired when the user interacted with the\nmap. The object passed to the callback contains viewport properties\nsuch as `longitude`, `latitude`, `zoom` etc.",defaultValue:{value:"null",computed:!1},tags:{},name:"onViewportChange"},{required:!1,flowType:{name:"number"},description:"Specify the pitch of the viewport",defaultValue:{value:"0",computed:!1},tags:{},name:"pitch"},{required:!1,flowType:{name:"boolean"},description:'If `false`, the map\'s pitch (tilt) control with "drag to\nrotate" interaction will be disabled.',defaultValue:{value:"true",computed:!1},tags:{},name:"pitchWithRotate"},{required:!1,flowType:{name:"boolean"},description:"Mapbox WebGL context creation option.\nUseful when you want to export the canvas as a PNG.",defaultValue:{value:"false",computed:!1},tags:{},name:"preserveDrawingBuffer"},{required:!1,flowType:{name:"boolean"},description:"If `false`, the map won't attempt to re-request tiles once they\nexpire per their HTTP `cacheControl`/`expires` headers.",defaultValue:{value:"true",computed:!1},tags:{},name:"refreshExpiredTiles"},{required:!1,flowType:{name:"boolean"},description:"If `true`, multiple copies of the world\nwill be rendered, when zoomed out",defaultValue:{value:"true",computed:!1},tags:{},name:"renderWorldCopies"},{required:!1,flowType:{name:"union",raw:"boolean | Object",elements:[{name:"boolean"},{name:"Object"}]},description:'If `true`, the "scroll to zoom" interaction is enabled.',defaultValue:{value:"true",computed:!1},tags:{},name:"scrollZoom"},{required:!1,flowType:{name:"Object"},description:"container style",defaultValue:{value:"null",computed:!1},tags:{},name:"style"},{required:!1,flowType:{name:"boolean"},description:"If `true`, the map will automatically resize\nwhen the browser window resizes.",defaultValue:{value:"true",computed:!1},tags:{},name:"trackResize"},{required:!1,flowType:{name:"signature",type:"function",raw:"(\n  url: string,\n  resourceType: string\n) => { url: string, headers?: Object, credentials?: string }",signature:{arguments:[{name:"url",type:{name:"string"}},{name:"resourceType",type:{name:"string"}}],return:{name:"signature",type:"object",raw:"{ url: string, headers?: Object, credentials?: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}},{key:"headers",value:{name:"Object",required:!1}},{key:"credentials",value:{name:"string",required:!1}}]}}}},description:"A callback run before the Map makes a request for an external URL.\nThe callback can be used to modify the url, set headers, or set the\ncredentials property for cross-origin requests. Expected to return\nan object with a  url property and optionally  headers and\ncredentials properties.",defaultValue:{value:"null",computed:!1},tags:{},name:"transformRequest"}],doclets:{},examples:[]}},function(e,t,r){e.exports={methods:[],doclets:{},displayName:"MapContext",examples:[]}},function(e,t,r){e.exports={description:"",displayName:"Source",methods:[],props:[{required:!0,flowType:{name:"string"},description:"Mapbox GL Source id",tags:{},name:"id"},{required:!0,flowType:{name:"MapSource"},description:"Mapbox GL Source as Immutable object",tags:{},name:"source"}],doclets:{},examples:[]}},function(e,t,r){e.exports={description:"",displayName:"Layer",methods:[],props:[{required:!0,flowType:{name:"string"},description:"Mapbox GL Layer id",tags:{},name:"id"},{required:!0,flowType:{name:"MapLayer"},description:"Mapbox GL Layer as Immutable object",tags:{},name:"layer"},{required:!1,flowType:{name:"string"},description:"The id of an existing layer to insert the new layer before.",tags:{},name:"before"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: MapMouseEvent) => any",signature:{arguments:[{name:"event",type:{name:"MapMouseEvent"}}],return:{name:"any"}}},description:"Called when the layer is clicked.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onClick"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: MapMouseEvent) => any",signature:{arguments:[{name:"event",type:{name:"MapMouseEvent"}}],return:{name:"any"}}},description:"Called when the layer feature is entered.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onEnter"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: MapMouseEvent) => any",signature:{arguments:[{name:"event",type:{name:"MapMouseEvent"}}],return:{name:"any"}}},description:"Called when the layer is hovered over.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onHover"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: MapMouseEvent) => any",signature:{arguments:[{name:"event",type:{name:"MapMouseEvent"}}],return:{name:"any"}}},description:"Called when the layer feature is leaved.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onLeave"},{required:!1,flowType:{name:"number"},description:"Radius to detect features around a clicked/hovered point",defaultValue:{value:"0",computed:!1},tags:{},name:"radius"}],doclets:{},examples:[]}},function(e,t,r){e.exports={description:"Custom layers allow a user to render directly into the map's GL context\nusing the map's camera.\n",displayName:"CustomLayer",methods:[],props:[{required:!0,flowType:{name:"MapCustomLayer"},description:"Mapbox GL Custom Layer instance",tags:{},name:"layer"},{required:!1,flowType:{name:"string"},description:"The id of an existing layer to insert the new layer before.",tags:{},name:"before"}],doclets:{},tags:{},examples:[]}},function(e,t,r){e.exports={description:"",displayName:"Popup",methods:[],props:[{required:!0,flowType:{name:"Element",elements:[{name:"any"}],raw:"Element<any>"},description:"ReactDOM element to use as a popup",tags:{},name:"element"},{required:!0,flowType:{name:"number"},description:"The latitude of the center of the popup.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the popup.",tags:{},name:"longitude"},{required:!1,flowType:{name:"union",raw:"| 'top'\n| 'bottom'\n| 'left'\n| 'right'\n| 'top-left'\n| 'top-right'\n| 'bottom-left'\n| 'bottom-right'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"null",computed:!1},tags:{},name:"anchor"},{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1},tags:{},name:"closeButton"},{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1},tags:{},name:"closeOnClick"},{required:!1,flowType:{name:"MapboxLngLatBoundsLike"},description:"The offset in pixels as a `PointLike` object to apply\nrelative to the element's center. Negatives indicate left and up.",defaultValue:{value:"null",computed:!1},tags:{},name:"offset"},{required:!1,flowType:{name:"Function"},description:"The onClose callback is fired when the popup closed",defaultValue:{value:"null",computed:!1},tags:{},name:"onClose"}],doclets:{},examples:[]}},function(e,t,r){e.exports={description:"",displayName:"Marker",methods:[],props:[{required:!0,flowType:{name:"Element",elements:[{name:"any"}],raw:"Element<any>"},description:"ReactDOM element to use as a marker",tags:{},name:"element"},{required:!0,flowType:{name:"number"},description:"The latitude of the center of the marker.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the marker.",tags:{},name:"longitude"},{required:!1,flowType:{name:"boolean"},description:"Boolean indicating whether or not a marker is able to be dragged\nto a new position on the map.",defaultValue:{value:"false",computed:!1},tags:{},name:"draggable"},{required:!1,flowType:{name:"PointLike"},description:"The offset in pixels as a `PointLike` object to apply\nrelative to the element's center. Negatives indicate left and up.",defaultValue:{value:"null",computed:!1},tags:{},name:"offset"},{required:!1,flowType:{name:"signature",type:"function",raw:"(lngLat: LngLat) => any",signature:{arguments:[{name:"lngLat",type:{name:"LngLat"}}],return:{name:"any"}}},description:"Fired when the marker is finished being dragged",tags:{},name:"onDragEnd"}],doclets:{},examples:[]}},function(e,t,r){e.exports={description:"",displayName:"Cluster",methods:[],props:[{required:!0,flowType:{name:"Node"},description:"Markers as children",tags:{},name:"children"},{required:!0,flowType:{name:"Class",elements:[{name:"Component",elements:[{name:"any"},{name:"any"}],raw:"Component<any, any>"}],raw:"Class<Component<any, any>>"},description:"ReactDOM element to use as a marker",tags:{},name:"element"},{required:!0,flowType:{name:"signature",type:"function",raw:"(cluster: Supercluster.Supercluster) => void",signature:{arguments:[{name:"cluster",type:{name:"Supercluster.Supercluster"}}],return:{name:"void"}}},description:"Callback that is called with the supercluster instance as an argument\nafter componentDidMount",tags:{},name:"innerRef"},{required:!1,flowType:{name:"number"},description:"(Tiles) Tile extent. Radius is calculated relative to this value",defaultValue:{value:"512",computed:!1},tags:{},name:"extent"},{required:!1,flowType:{name:"number"},description:"Maximum zoom level at which clusters are generated",defaultValue:{value:"16",computed:!1},tags:{},name:"maxZoom"},{required:!1,flowType:{name:"number"},description:"Minimum zoom level at which clusters are generated",defaultValue:{value:"0",computed:!1},tags:{},name:"minZoom"},{required:!1,flowType:{name:"number"},description:"Size of the KD-tree leaf node. Affects performance",defaultValue:{value:"64",computed:!1},tags:{},name:"nodeSize"},{required:!1,flowType:{name:"number"},description:"Cluster radius, in pixels",defaultValue:{value:"40",computed:!1},tags:{},name:"radius"}],doclets:{},examples:[]}},function(e,t,r){e.exports={description:"An `AttributionControl` control presents the map's attribution information.\n",displayName:"AttributionControl",methods:[],props:[{required:!0,flowType:{name:"boolean"},description:"If `true` force a compact attribution that shows the full\nattribution on mouse hover, or if  false force the full attribution\ncontrol. The default is a responsive attribution that collapses when\nthe map is less than 640 pixels wide.",tags:{},name:"compact"},{required:!0,flowType:{name:"union",raw:"string | Array<string>",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"Array<string>"}]},description:"",tags:{},name:"customAttribution"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:[]}},function(e,t,r){e.exports={description:"A `FullscreenControl` control contains a button for toggling the map in\nand out of fullscreen mode.\n",displayName:"FullscreenControl",methods:[],props:[{required:!0,flowType:{name:"string"},description:"container is the compatible DOM element which should be\nmade full screen. By default, the map container element\nwill be made full screen.",tags:{},name:"container"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'top-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:[]}},function(e,t,r){e.exports={description:"A `GeolocateControl` control provides a button that uses the browser's\ngeolocation API to locate the user on the map.\n",displayName:"GeolocateControl",methods:[],props:[{required:!1,flowType:{name:"Object"},description:"A `fitBounds` options object to use when the map is\npanned and zoomed to the user's location.",defaultValue:{value:"{ maxZoom: 15 }",computed:!1},tags:{},name:"fitBoundsOptions"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",tags:{},name:"position"},{required:!1,flowType:{name:"PositionOptions"},description:"",defaultValue:{value:"{ enableHighAccuracy: false, timeout: 6000 }",computed:!1},tags:{},name:"positionOptions"},{required:!1,flowType:{name:"boolean"},description:"By default a dot will be shown on the map at the user's location.\nSet to `false` to disable.",defaultValue:{value:"true",computed:!1},tags:{},name:"showUserLocation"},{required:!1,flowType:{name:"boolean"},description:"If `true` the Geolocate Control becomes a toggle button\nand when active the map will receive updates to the user's location as it changes.",defaultValue:{value:"false",computed:!1},tags:{},name:"trackUserLocation"}],doclets:{},tags:{},examples:[]}},function(e,t,r){e.exports={description:"A `NavigationControl` control contains zoom buttons and a compass.\n",displayName:"NavigationControl",methods:[],props:[{required:!0,flowType:{name:"boolean"},description:"",tags:{},name:"showCompass"},{required:!0,flowType:{name:"boolean"},description:"",tags:{},name:"showZoom"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'top-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:[]}},function(e,t,r){e.exports={description:"A `ScaleControl` control displays the ratio of a distance on the map\nto the corresponding distance on the ground.\n",displayName:"ScaleControl",methods:[],props:[{required:!0,flowType:{name:"number"},description:"",tags:{},name:"maxWidth"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-right'",computed:!1},tags:{},name:"position"},{required:!1,flowType:{name:"union",raw:"'imperial' | 'metric' | 'nautical'",elements:[{name:"literal",value:"'imperial'"},{name:"literal",value:"'metric'"},{name:"literal",value:"'nautical'"}]},description:"",defaultValue:{value:"'metric'",computed:!1},tags:{},name:"unit"}],doclets:{},tags:{},examples:[]}},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:'<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n/>',settings:{},evalInContext:o}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:'initialState = {\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>',settings:{},evalInContext:o}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"`mapbox-gl` emit [events](https://www.mapbox.com/mapbox-gl-js/api/#events) in response to user interactions or changes in state.\n\nHere is an example for `onClick` prop.\n\nYou can find full list of supported props in [eventProps](https://github.com/urbica/react-map-gl/blob/master/src/components/MapGL/eventProps.js)."},{type:"code",content:'initialState = {\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\nconst onClick = event => {\n  const {\n    lngLat: { lat: latitude, lng: longitude }\n  } = event;\n\n  const newVewport = {\n    ...state.viewport,\n    latitude,\n    longitude\n  };\n\n  setState({ viewport: newVewport });\n};\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onClick={onClick}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>;',settings:{},evalInContext:o}]},function(e,t,r){var n={immutable:r(30),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:'const Immutable = require("immutable");\n\ninitialState = {\n  mapStyle: null,\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\nconst styleUrl = `https://api.mapbox.com/styles/v1/mapbox/light-v9?access_token=${MAPBOX_ACCESS_TOKEN}`;\n\nif (!state.mapStyle && setState) {\n  fetch(styleUrl)\n    .then(r => r.json())\n    .then(mapStyle => setState({ mapStyle: Immutable.fromJS(mapStyle) }));\n}\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle={state.mapStyle}\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>',settings:{},evalInContext:o}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"To access Mapbox GL JS Map instance you have to wrap `MapGL` with high order component. You can access map instance using `ref` as show in the code below."},{type:"code",content:"class Map extends React.PureComponent {\n  componentDidMount() {\n    const map = this._map.getMap();\n  }\n\n  render() {\n    return React.createElement(MapGL, {\n      ref: ref => (this._map = ref),\n      ...this.props\n    });\n  }\n}\n\n<Map\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n/>;",settings:{},evalInContext:o},{type:"markdown",content:"### Using `MapContext`\n\nYou can also use `MapContext.Consumer` to obtain map instance."},{type:"code",content:"<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <MapContext.Consumer>\n    {map => {\n      map.setPaintProperty('water', 'fill-color', '#faafee');\n      return;\n    }}\n  </MapContext.Consumer>\n</MapGL>",settings:{},evalInContext:o}]},function(e,t,r){var n={"@deck.gl/mapbox":r(414),"@deck.gl/layers":r(413),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"[Custom layers](https://docs.mapbox.com/mapbox-gl-js/api/#customlayerinterface) allow a user to render directly into the map's GL context using the map's camera.\n\nHere is an Uber [deck.gl](https://github.com/uber/deck.gl) usage example."},{type:"code",content:"const { MapboxLayer } = require('@deck.gl/mapbox');\nconst { ScatterplotLayer } = require('@deck.gl/layers');\n\nconst myDeckLayer = new MapboxLayer({\n  id: 'my-scatterplot',\n  type: ScatterplotLayer,\n  data: [{ position: [-74.5, 40], size: 1000 }],\n  getPosition: d => d.position,\n  getRadius: d => d.size,\n  getColor: [255, 0, 0]\n});\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={40}\n  longitude={-74.5}\n  zoom={9}\n>\n  <CustomLayer layer={myDeckLayer} />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){(function(e,n){var i=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])isNull(s)||!isObject(s)?a+=" "+s:a+=" "+inspect(s);return a},t.deprecate=function(r,i){if(isUndefined(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var o=!1;return function deprecated(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var o,a={};function inspect(e,r){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(r)?n.showHidden=r:r&&t._extend(n,r),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?"["+inspect.colors[r][0]+"m"+e+"["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function formatValue(e,r,n){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return isString(i)||(i=formatValue(e,i,n)),i}var o=formatPrimitive(e,r);if(o)return o;var a=Object.keys(r),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),isError(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(r);if(0===a.length){if(isFunction(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var u,c="",p=!1,h=["{","}"];(isArray(r)&&(p=!0,h=["[","]"]),isFunction(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return isRegExp(r)&&(c=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(c=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(c=" "+formatError(r)),0!==a.length||p&&0!=r.length?n<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=p?formatArray(e,r,n,s,a):a.map(function(t){return formatProperty(e,r,n,s,t,p)}),e.seen.pop(),reduceToSingleString(u,c,h)):h[0]+c+h[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,r,n,i,!0))}),o}function formatProperty(e,t,r,n,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=isNull(r)?formatValue(e,l.value,null):formatValue(e,l.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(isUndefined(o)&&(o=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=function isNullOrUndefined(e){return null==e},t.isNumber=isNumber,t.isString=isString,t.isSymbol=function isSymbol(e){return"symbol"==typeof e},t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(392);var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":"),[e.getDate(),s[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(393),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,r(28),r(58))},function(e,t){e.exports=function isBuffer(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function inherits(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){e.exports=r(395)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function installDebugger(){(0,n.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var n=r(396),i=r(399);(void 0!==e?e:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,r(28))},function(e,t,r){"use strict";var n=r(397);Object.defineProperty(t,"__esModule",{value:!0}),t.installParameterDefinitions=function installParameterDefinitions(){},t.TEXTURE_PARAMETERS=t.SAMPLER_PARAMETERS=t.RENDERBUFFER_PARAMETERS=t.PROGRAM_PARAMETERS=t.FRAMEBUFFER_STATUS=t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=t.FENCE_SYNC_PARAMETERS=t.BUFFER_PARAMETERS=t.GLboolean=t.GLuint=t.GLint=t.GLfloat=t.GLenum=void 0;var i,o,a,s,l,u,c=n(r(398));t.GLenum="GLenum";t.GLfloat="GLfloat";t.GLint="GLint";t.GLuint="GLint";t.GLboolean="GLboolean";var p=(i={},(0,c.default)(i,34660,{webgl1:0}),(0,c.default)(i,34661,{webgl1:0}),i);t.BUFFER_PARAMETERS=p;t.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var h=(o={},(0,c.default)(o,36053,"Success. Framebuffer is correctly set up"),(0,c.default)(o,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,c.default)(o,36055,"Framebuffer has no attachment"),(0,c.default)(o,36057,"Framebuffer attachments do not have the same size"),(0,c.default)(o,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,c.default)(o,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),o);t.FRAMEBUFFER_STATUS=h;var f=(a={},(0,c.default)(a,35712,{webgl1:0}),(0,c.default)(a,35714,{webgl1:0}),(0,c.default)(a,35715,{webgl1:0}),(0,c.default)(a,35717,{webgl1:0}),(0,c.default)(a,35721,{webgl1:0}),(0,c.default)(a,35718,{webgl1:0}),(0,c.default)(a,35967,{webgl2:0}),(0,c.default)(a,35971,{webgl2:0}),(0,c.default)(a,35382,{webgl2:0}),a);t.PROGRAM_PARAMETERS=f;var d=(s={},(0,c.default)(s,36162,{webgl1:0}),(0,c.default)(s,36163,{webgl1:0}),(0,c.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,c.default)(s,36177,{webgl1:0}),(0,c.default)(s,36178,{webgl1:0}),(0,c.default)(s,36176,{webgl1:0}),(0,c.default)(s,36179,{webgl1:0}),(0,c.default)(s,36180,{webgl1:0}),(0,c.default)(s,36181,{webgl1:0}),(0,c.default)(s,36011,{webgl2:1}),s);t.RENDERBUFFER_PARAMETERS=d;var g=(l={},(0,c.default)(l,10240,{webgl2:!0}),(0,c.default)(l,10241,{webgl2:!0}),(0,c.default)(l,10242,{webgl2:!0}),(0,c.default)(l,10243,{webgl2:!0}),(0,c.default)(l,32882,{webgl2:!0}),(0,c.default)(l,33084,{webgl2:!0}),(0,c.default)(l,33085,{webgl2:!0}),(0,c.default)(l,34893,{webgl2:!0}),(0,c.default)(l,34892,{webgl2:!0}),(0,c.default)(l,33082,{webgl2:!0}),(0,c.default)(l,33083,{webgl2:!0}),l);t.SAMPLER_PARAMETERS=g;var m=(u={},(0,c.default)(u,10240,{type:"GLenum",webgl1:9729}),(0,c.default)(u,10241,{type:"GLenum",webgl1:9986}),(0,c.default)(u,10242,{type:"GLenum",webgl1:10497}),(0,c.default)(u,10243,{type:"GLenum",webgl1:10497}),(0,c.default)(u,32882,{type:"GLenum",webgl2:10497}),(0,c.default)(u,33084,{webgl2:0}),(0,c.default)(u,33085,{webgl2:1e3}),(0,c.default)(u,34893,{type:"GLenum",webgl2:515}),(0,c.default)(u,34892,{type:"GLenum",webgl2:0}),(0,c.default)(u,33082,{webgl2:-1e3}),(0,c.default)(u,33083,{webgl2:1e3}),(0,c.default)(u,4096,{webgl1:0}),(0,c.default)(u,4097,{webgl1:0}),u);t.TEXTURE_PARAMETERS=m},function(e,t){e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){(function(t){WebGLDebugUtils=function(){var e;void 0===e&&(e=t);var r=function(t){e.console&&e.console.log&&e.console.log(t)},n=function(t){e.console&&e.console.error?e.console.error(t):r(t)},i={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},o=null,a=null;function init(e){if(null==o)for(var t in o={},a={},e)"number"==typeof e[t]&&(o[e[t]]=t,a[t]=e[t])}function checkInit(){if(null==o)throw"WebGLDebugUtils.init(ctx) not called"}function glEnumToString(e){checkInit();var t=o[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function glFunctionArgToString(e,t,r,n){var o;if(void 0!==(o=i[e])&&(void 0!==(o=o[t])&&o[r])){if("object"==typeof o[r]&&void 0!==o[r].enumBitwiseOr){for(var s=o[r].enumBitwiseOr,l=0,u=[],c=0;c<s.length;++c){var p=a[s[c]];0!=(n&p)&&(l|=p,u.push(glEnumToString(p)))}return l===n?u.join(" | "):glEnumToString(n)}return glEnumToString(n)}return null===n?"null":void 0===n?"undefined":n.toString()}function makePropertyWrapper(e,t,r){e.__defineGetter__(r,function(){return t[r]}),e.__defineSetter__(r,function(e){t[r]=e})}function resetToInitialState(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var r=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var i=0;i<r;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(n);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<o;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);var a=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<a;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}return{init:init,mightBeEnum:function mightBeEnum(e){return checkInit(),void 0!==o[e]},glEnumToString:glEnumToString,glFunctionArgToString:glFunctionArgToString,glFunctionArgsToString:function glFunctionArgsToString(e,t){for(var r="",n=t.length,i=0;i<n;++i)r+=(0==i?"":", ")+glFunctionArgToString(e,n,i,t[i]);return r},makeDebugContext:function makeDebugContext(e,t,r,i){i=i||e,init(e),t=t||function(e,t,r){for(var i="",o=r.length,a=0;a<o;++a)i+=(0==a?"":", ")+glFunctionArgToString(t,o,a,r[a]);n("WebGL error "+glEnumToString(e)+" in "+t+"("+i+")")};var o={};function makeErrorWrapper(e,n){return function(){r&&r(n,arguments);var a=e[n].apply(e,arguments),s=i.getError();return 0!=s&&(o[s]=!0,t(s,n,arguments)),a}}var a={};for(var s in e)if("function"==typeof e[s])if("getExtension"!=s)a[s]=makeErrorWrapper(e,s);else{var l=makeErrorWrapper(e,s);a[s]=function(){var n=l.apply(e,arguments);return n?makeDebugContext(n,t,r,i):null}}else makePropertyWrapper(a,e,s);return a.getError=function(){for(var t in o)if(o.hasOwnProperty(t)&&o[t])return o[t]=!1,t;return e.NO_ERROR},a},makeLostContextSimulatingCanvas:function makeLostContextSimulatingCanvas(t){var r,n,i,o=[],a=[],s={},l=1,u=!1,c=[],p=0,h=0,f=!1,d=0,g={};function wrapEvent(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}t.getContext=(i=t.getContext,function(){var o=i.apply(t,arguments);if(o instanceof WebGLRenderingContext||e.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext){if(o!=r){if(r)throw"got different context";n=e.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext,s=makeLostContextSimulatingContext(r=o)}return s}return o});var m=function(e){o.push(wrapEvent(e))},y=function(e){a.push(wrapEvent(e))};function clearErrors(){for(var e=Object.keys(g),t=0;t<e.length;++t)delete g[e[t]]}function loseContextIfTime(){++h,u||p==h&&t.loseContext()}function makeLostContextFunctionWrapper(e,t){var r=e[t];return function(){if(loseContextIfTime(),!u)return r.apply(e,arguments)}}function freeResources(){for(var e=0;e<c.length;++e){var t=c[e];t instanceof WebGLBuffer?r.deleteBuffer(t):t instanceof WebGLFramebuffer?r.deleteFramebuffer(t):t instanceof WebGLProgram?r.deleteProgram(t):t instanceof WebGLRenderbuffer?r.deleteRenderbuffer(t):t instanceof WebGLShader?r.deleteShader(t):t instanceof WebGLTexture?r.deleteTexture(t):n&&(t instanceof WebGLQuery?r.deleteQuery(t):t instanceof WebGLSampler?r.deleteSampler(t):t instanceof WebGLSync?r.deleteSync(t):t instanceof WebGLTransformFeedback?r.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&r.deleteVertexArray(t))}}function makeWebGLContextEvent(e){return{statusMessage:e,preventDefault:function(){f=!0}}}return function wrapAddEventListener(e){var t=e.addEventListener;e.addEventListener=function(r,n,i){switch(r){case"webglcontextlost":m(n);break;case"webglcontextrestored":y(n);break;default:t.apply(e,arguments)}}}(t),t.loseContext=function(){if(!u){for(u=!0,p=0,++l;r.getError(););clearErrors(),g[r.CONTEXT_LOST_WEBGL]=!0;var e=makeWebGLContextEvent("context lost"),n=o.slice();setTimeout(function(){for(var r=0;r<n.length;++r)n[r](e);d>=0&&setTimeout(function(){t.restoreContext()},d)},0)}},t.restoreContext=function(){u&&a.length&&setTimeout(function(){if(!f)throw"can not restore. webglcontestlost listener did not call event.preventDefault";freeResources(),resetToInitialState(r),u=!1,h=0,f=!1;for(var e=a.slice(),t=makeWebGLContextEvent("context restored"),n=0;n<e.length;++n)e[n](t)},0)},t.loseContextInNCalls=function(e){if(u)throw"You can not ask a lost contet to be lost";p=h+e},t.getNumCalls=function(){return h},t.setRestoreTimeout=function(e){d=e},t;function makeLostContextSimulatingContext(e){for(var t in e)"function"==typeof e[t]?s[t]=makeLostContextFunctionWrapper(e,t):makePropertyWrapper(s,e,t);s.getError=function(){if(loseContextIfTime(),!u)for(;e=r.getError();)g[e]=!0;for(var e in g)if(g[e])return delete g[e],e;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];n&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var o=0;o<i.length;++o){var a=i[o];s[a]=function(t){return function(){if(loseContextIfTime(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=l,c.push(r),r}}(e[a])}var p=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(n&&p.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName"),o=0;o<p.length;++o)a=p[o],s[a]=function(t){return function(){return loseContextIfTime(),u?null:t.apply(e,arguments)}}(s[a]);var h,f=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(n&&f.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray"),o=0;o<f.length;++o)a=f[o],s[a]=function(t){return function(){return loseContextIfTime(),!u&&t.apply(e,arguments)}}(s[a]);return s.checkFramebufferStatus=(h=s.checkFramebufferStatus,function(){return loseContextIfTime(),u?s.FRAMEBUFFER_UNSUPPORTED:h.apply(e,arguments)}),s.getAttribLocation=function(t){return function(){return loseContextIfTime(),u?-1:t.apply(e,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(t){return function(){return loseContextIfTime(),u?0:t.apply(e,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return u},n&&(s.getFragDataLocation=function(t){return function(){return loseContextIfTime(),u?-1:t.apply(e,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(t){return function(){return loseContextIfTime(),u?s.WAIT_FAILED:t.apply(e,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(t){return function(){return loseContextIfTime(),u?s.INVALID_INDEX:t.apply(e,arguments)}}(s.getUniformBlockIndex)),s}},resetToInitialState:resetToInitialState}}(),e.exports=WebGLDebugUtils}).call(this,r(28))},function(e,t,r){"use strict";e.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(e,t,r){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,o,a,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),p="function",h=Math.round,f=Math.abs,d=Date.now;function setTimeoutContext(e,t,r){return setTimeout(bindFn(e,r),t)}function invokeArrayArg(e,t,r){return!!Array.isArray(e)&&(each(e,r[t],r),!0)}function each(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==s)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function deprecate(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,n,r),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function assign(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==s&&null!==n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign;var g=deprecate(function extend(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;)(!r||r&&e[n[i]]===s)&&(e[n[i]]=t[n[i]]),i++;return e},"extend","Use `assign`."),m=deprecate(function merge(e,t){return g(e,t,!0)},"merge","Use `assign`.");function inherit(e,t,r){var n,i=t.prototype;(n=e.prototype=Object.create(i)).constructor=e,n._super=i,r&&l(n,r)}function bindFn(e,t){return function boundFn(){return e.apply(t,arguments)}}function boolOrFn(e,t){return typeof e==p?e.apply(t&&t[0]||s,t):e}function ifUndefined(e,t){return e===s?t:e}function addEventListeners(e,t,r){each(splitStr(t),function(t){e.addEventListener(t,r,!1)})}function removeEventListeners(e,t,r){each(splitStr(t),function(t){e.removeEventListener(t,r,!1)})}function hasParent(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function inStr(e,t){return e.indexOf(t)>-1}function splitStr(e){return e.trim().split(/\s+/g)}function inArray(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function toArray(e){return Array.prototype.slice.call(e,0)}function uniqueArray(e,t,r){for(var n=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];inArray(i,a)<0&&n.push(e[o]),i[o]=a,o++}return r&&(n=t?n.sort(function sortUniqueArray(e,r){return e[t]>r[t]}):n.sort()),n}function prefixed(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),o=0;o<u.length;){if((n=(r=u[o])?r+i:t)in e)return n;o++}return s}var y=1;function getWindowForElement(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var v="ontouchstart"in i,_=prefixed(i,"PointerEvent")!==s,b=v&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),x=25,w=1,S=2,E=4,P=8,C=1,T=2,k=4,O=8,A=16,I=T|k,R=O|A,M=I|R,L=["x","y"],j=["clientX","clientY"];function Input(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){boolOrFn(e.options.enable,[e])&&r.handler(t)},this.init()}function inputHandler(e,t,r){var n=r.pointers.length,i=r.changedPointers.length,o=t&w&&n-i==0,a=t&(E|P)&&n-i==0;r.isFirst=!!o,r.isFinal=!!a,o&&(e.session={}),r.eventType=t,computeInputData(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function computeInputData(e,t){var r=e.session,n=t.pointers,i=n.length;r.firstInput||(r.firstInput=simpleCloneInputData(t)),i>1&&!r.firstMultiple?r.firstMultiple=simpleCloneInputData(t):1===i&&(r.firstMultiple=!1);var o=r.firstInput,a=r.firstMultiple,s=a?a.center:o.center,l=t.center=getCenter(n);t.timeStamp=d(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=getAngle(s,l),t.distance=getDistance(s,l),computeDeltaXY(r,t),t.offsetDirection=getDirection(t.deltaX,t.deltaY);var u,c,p=getVelocity(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=f(p.x)>f(p.y)?p.x:p.y,t.scale=a?(u=a.pointers,getDistance((c=n)[0],c[1],j)/getDistance(u[0],u[1],j)):1,t.rotation=a?getRotation(a.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,computeIntervalInputData(r,t);var h=e.element;hasParent(t.srcEvent.target,h)&&(h=t.srcEvent.target),t.target=h}function computeDeltaXY(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==w&&o.eventType!==E||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y}),t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}function computeIntervalInputData(e,t){var r,n,i,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=P&&(l>x||a.velocity===s)){var u=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,p=getVelocity(l,u,c);n=p.x,i=p.y,r=f(p.x)>f(p.y)?p.x:p.y,o=getDirection(u,c),e.lastInterval=t}else r=a.velocity,n=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=r,t.velocityX=n,t.velocityY=i,t.direction=o}function simpleCloneInputData(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:h(e.pointers[r].clientX),clientY:h(e.pointers[r].clientY)},r++;return{timeStamp:d(),pointers:t,center:getCenter(t),deltaX:e.deltaX,deltaY:e.deltaY}}function getCenter(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:h(r/t),y:h(n/t)}}function getVelocity(e,t,r){return{x:t/e||0,y:r/e||0}}function getDirection(e,t){return e===t?C:f(e)>=f(t)?e<0?T:k:t<0?O:A}function getDistance(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function getAngle(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}function getRotation(e,t){return getAngle(t[1],t[0],j)+getAngle(e[1],e[0],j)}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var D={mousedown:w,mousemove:S,mouseup:E},F="mousedown",N="mousemove mouseup";function MouseInput(){this.evEl=F,this.evWin=N,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(e){var t=D[e.type];t&w&&0===e.button&&(this.pressed=!0),t&S&&1!==e.which&&(t=E),this.pressed&&(t&E&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var z={pointerdown:w,pointermove:S,pointerup:E,pointercancel:P,pointerout:P},B={2:"touch",3:"pen",4:"mouse",5:"kinect"},U="pointerdown",V="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=U,this.evWin=V,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(U="MSPointerDown",V="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=z[n],o=B[e.pointerType]||e.pointerType,a="touch"==o,s=inArray(t,e.pointerId,"pointerId");i&w&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(E|P)&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),r&&t.splice(s,1))}});var q={touchstart:w,touchmove:S,touchend:E,touchcancel:P},G="touchstart",W="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=G,this.evWin=W,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(e,t){var r=toArray(e.touches),n=toArray(e.changedTouches);return t&(E|P)&&(r=uniqueArray(r.concat(n),"identifier",!0)),[r,n]}inherit(SingleTouchInput,Input,{handler:function TEhandler(e){var t=q[e.type];if(t===w&&(this.started=!0),this.started){var r=normalizeSingleTouches.call(this,e,t);t&(E|P)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}}});var H={touchstart:w,touchmove:S,touchend:E,touchcancel:P},X="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=X,this.targetIds={},Input.apply(this,arguments)}function getTouches(e,t){var r=toArray(e.touches),n=this.targetIds;if(t&(w|S)&&1===r.length)return n[r[0].identifier]=!0,[r,r];var i,o,a=toArray(e.changedTouches),s=[],l=this.target;if(o=r.filter(function(e){return hasParent(e.target,l)}),t===w)for(i=0;i<o.length;)n[o[i].identifier]=!0,i++;for(i=0;i<a.length;)n[a[i].identifier]&&s.push(a[i]),t&(E|P)&&delete n[a[i].identifier],i++;return s.length?[uniqueArray(o.concat(s),"identifier",!0),s]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(e){var t=H[e.type],r=getTouches.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}});var K=2500,Z=25;function TouchMouseInput(){Input.apply(this,arguments);var e=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,e),this.mouse=new MouseInput(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(e,t){e&w?(this.primaryTouch=t.changedPointers[0].identifier,setLastTouch.call(this,t)):e&(E|P)&&setLastTouch.call(this,t)}function setLastTouch(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)},K)}}function isSyntheticEvent(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],o=Math.abs(t-i.x),a=Math.abs(r-i.y);if(o<=Z&&a<=Z)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(e,t,r){var n="touch"==r.pointerType,i="mouse"==r.pointerType;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)recordTouches.call(this,t,r);else if(i&&isSyntheticEvent.call(this,r))return;this.callback(e,t,r)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var Y=prefixed(c.style,"touchAction"),J=Y!==s,Q="auto",$="manipulation",ee="none",te="pan-x",re="pan-y",ne=function getTouchActionProps(){if(!J)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!t||i.CSS.supports("touch-action",r)}),e}();function TouchAction(e,t){this.manager=e,this.set(t)}function cleanTouchActions(e){if(inStr(e,ee))return ee;var t=inStr(e,te),r=inStr(e,re);return t&&r?ee:t||r?t?te:re:inStr(e,$)?$:Q}TouchAction.prototype={set:function(e){"compute"==e&&(e=this.compute()),J&&this.manager.element.style&&ne[e]&&(this.manager.element.style[Y]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return each(this.manager.recognizers,function(t){boolOrFn(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),cleanTouchActions(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=inStr(n,ee)&&!ne[ee],o=inStr(n,re)&&!ne[re],a=inStr(n,te)&&!ne[te];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return i||o&&r&I||a&&r&R?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ie=1,oe=2,ae=4,se=8,le=se,ue=16;function Recognizer(e){this.options=l({},this.defaults,e||{}),this.id=y++,this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=ie,this.simultaneous={},this.requireFail=[]}function stateStr(e){return e&ue?"cancel":e&se?"end":e&ae?"move":e&oe?"start":""}function directionStr(e){return e==A?"down":e==O?"up":e==T?"left":e==k?"right":""}function getRecognizerByNameIfManager(e,t){var r=t.manager;return r?r.get(e):e}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(e,t){return(t=t||{}).recognizers=ifUndefined(t.recognizers,Hammer.defaults.preset),new Manager(e,t)}Recognizer.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(invokeArrayArg(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=getRecognizerByNameIfManager(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return invokeArrayArg(e,"dropRecognizeWith",this)?this:(e=getRecognizerByNameIfManager(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(invokeArrayArg(e,"requireFailure",this))return this;var t=this.requireFail;return-1===inArray(t,e=getRecognizerByNameIfManager(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(invokeArrayArg(e,"dropRequireFailure",this))return this;e=getRecognizerByNameIfManager(e,this);var t=inArray(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function emit(r){t.manager.emit(r,e)}r<se&&emit(t.options.event+stateStr(r)),emit(t.options.event),e.additionalEvent&&emit(e.additionalEvent),r>=se&&emit(t.options.event+stateStr(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ie)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!boolOrFn(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(le|ue|32)&&(this.state=ie),this.state=this.process(t),this.state&(oe|ae|se|ue)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=t&(oe|ae),i=this.attrTest(e);return n&&(r&P||!i)?t|ue:n||i?r&E?t|se:t&oe?t|ae:oe:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:M},getTouchAction:function(){var e=this.options.direction,t=[];return e&I&&t.push(re),e&R&&t.push(te),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&I?(i=0===o?C:o<0?T:k,r=o!=this.pX,n=Math.abs(e.deltaX)):(i=0===a?C:a<0?O:A,r=a!=this.pY,n=Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},attrTest:function(e){return AttrRecognizer.prototype.attrTest.call(this,e)&&(this.state&oe||!(this.state&oe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=directionStr(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&oe)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Q]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!r||e.eventType&(E|P)&&!i)this.reset();else if(e.eventType&w)this.reset(),this._timer=setTimeoutContext(function(){this.state=le,this.tryEmit()},t.time,this);else if(e.eventType&E)return le;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===le&&(e&&e.eventType&E?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&oe)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:I|R,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return r&(I|R)?t=e.overallVelocity:r&I?t=e.overallVelocityX:r&R&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&E},emit:function(e){var t=directionStr(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&w&&0===this.count)return this.failTimeout();if(n&&i&&r){if(e.eventType!=E)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||getDistance(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=le,this.tryEmit()},t.interval,this),oe):le}return 32},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:I}],[PanRecognizer,{direction:I},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(e,t){var r;this.options=l({},Hammer.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(_?PointerEventInput:b?TouchInput:v?TouchMouseInput:MouseInput))(r,inputHandler),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function toggleCssProps(e,t){var r,n=e.element;n.style&&(each(e.options.cssProps,function(i,o){r=prefixed(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={}))}function triggerDomEvent(e,t){var r=o.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}Manager.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&le)&&(i=t.curRecognizer=null);for(var o=0;o<n.length;)r=n[o],2===t.stopped||i&&r!=i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e),!i&&r.state&(oe|ae|se)&&(i=t.curRecognizer=r),o++}},get:function(e){if(e instanceof Recognizer)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(invokeArrayArg(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(invokeArrayArg(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=inArray(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var r=this.handlers;return each(splitStr(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==s){var r=this.handlers;return each(splitStr(e),function(e){t?r[e]&&r[e].splice(inArray(r[e],t),1):delete r[e]}),this}},emit:function(e,t){this.options.domEvents&&triggerDomEvent(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Hammer,{INPUT_START:w,INPUT_MOVE:S,INPUT_END:E,INPUT_CANCEL:P,STATE_POSSIBLE:ie,STATE_BEGAN:oe,STATE_CHANGED:ae,STATE_ENDED:se,STATE_RECOGNIZED:le,STATE_CANCELLED:ue,STATE_FAILED:32,DIRECTION_NONE:C,DIRECTION_LEFT:T,DIRECTION_RIGHT:k,DIRECTION_UP:O,DIRECTION_DOWN:A,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:R,DIRECTION_ALL:M,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:m,extend:g,assign:l,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Hammer,(n=function(){return Hammer}.call(t,r,t,e))===s||(e.exports=n)}(window,document)},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:'initialState = {\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  },\n  isOpen: true,\n  longitude: 0,\n  latitude: 0\n};\n\nconst onClick = ({ lngLat }) => {\n  setState(state => ({\n    ...state,\n    longitude: lngLat.lng,\n    latitude: lngLat.lat,\n    isOpen: true\n  }));\n};\n\nconst onClose = () => {\n  setState(state => ({ ...state, isOpen: false }));\n};\n\nconst Element = <div>Popup</div>;\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onClick={onClick}\n  {...state.viewport}\n>\n  {state.isOpen && (\n    <Popup\n      longitude={state.longitude}\n      latitude={state.latitude}\n      closeOnClick={false}\n      onClose={onClose}\n      element={Element}\n    />\n  )}\n</MapGL>',settings:{},evalInContext:o}]},function(e,t,r){var n={"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:"const random = require('@turf/random');\n\nconst bbox = [-160, -70, 160, 70];\nconst [longitude, latitude] = random.randomPosition(bbox);\n\ninitialState = {\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  },\n  longitude,\n  latitude\n};\n\nconst style = {\n  padding: '10px',\n  color: '#fff',\n  cursor: 'pointer',\n  background: '#1978c8',\n  borderRadius: '6px'\n};\n\nconst onClick = () => {\n  const [longitude, latitude] = random.randomPosition(bbox);\n  setState({ longitude, latitude });\n};\n\nconst onDragEnd = lngLat => {\n  setState({ longitude: lngLat.lng, latitude: lngLat.lat });\n};\n\nconst Element = (\n  <div onClick={onClick} style={style}>\n    Click me!\n    <br />\n    Drag me!\n  </div>\n);\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  {...state.viewport}\n>\n  <Marker\n    longitude={state.longitude}\n    latitude={state.latitude}\n    element={Element}\n    onDragEnd={onDragEnd}\n    draggable\n  />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,r){"use strict";function feature(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function point(e,t,r){return void 0===r&&(r={}),feature({type:"Point",coordinates:e},t,r)}function polygon(e,t,r){void 0===r&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:e},t,r)}function lineString(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:e},t,r)}function featureCollection(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function multiLineString(e,t,r){return void 0===r&&(r={}),feature({type:"MultiLineString",coordinates:e},t,r)}function multiPoint(e,t,r){return void 0===r&&(r={}),feature({type:"MultiPoint",coordinates:e},t,r)}function multiPolygon(e,t,r){return void 0===r&&(r={}),feature({type:"MultiPolygon",coordinates:e},t,r)}function radiansToLength(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function lengthToRadians(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function radiansToDegrees(e){return 180*(e%(2*Math.PI))/Math.PI}function isNumber(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=feature,t.geometry=function geometry(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return point(t).geometry;case"LineString":return lineString(t).geometry;case"Polygon":return polygon(t).geometry;case"MultiPoint":return multiPoint(t).geometry;case"MultiLineString":return multiLineString(t).geometry;case"MultiPolygon":return multiPolygon(t).geometry;default:throw new Error(e+" is invalid")}},t.point=point,t.points=function points(e,t,r){return void 0===r&&(r={}),featureCollection(e.map(function(e){return point(e,t)}),r)},t.polygon=polygon,t.polygons=function polygons(e,t,r){return void 0===r&&(r={}),featureCollection(e.map(function(e){return polygon(e,t)}),r)},t.lineString=lineString,t.lineStrings=function lineStrings(e,t,r){return void 0===r&&(r={}),featureCollection(e.map(function(e){return lineString(e,t)}),r)},t.featureCollection=featureCollection,t.multiLineString=multiLineString,t.multiPoint=multiPoint,t.multiPolygon=multiPolygon,t.geometryCollection=function geometryCollection(e,t,r){return void 0===r&&(r={}),feature({type:"GeometryCollection",geometries:e},t,r)},t.round=function round(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=radiansToLength,t.lengthToRadians=lengthToRadians,t.lengthToDegrees=function lengthToDegrees(e,t){return radiansToDegrees(lengthToRadians(e,t))},t.bearingToAzimuth=function bearingToAzimuth(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=radiansToDegrees,t.degreesToRadians=function degreesToRadians(e){return e%360*Math.PI/180},t.convertLength=function convertLength(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(e,t),r)},t.convertArea=function convertArea(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=isNumber,t.isObject=function isObject(e){return!!e&&e.constructor===Object},t.validateBBox=function validateBBox(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!isNumber(e))throw new Error("bbox must only contain numbers")})},t.validateId=function validateId(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function radians2degrees(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function degrees2radians(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function distanceToDegrees(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function distanceToRadians(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function radiansToDistance(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function bearingToAngle(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function convertDistance(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,r){var n={"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"Note: You have to install `supercluster` package to use `Cluster` component:\n\n```shell\nnpm -i supercluster\n```"},{type:"code",content:'const random = require("@turf/random");\n\nconst bbox = [-160, -70, 160, 70];\nconst points = random.randomPoint(50, { bbox }).features;\npoints.forEach((point, index) => (point.id = index));\n\ninitialState = {\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst style = {\n  width: "20px",\n  height: "20px",\n  color: "#fff",\n  background: "#1978c8",\n  borderRadius: "20px",\n  textAlign: "center"\n};\n\nconst Element = <div style={style} />;\n\nconst ClusterElement = ({ properties: { point_count_abbreviated } }) => (\n  <div style={{ ...style, background: "#f28a25" }}>\n    {point_count_abbreviated}\n  </div>\n);\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Cluster radius={40} extent={512} nodeSize={64} element={ClusterElement}>\n    {points.map(point => (\n      <Marker\n        key={point.id}\n        longitude={point.geometry.coordinates[0]}\n        latitude={point.geometry.coordinates[1]}\n        element={Element}\n      />\n    ))}\n  </Cluster>\n</MapGL>',settings:{},evalInContext:o}]},function(e,t,r){var n={"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"You can access [supercluster](https://github.com/mapbox/supercluster) instance using `innerRef` as show in the code below.\n\nNote: You have to install `supercluster` package to use `Cluster` component:\n\n```shell\nnpm -i supercluster\n```"},{type:"code",content:'const random = require("@turf/random");\n\nconst bbox = [-160, -70, 160, 70];\nconst points = random.randomPoint(50, { bbox }).features;\npoints.forEach((point, index) => (point.id = index));\n\ninitialState = {\n  points,\n  supercluster: null,\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst onClusterClick = cluster => {\n  const { cluster_id } = cluster.properties;\n  const zoom = state.supercluster.getClusterExpansionZoom(cluster_id);\n  const [longitude, latitude] = cluster.geometry.coordinates;\n\n  const newVewport = {\n    ...state.viewport,\n    latitude,\n    longitude,\n    zoom\n  };\n\n  setState({ viewport: newVewport });\n};\n\nconst MarkerStyle = {\n  width: "20px",\n  height: "20px",\n  color: "#fff",\n  background: "#1978c8",\n  borderRadius: "20px",\n  textAlign: "center"\n};\n\nconst MarkerElement = <div style={MarkerStyle} />;\n\nconst ClusterMarkerStyle = {\n  ...MarkerStyle,\n  cursor: "pointer",\n  background: "#f28a25"\n};\n\nconst ClusterElement = cluster => (\n  <div style={ClusterMarkerStyle} onClick={onClusterClick.bind(this, cluster)}>\n    {cluster.properties.point_count_abbreviated}\n  </div>\n);\n\n<MapGL\n  style={{ width: "100%", height: "400px" }}\n  mapStyle="mapbox://styles/mapbox/light-v9"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Cluster\n    innerRef={ref => setState({ supercluster: ref })}\n    radius={40}\n    extent={512}\n    nodeSize={64}\n    element={ClusterElement}\n  >\n    {state.points.map(point => (\n      <Marker\n        key={point.id}\n        longitude={point.geometry.coordinates[0]}\n        latitude={point.geometry.coordinates[1]}\n        element={MarkerElement}\n      />\n    ))}\n  </Cluster>\n</MapGL>',settings:{},evalInContext:o}]},function(e,t,r){var n={immutable:r(30),"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:"const Immutable = require('immutable');\nconst random = require('@turf/random');\n\nconst points = random.randomPoint(10);\npoints.features.forEach((feature, index) => {\n  feature.properties.id = index;\n});\n\ninitialState = {\n  sources: Immutable.fromJS({\n    markers: {\n      type: 'geojson',\n      data: points\n    }\n  }),\n  layers: Immutable.fromJS({\n    markers: {\n      id: 'markers',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#1978c8'\n      }\n    },\n    'highlighted-marker': {\n      id: 'highlighted-marker',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#f28a25'\n      },\n      filter: ['==', 'id', '']\n    }\n  }),\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst onClick = event => {\n  const feature = event.features[0];\n  if (!feature) return;\n\n  const newLayers = state.layers.setIn(\n    ['highlighted-marker', 'filter', 2],\n    feature.properties.id\n  );\n\n  setState({ layers: newLayers });\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  {...state.viewport}\n>\n  <Source id='markers' source={state.sources.get('markers')} />\n  <Layer layer={state.layers.get('markers')} onClick={onClick} />\n  <Layer layer={state.layers.get('highlighted-marker')} />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,r){var n={immutable:r(30),"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:"const Immutable = require('immutable');\nconst random = require('@turf/random');\n\nconst points = random.randomPoint(10);\npoints.features.forEach((feature, index) => {\n  feature.properties.id = index;\n});\n\ninitialState = {\n  sources: Immutable.fromJS({\n    markers: {\n      type: 'geojson',\n      data: points\n    }\n  }),\n  layers: Immutable.fromJS({\n    markers: {\n      id: 'markers',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#1978c8'\n      }\n    },\n    'highlighted-marker': {\n      id: 'highlighted-marker',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#f28a25'\n      },\n      filter: ['==', 'id', '']\n    }\n  }),\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst onHover = (event) => {\n  const feature = event.features[0];\n  if (!feature) return;\n\n  const newLayers = state.layers.setIn(\n    ['highlighted-marker', 'filter', 2],\n    feature.properties.id\n  );\n\n  setState({ layers: newLayers });\n};\n\n<MapGL\n  style={{ width: \"100%\", height: \"400px\" }}\n  mapStyle=\"mapbox://styles/mapbox/light-v9\"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  {...state.viewport}\n>\n  <Source id='markers' source={state.sources.get('markers')} />\n  <Layer layer={state.layers.get('markers')} onHover={onHover} />\n  <Layer layer={state.layers.get('highlighted-marker')} />\n</MapGL>",settings:{},evalInContext:o}]},function(e,t,r){var n={immutable:r(30),"@turf/random":r(73),react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:"const Immutable = require('immutable');\nconst random = require('@turf/random');\n\nconst points = random.randomPoint(10);\npoints.features.forEach((feature, index) => {\n  feature.properties.id = index;\n});\n\ninitialState = {\n  sources: Immutable.fromJS({\n    markers: {\n      type: 'geojson',\n      data: points\n    }\n  }),\n  layers: Immutable.fromJS({\n    markers: {\n      id: 'markers',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#1978c8'\n      }\n    },\n    'highlighted-marker': {\n      id: 'highlighted-marker',\n      type: 'circle',\n      source: 'markers',\n      paint: {\n        'circle-radius': 16,\n        'circle-color': '#f28a25'\n      },\n      filter: ['==', 'id', '']\n    }\n  }),\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst onEnter = (event) => {\n  const feature = event.features[0];\n  if (!feature) return;\n\n  const newLayers = state.layers.setIn(\n    ['highlighted-marker', 'filter', 2],\n    feature.properties.id\n  );\n\n  setState({ layers: newLayers });\n};\n\nconst onLeave = (event) => {\n  const newLayers = state.layers.setIn(\n    ['highlighted-marker', 'filter', 2],\n    ''\n  );\n\n  setState({ layers: newLayers });\n};\n\n<MapGL\n  style={{ width: \"100%\", height: \"400px\" }}\n  mapStyle=\"mapbox://styles/mapbox/light-v9\"\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  {...state.viewport}\n>\n  <Source id='markers' source={state.sources.get('markers')} />\n  <Layer\n    onEnter={onEnter}\n    onLeave={onLeave}\n    layer={state.layers.get('markers')}\n  />\n  <Layer layer={state.layers.get('highlighted-marker')} />\n</MapGL>",settings:{},evalInContext:o}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"code",content:'initialState = {\n  styleId: "dark",\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst styles = {\n  light: "mapbox://styles/mapbox/light-v9",\n  dark: "mapbox://styles/mapbox/dark-v9",\n};\n\nconst onButtonClick = () => {\n  setState((state) => {\n    const newStyleId = state.styleId === "light" ? "dark" : "light";\n    return {...state, styleId: newStyleId };\n  });\n}\n\n<React.Fragment>\n  <button onClick={onButtonClick}>Change Map style</button>\n  <MapGL\n    style={{ width: "100%", height: "400px" }}\n    mapStyle={styles[state.styleId]}\n    accessToken={MAPBOX_ACCESS_TOKEN}\n    {...state.viewport}\n  />\n</React.Fragment>',settings:{},evalInContext:o}]},function(e,t,r){var n={react:r(1)},i=r(38).bind(null,n),o=r(39).bind(null,"var React = require('react');",i);e.exports=[{type:"markdown",content:"-   A `NavigationControl` control contains zoom buttons and a compass.\n-   Geolocate the user and then track their current location on the map using the `GeolocateControl`.\n-   A `FullscreenControl` control contains a button for toggling the map in and out of fullscreen mode.\n-   A `ScaleControl` control displays the ratio of a distance on the map to the corresponding distance on the ground.\n-   An `AttributionControl` control presents the map's attribution information."},{type:"code",content:"<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n  attributionControl={false}\n>\n  <NavigationControl showCompass showZoom position='top-right' />\n  <GeolocateControl position='top-right' />\n  <FullscreenControl position='top-right' />\n  <AttributionControl\n    compact={false}\n    position='bottom-right'\n    customAttribution='Custom attribution'\n  />\n  <ScaleControl unit='metric' position='bottom-right' />\n</MapGL>",settings:{},evalInContext:o}]},function(e,t,r){"use strict";r.r(t);r(228),r(229),r(231);var n=r(87).a.createStyleSheet({body:{isolate:!1,margin:0,padding:0,minWidth:0,maxWidth:"100%",border:0}}).attach().classes.body;document.body.classList.add(n);var i=r(52),o=r.n(i),a=r(1),s=r.n(a),l=r(2),u=r.n(l),c=r(13);function EditorLoaderRenderer(e){var t=e.classes;return s.a.createElement("div",{className:t.root},"Loading")}EditorLoaderRenderer.propTypes={classes:u.a.object.isRequired};var p=Object(c.a)(function styles(e){var t=e.fontFamily,r=e.color,n=e.space,i=e.fontSize;return{root:{padding:[[n[1],n[2],n[1],n[1]]],fontFamily:t.base,fontSize:i.small,color:r.light,backgroundColor:r.codeBackground}}})(EditorLoaderRenderer),h=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function EditorLoader(){var e,t,r;_classCallCheck(this,EditorLoader);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=_possibleConstructorReturn(this,(e=EditorLoader.__proto__||Object.getPrototypeOf(EditorLoader)).call.apply(e,[this].concat(i))),r.state={editor:null},_possibleConstructorReturn(r,t)}return _inherits(EditorLoader,a["Component"]),h(EditorLoader,[{key:"componentDidMount",value:function componentDidMount(){var e=this;r.e(1).then(r.bind(null,426)).then(function(t){e.setState({editor:t.default})})}},{key:"render",value:function render(){var e=this.state.editor;return e?s.a.createElement(e,this.props):s.a.createElement(p,null)}}]),EditorLoader}(),d=r(169),g=r(31),m=r(78),y=r(116),v=r(68),_=r(79),b=r(118),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w=function getRowKey(e){return e.name},S=[{caption:"Method name",render:function render(e){var t=e.name,r=e.tags,n=void 0===r?{}:r;return s.a.createElement(v.a,{deprecated:!!n.deprecated},t+"()")}},{caption:"Parameters",render:function render(e){var t=e.params,r=void 0===t?[]:t;return s.a.createElement(y.a,{args:r})}},{caption:"Description",render:function render(e){var t=e.description,r=e.returns,n=e.tags,i=void 0===n?{}:n;return s.a.createElement("div",null,t&&s.a.createElement(g.a,{text:t}),r&&s.a.createElement(m.a,x({block:!0,returns:!0},r)),s.a.createElement(_.a,i))}}];function MethodsRenderer(e){var t=e.methods;return s.a.createElement(b.a,{columns:S,rows:t,getRowKey:w})}MethodsRenderer.propTypes={methods:u.a.arrayOf(u.a.shape({name:u.a.string.isRequired,description:u.a.string,returns:u.a.object,params:u.a.array,tags:u.a.object})).isRequired};var E=r(80),P=r.n(E);function Usage(e){var t=e.props,r=t.props,n=t.methods,i=!P()(r)&&s.a.createElement(d.a,{props:r}),o=!P()(n)&&s.a.createElement(MethodsRenderer,{methods:n});return i||o?s.a.createElement("div",null,i,o):null}Usage.propTypes={props:u.a.shape({props:u.a.array,methods:u.a.array}).isRequired};var C=r(197),T=r.n(C),k=r(198),O=r.n(k),A=r(24),I=r.n(A);function ToolbarButtonRenderer(e){var t,r,n,i=e.classes,o=e.className,a=e.onClick,l=e.href,u=e.title,c=e.small,p=e.children,h=I()(i.button,o,(t={},r=i.isSmall,n=c,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t));return void 0!==l?s.a.createElement("a",{href:l,title:u,className:h,"aria-label":u},p):s.a.createElement("button",{type:"button",onClick:a,title:u,className:h,"aria-label":u},p)}ToolbarButtonRenderer.propTypes={classes:u.a.object.isRequired,className:u.a.string,href:u.a.string,onClick:u.a.func,title:u.a.string,small:u.a.bool,children:u.a.node};var R=Object(c.a)(function styles(e){var t=e.space,r=e.color;return{button:{padding:2,color:r.light,background:"transparent",transition:"color 750ms ease-out",cursor:"pointer","&:hover, &:focus":{isolate:!1,color:r.linkHover,transition:"color 150ms ease-in"},"&:focus":{isolate:!1,outline:[[1,"dotted",r.linkHover]]},"& + &":{isolate:!1,marginLeft:t[1]},"& svg":{width:t[3],height:t[3],color:"currentColor",cursor:"inherit"}},isSmall:{"& svg":{width:14,height:14}}}})(ToolbarButtonRenderer);function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function getUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.slug,n=e.example,i=e.anchor,o=e.isolated,a=e.nochrome,s=e.absolute,l=e.hashPath,u=e.id,c=e.takeHash,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,h=p.origin,f=p.pathname,d=p.hash,g=f;return c&&(d.indexOf("?")>-1?g+=d.substring(0,d.indexOf("?")):g+=d),a&&(g+="?nochrome"),i?g+="#"+r:(o||a)&&(g+="#!/"+t),l&&(u||(l=[].concat(_toConsumableArray(l),[t])),g+="#/"+l.join("/")),u&&(g+="?id="+r),void 0!==n&&(g+="/"+n),s?h+g:g}var M=function IsolateButton(e){var t=e.name,r=e.example;return e.isolated?s.a.createElement(R,{href:getUrl({anchor:!0,slug:"/"}),title:"Show all components"},s.a.createElement(O.a,null)):s.a.createElement(R,{href:getUrl({name:t,example:r,isolated:!0}),title:"Open isolated"},s.a.createElement(T.a,null))};M.propTypes={name:u.a.string.isRequired,example:u.a.number,isolated:u.a.bool};var L=M;function TabButtonRenderer(e){var t,r,n,i=e.classes,o=e.name,a=e.className,l=e.onClick,u=e.active,c=e.children,p=I()(i.button,a,(t={},r=i.isActive,n=u,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t));return s.a.createElement("button",{type:"button",name:o,className:p,onClick:l},c)}TabButtonRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string,className:u.a.string,onClick:u.a.func,active:u.a.bool,children:u.a.node};var j=Object(c.a)(function styles(e){var t=e.space,r=e.color,n=e.fontFamily,i=e.fontSize,o=e.buttonTextTransform;return{button:{padding:[[t[1],0]],fontFamily:n.base,fontSize:i.base,color:r.light,background:"transparent",textTransform:o,transition:"color 750ms ease-out",border:"none",cursor:"pointer","&:hover, &:focus":{isolate:!1,outline:0,color:r.linkHover,transition:"color 150ms ease-in"},"&:focus:not($isActive)":{isolate:!1,outline:[[1,"dotted",r.linkHover]]},"& + &":{isolate:!1,marginLeft:t[1]}},isActive:{borderBottom:[[2,r.linkHover,"solid"]]}}})(TabButtonRenderer),D=function CodeTabButton(e){return s.a.createElement(j,e,"View Code")};D.propTypes={onClick:u.a.func.isRequired,name:u.a.string.isRequired,active:u.a.bool};var F=D,N=function UsageTabButton(e){var t=e.props;return!P()(t.props)||!P()(t.methods)?s.a.createElement(j,e,"Props & methods"):null};N.propTypes={onClick:u.a.func.isRequired,name:u.a.string.isRequired,props:u.a.shape({props:u.a.array,methods:u.a.array}).isRequired,active:u.a.bool};var z=N,B="rsg-code-editor",U="rsg-usage",V=function(){var e=[L];return{sectionToolbar:e,componentToolbar:e,exampleToolbar:e,exampleTabButtons:[{id:B,render:F}],exampleTabs:[{id:B,render:f}],docsTabButtons:[{id:U,render:z}],docsTabs:[{id:U,render:Usage}]}},q=r(119),G=r(199),W=r.n(G),H="#/",X=/(.*)\?/;function trimHash(e,t){if(!e)return"";var r=new RegExp("^"+W()(t||H),"g");return e.replace(r,"")}var K=function trimParams(e){var t=X.exec(e);return t&&t[1]||e},Z=function hasInHash(e,t){return""!==e&&e.indexOf(t)>-1},Y=function getHash(e,t){return decodeURIComponent(K(trimHash(e,t)))},J=function getHashAsArray(e,t){return Y(e,t).split("/")},Q=function getParameterByName(e,t){t=t.replace(/[[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null};function ComponentsListRenderer(e){var t=e.classes,r=e.items;if(!(r=r.filter(function(e){return e.visibleName})).length)return null;var n=window.location.pathname+Y(window.location.hash);return s.a.createElement("ul",{className:t.list},r.map(function(e){var r=e.heading,i=e.visibleName,o=e.href,a=e.content,l=e.external,u=Z(n,o);return s.a.createElement("li",{className:I()(t.item,(!a||!a.props.items.length)&&t.isChild,u&&t.isSelected),key:o},s.a.createElement(q.a,{className:I()(r&&t.heading),href:o,target:l?"_blank":void 0},i),a)}))}ComponentsListRenderer.propTypes={items:u.a.array.isRequired,classes:u.a.object.isRequired};var $=Object(c.a)(function styles(e){var t,r,n,i=e.color,o=e.fontFamily,a=e.fontSize,s=e.space,l=e.mq;return{list:{margin:0,paddingLeft:s[2]},item:{color:i.base,display:"block",margin:[[s[1],0,s[1],0]],fontFamily:o.base,fontSize:a.base,listStyle:"none",overflow:"hidden",textOverflow:"ellipsis"},isChild:(t={},r=l.small,n={display:"inline-block",margin:[[0,s[1],0,0]]},r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t),heading:{color:i.base,marginTop:s[1],fontFamily:o.base,fontWeight:"bold"},isSelected:{fontWeight:"bold"}}})(ComponentsListRenderer),ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function ComponentsList(e){var t=e.classes,r=e.items,n=e.useRouterLinks,i=void 0!==n&&n,o=e.useHashId,a=e.hashPath,l=r.map(function(e){return ee({},e,{href:e.href?e.href:getUrl({name:e.name,slug:e.slug,anchor:!i,hashPath:!!i&&a,id:!!i&&o})})});return s.a.createElement($,{classes:t,items:l})}ComponentsList.propTypes={items:u.a.array.isRequired,classes:u.a.object,hashPath:u.a.array,useRouterLinks:u.a.bool,useHashId:u.a.bool};var te=ComponentsList;function TableOfContentsRenderer(e){var t=e.classes,r=e.children,n=e.searchTerm,i=e.onSearchTermChange;return s.a.createElement("div",null,s.a.createElement("div",{className:t.root},s.a.createElement("div",{className:t.search},s.a.createElement("input",{value:n,className:t.input,placeholder:"Filter by name","aria-label":"Filter by name",onChange:function onChange(e){return i(e.target.value)}})),s.a.createElement("nav",null,r)))}TableOfContentsRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node,searchTerm:u.a.string.isRequired,onSearchTermChange:u.a.func.isRequired};var re=Object(c.a)(function styles(e){var t=e.space,r=e.color,n=e.fontFamily,i=e.fontSize,o=e.borderRadius;return{root:{fontFamily:n.base},search:{padding:t[2]},input:{display:"block",width:"100%",padding:t[1],color:r.base,backgroundColor:r.baseBackground,fontFamily:n.base,fontSize:i.base,border:[[1,r.border,"solid"]],borderRadius:o,transition:"border-color ease-in-out .15s","&:focus":{isolate:!1,borderColor:r.link,outline:0},"&::placeholder":{isolate:!1,fontFamily:n.base,fontSize:i.base,color:r.light}}}})(TableOfContentsRenderer);function getFilterRegExp(e){return e=e.replace(/[^a-z0-9]/gi,"").split("").join(".*"),new RegExp(e,"i")}function filterComponentsByName(e,t){var r=getFilterRegExp(t);return e.filter(function(e){var t=e.name;return r.test(t)})}var ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function filterSectionsByName(e,t){var r=getFilterRegExp(t);return e.map(function(e){return ne({},e,{sections:e.sections?filterSectionsByName(e.sections,t):[],components:e.components?filterComponentsByName(e.components,t):[]})}).filter(function(e){return e.components.length>0||e.sections.length>0||r.test(e.name)})}var ie=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function TableOfContents_toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function TableOfContents_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TableOfContents_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function TableOfContents_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oe=function(e){function TableOfContents(){var e,t,r;TableOfContents_classCallCheck(this,TableOfContents);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=TableOfContents_possibleConstructorReturn(this,(e=TableOfContents.__proto__||Object.getPrototypeOf(TableOfContents)).call.apply(e,[this].concat(i))),r.state={searchTerm:""},TableOfContents_possibleConstructorReturn(r,t)}return TableOfContents_inherits(TableOfContents,a["Component"]),ie(TableOfContents,[{key:"renderLevel",value:function renderLevel(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.map(function(e){var o=[].concat(TableOfContents_toConsumableArray(e.sections||[]),TableOfContents_toConsumableArray(e.components||[])),a=e.sectionDepth||0,s=0===a&&i?n:[].concat(TableOfContents_toConsumableArray(n),[e.name]);return Object.assign({},e,{heading:!!e.name&&o.length>0,content:o.length>0&&r.renderLevel(o,t,s,0===a)})});return s.a.createElement(te,{items:o,hashPath:n,useHashId:i,useRouterLinks:t})}},{key:"renderSections",value:function renderSections(){var e=this.state.searchTerm,t=this.props,r=t.sections,n=t.useRouterLinks,i=filterSectionsByName(1===r.length?r[0].components:r,e);return this.renderLevel(i,n)}},{key:"render",value:function render(){var e=this,t=this.state.searchTerm;return s.a.createElement(re,{searchTerm:t,onSearchTermChange:function onSearchTermChange(t){return e.setState({searchTerm:t})}},this.renderSections())}}]),TableOfContents}();oe.propTypes={sections:u.a.array.isRequired,useRouterLinks:u.a.bool};var ae=oe;function LogoRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("h1",{className:t.logo},r)}LogoRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var se=Object(c.a)(function styles(e){var t=e.color,r=e.fontFamily,n=e.fontSize;return{logo:{color:t.base,margin:0,fontFamily:r.base,fontSize:n.h4,fontWeight:"normal"}}})(LogoRenderer);function RibbonRenderer(e){var t=e.classes,r=e.url,n=e.text;return s.a.createElement("div",{className:t.root},s.a.createElement("a",{href:r,className:t.link},n))}RibbonRenderer.defaultProps={text:"Fork me on GitHub"},RibbonRenderer.propTypes={classes:u.a.object.isRequired,url:u.a.string.isRequired,text:u.a.string};var le=Object(c.a)(function styles(e){var t=e.color,r=e.space,n=e.fontSize;return{root:{position:"fixed",top:0,right:0,width:149,height:149,zIndex:999},link:{fontFamily:e.fontFamily.base,position:"relative",right:-37,top:-22,display:"block",width:190,padding:[[r[0],r[2]]],textAlign:"center",color:t.ribbonText,fontSize:n.base,background:t.ribbonBackground,textDecoration:"none",textShadow:[[0,"-1px",0,"rgba(0,0,0,.15)"]],transformOrigin:[[0,0]],transform:"rotate(45deg)",cursor:"pointer"}}})(RibbonRenderer);function Ribbon(e,t){var r=t.config.ribbon;return r?s.a.createElement(le,r):null}Ribbon.contextTypes={config:u.a.object};function VersionRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("p",{"aria-label":"version",className:t.version},r)}VersionRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var ue=Object(c.a)(function styles(e){var t=e.color,r=e.fontFamily,n=e.fontSize;return{version:{color:t.light,margin:[[5,0,0,0]],fontFamily:r.base,fontSize:n.base,fontWeight:"normal"}}})(VersionRenderer);function StyleGuideRenderer_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function StyleGuideRenderer(e){var t=e.classes,r=e.title,n=e.version,i=e.homepageUrl,o=e.children,a=e.toc,l=e.hasSidebar;return s.a.createElement("div",{className:I()(t.root,l&&t.hasSidebar)},s.a.createElement("main",{className:t.content},o,s.a.createElement("footer",{className:t.footer},s.a.createElement(g.a,{text:"Generated with [React Styleguidist]("+i+")"}))),l&&s.a.createElement("div",{className:t.sidebar},s.a.createElement("div",{className:t.logo},s.a.createElement(se,null,r),n&&s.a.createElement(ue,null,n)),a),s.a.createElement(Ribbon,null))}StyleGuideRenderer.propTypes={classes:u.a.object.isRequired,title:u.a.string.isRequired,version:u.a.string,homepageUrl:u.a.string.isRequired,children:u.a.node.isRequired,toc:u.a.node.isRequired,hasSidebar:u.a.bool};var ce=Object(c.a)(function styles(e){var t,r=e.color,n=e.fontFamily,i=e.fontSize,o=e.sidebarWidth,a=e.mq,s=e.space,l=e.maxWidth;return{root:{minHeight:"100vh",backgroundColor:r.baseBackground},hasSidebar:StyleGuideRenderer_defineProperty({paddingLeft:o},a.small,{paddingLeft:0}),content:(t={maxWidth:l,padding:[[s[2],s[4]]],margin:[[0,"auto"]]},StyleGuideRenderer_defineProperty(t,a.small,{padding:s[2]}),StyleGuideRenderer_defineProperty(t,"display","block"),t),sidebar:StyleGuideRenderer_defineProperty({backgroundColor:r.sidebarBackground,border:[[r.border,"solid"]],borderWidth:[[0,1,0,0]],position:"fixed",top:0,left:0,bottom:0,width:o,overflow:"auto",WebkitOverflowScrolling:"touch"},a.small,{position:"static",width:"auto",borderWidth:[[1,0,0,0]],paddingBottom:s[0]}),logo:{padding:s[2],borderBottom:[[1,r.border,"solid"]]},footer:{display:"block",color:r.light,fontFamily:n.base,fontSize:i.small}}})(StyleGuideRenderer);function componentWillMount(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function componentWillReceiveProps(e){this.setState(function updater(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function componentWillUpdate(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}componentWillMount.__suppressDeprecationWarning=!0,componentWillReceiveProps.__suppressDeprecationWarning=!0,componentWillUpdate.__suppressDeprecationWarning=!0;var pe=r(181),he=r.n(pe);function PlaygroundErrorRenderer(e){var t=e.classes,r=e.message;return s.a.createElement("pre",{className:t.root},r)}PlaygroundErrorRenderer.propTypes={classes:u.a.object.isRequired,message:u.a.string.isRequired};var fe=Object(c.a)(function styles(e){var t=e.fontFamily,r=e.fontSize,n=e.color;return{root:{margin:0,lineHeight:1.2,fontSize:r.small,fontFamily:t.monospace,color:n.error,whiteSpace:"pre-wrap"}}})(PlaygroundErrorRenderer),de=r(200),ge=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function Wrapper_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wrapper_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wrapper_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var me=function(e){function Wrapper(){return Wrapper_classCallCheck(this,Wrapper),Wrapper_possibleConstructorReturn(this,(Wrapper.__proto__||Object.getPrototypeOf(Wrapper)).apply(this,arguments))}return Wrapper_inherits(Wrapper,a["Component"]),ge(Wrapper,[{key:"componentDidCatch",value:function componentDidCatch(e){this.props.onError(e)}},{key:"render",value:function render(){return this.props.children}}]),Wrapper}();me.propTypes={children:u.a.node.isRequired,onError:u.a.func.isRequired};var ye=me,ve=r(109),_e=r(110),be=r.n(_e),xe=function unsemicolon(e){return e.replace(/;\s*$/,"")};function splitExampleCode(e){var t=void 0;try{t=ve.parse(e,{ecmaVersion:2019})}catch(t){return{head:"",example:e}}var r=be()(t.body.reverse(),{type:"ExpressionStatement"});if(!r)return{head:"",example:e};var n=r.start,i=r.end,o=xe(e.substring(0,n));return{head:o,example:o+";\nreturn ("+xe(e.substring(n,i))+");"}}var we=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function ReactExample_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ReactExample_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ReactExample_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Se=s.a.Fragment?"React.Fragment":"div",Ee=function _compileCode(e,t){return Object(de.a)(e,t).code},Pe=function wrapCodeInFragment(e){return"<"+Se+">"+e+"</"+Se+">;"},Ce=function(e){function StateHolder(){var e,t,r;ReactExample_classCallCheck(this,StateHolder);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=ReactExample_possibleConstructorReturn(this,(e=StateHolder.__proto__||Object.getPrototypeOf(StateHolder)).call.apply(e,[this].concat(i))),r.state=r.props.initialState,r.setStateBinded=r.setState.bind(r),ReactExample_possibleConstructorReturn(r,t)}return ReactExample_inherits(StateHolder,a["Component"]),we(StateHolder,[{key:"render",value:function render(){return this.props.component(this.state,this.setStateBinded)}}]),StateHolder}();Ce.propTypes={component:u.a.func.isRequired,initialState:u.a.object.isRequired};var Te=function(e){function ReactExample(){return ReactExample_classCallCheck(this,ReactExample),ReactExample_possibleConstructorReturn(this,(ReactExample.__proto__||Object.getPrototypeOf(ReactExample)).apply(this,arguments))}return ReactExample_inherits(ReactExample,a["Component"]),we(ReactExample,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e){return this.props.code!==e.code}},{key:"getExampleInitialState",value:function getExampleInitialState(e){return-1===e.indexOf("initialState")?{}:this.props.evalInContext("\n\t\t\tvar state = {}, initialState = {};\n\t\t\ttry {\n\t\t\t\t"+e+";\n\t\t\t} catch (err) {}\n\t\t\treturn initialState;\n\t\t")()}},{key:"getExampleComponent",value:function getExampleComponent(e){return this.props.evalInContext("\n\t\t\tvar initialState = {};\n\t\t\t"+e+"\n\t\t")}},{key:"compileCode",value:function compileCode(e){try{var t=e.trim().match(/^</)?Pe(e):e;return Ee(t,this.props.compilerConfig)}catch(e){this.props.onError&&this.props.onError(e)}return!1}},{key:"render",value:function render(){var e=this.compileCode(this.props.code);if(!e)return null;var t=splitExampleCode(e),r=t.head,n=t.example,i=this.getExampleInitialState(r),o=this.getExampleComponent(n);return s.a.createElement(ye,{onError:this.props.onError},s.a.createElement(Ce,{component:o,initialState:i}))}}]),ReactExample}();Te.propTypes={code:u.a.string.isRequired,evalInContext:u.a.func.isRequired,onError:u.a.func.isRequired,compilerConfig:u.a.object},Te.contextTypes={};var ke=Te,Oe=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function Preview_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Preview_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Preview_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ae=s.a.Fragment?s.a.Fragment:"div",Ie=function(e){function Preview(){var e,t,r;Preview_classCallCheck(this,Preview);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=Preview_possibleConstructorReturn(this,(e=Preview.__proto__||Object.getPrototypeOf(Preview)).call.apply(e,[this].concat(i))),r.state={error:null},r.handleError=function(e){r.unmountPreview(),r.setState({error:e.toString()}),console.error(e)},Preview_possibleConstructorReturn(r,t)}return Preview_inherits(Preview,a["Component"]),Oe(Preview,[{key:"componentDidMount",value:function componentDidMount(){this.context.codeRevision>0&&console.clear(),this.executeCode()}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return this.state.error!==t.error||this.props.code!==e.code}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.code!==e.code&&this.executeCode()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unmountPreview()}},{key:"unmountPreview",value:function unmountPreview(){this.mountNode&&o.a.unmountComponentAtNode(this.mountNode)}},{key:"executeCode",value:function executeCode(){var e=this;this.setState({error:null});var t=this.props.code;if(t){var r=s.a.createElement(ke,{code:t,evalInContext:this.props.evalInContext,onError:this.handleError,compilerConfig:this.context.config.compilerConfig});window.requestAnimationFrame(function(){e.unmountPreview();try{o.a.render(r,e.mountNode)}catch(t){e.handleError(t)}})}}},{key:"render",value:function render(){var e=this,t=this.state.error;return s.a.createElement(Ae,null,s.a.createElement("div",{ref:function ref(t){return e.mountNode=t}}),t&&s.a.createElement(fe,{message:t}))}}]),Preview}();Ie.propTypes={code:u.a.string.isRequired,evalInContext:u.a.func.isRequired},Ie.contextTypes={config:u.a.object.isRequired,codeRevision:u.a.number.isRequired};var Re=Ie,Me=r(77),Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function Slot(e,t){var r=e.name,n=e.active,i=e.onlyActive,o=e.className,a=e.props,l=void 0===a?{}:a,u=t.slots,c=u[r];if(!c)throw new Error('Slot "'+r+'" not found, available slots: '+Object.keys(u).join(", "));var p=c.map(function(e,t){var r=e,o=r.id,a=r.render,u=l;if(o&&a){if(i&&o!==n)return null;var c=l.onClick;u=Le({},l,{name:o,active:n&&o===n,onClick:c&&function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return c.apply(void 0,[o].concat(t))}}),e=a}return s.a.createElement(e,Le({key:t},u))}).filter(Boolean);return 0===p.length?null:s.a.createElement("div",{className:o},p)}Slot.propTypes={name:u.a.string.isRequired,active:u.a.string,onlyActive:u.a.bool,props:u.a.object,className:u.a.string},Slot.contextTypes={slots:u.a.object.isRequired};var je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function PlaygroundRenderer(e){var t=e.classes,r=e.name,n=e.preview,i=e.previewProps,o=e.tabButtons,a=e.tabBody,l=e.toolbar,u=i.className,c=_objectWithoutProperties(i,["className"]);return s.a.createElement("div",{className:t.root},s.a.createElement("div",je({className:I()(t.preview,u)},c,{"data-preview":r}),n),s.a.createElement("div",{className:t.controls},s.a.createElement("div",{className:t.tabs},o),s.a.createElement("div",{className:t.toolbar},l)),s.a.createElement("div",{className:t.tab},a))}PlaygroundRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string.isRequired,preview:u.a.node.isRequired,previewProps:u.a.object.isRequired,tabButtons:u.a.node.isRequired,tabBody:u.a.node.isRequired,toolbar:u.a.node.isRequired};var De=Object(c.a)(function styles(e){var t=e.space,r=e.color,n=e.borderRadius;return{root:{marginBottom:t[4]},preview:{padding:t[2],border:[[1,r.border,"solid"]],borderRadius:n,width:"100%",display:"inline-block"},controls:{display:"flex",alignItems:"center"},toolbar:{marginLeft:"auto"},tab:{}}})(PlaygroundRenderer),Fe=Object.freeze({all:"all",section:"section",component:"component",example:"example",notFound:"notFound"}),Ne=Object.freeze({hide:"hide",collapse:"collapse",expand:"expand"}),ze=Object.freeze({hide:"hide",collapse:"collapse",expand:"expand"}),Be=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function Playground_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Playground_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Playground_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ue=function(e){function Playground(e,t){Playground_classCallCheck(this,Playground);var r=Playground_possibleConstructorReturn(this,(Playground.__proto__||Object.getPrototypeOf(Playground)).call(this,e,t)),n=e.code,i=e.settings,o=e.exampleMode,a=t.config,s=o===Ne.expand,l=void 0!==i.showcode?i.showcode:s;return r.state={code:n,prevCode:n,activeTab:l?B:void 0},r.handleTabChange=r.handleTabChange.bind(r),r.handleChange=he()(r.handleChange.bind(r),a.previewDelay),r}return Playground_inherits(Playground,a["Component"]),Be(Playground,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.handleChange.cancel()}},{key:"handleChange",value:function handleChange(e){this.setState({code:e})}},{key:"handleTabChange",value:function handleTabChange(e){this.setState(function(t){return{activeTab:t.activeTab!==e?e:void 0}})}},{key:"render",value:function render(){var e=this.state,t=e.code,r=e.activeTab,n=this.props,i=n.evalInContext,o=n.index,a=n.name,l=n.settings,u=n.exampleMode,c=this.context.displayMode,p=u===Ne.hide,h=l.noeditor||p,f=s.a.createElement(Re,{code:t,evalInContext:i});return h?s.a.createElement(Me.a,null,f):s.a.createElement(De,{name:a,preview:f,previewProps:l.props||{},tabButtons:s.a.createElement(Slot,{name:"exampleTabButtons",active:r,props:{onClick:this.handleTabChange}}),tabBody:s.a.createElement(Slot,{name:"exampleTabs",active:r,onlyActive:!0,props:{code:t,onChange:this.handleChange,evalInContext:i}}),toolbar:s.a.createElement(Slot,{name:"exampleToolbar",props:{name:a,isolated:c===Fe.example,example:o}})})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e,t){var r=e.code;return t.prevCode!==r?{prevCode:r,code:r}:null}}]),Playground}();Ue.propTypes={code:u.a.string.isRequired,evalInContext:u.a.func.isRequired,index:u.a.number.isRequired,name:u.a.string.isRequired,exampleMode:u.a.string.isRequired,settings:u.a.object},Ue.contextTypes={config:u.a.object.isRequired,displayMode:u.a.string};var Ve=function polyfill(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var r=null,n=null,i=null;if("function"==typeof t.componentWillMount?r="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==r||null!==n||null!==i){var o=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=componentWillMount,t.componentWillReceiveProps=componentWillReceiveProps),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=componentWillUpdate;var s=t.componentDidUpdate;t.componentDidUpdate=function componentDidUpdatePolyfill(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;s.call(this,e,t,n)}}return e}(Ue);function ExamplesRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("article",{className:t.root},r)}ExamplesRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var qe=Object(c.a)(function styles(){return{root:{}}})(ExamplesRenderer);function Examples(e,t){var r=e.examples,n=e.name,i=e.exampleMode,o=t.codeRevision;return s.a.createElement(qe,null,r.map(function(e,t){switch(e.type){case"code":return s.a.createElement(Ve,{code:e.content,evalInContext:e.evalInContext,key:o+"/"+t,name:n,index:t,settings:e.settings,exampleMode:i});case"markdown":return s.a.createElement(g.a,{text:e.content,key:t});default:return null}}))}Examples.propTypes={examples:u.a.array.isRequired,name:u.a.string.isRequired,exampleMode:u.a.string.isRequired},Examples.contextTypes={codeRevision:u.a.number.isRequired};var Ge=r(76);function SectionHeadingRenderer(e){var t,r,n,i=e.classes,o=e.children,a=e.toolbar,l=e.id,u=e.href,c=e.depth,p=e.deprecated,h=Math.min(6,c),f=I()(i.sectionName,(t={},r=i.isDeprecated,n=p,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t));return s.a.createElement("div",{className:i.wrapper},s.a.createElement(Ge.a,{level:h,id:l},s.a.createElement("a",{href:u,className:f},o)),s.a.createElement("div",{className:i.toolbar},a))}SectionHeadingRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node,toolbar:u.a.node,id:u.a.string.isRequired,href:u.a.string.isRequired,depth:u.a.number.isRequired,deprecated:u.a.bool};var We=Object(c.a)(function styles(e){var t=e.color;return{wrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.space[1]},toolbar:{marginLeft:"auto"},sectionName:{"&:hover, &:active":{isolate:!1,textDecoration:"underline",cursor:"pointer"}},isDeprecated:{color:t.light,"&, &:hover":{textDecoration:"line-through"}}}})(SectionHeadingRenderer),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function SectionHeading_objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function SectionHeading(e){var t=e.slotName,r=e.slotProps,n=e.children,i=e.id,o=e.pagePerSection,a=SectionHeading_objectWithoutProperties(e,["slotName","slotProps","children","id","pagePerSection"]),l=getUrl(o?{slug:i,id:1!==a.depth,takeHash:!0}:{slug:i,anchor:!0});return s.a.createElement(We,He({toolbar:s.a.createElement(Slot,{name:t,props:r}),id:i,href:l},a),n)}SectionHeading.propTypes={children:u.a.node,id:u.a.string.isRequired,slotName:u.a.string.isRequired,slotProps:u.a.object.isRequired,depth:u.a.number.isRequired,deprecated:u.a.bool,pagePerSection:u.a.bool};var Xe=r(203),Ke=r.n(Xe),Ze=r(204),Ye=r.n(Ze);function PathlineRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("div",{className:t.pathline},r,s.a.createElement(R,{small:!0,className:t.copyButton,onClick:function onClick(){return Ke()(r)},title:"Copy to clipboard"},s.a.createElement(Ye.a,null)))}PathlineRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.string};var Je=Object(c.a)(function styles(e){var t=e.space,r=e.fontFamily,n=e.fontSize,i=e.color;return{pathline:{fontFamily:r.monospace,fontSize:n.small,color:i.light,wordBreak:"break-all"},copyButton:{marginLeft:t[0]}}})(PathlineRenderer);function ReactComponentRenderer(e){var t=e.classes,r=e.name,n=e.heading,i=e.pathLine,o=e.description,a=e.docs,l=e.examples,u=e.tabButtons,c=e.tabBody;return s.a.createElement("div",{className:t.root,id:r+"-container"},s.a.createElement("header",{className:t.header},n,i&&s.a.createElement(Je,null,i)),(o||a)&&s.a.createElement("div",{className:t.docs},o,a),u&&s.a.createElement("div",{className:t.tabs},s.a.createElement("div",{className:t.tabButtons},u),s.a.createElement("div",{className:t.tabBody},c)),l)}ReactComponentRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string.isRequired,heading:u.a.node.isRequired,filepath:u.a.string,pathLine:u.a.string,tabButtons:u.a.node,tabBody:u.a.node,description:u.a.node,docs:u.a.node,examples:u.a.node,isolated:u.a.bool};var Qe=Object(c.a)(function styles(e){var t=e.color,r=e.fontSize,n=e.space;return{root:{marginBottom:n[6]},header:{marginBottom:n[3]},tabs:{marginBottom:n[3]},tabButtons:{marginBottom:n[2]},tabBody:{overflowX:"auto",maxWidth:"100%",WebkitOverflowScrolling:"touch"},docs:{color:t.base,fontSize:r.text}}})(ReactComponentRenderer),$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},et=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function ReactComponent_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ReactComponent_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ReactComponent_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tt=function(){return s.a.createElement("div",null)},rt=function(e){function ReactComponent(e,t){ReactComponent_classCallCheck(this,ReactComponent);var r=ReactComponent_possibleConstructorReturn(this,(ReactComponent.__proto__||Object.getPrototypeOf(ReactComponent)).call(this,e,t)),n=e.usageMode;return r.handleTabChange=r.handleTabChange.bind(r),r.state={activeTab:n===ze.expand?U:void 0},r}return ReactComponent_inherits(ReactComponent,a["Component"]),et(ReactComponent,[{key:"handleTabChange",value:function handleTabChange(e){this.setState(function(t){return{activeTab:t.activeTab!==e?e:void 0}})}},{key:"render",value:function render(){var e=this.state.activeTab,t=this.context,r=t.displayMode,n=t.config.pagePerSection,i=this.props,o=i.component,a=i.depth,l=i.usageMode,u=i.exampleMode,c=o.name,p=o.visibleName,h=o.slug,f=o.filepath,d=o.pathLine,m=o.props,y=m.description,v=m.examples,b=void 0===v?[]:v,x=m.tags,w=void 0===x?{}:x;if(!c)return null;var S=l!==ze.hide;return s.a.createElement(Qe,{name:c,slug:h,filepath:f,pathLine:d,docs:s.a.createElement(_.a,w),description:y&&s.a.createElement(g.a,{text:y}),heading:s.a.createElement(SectionHeading,{id:h,pagePerSection:n,deprecated:!!w.deprecated,slotName:"componentToolbar",slotProps:$e({},o,{isolated:r!==Fe.all}),depth:a},p),examples:b.length>0?s.a.createElement(Examples,{examples:b,name:c,exampleMode:u}):s.a.createElement(tt,{name:c}),tabButtons:S&&s.a.createElement(Slot,{name:"docsTabButtons",active:e,props:$e({},o,{onClick:this.handleTabChange})}),tabBody:s.a.createElement(Slot,{name:"docsTabs",active:e,onlyActive:!0,props:o})})}}]),ReactComponent}();rt.propTypes={component:u.a.object.isRequired,depth:u.a.number.isRequired,exampleMode:u.a.string.isRequired,usageMode:u.a.string.isRequired},rt.contextTypes={config:u.a.object.isRequired,displayMode:u.a.string};var nt=rt;function ComponentsRenderer(e){var t=e.children;return s.a.createElement("div",null,t)}function Components(e){var t=e.components,r=e.depth,n=e.exampleMode,i=e.usageMode;return s.a.createElement(ComponentsRenderer,null,t.map(function(e){return s.a.createElement(nt,{key:e.filepath,component:e,exampleMode:n,usageMode:i,depth:r})}))}ComponentsRenderer.propTypes={children:u.a.node.isRequired},Components.propTypes={components:u.a.array.isRequired,depth:u.a.number.isRequired,exampleMode:u.a.string.isRequired,usageMode:u.a.string.isRequired};function SectionRenderer(e){var t=e.classes,r=e.name,n=e.slug,i=e.content,o=e.components,a=e.sections,l=e.depth,u=e.description,c=e.pagePerSection;return s.a.createElement("section",{className:t.root},r&&s.a.createElement(SectionHeading,{depth:l,id:n,slotName:"sectionToolbar",pagePerSection:c,slotProps:e},r),u&&s.a.createElement(g.a,{text:u}),i,a,o)}SectionRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string,description:u.a.string,slug:u.a.string,filepath:u.a.string,content:u.a.node,components:u.a.node,sections:u.a.node,isolated:u.a.bool,depth:u.a.number.isRequired,pagePerSection:u.a.bool};var it=Object(c.a)(function styles(e){return{root:{marginBottom:e.space[4]}}})(SectionRenderer);function Section(e,t){var r=e.section,n=e.depth,i=t.displayMode,o=t.config.pagePerSection,a=r.name,l=r.slug,u=r.filepath,c=r.content,p=r.components,h=r.sections,f=r.description,d=r.exampleMode,g=r.usageMode,m=c&&s.a.createElement(Examples,{examples:c,name:a,exampleMode:d}),y=p&&s.a.createElement(Components,{usageMode:g,exampleMode:d,components:p,depth:n+1}),v=h&&s.a.createElement(Sections,{sections:h,depth:n+1});return s.a.createElement(it,{description:f,pagePerSection:o,name:a,slug:l,filepath:u,content:m,components:y,sections:v,isolated:i!==Fe.all,depth:n})}Section.propTypes={section:u.a.object.isRequired,depth:u.a.number.isRequired},Section.contextTypes={displayMode:u.a.string,config:u.a.object.isRequired};function SectionsRenderer(e){var t=e.classes,r=e.children;return s.a.createElement("section",{className:t.root},r)}SectionsRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var ot=Object(c.a)(function styles(){return{root:{}}})(SectionsRenderer);function Sections(e){var t=e.sections,r=e.depth;return s.a.createElement(ot,null,t.filter(function(e){return!e.href}).map(function(e,t){return s.a.createElement(Section,{key:t,section:e,depth:r})}))}Sections.propTypes={sections:u.a.array.isRequired,root:u.a.bool,depth:u.a.number.isRequired};var at=r(111);function WelcomeRenderer(e){var t=e.classes,r=e.patterns;return s.a.createElement("div",{className:t.root},s.a.createElement(g.a,{text:"\n# Welcome to React Styleguidist!\n\n**We couldnt find any components** using these patterns:\n\n"+r.map(function(e){return"- `"+e+"`"}).join("\n")+"\n\nCreate **styleguide.config.js** file in your project root directory like this:\n\n    module.exports = {\n      components: 'src/components/**/*.js'\n    };\n\nRead more in the [locating components guide]("+at.DOCS_COMPONENTS+").\n\t\t\t\t"}))}WelcomeRenderer.propTypes={classes:u.a.object.isRequired,patterns:u.a.array.isRequired};var st=Object(c.a)(function styles(e){var t=e.space;return{root:{maxWidth:e.maxWidth,margin:[[0,"auto"]],padding:t[4]}}})(WelcomeRenderer);function ErrorRenderer(e){var t=e.classes,r=e.error,n=e.info;return s.a.createElement("div",{className:t.root},s.a.createElement("pre",{className:t.stack},r.toString(),n.componentStack.toString()),s.a.createElement("div",{className:t.message},s.a.createElement("p",null,"This may be due to an error in a component you are overriding, or a bug in React Styleguidist."),s.a.createElement("p",null,"If you believe this is a bug,",s.a.createElement("a",{style:{color:"inherit"},href:"https://github.com/styleguidist/react-styleguidist/issues"},"please submit an issue"),".")))}ErrorRenderer.propTypes={classes:u.a.object.isRequired,error:u.a.object.isRequired,info:u.a.shape({componentStack:u.a.any.isRequired}).isRequired};var lt=Object(c.a)(function styles(e){var t=e.fontFamily,r=e.fontSize,n=e.color;return{root:{margin:e.space[2],lineHeight:1.2,fontSize:r.small},stack:{color:n.error,whiteSpace:"pre-wrap",fontFamily:t.monospace},message:{color:n.error,fontFamily:t.base}}})(ErrorRenderer);function NotFoundRenderer(e){var t=e.classes;return s.a.createElement("div",{className:t.root},s.a.createElement(g.a,{text:"\n# Page not found\nThe link you followed may be broken, or the page may have been removed.\n"}))}NotFoundRenderer.propTypes={classes:u.a.object.isRequired};var ut=Object(c.a)(function styles(e){return{root:{maxWidth:e.maxWidth,margin:[[0,"auto"]]}}})(NotFoundRenderer),ct=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function StyleGuide_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function StyleGuide_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function StyleGuide_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function StyleGuide_hasSidebar(e,t){return e===Fe.notFound||t&&e===Fe.all}var pt=function(e){function StyleGuide(){var e,t,r;StyleGuide_classCallCheck(this,StyleGuide);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=StyleGuide_possibleConstructorReturn(this,(e=StyleGuide.__proto__||Object.getPrototypeOf(StyleGuide)).call.apply(e,[this].concat(i))),r.state={error:!1,info:null},StyleGuide_possibleConstructorReturn(r,t)}return StyleGuide_inherits(StyleGuide,a["Component"]),ct(StyleGuide,[{key:"getChildContext",value:function getChildContext(){return{codeRevision:this.props.codeRevision,config:this.props.config,slots:this.props.slots,displayMode:this.props.displayMode}}},{key:"componentDidCatch",value:function componentDidCatch(e,t){this.setState({error:e,info:t})}},{key:"render",value:function render(){var e=this.props,t=e.config,r=e.sections,n=e.welcomeScreen,i=e.patterns,o=e.displayMode,a=e.allSections,l=e.pagePerSection;return this.state.error?s.a.createElement(lt,{error:this.state.error,info:this.state.info}):n?s.a.createElement(st,{patterns:i}):s.a.createElement(ce,{title:t.title,version:t.version,homepageUrl:at.HOMEPAGE,toc:s.a.createElement(ae,{sections:a,useRouterLinks:l}),hasSidebar:StyleGuide_hasSidebar(o,t.showSidebar)},r.length?s.a.createElement(Sections,{sections:r,depth:1}):s.a.createElement(ut,null))}}]),StyleGuide}();pt.propTypes={codeRevision:u.a.number.isRequired,config:u.a.object.isRequired,slots:u.a.object.isRequired,sections:u.a.array.isRequired,welcomeScreen:u.a.bool,patterns:u.a.array,displayMode:u.a.string,allSections:u.a.array.isRequired,pagePerSection:u.a.bool},pt.childContextTypes={codeRevision:u.a.number.isRequired,config:u.a.object.isRequired,slots:u.a.object.isRequired,displayMode:u.a.string},pt.defaultProps={displayMode:Fe.all};var ht=pt,ft=r(146),dt=r.n(ft);function getPageTitle(e,t,r){if(r===Fe.notFound)return"Page not found";if(e.length){if(r===Fe.component||r===Fe.example&&e[0].components)return dt()(e[0],"components.0.name",e[0].name)+"  "+t;if(r===Fe.section||r===Fe.example)return e[0].name+"  "+t}return t}var gt=r(205),mt=r.n(gt),yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function filterComponentsByExactName(e,t){return e.filter(function(e){return e.name===t})}function filterComponentsInSectionsByExactName_toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function filterComponentsInSectionsByExactName(e,t,r){var n=[];return e.forEach(function(e){if(e.components){var i=filterComponentsByExactName(e.components,t);i.length&&n.push({exampleMode:e.exampleMode,usageMode:e.usageMode,components:i})}e.sections&&r&&n.push.apply(n,filterComponentsInSectionsByExactName_toConsumableArray(filterComponentsInSectionsByExactName(e.sections,t,r)))}),n}var vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function filterSectionExamples(e,t){return vt({},e,{content:[e.content[t]]})}function findSection(e,t){var r=be()(e,{name:t});if(r)return r;for(var n=0;n<e.length;n++){var i=e[n];if(i.sections&&0!==i.sections.length){var o=findSection(i.sections,t);if(o)return o}}}var _t=r(148),bt=r.n(_t);function filterNumbers(e){return bt()(parseInt(e,10))&&""!==e}function getInfoFromHash(e){var t=Z(e,"#!/");if(t||Z(e,"#/")){var r=J(e,t?"#!/":"#/"),n=parseInt(r[r.length-1],10);return{isolate:t,hashArray:r.filter(filterNumbers),targetName:r[0],targetIndex:bt()(n)?void 0:n}}return{}}var xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function getRouteData(e,t,r){var n,i,o=getInfoFromHash(t),a=o.targetName,s=o.hashArray,l=o.targetIndex,u=o.isolate,c=u?Fe.example:Fe.all;if(r&&!a&&e[0]&&(a=e[0].name,s=[a]),a){var p=void 0;if(r)s.forEach(function(t,r){if((p=filterComponentsInSectionsByExactName(e,t,u)).length)e=p;else{var n=findSection(e,t);if(n){var i=!s[r+1];n.sectionDepth>0&&i&&(n=xt({},n,{sections:[],components:[]})),e=[n]}else e=[]}}),e.length||(c=Fe.notFound),a=s[s.length-1];else if((p=filterComponentsInSectionsByExactName(e,a,!0)).length)e=p,c=Fe.component;else{var h=findSection(e,a);e=h?[h]:[],c=Fe.section}if(mt()(l))if(1===p.length){var f=p[0].components;e=[xt({},p[0],{components:[(n=f[0],i=l,yt({},n,{props:yt({},n.props,{examples:[n.props.examples[i]]})}))]})],c=Fe.example}else 1===e.length&&(e=[filterSectionExamples(e[0],l)],c=Fe.example)}return{sections:e,displayMode:c}}var wt=r(206);function globalizeComponents(e){e.forEach(function(e){e.components&&e.components.forEach(wt.a),e.sections&&globalizeComponents(e.sections)})}var St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function processComponents_toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function processSections(e){return e.map(function(e){return Et({},e,{visibleName:e.name,components:(t=e.components||[],t.map(function(e){return St({},e,{name:e.props.displayName,visibleName:e.props.visibleName||e.props.displayName,props:St({},e.props,{examples:[].concat(processComponents_toConsumableArray(e.props.examples||[]),processComponents_toConsumableArray(e.props.example||[]))})})})),sections:processSections(e.sections||[])});var t})}function renderStyleguide(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.history,o=processSections(e.sections);globalizeComponents(o);var a=e.config,l=a.title,u=a.pagePerSection,c=getRouteData(o,r.hash,u),p=c.sections,h=c.displayMode;if(n.title=getPageTitle(p,l,h),"#/"===r.hash){var f=r.pathname+r.search;i.replaceState("",n.title,f)}return s.a.createElement(ht,{codeRevision:t,config:e.config,slots:V(e.config),welcomeScreen:e.welcomeScreen,patterns:e.patterns,sections:p,allSections:o,displayMode:h,pagePerSection:u})}var Pt=function render(){var e=r(366);o.a.render(renderStyleguide(e,0),document.getElementById(e.config.mountPointId))};window.addEventListener("hashchange",Pt),window.addEventListener("hashchange",function scrollToOrigin(){var e=window.location.hash;if(Z(e,"#/")||Z(e,"#!/")){var t=Q(e,"id"),r=0;if(t){var n=document.getElementById(t);n&&n.offsetTop&&(r=n.offsetTop)}window.scrollTo(0,r)}}),Pt()},function(e,t,r){"use strict";r.r(t);var n=r(15),i=r(9),o=r.n(i),a=r(7),s="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var l=a.t.fp64LowPart,u=[0,0,0,255],c={fp64:!1,getSourcePosition:{type:"accessor",value:function value(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function value(e){return e.targetPosition}},getSourceColor:{type:"accessor",value:u},getTargetColor:{type:"accessor",value:u},getStrokeWidth:{type:"accessor",value:1},widthScale:{type:"number",value:1,min:0},strokeWidth:{deprecatedFor:"getStrokeWidth"}},p=function(e){function ArcLayer(){return _classCallCheck(this,ArcLayer),e=this,!(t=_getPrototypeOf(ArcLayer).apply(this,arguments))||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t;var e,t}var t,r,i;return _inherits(ArcLayer,n["d"]),t=ArcLayer,(r=[{key:"getShaders",value:function getShaders(){return this.use64bitProjection()?{vs:"#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instancePositions.xy, instancePositions64Low.xy, projected_source_coord);\n  project_position_fp64(instancePositions.zw, instancePositions64Low.zw, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["project64","picking"]}:{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(vec3(instancePositions.xy, 0.0), instancePositions64Low.xy).xy;\n  vec2 target = project_position(vec3(instancePositions.zw, 0.0), instancePositions64Low.zw).xy;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low},instanceSourceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getSourceColor",defaultValue:u},instanceTargetColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getTargetColor",defaultValue:u},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(_get(_getPrototypeOf(ArcLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}this.state.model.setUniforms({widthScale:t.widthScale})}},{key:"_getModel",value:function _getModel(e){for(var t=[],r=0;r<50;r++)t=t.concat([r,-1,0,r,1,0]);var n=new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return n.setUniforms({numSegments:50}),n}},{key:"calculateInstancePositions",value:function calculateInstancePositions(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,l=!0,u=!1,c=void 0;try{for(var p,h=r[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var f=p.value,d=n(f),g=i(f);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=g[0],o[s+3]=g[1],s+=a}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"calculateInstancePositions64Low",value:function calculateInstancePositions64Low(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getSourcePosition,o=r.getTargetPosition,a=e.value,s=e.size,u=0,c=!0,p=!1,h=void 0;try{for(var f,d=n[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var g=f.value,m=i(g),y=o(g);a[u+0]=l(m[0]),a[u+1]=l(m[1]),a[u+2]=l(y[0]),a[u+3]=l(y[1]),u+=s}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}}else e.value=new Float32Array(4)}}])&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),ArcLayer}();p.layerName="ArcLayer",p.defaultProps=c;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function icon_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function icon_manager_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=o.a.LINEAR_MIPMAP_LINEAR,f=o.a.LINEAR,d=function noop(){};function resizeImage(e,t,r,n){var i=t.naturalWidth,o=t.naturalHeight;return r===i&&n===o?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,i,o,0,0,r,n),e.canvas)}function buildRowMapping(e,t,r){for(var n=0;n<t.length;n++){var i=t[n],o=i.icon,a=i.xOffset;e[o.url]=Object.assign({},o,{x:a,y:r})}}function buildMapping(e){for(var t=e.icons,r=e.buffer,n=e.maxCanvasWidth,i=0,o=0,a=0,s=[],l={},u=0;u<t.length;u++){var c=t[u];if(!l[c.url]){var p=c.height,h=c.width;i+h+r>n&&(buildRowMapping(l,s,o),i=0,o=a+o+r,a=0,s=[]),s.push({icon:c,xOffset:i}),i=i+h+r,a=Math.max(a,p)}}var f;return s.length>0&&buildRowMapping(l,s,o),{mapping:l,canvasHeight:(f=a+o+r,Math.pow(2,Math.ceil(Math.log2(f))))}}function getIcons(e,t){if(!e||!t)return null;var r={},n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=t(a.value);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");r[l.url]||(r[l.url]=l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}var g=function(){function IconManager(e,t){var r=t.onUpdate,n=void 0===r?d:r;icon_manager_classCallCheck(this,IconManager),this.gl=e,this.onUpdate=n,this._getIcon=null,this._mapping={},this._texture=null,this._autoPacking=!1,this._canvas=null}var e,t,r;return e=IconManager,(t=[{key:"getTexture",value:function getTexture(){return this._texture}},{key:"getIconMapping",value:function getIconMapping(e){var t=this._getIcon(e),r=this._autoPacking?t.url:t;return this._mapping[r]||{}}},{key:"setProps",value:function setProps(e){var t=e.autoPacking,r=e.iconAtlas,n=e.iconMapping,i=e.data,o=e.getIcon;void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),n&&(this._mapping=n),r&&this._updateIconAtlas(r),this._autoPacking&&(i||o)&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking({data:i,buffer:4,maxCanvasWidth:1024}))}},{key:"_updateIconAtlas",value:function _updateIconAtlas(e){var t,r=this;if(e instanceof a.i)e.setParameters((_defineProperty(t={},o.a.TEXTURE_MIN_FILTER,h),_defineProperty(t,o.a.TEXTURE_MAG_FILTER,f),t)),this._texture=e,this.onUpdate();else if("string"==typeof e){var n;Object(a.y)(this.gl,{urls:[e],parameters:(n={},_defineProperty(n,o.a.TEXTURE_MIN_FILTER,h),_defineProperty(n,o.a.TEXTURE_MAG_FILTER,f),n)}).then(function(e){var t=_slicedToArray(e,1)[0];r._texture=t,r.onUpdate()})}}},{key:"_updateAutoPacking",value:function _updateAutoPacking(e){var t=e.data,r=e.buffer,n=e.maxCanvasWidth,i=Object.values(getIcons(t,this._getIcon)||{});if(i.length>0){var o=buildMapping({icons:i,buffer:r,maxCanvasWidth:n}),s=o.mapping,l=o.canvasHeight;this._mapping=s,this._texture=new a.i(this.gl,{width:n,height:l}),this.onUpdate(),this._loadImages(i)}}},{key:"_loadImages",value:function _loadImages(e){var t=this,r=this._canvas.getContext("2d"),n=this._texture.height,i=!0,s=!1,l=void 0;try{for(var u,c=function _loop(){var e=u.value;Object(a.x)({urls:[e.url]}).then(function(i){var a,s=_slicedToArray(i,1)[0],l=t._mapping[e.url],u=l.x,c=l.y,p=l.width,d=l.height,g=resizeImage(r,s,p,d);t._texture.setSubImageData({data:g,x:u,y:n-c-d,width:p,height:d,parameters:(a={},_defineProperty(a,o.a.TEXTURE_MIN_FILTER,h),_defineProperty(a,o.a.TEXTURE_MAG_FILTER,f),_defineProperty(a,o.a.UNPACK_FLIP_Y_WEBGL,!0),a)}),t._texture.generateMipmap(),t.onUpdate()})},p=e[Symbol.iterator]();!(i=(u=p.next()).done);i=!0)c()}catch(e){s=!0,l=e}finally{try{i||null==p.return||p.return()}finally{if(s)throw l}}}}])&&icon_manager_defineProperties(e.prototype,t),r&&icon_manager_defineProperties(e,r),IconManager}();function icon_layer_typeof(e){return(icon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function icon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function icon_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function icon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function icon_layer_get(e,t,r){return(icon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=icon_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function icon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=icon_layer_getPrototypeOf(e)););return e}function icon_layer_getPrototypeOf(e){return(icon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function icon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&icon_layer_setPrototypeOf(e,t)}function icon_layer_setPrototypeOf(e,t){return(icon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var m=a.t.fp64LowPart,y=[0,0,0,255],v={iconAtlas:null,iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getIcon:{type:"accessor",value:function value(e){return e.icon}},getColor:{type:"accessor",value:y},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0}},_=function(e){function IconLayer(){return icon_layer_classCallCheck(this,IconLayer),e=this,!(t=icon_layer_getPrototypeOf(IconLayer).apply(this,arguments))||"object"!==icon_layer_typeof(t)&&"function"!=typeof t?icon_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return icon_layer_inherits(IconLayer,n["d"]),t=IconLayer,(r=[{key:"getShaders",value:function getShaders(){return{vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){var e=this;this.state={iconManager:new g(this.context.gl,{onUpdate:function onUpdate(){return e._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:o.a.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:y},instanceAngles:{size:1,transition:!0,accessor:"getAngle",defaultValue:0}})}},{key:"updateState",value:function updateState(e){var t=e.oldProps,r=e.props,n=e.changeFlags;icon_layer_get(icon_layer_getPrototypeOf(IconLayer.prototype),"updateState",this).call(this,{props:r,oldProps:t,changeFlags:n});var i=this.getAttributeManager(),o=this.state.iconManager,a=r.iconAtlas,s=r.iconMapping,l=r.data,u=r.getIcon,c=!1;if(a?(t.iconAtlas!==r.iconAtlas&&o.setProps({iconAtlas:a,autoPacking:!1}),t.iconMapping!==r.iconMapping&&(o.setProps({iconMapping:s}),c=!0)):o.setProps({autoPacking:!0}),(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getIcon))&&(o.setProps({data:l,getIcon:u}),c=!0),c&&(i.invalidate("instanceOffsets"),i.invalidate("instanceIconFrames"),i.invalidate("instanceColorModes")),r.fp64!==t.fp64){var p=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(p)}),i.invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props.sizeScale,n=this.state.iconManager.getTexture();n&&this.state.model.render(Object.assign({},t,{iconsTexture:n,iconsTextureDim:[n.width,n.height],sizeScale:r}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_onUpdate",value:function _onUpdate(){this.setNeedsRedraw()}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=m(h[0]),o[a++]=m(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}},{key:"calculateInstanceOffsets",value:function calculateInstanceOffsets(e){var t=this.props.data,r=this.state.iconManager,n=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=r.getIconMapping(c);n[i++]=p.width/2-p.anchorX||0,n[i++]=p.height/2-p.anchorY||0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"calculateInstanceColorMode",value:function calculateInstanceColorMode(e){var t=this.props.data,r=this.state.iconManager,n=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=r.getIconMapping(c).mask;n[i++]=p?1:0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"calculateInstanceIconFrames",value:function calculateInstanceIconFrames(e){var t=this.props.data,r=this.state.iconManager,n=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=r.getIconMapping(c);n[i++]=p.x||0,n[i++]=p.y||0,n[i++]=p.width||0,n[i++]=p.height||0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}])&&icon_layer_defineProperties(t.prototype,r),i&&icon_layer_defineProperties(t,i),IconLayer}();_.layerName="IconLayer",_.defaultProps=v;function line_layer_typeof(e){return(line_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function line_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function line_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function line_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function line_layer_get(e,t,r){return(line_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=line_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function line_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=line_layer_getPrototypeOf(e)););return e}function line_layer_getPrototypeOf(e){return(line_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function line_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&line_layer_setPrototypeOf(e,t)}function line_layer_setPrototypeOf(e,t){return(line_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var b=a.t.fp64LowPart,x={fp64:!1,getSourcePosition:{type:"accessor",value:function value(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function value(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getStrokeWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getStrokeWidth"}},w=function(e){function LineLayer(){return line_layer_classCallCheck(this,LineLayer),e=this,!(t=line_layer_getPrototypeOf(LineLayer).apply(this,arguments))||"object"!==line_layer_typeof(t)&&"function"!=typeof t?line_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return line_layer_inherits(LineLayer,n["d"]),t=LineLayer,(r=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(line_layer_get(line_layer_getPrototypeOf(LineLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function calculateInstanceSourceTargetPositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getSourcePosition,o=r.getTargetPosition,a=e.value,s=e.size,l=0,u=!0,c=!1,p=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value,g=i(d),m=o(d);a[l+0]=b(g[0]),a[l+1]=b(g[1]),a[l+2]=b(m[0]),a[l+3]=b(m[1]),l+=s}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}else e.value=new Float32Array(4)}}])&&line_layer_defineProperties(t.prototype,r),i&&line_layer_defineProperties(t,i),LineLayer}();w.layerName="LineLayer",w.defaultProps=x;function point_cloud_layer_typeof(e){return(point_cloud_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function point_cloud_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function point_cloud_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function point_cloud_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function point_cloud_layer_get(e,t,r){return(point_cloud_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=point_cloud_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function point_cloud_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=point_cloud_layer_getPrototypeOf(e)););return e}function point_cloud_layer_getPrototypeOf(e){return(point_cloud_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function point_cloud_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&point_cloud_layer_setPrototypeOf(e,t)}function point_cloud_layer_setPrototypeOf(e,t){return(point_cloud_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var S=a.t.fp64LowPart,E=[0,0,0,255],P=[0,0,1],C={radiusPixels:{type:"number",min:0,value:10},fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getNormal:{type:"accessor",value:P},getColor:{type:"accessor",value:E},lightSettings:{}},T=function(e){function PointCloudLayer(){return point_cloud_layer_classCallCheck(this,PointCloudLayer),e=this,!(t=point_cloud_layer_getPrototypeOf(PointCloudLayer).apply(this,arguments))||"object"!==point_cloud_layer_typeof(t)&&"function"!=typeof t?point_cloud_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return point_cloud_layer_inherits(PointCloudLayer,n["d"]),t=PointCloudLayer,(r=[{key:"getShaders",value:function getShaders(e){return{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.), position_worldspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = lighting_getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:P},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:E}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(point_cloud_layer_get(point_cloud_layer_getPrototypeOf(PointCloudLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props.radiusPixels;this.state.model.render(Object.assign({},t,{radiusPixels:r}))}},{key:"_getModel",value:function _getModel(e){for(var t=[],r=0;r<3;r++){var n=r/3*Math.PI*2;t.push(2*Math.cos(n),2*Math.sin(n),0)}return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=S(h[0]),o[a++]=S(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&point_cloud_layer_defineProperties(t.prototype,r),i&&point_cloud_layer_defineProperties(t,i),PointCloudLayer}();T.layerName="PointCloudLayer",T.defaultProps=C;function scatterplot_layer_typeof(e){return(scatterplot_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function scatterplot_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function scatterplot_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function scatterplot_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function scatterplot_layer_get(e,t,r){return(scatterplot_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=scatterplot_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function scatterplot_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=scatterplot_layer_getPrototypeOf(e)););return e}function scatterplot_layer_getPrototypeOf(e){return(scatterplot_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function scatterplot_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&scatterplot_layer_setPrototypeOf(e,t)}function scatterplot_layer_setPrototypeOf(e,t){return(scatterplot_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var k=a.t.fp64LowPart,O=[0,0,0,255],A={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function value(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:O},getLineColor:{type:"accessor",value:O},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},I=function(e){function ScatterplotLayer(){return scatterplot_layer_classCallCheck(this,ScatterplotLayer),e=this,!(t=scatterplot_layer_getPrototypeOf(ScatterplotLayer).apply(this,arguments))||"object"!==scatterplot_layer_typeof(t)&&"function"!=typeof t?scatterplot_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return scatterplot_layer_inherits(ScatterplotLayer,n["d"]),t=ScatterplotLayer,(r=[{key:"getShaders",value:function getShaders(e){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  \n  // Multiply out line width and clamp to limits\n  float lineWidth = clamp(\n    project_scale(lineWidthScale * instanceLineWidths), \n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += stroked * lineWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidth / outerRadiusPixels;\n  \n  vec3 offset = positions * outerRadiusPixels;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  \n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:o.a.UNSIGNED_BYTE,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:o.a.UNSIGNED_BYTE,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(scatterplot_layer_get(scatterplot_layer_getPrototypeOf(ScatterplotLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props,n=r.radiusScale,i=r.radiusMinPixels,o=r.radiusMaxPixels,a=r.stroked,s=r.filled,l=r.lineWidthScale,u=r.lineWidthMinPixels,c=r.lineWidthMaxPixels;this.state.model.render(Object.assign({},t,{stroked:a?1:0,filled:s,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthScale:l,lineWidthMinPixels:u,lineWidthMaxPixels:c}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=k(h[0]),o[a++]=k(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&scatterplot_layer_defineProperties(t.prototype,r),i&&scatterplot_layer_defineProperties(t,i),ScatterplotLayer}();I.layerName="ScatterplotLayer",I.defaultProps=A;function screen_grid_layer_typeof(e){return(screen_grid_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function screen_grid_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function screen_grid_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function screen_grid_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function screen_grid_layer_get(e,t,r){return(screen_grid_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=screen_grid_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function screen_grid_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=screen_grid_layer_getPrototypeOf(e)););return e}function screen_grid_layer_getPrototypeOf(e){return(screen_grid_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function screen_grid_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&screen_grid_layer_setPrototypeOf(e,t)}function screen_grid_layer_setPrototypeOf(e,t){return(screen_grid_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var R=n.h.defaultColorRange,M=[0,0,0,0],L=[0,255,0,255],j=["minColor","maxColor","colorRange","colorDomain"],D={cellSizePixels:{value:100,min:1},cellMarginPixels:{value:2,min:0,max:5},colorDomain:null,colorRange:R,getPosition:{type:"accessor",value:function value(e){return e.position}},getWeight:{type:"accessor",value:function value(e){return[1,0,0]}},gpuAggregation:!0,aggregation:"SUM"},F=function(e){function ScreenGridLayer(){return screen_grid_layer_classCallCheck(this,ScreenGridLayer),e=this,!(t=screen_grid_layer_getPrototypeOf(ScreenGridLayer).apply(this,arguments))||"object"!==screen_grid_layer_typeof(t)&&"function"!=typeof t?screen_grid_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return screen_grid_layer_inherits(ScreenGridLayer,n["d"]),t=ScreenGridLayer,(r=[{key:"getShaders",value:function getShaders(){var e=Object(a.w)(this.context.gl)?{vs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-vertex-shader\n#define RANGE_COUNT 6\n\nin vec3 vertices;\nin vec3 instancePositions;\nin vec4 instanceCounts;\nin vec3 instancePickingColors;\n\nlayout(std140) uniform;\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform AggregationData\n{\n  vec4 maxCount;\n} aggregationData;\n\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nout vec4 vColor;\nout float vSampleCount;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  vSampleCount = instanceCounts.a;\n\n  float weight = instanceCounts.r ;\n  float maxWeight = aggregationData.maxCount.r;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-fragment-shader\n\nprecision highp float;\n\nin vec4 vColor;\nin float vSampleCount;\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vSampleCount <= 0.0) {\n    discard;\n  }\n  fragColor = vColor;\n\n  fragColor = picking_filterColor(fragColor);\n}\n"}:{vs:"#define SHADER_NAME screen-grid-layer-vertex-shader-webgl1\n#define RANGE_COUNT 6\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute vec4 instanceCounts;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float maxWeight;\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nvarying vec4 vColor;\nvarying float vSampleCount;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  vSampleCount = instanceCounts.a;\n\n  float weight = instanceCounts.r;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#define SHADER_NAME screen-grid-layer-fragment-shader-webgl1\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float vSampleCount;\n\nvoid main(void) {\n  if (vSampleCount <= 0.0) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  gl_FragColor = picking_filterColor(gl_FragColor);\n}\n"};return e.modules=["picking"],e}},{key:"initializeState",value:function initializeState(){var e=this.getAttributeManager(),t=this.context.gl;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCounts:{size:4,transition:!0,accessor:["getPosition","getWeight"],update:this.calculateInstanceCounts,noAlloc:!0}});var r={id:"".concat(this.id,"-aggregator"),shaderCache:this.context.shaderCache},i=this._getMaxCountBuffer(t),o={color:{size:1,operation:n.a.SUM,needMax:!0,maxBuffer:i}};this.setState({model:this._getModel(t),gpuGridAggregator:new n.f(t,r),maxBuffer:i,weights:o,aggregationResults:null}),this._setupUniformBuffer()}},{key:"shouldUpdateState",value:function shouldUpdateState(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function updateState(e){screen_grid_layer_get(screen_grid_layer_getPrototypeOf(ScreenGridLayer.prototype),"updateState",this).call(this,e),this._updateUniforms(e),e.changeFlags.dataChanged&&this._processData();var t=this._getAggregationChangeFlags(e);t&&this._updateAggregation(t)}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.context.gl,n=this.props.parameters,i=void 0===n?{}:n,s=this.props.minColor||M,l=this.props.maxColor||L,u=this.props.colorDomain||[1,0],c=this.state,p=c.model,h=c.maxBuffer,f=c.cellScale,d=c.shouldUseMinMax,g=c.colorRange,m=c.maxWeight,y={minColor:s,maxColor:l,cellScale:f,colorRange:g,colorDomain:u,shouldUseMinMax:d};Object(a.w)(r)?h.bind({target:o.a.UNIFORM_BUFFER}):y.maxWeight=m,t=Object.assign(y,t),p.draw({uniforms:t,parameters:Object.assign({depthTest:!1,depthMask:!1},i)}),Object(a.w)(r)&&h.unbind()}},{key:"calculateInstancePositions",value:function calculateInstancePositions(e,t){for(var r=t.numInstances,n=this.context.viewport,i=n.width,o=n.height,a=this.props.cellSizePixels,s=this.state.numCol,l=e.value,u=e.size,c=0;c<r;c++){var p=c%s,h=Math.floor(c/s);l[c*u+0]=p*a/i*2-1,l[c*u+1]=1-h*a/o*2,l[c*u+2]=0}}},{key:"calculateInstanceCounts",value:function calculateInstanceCounts(e,t){t.numInstances;var r=this.state.aggregationBuffer;e.update({buffer:r})}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,r=(e.mode,t.index);if(r>=0){var i=this.state.aggregationResults;i.aggregationData=i.aggregationData||this.state.aggregationBuffer.getData(),i.maxData=i.maxData||this.state.maxBuffer.getData();var o=i.aggregationData,a=i.maxData;t.object=n.f.getAggregationData({aggregationData:o,maxData:a,pixelIndex:r})}return t}},{key:"_getAggregationChangeFlags",value:function _getAggregationChangeFlags(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=r.cellSizePixels!==t.cellSizePixels||r.cellMarginPixels!==t.cellMarginPixels,o=n.dataChanged||r.aggregation!==t.aggregation,a=n.viewportChanged;return i||o||a?{cellSizeChanged:i,dataChanged:o,viewportChanged:a}:null}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_getMaxCountBuffer",value:function _getMaxCountBuffer(e){return new a.b(e,{bytes:16,size:4,index:0})}},{key:"_getWeight",value:function _getWeight(e){var t=(0,this.props.getWeight)(e);return Array.isArray(t)?t:[t,0,0]}},{key:"_processData",value:function _processData(){var e,t=this.props,r=t.data,n=t.getPosition,i=[],o=[],a=this.state.weights,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value,f=n(h);i.push(f[0]),i.push(f[1]),o.push.apply(o,_arrayWithoutHoles(e=this._getWeight(h))||_iterableToArray(e)||_nonIterableSpread())}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}a.color.values=o,this.setState({positions:i})}},{key:"_setupUniformBuffer",value:function _setupUniformBuffer(){var e=this.context.gl;if(Object(a.w)(e)){var t=this.state.model.program.handle,r=e.getUniformBlockIndex(t,"AggregationData");e.uniformBlockBinding(t,r,0)}}},{key:"_shouldUseMinMax",value:function _shouldUseMinMax(){var e=this.props,t=e.minColor,r=e.maxColor,i=e.colorDomain,o=e.colorRange;return t||r?(n.i.deprecated("ScreenGridLayer props: minColor and maxColor","colorRange, colorDomain")(),!0):!i&&!o}},{key:"_updateAggregation",value:function _updateAggregation(e){var t=this.getAttributeManager();(e.cellSizeChanged||e.viewportChanged)&&(this._updateGridParams(),t.invalidateAll());var r=this.props,i=r.cellSizePixels,o=r.gpuAggregation,a=this.state,s=a.positions,l=a.weights,u=this.context.viewport;l.color.operation=n.a[this.props.aggregation.toUpperCase()]||n.a.SUM;var c=!1,p=null;this.context.viewport instanceof n.e?c=!0:(c=!1,p=u.pixelProjectionMatrix);var h=this.state.gpuGridAggregator.run({positions:s,weights:l,cellSize:[i,i],viewport:u,changeFlags:e,useGPU:o,projectPoints:c,gridTransformMatrix:p}),f=h.color.maxData&&Number.isFinite(h.color.maxData[0])?h.color.maxData[0]:0,d={aggregationData:h.color.aggregationData,maxData:h.color.maxData};this.setState({aggregationResults:d,maxWeight:f}),t.invalidate("instanceCounts")}},{key:"_updateUniforms",value:function _updateUniforms(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i={};if(j.some(function(e){return t[e]!==r[e]})&&(i.shouldUseMinMax=this._shouldUseMinMax()),t.colorRange!==r.colorRange){var o=[];r.colorRange.forEach(function(e){o.push(e[0],e[1],e[2],e[3]||255)}),i.colorRange=o}if(t.cellMarginPixels!==r.cellMarginPixels||t.cellSizePixels!==r.cellSizePixels||n.viewportChanged){var a=this.context.viewport,s=a.width,l=a.height,u=this.props,c=u.cellSizePixels,p=u.cellMarginPixels,h=c>p?p:0;i.cellScale=new Float32Array([(c-h)/s*2,-(c-h)/l*2,1])}this.setState(i)}},{key:"_updateGridParams",value:function _updateGridParams(){var e=this.context.viewport,t=e.width,r=e.height,n=this.props.cellSizePixels,i=this.context.gl,s=Math.ceil(t/n),l=Math.ceil(r/n),u=s*l,c=4*u*4,p=this.state.aggregationBuffer;p&&p.delete(),p=new a.b(i,{size:4,bytes:c,type:o.a.FLOAT,instanced:1}),this.state.weights.color.aggregationBuffer=p,this.setState({numCol:s,numRow:l,numInstances:u,aggregationBuffer:p})}}])&&screen_grid_layer_defineProperties(t.prototype,r),i&&screen_grid_layer_defineProperties(t,i),ScreenGridLayer}();F.layerName="ScreenGridLayer",F.defaultProps=D;function grid_cell_layer_typeof(e){return(grid_cell_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function grid_cell_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function grid_cell_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function grid_cell_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function grid_cell_layer_get(e,t,r){return(grid_cell_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=grid_cell_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function grid_cell_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=grid_cell_layer_getPrototypeOf(e)););return e}function grid_cell_layer_getPrototypeOf(e){return(grid_cell_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function grid_cell_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&grid_cell_layer_setPrototypeOf(e,t)}function grid_cell_layer_setPrototypeOf(e,t){return(grid_cell_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var N=a.t.fp64LowPart,z=[255,0,255,255],B={cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getElevation:{type:"accessor",value:1e3},getColor:{type:"accessor",value:z},lightSettings:{}},U=function(e){function GridCellLayer(){return grid_cell_layer_classCallCheck(this,GridCellLayer),e=this,!(t=grid_cell_layer_getPrototypeOf(GridCellLayer).apply(this,arguments))||"object"!==grid_cell_layer_typeof(t)&&"function"!=typeof t?grid_cell_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return grid_cell_layer_inherits(GridCellLayer,n["d"]),t=GridCellLayer,(r=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float finalCellSize = project_scale(cellSize) * mix(1.0, 0.0, noRender);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // cube geometry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec3 extrudedPosition = vec3(instancePositions.xy, elevation);\n  vec2 extrudedPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(\n    (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n    (positions.y * coverage - 1.0) / 2.0 * finalCellSize,\n    1.0);\n\n  // extrude positions\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(extrudedPosition, extrudedPosition64xyLow, offset, position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME grid-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:z}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(grid_cell_layer_get(grid_cell_layer_getPrototypeOf(GridCellLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.c,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props,n=r.cellSize,i=r.extruded,o=r.elevationScale,a=r.coverage;this.state.model.render(Object.assign({},t,{cellSize:n,extruded:i,elevationScale:o,coverage:a}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=N(h[0]),o[a++]=N(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&grid_cell_layer_defineProperties(t.prototype,r),i&&grid_cell_layer_defineProperties(t,i),GridCellLayer}();U.layerName="GridCellLayer",U.defaultProps=B;var V=6378e3;function pointToDensityGridData(e,t,r){var n=_pointsToGridHashing(e,t,r),i=n.gridHash,o=n.gridOffset;return{gridOffset:o,layerData:_getGridLayerDataFromGridHash(i,o)}}function _pointsToGridHashing(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=1/0,o=-1/0,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){e=n(u.value)[1],Number.isFinite(e)&&(i=e<i?e:i,o=e>o?e:o)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var p=_calculateGridLatLonOffset(r,(i+o)/2);if(p.xOffset<=0||p.yOffset<=0)return{gridHash:{},gridOffset:p};var h={},f=!0,d=!1,g=void 0;try{for(var m,y=t[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){var v=m.value,_=n(v)[1],b=n(v)[0];if(Number.isFinite(_)&&Number.isFinite(b)){var x=Math.floor((_+90)/p.yOffset),w=Math.floor((b+180)/p.xOffset),S="".concat(x,"-").concat(w);h[S]=h[S]||{count:0,points:[]},h[S].count+=1,h[S].points.push(v)}}}catch(e){d=!0,g=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw g}}return{gridHash:h,gridOffset:p}}function _getGridLayerDataFromGridHash(e,t){return Object.keys(e).reduce(function(r,n,i){var o=n.split("-"),a=parseInt(o[0],10),s=parseInt(o[1],10);return r.push(Object.assign({index:i,position:[t.xOffset*s-180,t.yOffset*a-90]},e[n])),r},[])}function _calculateGridLatLonOffset(e,t){var r;return{yOffset:e/V*(180/Math.PI),xOffset:(r=t,e/V*(180/Math.PI)/Math.cos(r*Math.PI/180))}}function grid_layer_typeof(e){return(grid_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function grid_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function grid_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function grid_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function grid_layer_getPrototypeOf(e){return(grid_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function grid_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&grid_layer_setPrototypeOf(e,t)}function grid_layer_setPrototypeOf(e,t){return(grid_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var q=n.h.BinSorter,G=n.h.defaultColorRange,W=n.h.getQuantizeScale,H=n.h.getLinearScale;function nop(){}var X={colorDomain:null,colorRange:G,getColorValue:{type:"accessor",value:function value(e){return e.length}},lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},onSetColorDomain:nop,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:function value(e){return e.length}},elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:1,onSetElevationDomain:nop,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:function value(e){return e.position}},extruded:!1,fp64:!1,lightSettings:{}},K=function(e){function GridLayer(){return grid_layer_classCallCheck(this,GridLayer),e=this,!(t=grid_layer_getPrototypeOf(GridLayer).apply(this,arguments))||"object"!==grid_layer_typeof(t)&&"function"!=typeof t?grid_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return grid_layer_inherits(GridLayer,n["b"]),t=GridLayer,(r=[{key:"initializeState",value:function initializeState(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:nop,elevationScaleFunc:nop,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function updateState(e){var t=this,r=e.oldProps,n=e.props,i=e.changeFlags,o=this.needsReProjectPoints(r,n,i);i.dataChanged||o?this.getLayerData():(this.getDimensionChanges(r,n)||[]).forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function needsReProjectPoints(e,t,r){return e.cellSize!==t.cellSize||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPosition)}},{key:"getDimensionUpdaters",value:function getDimensionUpdaters(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function getDimensionChanges(e,t){var r=this.state.dimensionUpdaters,n=[];for(var i in r){var o=r[i].find(function(r){return r.triggers.some(function(r){return e[r]!==t[r]})});o&&n.push(o.updater)}return n.length?n:null}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,r=this.state,n=r.sortedColorBins,i=r.sortedElevationBins,o=null;if(t.picked&&t.index>-1){var a=this.state.layerData[t.index],s=n.binMap[a.index]&&n.binMap[a.index].value,l=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:l},a)}return Object.assign(t,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this,t=this.state.dimensionUpdaters,r={},n=function _loop(n){r[n]={};var i=!0,o=!1,a=void 0;try{for(var s,l=t[n][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){s.value.triggers.forEach(function(t){r[n][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}};for(var i in t)n(i);return r}},{key:"getLayerData",value:function getLayerData(){var e=this.props,t=pointToDensityGridData(e.data,e.cellSize,e.getPosition).layerData;this.setState({layerData:t}),this.getSortedBins()}},{key:"getValueDomain",value:function getValueDomain(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function getSortedBins(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function getSortedColorBins(){var e=this.props.getColorValue,t=new q(this.state.layerData||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function getSortedElevationBins(){var e=this.props.getElevationValue,t=new q(this.state.layerData||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function getColorValueDomain(){var e=this.props,t=e.lowerPercentile,r=e.upperPercentile,n=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,r]),"function"==typeof n&&n(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function getElevationValueDomain(){var e=this.props,t=e.elevationLowerPercentile,r=e.elevationUpperPercentile,n=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,r]),"function"==typeof n&&n(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function getColorScale(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=W(t,e)}},{key:"getElevationScale",value:function getElevationScale(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=H(t,e)}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.state,r=t.sortedColorBins,n=t.colorScaleFunc,i=t.colorValueDomain,o=r.binMap[e.index]&&r.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?n(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function _onGetSublayerElevation(e){var t=this.state,r=t.sortedElevationBins,n=t.elevationScaleFunc,i=t.elevationValueDomain,o=r.binMap[e.index]&&r.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?n(o):-1}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.elevationScale,r=e.fp64,n=e.extruded,i=e.cellSize,o=e.coverage,a=e.lightSettings,s=e.transitions;return new(this.getSubLayerClass("grid-cell",U))({fp64:r,cellSize:i,coverage:o,lightSettings:a,elevationScale:t,extruded:n,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:s&&{getColor:s.getColorValue,getElevation:s.getElevationValue}},this.getSubLayerProps({id:"grid-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.layerData})}}])&&grid_layer_defineProperties(t.prototype,r),i&&grid_layer_defineProperties(t,i),GridLayer}();K.layerName="GridLayer",K.defaultProps=X;function hexagon_cell_layer_typeof(e){return(hexagon_cell_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hexagon_cell_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hexagon_cell_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hexagon_cell_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hexagon_cell_layer_get(e,t,r){return(hexagon_cell_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=hexagon_cell_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function hexagon_cell_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hexagon_cell_layer_getPrototypeOf(e)););return e}function hexagon_cell_layer_getPrototypeOf(e){return(hexagon_cell_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hexagon_cell_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hexagon_cell_layer_setPrototypeOf(e,t)}function hexagon_cell_layer_setPrototypeOf(e,t){return(hexagon_cell_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Z=a.t.fp64LowPart,Y=[255,0,255,255],J={hexagonVertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getCentroid:{type:"accessor",value:function value(e){return e.centroid}},getColor:{type:"accessor",value:Y},getElevation:{type:"accessor",value:1e3},lightSettings:{}},Q=function(e){function HexagonCellLayer(){return hexagon_cell_layer_classCallCheck(this,HexagonCellLayer),e=this,!(t=hexagon_cell_layer_getPrototypeOf(HexagonCellLayer).apply(this,arguments))||"object"!==hexagon_cell_layer_typeof(t)&&"function"!=typeof t?hexagon_cell_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return hexagon_cell_layer_inherits(HexagonCellLayer,n["d"]),t=HexagonCellLayer,(r=[{key:"getShaders",value:function getShaders(){return{vs:"\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec2 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations * (positions.z + 0.5) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float dotRadius = project_scale(radius) * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec3 centroidPosition = vec3(instancePositions, elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(rotationMatrix * positions.xy * dotRadius, 0.);\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, offset, position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = vec3(rotationMatrix * normals.xy, normals.z);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:2,transition:!0,accessor:"getCentroid"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:Y}})}},{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(hexagon_cell_layer_get(hexagon_cell_layer_getPrototypeOf(HexagonCellLayer.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}t.hexagonVertices===r.hexagonVertices&&t.radius===r.radius&&t.angle===r.angle||this.updateRadiusAngle()}},{key:"updateRadiusAngle",value:function updateRadiusAngle(){var e=this.props,t=e.angle,r=e.radius,i=this.props.hexagonVertices;if(Array.isArray(i)){i.length<6&&n.i.error("HexagonCellLayer: hexagonVertices needs to be an array of 6 points")();var o=this.props.hexagonVertices,a=o[0],s=o[3],l=this.context.viewport.getDistanceScales().pixelsPerMeter,u=this.projectFlat(a),c=this.projectFlat(s),p=u[0]-c[0],h=u[1]-c[1],f=Math.sqrt(p*p+h*h);t=Math.acos(p/f)*-Math.sign(h)+Math.PI/2,r=f/2/l[0]}this.setState({angle:t,radius:r})}},{key:"getCylinderGeometry",value:function getCylinderGeometry(e){return new a.d({radius:e,topRadius:e,bottomRadius:e,topCap:!0,bottomCap:!0,height:1,verticalAxis:"z",nradial:6,nvertical:1})}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props,n=r.elevationScale,i=r.extruded,o=r.coverage,a=this.state,s=a.radius,l=a.angle;this.state.model.render(Object.assign({},t,{radius:s,angle:l,extruded:i,coverage:o,elevationScale:n}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getCentroid,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=Z(h[0]),o[a++]=Z(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&hexagon_cell_layer_defineProperties(t.prototype,r),i&&hexagon_cell_layer_defineProperties(t,i),HexagonCellLayer}();Q.layerName="HexagonCellLayer",Q.defaultProps=J;var $=Math.PI/3,ee=[0,$,2*$,3*$,4*$,5*$];function pointX(e){return e[0]}function pointY(e){return e[1]}var te=function(){var e,t,r,n=0,i=0,o=1,a=1,s=pointX,l=pointY;function hexbin(e){var n,i={},o=[],a=e.length;for(n=0;n<a;++n)if(!isNaN(c=+s.call(null,u=e[n],n,e))&&!isNaN(p=+l.call(null,u,n,e))){var u,c,p,h=Math.round(p/=r),f=Math.round(c=c/t-(1&h)/2),d=p-h;if(3*Math.abs(d)>1){var g=c-f,m=f+(c<f?-1:1)/2,y=h+(p<h?-1:1),v=c-m,_=p-y;g*g+d*d>v*v+_*_&&(f=m+(1&h?1:-1)/2,h=y)}var b=f+"-"+h,x=i[b];x?x.push(u):(o.push(x=i[b]=[u]),x.x=(f+(1&h)/2)*t,x.y=h*r)}return o}function hexagon(e){var t=0,r=0;return ee.map(function(n){var i=Math.sin(n)*e,o=-Math.cos(n)*e,a=i-t,s=o-r;return t=i,r=o,[a,s]})}return hexbin.hexagon=function(t){return"m"+hexagon(null==t?e:+t).join("l")+"z"},hexbin.centers=function(){for(var s=[],l=Math.round(i/r),u=Math.round(n/t),c=l*r;c<a+e;c+=r,++l)for(var p=u*t+(1&l)*t/2;p<o+t/2;p+=t)s.push([p,c]);return s},hexbin.mesh=function(){var t=hexagon(e).slice(0,4).join("l");return hexbin.centers().map(function(e){return"M"+e+"m"+t}).join("")},hexbin.x=function(e){return arguments.length?(s=e,hexbin):s},hexbin.y=function(e){return arguments.length?(l=e,hexbin):l},hexbin.radius=function(n){return arguments.length?(t=2*(e=+n)*Math.sin($),r=1.5*e,hexbin):e},hexbin.size=function(e){return arguments.length?(n=i=0,o=+e[0],a=+e[1],hexbin):[o-n,a-i]},hexbin.extent=function(e){return arguments.length?(n=+e[0][0],i=+e[0][1],o=+e[1][0],a=+e[1][1],hexbin):[[n,i],[o,a]]},hexbin.radius(1)};function getRadiusInPixel(e,t){return e*t.getDistanceScales().pixelsPerMeter[0]}function hexagon_layer_typeof(e){return(hexagon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hexagon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hexagon_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hexagon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hexagon_layer_getPrototypeOf(e){return(hexagon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hexagon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hexagon_layer_setPrototypeOf(e,t)}function hexagon_layer_setPrototypeOf(e,t){return(hexagon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var re=n.h.BinSorter,ne=n.h.getQuantizeScale,ie=n.h.getLinearScale;function hexagon_layer_nop(){}var oe={colorDomain:null,colorRange:n.h.defaultColorRange,getColorValue:{type:"accessor",value:function value(e){return e.length}},lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},onSetColorDomain:hexagon_layer_nop,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:function value(e){return e.length}},elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:hexagon_layer_nop,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function pointToHexbin(e,t){var r=e.data,n=e.radius,i=e.getPosition,o=getRadiusInPixel(n,t),a=[],s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;a.push(Object.assign({screenCoord:t.projectFlat(i(h))},h))}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return{hexagons:te().radius(o).x(function(e){return e.screenCoord[0]}).y(function(e){return e.screenCoord[1]})(a).map(function(e,r){return{centroid:t.unprojectFlat([e.x,e.y]),points:e,index:r}})}},getPosition:{type:"accessor",value:function value(e){return e.position}},fp64:!1,lightSettings:{}},ae=function(e){function HexagonLayer(){return hexagon_layer_classCallCheck(this,HexagonLayer),e=this,!(t=hexagon_layer_getPrototypeOf(HexagonLayer).apply(this,arguments))||"object"!==hexagon_layer_typeof(t)&&"function"!=typeof t?hexagon_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return hexagon_layer_inherits(HexagonLayer,n["b"]),t=HexagonLayer,(r=[{key:"initializeState",value:function initializeState(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:hexagon_layer_nop,elevationScaleFunc:hexagon_layer_nop,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function updateState(e){var t=this,r=e.oldProps,n=e.props,i=e.changeFlags,o=this.getDimensionChanges(r,n);i.dataChanged||this.needsReProjectPoints(r,n)?this.getHexagons():o&&o.forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function needsReProjectPoints(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function getDimensionUpdaters(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function getDimensionChanges(e,t){var r=this.state.dimensionUpdaters,n=[];for(var i in r){var o=r[i].find(function(r){return r.triggers.some(function(r){return e[r]!==t[r]})});o&&n.push(o.updater)}return n.length?n:null}},{key:"getHexagons",value:function getHexagons(){var e=this.props.hexagonAggregator,t=this.context.viewport,r=e(this.props,t),n=r.hexagons,i=r.hexagonVertices;this.setState({hexagons:n,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,r=this.state,n=r.sortedColorBins,i=r.sortedElevationBins,o=null;if(t.picked&&t.index>-1){var a=this.state.hexagons[t.index],s=n.binMap[a.index]&&n.binMap[a.index].value,l=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:l},a)}return Object.assign(t,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this,t=this.state.dimensionUpdaters,r={},n=function _loop(n){r[n]={};var i=!0,o=!1,a=void 0;try{for(var s,l=t[n][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){s.value.triggers.forEach(function(t){r[n][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}};for(var i in t)n(i);return r}},{key:"getValueDomain",value:function getValueDomain(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function getSortedBins(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function getSortedColorBins(){var e=this.props.getColorValue,t=new re(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function getSortedElevationBins(){var e=this.props.getElevationValue,t=new re(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function getColorValueDomain(){var e=this.props,t=e.lowerPercentile,r=e.upperPercentile,i=e.onSetColorDomain;t>r&&n.i.warn("HexagonLayer: lowerPercentile is bigger than upperPercentile")(),this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,r]),"function"==typeof i&&i(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function getElevationValueDomain(){var e=this.props,t=e.elevationLowerPercentile,r=e.elevationUpperPercentile,n=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,r]),"function"==typeof n&&n(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function getColorScale(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=ne(t,e)}},{key:"getElevationScale",value:function getElevationScale(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=ie(t,e)}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.state,r=t.sortedColorBins,n=t.colorScaleFunc,i=t.colorValueDomain,o=r.binMap[e.index]&&r.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?n(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function _onGetSublayerElevation(e){var t=this.state,r=t.sortedElevationBins,n=t.elevationScaleFunc,i=t.elevationValueDomain,o=r.binMap[e.index]&&r.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?n(o):-1}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.radius,r=e.elevationScale,n=e.extruded,i=e.coverage,o=e.lightSettings,a=e.fp64,s=e.transitions;return new(this.getSubLayerClass("hexagon-cell",Q))({fp64:a,radius:t,elevationScale:r,angle:Math.PI/2,extruded:n,coverage:i,lightSettings:o,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:s&&{getColor:s.getColorValue,getElevation:s.getElevationValue}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.hexagons,hexagonVertices:this.state.hexagonVertices})}}])&&hexagon_layer_defineProperties(t.prototype,r),i&&hexagon_layer_defineProperties(t,i),HexagonLayer}();function path_tesselator_typeof(e){return(path_tesselator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function path_tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function path_tesselator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function path_tesselator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function path_tesselator_getPrototypeOf(e){return(path_tesselator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function path_tesselator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&path_tesselator_setPrototypeOf(e,t)}function path_tesselator_setPrototypeOf(e,t){return(path_tesselator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}ae.layerName="HexagonLayer",ae.defaultProps=oe;var se=n.h.Tesselator,le=a.t.fp64LowPart,ue=function(e){function PathTesselator(e){var t,r,n=e.data,i=e.getGeometry,o=e.positionFormat,a=e.fp64;return path_tesselator_classCallCheck(this,PathTesselator),t=this,!(r=path_tesselator_getPrototypeOf(PathTesselator).call(this,{data:n,getGeometry:i,fp64:a,positionFormat:o,attributes:{startPositions:{size:3},endPositions:{size:3},leftDeltas:{size:3},rightDeltas:{size:3},startEndPositions64XyLow:{size:4,fp64Only:!0}}}))||"object"!==path_tesselator_typeof(r)&&"function"!=typeof r?path_tesselator_assertThisInitialized(t):r}var t,r,n;return path_tesselator_inherits(PathTesselator,se),t=PathTesselator,(r=[{key:"get",value:function get(e,t,r){if(this.attributes[e])return this.attributes[e];switch(e){case"strokeWidths":return this._updateAttribute({target:t,size:1,getValue:function getValue(e){return[r(e)]}});case"dashArrays":return this._updateAttribute({target:t,size:2,getValue:r});case"colors":return this._updateAttribute({target:t,size:4,getValue:function getValue(e){var t=r(e);return isNaN(t[3])&&(t[3]=255),t}});case"pickingColors":return this._updateAttribute({target:t,size:3,getValue:function getValue(e,t){return r(t)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(e){return Math.max(0,this.getPathLength(e)-1)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t){var r=this.attributes,n=r.startPositions,i=r.endPositions,o=r.leftDeltas,a=r.rightDeltas,s=r.startEndPositions64XyLow,l=this.fp64,u=t.geometrySize+1;if(!(u<2))for(var c,p=this.isClosed(e),h=this.getPointOnPath(e,0),f=this.getPointOnPath(e,1),d=p?this.getPointOnPath(e,u-2):h,g=t.vertexStart,m=1;m<u;g++,m++)(c=this.getPointOnPath(e,m+1))||(c=p?this.getPointOnPath(e,1):f),n[3*g]=h[0],n[3*g+1]=h[1],n[3*g+2]=h[2]||0,i[3*g]=f[0],i[3*g+1]=f[1],i[3*g+2]=f[2]||0,o[3*g]=h[0]-d[0],o[3*g+1]=h[1]-d[1],o[3*g+2]=h[2]-d[2]||0,a[3*g]=c[0]-f[0],a[3*g+1]=c[1]-f[1],a[3*g+2]=c[2]-f[2]||0,l&&(s[4*g]=le(h[0]),s[4*g+1]=le(h[1]),s[4*g+2]=le(f[0]),s[4*g+3]=le(f[1])),d=h,h=f,f=c}},{key:"getPathLength",value:function getPathLength(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function getPointOnPath(e,t){if(Number.isFinite(e[0])){var r=this.positionSize;return[e[t*r],e[t*r+1],3===r?e[t*r+2]:0]}return e[t]}},{key:"isClosed",value:function isClosed(e){var t=this.getPathLength(e),r=this.getPointOnPath(e,0),n=this.getPointOnPath(e,t-1);return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]}}])&&path_tesselator_defineProperties(t.prototype,r),n&&path_tesselator_defineProperties(t,n),PathTesselator}(),ce="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\n/*\n * vPathPosition represents the relative coordinates of the current fragment on the path segment.\n * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.\n * vPathPosition.y - position along the length of the path, between [0, L / width].\n */\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function path_layer_typeof(e){return(path_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function path_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function path_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function path_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function path_layer_get(e,t,r){return(path_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=path_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function path_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=path_layer_getPrototypeOf(e)););return e}function path_layer_getPrototypeOf(e){return(path_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function path_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&path_layer_setPrototypeOf(e,t)}function path_layer_setPrototypeOf(e,t){return(path_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var pe=[0,0,0,255],he={widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},fp64:!1,dashJustified:!1,getPath:{type:"accessor",value:function value(e){return e.path}},getColor:{type:"accessor",value:pe},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},fe={enter:function enter(e,t){return t.length?t.subarray(t.length-e.length):e}},de=function(e){function PathLayer(){return path_layer_classCallCheck(this,PathLayer),e=this,!(t=path_layer_getPrototypeOf(PathLayer).apply(this,arguments))||"object"!==path_layer_typeof(t)&&"function"!=typeof t?path_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return path_layer_inherits(PathLayer,n["d"]),t=PathLayer,(r=[{key:"getShaders",value:function getShaders(){return this.use64bitProjection()?{vs:"\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position 64bit\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  // Calculate prev position 64bit\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  // Calculate next position 64bit\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",fs:ce,modules:["project64","picking"]}:{vs:"#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = instanceStartPositions;\n  vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // In auto offset mode, add delta to low part of the positions for better precision\n    prevPosition64xyLow += mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy;\n  } else {\n    prevPosition += mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n  }\n  prevPosition = project_position(prevPosition, prevPosition64xyLow);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  currPosition = project_position(currPosition, currPosition64xyLow);\n\n  vec3 nextPosition = instanceEndPositions;\n  vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // In auto offset mode, add delta to low part of the positions for better precision\n    nextPosition64xyLow += mix(vec3(0.0), instanceRightDeltas, isEnd).xy;\n  } else {\n    nextPosition += mix(vec3(0.0), instanceRightDeltas, isEnd);\n  }\n  nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n",fs:ce,modules:["picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:fe,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0},instanceEndPositions:{size:3,transition:fe,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow,noAlloc:!0},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas,noAlloc:!0},instanceRightDeltas:{size:3,update:this.calculateRightDeltas,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:fe,update:this.calculateStrokeWidths,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,accessor:"getColor",transition:fe,update:this.calculateColors,defaultValue:pe},instancePickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors}}),this.setState({pathTesselator:new ue({})})}},{key:"updateState",value:function updateState(e){var t=e.oldProps,r=e.props,n=e.changeFlags;path_layer_get(path_layer_getPrototypeOf(PathLayer.prototype),"updateState",this).call(this,{props:r,oldProps:t,changeFlags:n});var i=this.getAttributeManager();if((n.dataChanged||r.fp64!==t.fp64||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath))&&(this.state.pathTesselator.updateGeometry({data:r.data,getGeometry:r.getPath,positionFormat:r.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:this.state.pathTesselator.instanceCount}),i.invalidateAll()),r.fp64!==t.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),i.invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props,n=r.rounded,i=r.miterLimit,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,l=r.dashJustified;this.state.model.render(Object.assign({},t,{jointType:Number(n),alignMode:Number(l),widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:s}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function calculateStartPositions(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("startPositions")}},{key:"calculateEndPositions",value:function calculateEndPositions(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("endPositions")}},{key:"calculateInstanceStartEndPositions64xyLow",value:function calculateInstanceStartEndPositions64xyLow(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.pathTesselator.get("startEndPositions64XyLow"):new Float32Array(4)}},{key:"calculateLeftDeltas",value:function calculateLeftDeltas(e){var t=this.state.pathTesselator;e.value=t.get("leftDeltas")}},{key:"calculateRightDeltas",value:function calculateRightDeltas(e){var t=this.state.pathTesselator;e.value=t.get("rightDeltas")}},{key:"calculateStrokeWidths",value:function calculateStrokeWidths(e){var t=this.props.getWidth,r=this.state.pathTesselator;e.bufferLayout=r.bufferLayout,e.value=r.get("strokeWidths",e.value,t)}},{key:"calculateDashArrays",value:function calculateDashArrays(e){var t=this.props.getDashArray,r=this.state.pathTesselator;e.value=r.get("dashArrays",e.value,t)}},{key:"calculateColors",value:function calculateColors(e){var t=this.props.getColor,r=this.state.pathTesselator;e.bufferLayout=r.bufferLayout,e.value=r.get("colors",e.value,t)}},{key:"calculatePickingColors",value:function calculatePickingColors(e){var t=this.state.pathTesselator;e.value=t.get("pickingColors",e.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function clearPickingColor(e){for(var t=this.decodePickingColor(e),r=this.state.bufferLayout,n=r[t],i=0,o=0;o<t;o++)i+=r[o];var a=this.getAttributeManager().attributes.instancePickingColors,s=a.value,l=i+n;s.fill(0,3*i,3*l),a.update({value:s})}}])&&path_layer_defineProperties(t.prototype,r),i&&path_layer_defineProperties(t,i),PathLayer}();de.layerName="PathLayer",de.defaultProps=he;var ge=r(210),me=r.n(ge);function validate(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function isSimple(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function isNestedRingClosed(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function isFlatRingClosed(e,t,r,n){for(var i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function copyNestedRing(e,t,r,n){for(var i=t,o=r.length,a=0;a<o;a++)for(var s=0;s<n;s++)e[i++]=r[a][s]||0;if(!isNestedRingClosed(r))for(var l=0;l<n;l++)e[i++]=r[0][l]||0;return i}function copyFlatRing(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=(o=o||r.length)-i;if(a<=0)return t;for(var s=t,l=0;l<a;l++)e[s++]=r[i+l];if(!isFlatRingClosed(r,n,i,o))for(var u=0;u<n;u++)e[s++]=r[i+u];return s}function getNestedVertexCount(e){return(isNestedRingClosed(e)?0:1)+e.length}function getFlatVertexCount(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return r>=(n=n||e.length)?0:(isFlatRingClosed(e,t,r,n)?0:1)+(n-r)/t}function getVertexCount(e,t){if(validate(e),e.positions){var r=e,n=r.positions,i=r.holeIndices;if(i){for(var o=0,a=0;a<=i.length;a++)o+=getFlatVertexCount(e.positions,t,i[a-1],i[a]);return o}e=n}if(Number.isFinite(e[0]))return getFlatVertexCount(e,t);if(!isSimple(e)){var s=0,l=!0,u=!1,c=void 0;try{for(var p,h=e[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){s+=getNestedVertexCount(p.value)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return s}return getNestedVertexCount(e)}function normalize(e,t,r){validate(e),r=r||getVertexCount(e,t);var n=new Float64Array(r*t),i=[];if(e.positions){var o=e,a=o.positions,s=o.holeIndices;if(s){for(var l=0,u=0;u<=s.length;u++)l=copyFlatRing(n,l,a,t,s[u-1],s[u]),i.push(l);return i.pop(),{positions:n,holeIndices:i}}e=a}if(Number.isFinite(e[0]))return copyFlatRing(n,0,e,t),{positions:n,holeIndices:null};if(!isSimple(e)){var c=0,p=!0,h=!1,f=void 0;try{for(var d,g=e[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){c=copyNestedRing(n,c,d.value,t),i.push(c)}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}return i.pop(),{positions:n,holeIndices:i}}return copyNestedRing(n,0,e,t),{positions:n,holeIndices:null}}function polygon_tesselator_typeof(e){return(polygon_tesselator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function polygon_tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function polygon_tesselator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function polygon_tesselator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function polygon_tesselator_getPrototypeOf(e){return(polygon_tesselator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function polygon_tesselator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&polygon_tesselator_setPrototypeOf(e,t)}function polygon_tesselator_setPrototypeOf(e,t){return(polygon_tesselator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ye=n.h.Tesselator,ve=a.t.fp64LowPart,_e=function(e){function PolygonTesselator(e){var t,r,n=e.data,i=e.getGeometry,o=e.fp64,a=e.positionFormat,s=e.IndexType,l=void 0===s?Uint32Array:s;return polygon_tesselator_classCallCheck(this,PolygonTesselator),t=this,!(r=polygon_tesselator_getPrototypeOf(PolygonTesselator).call(this,{data:n,getGeometry:i,fp64:o,positionFormat:a,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:l,size:1}}}))||"object"!==polygon_tesselator_typeof(r)&&"function"!=typeof r?polygon_tesselator_assertThisInitialized(t):r}var t,r,n;return polygon_tesselator_inherits(PolygonTesselator,ye),t=PolygonTesselator,(r=[{key:"get",value:function get(e,t,r){if("indices"===e)return this.attributes.indices.subarray(0,this.vertexCount);if(this.attributes[e])return this.attributes[e];switch(e){case"elevations":return this._updateAttribute({target:t,size:1,getValue:function getValue(e){return[r(e)]}});case"colors":return this._updateAttribute({target:t,size:4,getValue:function getValue(e){var t=r(e);return isNaN(t[3])&&(t[3]=255),t}});case"pickingColors":return this._updateAttribute({target:t,size:3,getValue:function getValue(e,t){return r(t)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(e){return getVertexCount(e,this.positionSize)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t){e=normalize(e,this.positionSize,t.geometrySize),this._updateIndices(e,t),this._updatePositions(e,t)}},{key:"_updateIndices",value:function _updateIndices(e,t){var r,n,i,o=t.geometryIndex,a=t.vertexStart,s=t.indexStart,l=this.attributes,u=this.indexLayout,c=this.typedArrayManager,p=l.indices,h=p.length,f=s,d=(r=e,n=this.positionSize,i=null,r.holeIndices&&(i=r.holeIndices.map(function(e){return e/n})),me()(r.positions,i,n));h<f+d.length&&(h=2*(f+d.length),p=c.allocate(p,h,{type:p.constructor,size:1,copy:!0}));for(var g=0;g<d.length;g++)p[f++]=d[g]+a;u[o]=d.length,l.indices=p}},{key:"_updatePositions",value:function _updatePositions(e,t){for(var r=t.vertexStart,n=t.geometrySize,i=this.attributes,o=i.positions,a=i.positions64xyLow,s=i.vertexValid,l=this.fp64,u=this.positionSize,c=r,p=e.positions,h=e.holeIndices,f=0;f<n;f++){var d=p[f*u],g=p[f*u+1],m=u>2?p[f*u+2]:0;o[3*c]=d,o[3*c+1]=g,o[3*c+2]=m,l&&(a[2*c]=ve(d),a[2*c+1]=ve(g)),s[c]=1,c++}if(h)for(var y=0;y<h.length;y++)s[r+h[y]-1]=0;s[r+n-1]=0}}])&&polygon_tesselator_defineProperties(t.prototype,r),n&&polygon_tesselator_defineProperties(t,n),PolygonTesselator}();function solid_polygon_layer_typeof(e){return(solid_polygon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function solid_polygon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function solid_polygon_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function solid_polygon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function solid_polygon_layer_get(e,t,r){return(solid_polygon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=solid_polygon_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function solid_polygon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=solid_polygon_layer_getPrototypeOf(e)););return e}function solid_polygon_layer_getPrototypeOf(e){return(solid_polygon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function solid_polygon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&solid_polygon_layer_setPrototypeOf(e,t)}function solid_polygon_layer_setPrototypeOf(e,t){return(solid_polygon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var be=[0,0,0,255],xe={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function value(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:be},getLineColor:{type:"accessor",value:be},lightSettings:{}},we={enter:function enter(e,t){return t.length?t.subarray(t.length-e.length):e}},Se=function(e){function SolidPolygonLayer(){return solid_polygon_layer_classCallCheck(this,SolidPolygonLayer),e=this,!(t=solid_polygon_layer_getPrototypeOf(SolidPolygonLayer).apply(this,arguments))||"object"!==solid_polygon_layer_typeof(t)&&"function"!=typeof t?solid_polygon_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return solid_polygon_layer_inherits(SolidPolygonLayer,n["d"]),t=SolidPolygonLayer,(r=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec2 vertexPositions;\nattribute float vertexValid;\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\nuniform bool isSideVertex;\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? lineColors : fillColors;\n\n  if (isSideVertex) {\n    pos = mix(positions, nextPositions, vertexPositions.x);\n    pos64xyLow = mix(positions64xyLow, nextPositions64xyLow, vertexPositions.x);\n    isValid = vertexValid;\n  } else {\n    pos = positions;\n    pos64xyLow = positions64xyLow;\n    isValid = 1.0;\n  }\n  if (extruded) {\n    pos.z += elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded) {\n    if (isSideVertex) {\n      normal = vec3(positions.y - nextPositions.y, nextPositions.x - positions.x, 0.0);\n      normal = project_normal(normal);\n    } else {\n      normal = vec3(0.0, 0.0, 1.0);\n    }\n\n    lightWeight = lighting_getLightWeight(position_worldspace.xyz, normal);\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n",fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){var e=this.context.gl;this.setState({numInstances:0,polygonTesselator:new _e({IndexType:!e||Object(a.u)(e,a.e.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var t=this.getAttributeManager();t.remove(["instancePickingColors"]),t.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:we,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0},positions64xyLow:{size:2,update:this.calculatePositionsLow,noAlloc:!0},vertexValid:{size:1,type:o.a.UNSIGNED_BYTE,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:we,accessor:"getElevation",update:this.calculateElevations},fillColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:we,accessor:"getFillColor",update:this.calculateFillColors,defaultValue:be},lineColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:we,accessor:"getLineColor",update:this.calculateLineColors,defaultValue:be},pickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props,n=r.extruded,i=r.filled,a=r.wireframe,s=r.elevationScale,l=this.state,u=l.topModel,c=l.sideModel,p=Object.assign({},t,{extruded:Boolean(n),elevationScale:s});c&&(c.setUniforms(p),a&&(c.setDrawMode(o.a.LINE_STRIP),c.render({isWireframe:!0})),i&&(c.setDrawMode(o.a.TRIANGLE_FAN),c.render({isWireframe:!1}))),u&&u.render(p)}},{key:"updateState",value:function updateState(e){solid_polygon_layer_get(solid_polygon_layer_getPrototypeOf(SolidPolygonLayer.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,r=e.oldProps,n=this.getAttributeManager();(t.fp64!==r.fp64||t.filled!==r.filled||t.extruded!==r.extruded)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(this._getModels(this.context.gl)),n.invalidateAll())}},{key:"updateGeometry",value:function updateGeometry(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(n.dataChanged||t.fp64!==r.fp64||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var i=this.state.polygonTesselator;i.updateGeometry({data:t.data,getGeometry:t.getPolygon,positionFormat:t.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:i.instanceCount}),this.getAttributeManager().invalidateAll()}}},{key:"updateAttributes",value:function updateAttributes(e){solid_polygon_layer_get(solid_polygon_layer_getPrototypeOf(SolidPolygonLayer.prototype),"updateAttributes",this).call(this,e);var t=this.getAttributeManager().getChangedAttributes({clearChangedFlags:!0}),r=this.state,n=r.topModel,i=r.sideModel,o=this.getNumInstances();if(n){if(t.indices){var a=t.indices.value.length;n.setVertexCount(a)}n.setAttributes(t)}if(i){i.setInstanceCount(o-1);var s={};for(var l in t){var u=t[l];"indices"!==l&&(s[l]=Object.assign({},u,{isInstanced:!0,buffer:u.getBuffer()}))}s.positions&&(s.nextPositions=Object.assign({},s.positions,{id:"nextPositions",offset:12})),s.positions64xyLow&&(s.nextPositions64xyLow=Object.assign({},s.positions64xyLow,{id:"nextPositions64xyLow",offset:8})),i.setAttributes(s)}}},{key:"_getModels",value:function _getModels(e){var t,r,n=this.props,i=n.id,s=n.filled,l=n.extruded;return s&&(t=new a.h(e,Object.assign({},this.getShaders(),{id:"".concat(i,"-top"),geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{vertexPositions:{size:2,constant:!0,value:new Float32Array([0,1])},nextPositions:{size:3,constant:!0,value:new Float32Array(3)},nextPositions64xyLow:{size:2,constant:!0,value:new Float32Array(2)}}}),uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),l&&(r=new a.h(e,Object.assign({},this.getShaders(),{id:"".concat(i,"-side"),geometry:new a.g({drawMode:o.a.LINES,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),uniforms:{isSideVertex:!0},isInstanced:1,shaderCache:this.context.shaderCache}))),{models:[r,t].filter(Boolean),topModel:t,sideModel:r}}},{key:"calculateIndices",value:function calculateIndices(e){var t=this.state.polygonTesselator;e.bufferLayout=t.indexLayout,e.value=t.get("indices")}},{key:"calculatePositions",value:function calculatePositions(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("positions")}},{key:"calculatePositionsLow",value:function calculatePositionsLow(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"calculateElevations",value:function calculateElevations(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout;var r=this.props,n=r.extruded,i=r.getElevation;n?(e.constant=!1,e.value=t.get("elevations",e.value,i)):(e.constant=!0,e.value=new Float32Array(1))}},{key:"calculateFillColors",value:function calculateFillColors(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("colors",e.value,this.props.getFillColor)}},{key:"calculateLineColors",value:function calculateLineColors(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("colors",e.value,this.props.getLineColor)}},{key:"calculatePickingColors",value:function calculatePickingColors(e){e.value=this.state.polygonTesselator.get("pickingColors",e.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function clearPickingColor(e){for(var t=this.decodePickingColor(e),r=this.state.polygonTesselator.bufferLayout,n=r[t],i=0,o=0;o<t;o++)i+=r[o];var a=this.getAttributeManager().attributes.pickingColors,s=a.value,l=i+n;s.fill(0,3*i,3*l),a.update({value:s})}}])&&solid_polygon_layer_defineProperties(t.prototype,r),i&&solid_polygon_layer_defineProperties(t,i),SolidPolygonLayer}();function polygon_layer_typeof(e){return(polygon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function polygon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function polygon_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function polygon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function polygon_layer_getPrototypeOf(e){return(polygon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function polygon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&polygon_layer_setPrototypeOf(e,t)}function polygon_layer_setPrototypeOf(e,t){return(polygon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}Se.layerName="SolidPolygonLayer",Se.defaultProps=xe;var Ee={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:{type:"accessor",value:function value(e){return e.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},lightSettings:{}},Pe=function(e){function PolygonLayer(){return polygon_layer_classCallCheck(this,PolygonLayer),e=this,!(t=polygon_layer_getPrototypeOf(PolygonLayer).apply(this,arguments))||"object"!==polygon_layer_typeof(t)&&"function"!=typeof t?polygon_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return polygon_layer_inherits(PolygonLayer,n["b"]),t=PolygonLayer,(r=[{key:"initializeState",value:function initializeState(){this.state={paths:[]}}},{key:"updateState",value:function updateState(e){e.oldProps;var t=e.props,r=e.changeFlags;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon))&&(this.state.paths=this._getPaths(t))}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object||t.object})}},{key:"_getPaths",value:function _getPaths(e){var t=e.data,r=e.getPolygon,n=[],i="XY"===e.positionFormat?2:3,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=normalize(r(c),i),h=p.positions,f=p.holeIndices;if(f)for(var d=0;d<=f.length;d++){var g=h.subarray(f[d-1]||0,f[d]||h.length);n.push({path:g,object:c})}else n.push({path:h,object:c})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return n}},{key:"_getAccessor",value:function _getAccessor(e){return"function"==typeof e?function(t){return e(t.object)}:e}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.data,r=e.stroked,n=e.filled,i=e.extruded,o=e.wireframe,a=e.elevationScale,s=e.transitions,l=this.props,u=l.lineWidthScale,c=l.lineWidthMinPixels,p=l.lineWidthMaxPixels,h=l.lineJointRounded,f=l.lineMiterLimit,d=l.lineDashJustified,g=l.fp64,m=this.props,y=m.getFillColor,v=m.getLineColor,_=m.getLineWidth,b=m.getLineDashArray,x=m.getElevation,w=m.getPolygon,S=m.updateTriggers,E=m.lightSettings,P=this.state.paths,C=this.getSubLayerClass("fill",Se),T=this.getSubLayerClass("stroke",de),k=this.shouldRenderSubLayer("fill",P)&&new C({extruded:i,elevationScale:a,fp64:g,filled:n,wireframe:o,getElevation:x,getFillColor:y,getLineColor:v,lightSettings:E,transitions:s},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:S.getPolygon,getElevation:S.getElevation,getFillColor:S.getFillColor,getLineColor:S.getLineColor}}),{data:t,getPolygon:w});return[!i&&k,!i&&r&&this.shouldRenderSubLayer("stroke",P)&&new T({fp64:g,widthScale:u,widthMinPixels:c,widthMaxPixels:p,rounded:h,miterLimit:f,dashJustified:d,transitions:s&&{getWidth:s.getLineWidth,getColor:s.getLineColor,getPath:s.getPolygon},getColor:this._getAccessor(v),getWidth:this._getAccessor(_),getDashArray:this._getAccessor(b)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:P,getPath:function getPath(e){return e.path}}),i&&k]}}])&&polygon_layer_defineProperties(t.prototype,r),i&&polygon_layer_defineProperties(t,i),PolygonLayer}();function assert(e,t){if(!e)throw new Error("deck.gl: ".concat(t))}function getGeojsonFeatures(e){if(Array.isArray(e))return e;switch(assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function separateGeojsonFeatures(e){for(var t={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},r=0;r<e.length;r++){var n=e[r];assert(n&&n.geometry,"GeoJSON does not have geometry");var i=n.geometry,o={feature:n,index:r};if("GeometryCollection"===i.type){assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");for(var a=i.geometries,s=0;s<a.length;s++){separateGeometry(a[s],t,o)}}else separateGeometry(i,t,o)}return t}function separateGeometry(e,t,r){var n=e.type,i=e.coordinates,o=t.pointFeatures,a=t.lineFeatures,s=t.polygonFeatures,l=t.polygonOutlineFeatures;switch(checkCoordinates(n,i),n){case"Point":o.push({geometry:e,sourceFeature:r});break;case"MultiPoint":i.forEach(function(e){o.push({geometry:{type:"Point",coordinates:e},sourceFeature:r})});break;case"LineString":a.push({geometry:e,sourceFeature:r});break;case"MultiLineString":i.forEach(function(e){a.push({geometry:{type:"LineString",coordinates:e},sourceFeature:r})});break;case"Polygon":s.push({geometry:e,sourceFeature:r}),i.forEach(function(e){l.push({geometry:{type:"LineString",coordinates:e},sourceFeature:r})});break;case"MultiPolygon":i.forEach(function(e){s.push({geometry:{type:"Polygon",coordinates:e},sourceFeature:r}),e.forEach(function(e){l.push({geometry:{type:"LineString",coordinates:e},sourceFeature:r})})})}}function unwrapSourceFeature(e){return e.sourceFeature.feature}Pe.layerName="PolygonLayer",Pe.defaultProps=Ee;var Ce={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function checkCoordinates(e,t){var r=Ce[e];for(assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];assert(t&&Number.isFinite(t[0]),"".concat(e," coordinates are malformed"))}function geojson_layer_typeof(e){return(geojson_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function geojson_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function geojson_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function geojson_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function geojson_layer_getPrototypeOf(e){return(geojson_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function geojson_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&geojson_layer_setPrototypeOf(e,t)}function geojson_layer_setPrototypeOf(e,t){return(geojson_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Te={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},lightSettings:{}};function getCoordinates(e){return e.geometry.coordinates}function unwrappingAccessor(e){return"function"!=typeof e?e:function(t){return e(unwrapSourceFeature(t))}}var ke=function(e){function GeoJsonLayer(){return geojson_layer_classCallCheck(this,GeoJsonLayer),e=this,!(t=geojson_layer_getPrototypeOf(GeoJsonLayer).apply(this,arguments))||"object"!==geojson_layer_typeof(t)&&"function"!=typeof t?geojson_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return geojson_layer_inherits(GeoJsonLayer,n["b"]),t=GeoJsonLayer,(r=[{key:"initializeState",value:function initializeState(){this.state={features:{}}}},{key:"updateState",value:function updateState(e){e.oldProps;var t=e.props;if(e.changeFlags.dataChanged){var r=getGeojsonFeatures(t.data);this.state.features=separateGeojsonFeatures(r)}}},{key:"getPickingInfo",value:function getPickingInfo(e){var t,r=e.info;e.sourceLayer;return Object.assign(r,{object:r.object?unwrapSourceFeature(r.object):r.object,index:r.object?(t=r.object,t.sourceFeature.index):r.index})}},{key:"renderLayers",value:function renderLayers(){var e=this.state.features,t=e.pointFeatures,r=e.lineFeatures,n=e.polygonFeatures,i=e.polygonOutlineFeatures,o=this.props,a=o.stroked,s=o.filled,l=o.extruded,u=o.wireframe,c=o.lightSettings,p=o.transitions,h=this.props,f=h.lineWidthScale,d=h.lineWidthMinPixels,g=h.lineWidthMaxPixels,m=h.lineJointRounded,y=h.lineMiterLimit,v=h.pointRadiusScale,_=h.pointRadiusMinPixels,b=h.pointRadiusMaxPixels,x=h.elevationScale,w=h.lineDashJustified,S=h.fp64,E=this.props,P=E.getLineColor,C=E.getFillColor,T=E.getRadius,k=E.getLineWidth,O=E.getLineDashArray,A=E.getElevation,R=E.updateTriggers,M=this.getSubLayerClass("polygons-fill",Se),L=this.getSubLayerClass("polygons-stroke",de),j=this.getSubLayerClass("line-strings",de),D=this.getSubLayerClass("points",I),F=this.shouldRenderSubLayer("polygons-fill",n)&&new M({fp64:S,extruded:l,elevationScale:x,filled:s,wireframe:u,lightSettings:c,getElevation:unwrappingAccessor(A),getFillColor:unwrappingAccessor(C),getLineColor:unwrappingAccessor(P),transitions:p&&{getPolygon:p.geometry,getElevation:p.getElevation,getFillColor:p.getFillColor,getLineColor:p.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:R.getElevation,getFillColor:R.getFillColor,getLineColor:R.getLineColor}}),{data:n,getPolygon:getCoordinates});return[!l&&F,!l&&a&&this.shouldRenderSubLayer("polygons-stroke",i)&&new L({fp64:S,widthScale:f,widthMinPixels:d,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:w,getColor:unwrappingAccessor(P),getWidth:unwrappingAccessor(k),getDashArray:unwrappingAccessor(O),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:R.getLineColor,getWidth:R.getLineWidth,getDashArray:R.getLineDashArray}}),{data:i,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",r)&&new j({fp64:S,widthScale:f,widthMinPixels:d,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:w,getColor:unwrappingAccessor(P),getWidth:unwrappingAccessor(k),getDashArray:unwrappingAccessor(O),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:R.getLineColor,getWidth:R.getLineWidth,getDashArray:R.getLineDashArray}}),{data:r,getPath:getCoordinates}),this.shouldRenderSubLayer("points",t)&&new D({fp64:S,stroked:a,filled:s,radiusScale:v,radiusMinPixels:_,radiusMaxPixels:b,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:g,getFillColor:unwrappingAccessor(C),getLineColor:unwrappingAccessor(P),getRadius:unwrappingAccessor(T),getLineWidth:unwrappingAccessor(k),transitions:p&&{getPosition:p.geometry,getFillColor:p.getFillColor,getLineColor:p.getLineColor,getRadius:p.getRadius,getLineWidth:p.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:R.getFillColor,getLineColor:R.getLineColor,getRadius:R.getRadius,getLineWidth:R.getLineWidth}}),{data:t,getPosition:getCoordinates}),l&&F]}}])&&geojson_layer_defineProperties(t.prototype,r),i&&geojson_layer_defineProperties(t,i),GeoJsonLayer}();ke.layerName="GeoJsonLayer",ke.defaultProps=Te;function multi_icon_layer_typeof(e){return(multi_icon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function multi_icon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function multi_icon_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function multi_icon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function multi_icon_layer_get(e,t,r){return(multi_icon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=multi_icon_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function multi_icon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=multi_icon_layer_getPrototypeOf(e)););return e}function multi_icon_layer_getPrototypeOf(e){return(multi_icon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function multi_icon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&multi_icon_layer_setPrototypeOf(e,t)}function multi_icon_layer_setPrototypeOf(e,t){return(multi_icon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function MultiIconLayer(){return multi_icon_layer_classCallCheck(this,MultiIconLayer),e=this,!(t=multi_icon_layer_getPrototypeOf(MultiIconLayer).apply(this,arguments))||"object"!==multi_icon_layer_typeof(t)&&"function"!=typeof t?multi_icon_layer_assertThisInitialized(e):t;var e,t}var t,r,n;return multi_icon_layer_inherits(MultiIconLayer,_),t=MultiIconLayer,(r=[{key:"getShaders",value:function getShaders(){return Object.assign({},multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"getShaders",this).call(this),{vs:'#define SHADER_NAME multi-icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\n// the following three attributes are for the multi-icon layer\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float gamma;\nuniform float opacity;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  vGamma = gamma / (sizeScale * iconSize.y);\n}\n',fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  \n  float alpha = texColor.a;\n  // if enable sdf (signed distance fields)\n  if (sdf) {\n    float distance = texture2D(iconsTexture, vTextureCoords).a;\n    alpha = smoothstep(buffer - vGamma, buffer + vGamma, distance);\n  }\n\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = alpha * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(vColor.rgb, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"})}},{key:"initializeState",value:function initializeState(){multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function updateState(e){multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"updateState",this).call(this,e);var t=e.changeFlags;t.updateTriggersChanged&&(t.updateTriggersChanged.getAnchorX||t.updateTriggersChanged.getAnchorY)&&this.getAttributeManager().invalidate("instanceOffsets")}},{key:"draw",value:function draw(e){var t=e.uniforms,r=this.props.sdf;multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"draw",this).call(this,{uniforms:Object.assign({},t,{buffer:.75,gamma:.2,sdf:Boolean(r)})})}},{key:"calculateInstanceOffsets",value:function calculateInstanceOffsets(e){var t=this.props,r=t.data,n=t.iconMapping,i=t.getIcon,o=t.getAnchorX,a=t.getAnchorY,s=t.getLengthOfQueue,l=t.getShiftInQueue,u=e.value,c=0,p=!0,h=!1,f=void 0;try{for(var d,g=r[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var m=d.value,y=n[i(m)]||{},v=s(m),_=l(m);u[c++]=(o(m)-1)*v/2+y.width/2+_||0,u[c++]=y.height/2*a(m)||0}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(e){var t=this.props,r=t.data,n=t.getPickingIndex,i=e.value,o=0,a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=n(u.value),h=this.encodePickingColor(p);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2]}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}])&&multi_icon_layer_defineProperties(t.prototype,r),n&&multi_icon_layer_defineProperties(t,n),MultiIconLayer}();Oe.layerName="MultiIconLayer",Oe.defaultProps={getShiftInQueue:{type:"accessor",value:function value(e){return e.shift||0}},getLengthOfQueue:{type:"accessor",value:function value(e){return e.len||1}},getAnchorX:{type:"accessor",value:function value(e){return e.anchorX||0}},getAnchorY:{type:"accessor",value:function value(e){return e.anchorY||0}},getPixelOffset:{type:"accessor",value:[0,0]},getPickingIndex:{type:"accessor",value:function value(e){return e.objectIndex}}};var Ae=r(211),Ie=r.n(Ae);function font_atlas_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Re=10242,Me=10243,Le=33071,je=1024,De=.9,Fe=1.2;var Ne=function getDefaultCharacterSet(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),ze="Monaco, monospace",Be="normal",Ue={fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3};function populateAlphaChannel(e,t){for(var r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function setTextStyle(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="baseline",e.textAlign="left"}function font_atlas_buildMapping(e){var t=e.ctx,r=e.fontHeight,n=e.buffer,i=e.characterSet,o=e.maxCanvasWidth,a={},s=0,l=0;return Array.from(i).forEach(function(e){var i=t.measureText(e).width;l+i+2*n>o&&(l=0,s++),a[e]={x:l+n,y:s*(r+2*n)+n,width:i,height:r,mask:!0},l+=i+2*n}),{mapping:a,canvasHeight:(s+1)*(r+2*n)}}function makeFontAtlas(e,t){var r,n=Object.assign({fontFamily:ze,fontWeight:Be,characterSet:Ne},Ue,t),i=n.fontFamily,o=n.fontWeight,s=n.characterSet,l=n.fontSize,u=n.buffer,c=n.sdf,p=n.radius,h=n.cutoff,f=document.createElement("canvas"),d=f.getContext("2d");setTextStyle(d,i,l,o);var g=font_atlas_buildMapping({ctx:d,fontHeight:l*Fe,buffer:u,characterSet:s,maxCanvasWidth:je}),m=g.canvasHeight,y=g.mapping;if(f.width=je,f.height=m,setTextStyle(d,i,l,o),c){var v=new Ie.a(l,u,p,h,i,o),_=d.createImageData(v.size,v.size),b=!0,x=!1,w=void 0;try{for(var S,E=s[Symbol.iterator]();!(b=(S=E.next()).done);b=!0){var P=S.value;populateAlphaChannel(v.draw(P),_),d.putImageData(_,y[P].x-u,y[P].y-u)}}catch(e){x=!0,w=e}finally{try{b||null==E.return||E.return()}finally{if(x)throw w}}}else{var C=!0,T=!1,k=void 0;try{for(var O,A=s[Symbol.iterator]();!(C=(O=A.next()).done);C=!0){var I=O.value;d.fillText(I,y[I].x,y[I].y+l*De)}}catch(e){T=!0,k=e}finally{try{C||null==A.return||A.return()}finally{if(T)throw k}}}return{scale:Fe,mapping:y,texture:new a.i(e,{pixels:f,parameters:(r={},font_atlas_defineProperty(r,Re,Le),font_atlas_defineProperty(r,Me,Le),r)})}}function text_layer_typeof(e){return(text_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function text_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function text_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function text_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function text_layer_getPrototypeOf(e){return(text_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function text_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&text_layer_setPrototypeOf(e,t)}function text_layer_setPrototypeOf(e,t){return(text_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ve={start:1,middle:0,end:-1},qe={top:1,center:0,bottom:-1},Ge=["fontSize","buffer","sdf","radius","cutoff"],We={fp64:!1,sizeScale:1,characterSet:Ne,fontFamily:ze,fontWeight:Be,fontSettings:{},getText:{type:"accessor",value:function value(e){return e.text}},getPosition:{type:"accessor",value:function value(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},He=function(e){function TextLayer(){return text_layer_classCallCheck(this,TextLayer),e=this,!(t=text_layer_getPrototypeOf(TextLayer).apply(this,arguments))||"object"!==text_layer_typeof(t)&&"function"!=typeof t?text_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return text_layer_inherits(TextLayer,n["b"]),t=TextLayer,(r=[{key:"updateState",value:function updateState(e){var t=e.props,r=e.oldProps,n=e.changeFlags,i=this.fontChanged(r,t);i&&this.updateFontAtlas(),(n.dataChanged||i||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getText))&&this.transformStringToLetters()}},{key:"updateFontAtlas",value:function updateFontAtlas(){var e=this.context.gl,t=this.props,r=t.fontSettings,n=t.fontFamily,i=t.fontWeight,o=t.characterSet,a=makeFontAtlas(e,Object.assign({},Ue,r,{fontFamily:n,fontWeight:i,characterSet:o})),s=a.scale,l=a.mapping,u=a.texture;this.setState({scale:s,iconAtlas:u,iconMapping:l})}},{key:"fontChanged",value:function fontChanged(e,t){if(e.fontFamily!==t.fontFamily||e.characterSet!==t.characterSet||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;var r=e.fontSettings||{},n=t.fontSettings||{};return Ge.some(function(e){return r[e]!==n[e]})}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info;return Object.assign(t,{object:t.index>=0?this.props.data[t.index]:null})}},{key:"transformStringToLetters",value:function transformStringToLetters(){var e=this.props,t=e.data,r=e.getText,i=this.state.iconMapping,o=[],a=0,s=!0,l=!1,u=void 0;try{for(var c,p=function _loop(){var e=c.value,t=r(e);if(t){var s=Array.from(t),l=[0],u=0;s.forEach(function(r,s){var c={text:r,index:s,offsets:l,len:t.length,object:e,objectIndex:a},p=i[r];p?u+=p.width:(n.i.warn("Missing character: ".concat(r))(),u+=32),l.push(u),o.push(c)})}a++},h=t[Symbol.iterator]();!(s=(c=h.next()).done);s=!0)p()}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}this.setState({data:o})}},{key:"getLetterOffset",value:function getLetterOffset(e){return e.offsets[e.index]}},{key:"getTextLength",value:function getTextLength(e){return e.offsets[e.offsets.length-1]}},{key:"_getAccessor",value:function _getAccessor(e){return"function"==typeof e?function(t){return e(t.object)}:e}},{key:"getAnchorXFromTextAnchor",value:function getAnchorXFromTextAnchor(e){return function(t){var r="function"==typeof e?e(t.object):e;if(!Ve.hasOwnProperty(r))throw new Error("Invalid text anchor parameter: ".concat(r));return Ve[r]}}},{key:"getAnchorYFromAlignmentBaseline",value:function getAnchorYFromAlignmentBaseline(e){return function(t){var r="function"==typeof e?e(t.object):e;if(!qe.hasOwnProperty(r))throw new Error("Invalid alignment baseline parameter: ".concat(r));return qe[r]}}},{key:"renderLayers",value:function renderLayers(){var e=this,t=this.state,r=t.data,n=t.scale,i=t.iconAtlas,o=t.iconMapping,a=this.props,s=a.getPosition,l=a.getColor,u=a.getSize,c=a.getAngle,p=a.getTextAnchor,h=a.getAlignmentBaseline,f=a.getPixelOffset,d=a.fp64,g=a.sdf,m=a.sizeScale,y=a.transitions,v=a.updateTriggers;return new(this.getSubLayerClass("characters",Oe))({sdf:g,iconAtlas:i,iconMapping:o,getPosition:function getPosition(e){return s(e.object)},getColor:this._getAccessor(l),getSize:this._getAccessor(u),getAngle:this._getAccessor(c),getAnchorX:this.getAnchorXFromTextAnchor(p),getAnchorY:this.getAnchorYFromAlignmentBaseline(h),getPixelOffset:this._getAccessor(f),fp64:d,sizeScale:m*n,transitions:y&&{getPosition:y.getPosition,getAngle:y.getAngle,getColor:y.getColor,getSize:y.getSize,getPixelOffset:v.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getPosition:v.getPosition,getAngle:v.getAngle,getColor:v.getColor,getSize:v.getSize,getPixelOffset:v.getPixelOffset,getAnchorX:v.getTextAnchor,getAnchorY:v.getAlignmentBaseline}}),{data:r,getIcon:function getIcon(e){return e.text},getShiftInQueue:function getShiftInQueue(t){return e.getLetterOffset(t)},getLengthOfQueue:function getLengthOfQueue(t){return e.getTextLength(t)}})}}])&&text_layer_defineProperties(t.prototype,r),i&&text_layer_defineProperties(t,i),TextLayer}();He.layerName="TextLayer",He.defaultProps=We;var Xe,Ke=r(19);function marching_squares_codes_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ze={N:[0,.5],E:[.5,0],S:[0,-.5],W:[-.5,0],NE:[.5,.5],NW:[-.5,.5],SE:[.5,-.5],SW:[-.5,-.5]},Ye=[Ze.W,Ze.SW,Ze.S],Je=[Ze.S,Ze.SE,Ze.E],Qe=[Ze.E,Ze.NE,Ze.N],$e=[Ze.NW,Ze.W,Ze.N],et=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5]],tt=[[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6]],rt=[[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],nt=[[-.5,1/6],[-.5,-1/6],[1/6,.5],[-1/6,.5]],it=[Ze.W,Ze.SW,Ze.SE,Ze.E],ot=[Ze.S,Ze.SE,Ze.NE,Ze.N],at=[Ze.NW,Ze.W,Ze.E,Ze.NE],st=[Ze.NW,Ze.SW,Ze.S,Ze.N],lt=[[-.5,1/6],[-.5,-1/6],[.5,-1/6],[.5,1/6]],ut=[[-1/6,-.5],[1/6,-.5],[1/6,.5],[-1/6,.5]],ct=[Ze.NW,Ze.SW,Ze.SE,Ze.NE],pt=[Ze.NW,Ze.SW,Ze.SE,Ze.E,Ze.N],ht=[Ze.W,Ze.SW,Ze.SE,Ze.NE,Ze.N],ft=[Ze.NW,Ze.W,Ze.S,Ze.SE,Ze.NE],dt=[Ze.NW,Ze.SW,Ze.S,Ze.E,Ze.NE],gt=[Ze.NW,Ze.W,[.5,-1/6],[.5,1/6],Ze.N],mt=[[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE,Ze.N],yt=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.E],vt=[Ze.W,Ze.SW,Ze.S,[1/6,.5],[-1/6,.5]],_t=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],Ze.N],bt=[[-.5,1/6],[-.5,-1/6],Ze.E,Ze.NE,Ze.N],xt=[Ze.S,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],wt=[Ze.W,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6]],St=[Ze.W,Ze.SW,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],Et=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.NE,Ze.N],Pt=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE],Ct=[Ze.NW,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6],Ze.N],Tt=[Ze.W,Ze.SW,Ze.S,Ze.E,Ze.NE,Ze.N],kt=[Ze.NW,Ze.W,Ze.S,Ze.SE,Ze.E,Ze.N],Ot=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE,Ze.N],At=[Ze.W,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],It=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6],Ze.N],Rt=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],Mt=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],Lt={0:[],1:[[Ze.W,Ze.S]],2:[[Ze.S,Ze.E]],3:[[Ze.W,Ze.E]],4:[[Ze.N,Ze.E]],5:{0:[[Ze.W,Ze.S],[Ze.N,Ze.E]],1:[[Ze.W,Ze.N],[Ze.S,Ze.E]]},6:[[Ze.N,Ze.S]],7:[[Ze.W,Ze.N]],8:[[Ze.W,Ze.N]],9:[[Ze.N,Ze.S]],10:{0:[[Ze.W,Ze.N],[Ze.S,Ze.E]],1:[[Ze.W,Ze.S],[Ze.N,Ze.E]]},11:[[Ze.N,Ze.E]],12:[[Ze.W,Ze.E]],13:[[Ze.S,Ze.E]],14:[[Ze.W,Ze.S]],15:[]};function ternaryToIndex(e){return parseInt(e,4)}var jt=(marching_squares_codes_defineProperty(Xe={},ternaryToIndex("0000"),[]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2222"),[]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2221"),[Ye]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2212"),[Je]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2122"),[Qe]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1222"),[$e]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0001"),[Ye]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0010"),[Je]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0100"),[Qe]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1000"),[$e]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2220"),[et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2202"),[tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2022"),[rt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0222"),[nt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0002"),[et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0020"),[tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0200"),[rt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2000"),[nt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0011"),[it]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0110"),[ot]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1100"),[at]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1001"),[st]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2211"),[it]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2112"),[ot]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1122"),[at]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1221"),[st]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2200"),[lt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2002"),[ut]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0022"),[lt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0220"),[ut]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1111"),[ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1211"),[pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2111"),[ht]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1112"),[ft]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1121"),[dt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1011"),[pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0111"),[ht]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1110"),[ft]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1101"),[dt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1200"),[gt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0120"),[mt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0012"),[yt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2001"),[vt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1022"),[gt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2102"),[mt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2210"),[yt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0221"),[vt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1002"),[_t]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2100"),[bt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0210"),[xt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0021"),[wt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1220"),[_t]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0122"),[bt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2012"),[xt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2201"),[wt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0211"),[St]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2110"),[Et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1102"),[Pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1021"),[Ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2011"),[St]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0112"),[Et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1120"),[Pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1201"),[Ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2101"),[Tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0121"),[Tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1012"),[kt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1210"),[kt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0101"),{0:[Ye,Qe],1:[Tt],2:[Tt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1010"),{0:[$e,Je],1:[kt],2:[kt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2121"),{0:[Tt],1:[Tt],2:[Ye,Qe]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1212"),{0:[kt],1:[kt],2:[$e,Je]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2120"),{0:[Ot],1:[Ot],2:[et,Qe]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2021"),{0:[At],1:[At],2:[Ye,rt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1202"),{0:[It],1:[It],2:[$e,tt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0212"),{0:[Rt],1:[Rt],2:[Je,nt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0102"),{0:[et,Qe],1:[Ot],2:[Ot]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0201"),{0:[Ye,rt],1:[At],2:[At]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1020"),{0:[$e,tt],1:[It],2:[It]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2010"),{0:[Je,nt],1:[Rt],2:[Rt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2020"),{0:[nt,tt],1:[Mt],2:[et,rt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0202"),{0:[rt,et],1:[Mt],2:[nt,tt]}),Xe),Dt={ISO_LINES:1,ISO_BANDS:2},Ft=.002,Nt={zIndex:0,zOffsetScale:1};function getVertexCode(e,t){return Array.isArray(t)?e<t[0]?0:e<t[1]?1:2:e>=t?1:0}function getCode(e){var t=e.cellWeights,r=e.x,i=e.y,o=e.width,a=e.height,s=e.threshold;e.thresholdValue&&(n.i.deprecated("thresholdValue","threshold")(),s=e.thresholdValue);var l=r<0,u=r>=o-1,c=i<0,p=i>=a-1,h=l||u||c||p,f={},d={};l||p?d.top=0:(f.top=t[(i+1)*o+r],d.top=getVertexCode(f.top,s)),u||p?d.topRight=0:(f.topRight=t[(i+1)*o+r+1],d.topRight=getVertexCode(f.topRight,s)),u||c?d.right=0:(f.right=t[i*o+r+1],d.right=getVertexCode(f.right,s)),l||c?d.current=0:(f.current=t[i*o+r],d.current=getVertexCode(f.current,s));var g=d.top,m=d.topRight,y=d.right,v=d.current,_=-1;Number.isFinite(s)&&(_=g<<3|m<<2|y<<1|v),Array.isArray(s)&&(_=g<<6|m<<4|y<<2|v);var b=0;return h||(b=getVertexCode((f.top+f.topRight+f.right+f.current)/4,s)),{code:_,meanCode:b}}function getVertices(e){var t=e.gridOrigin,r=e.cellSize,n=e.x,i=e.y,o=e.code,a=e.meanCode,s=e.type,l=void 0===s?Dt.ISO_LINES:s,u=Object.assign({},Nt,e.thresholdData),c=l===Dt.ISO_BANDS?jt[o]:Lt[o];Array.isArray(c)||(c=c[a]);var p=u.zIndex*Ft*u.zOffsetScale,h=(n+1)*r[0],f=(i+1)*r[1],d=t[0]+h,g=t[1]+f;if(l===Dt.ISO_BANDS){var m=[];return c.forEach(function(e){var t=[];e.forEach(function(e){var n=d+e[0]*r[0],i=g+e[1]*r[1];t.push([n,i,p])}),m.push(t)}),m}var y=[];return c.forEach(function(e){e.forEach(function(e){var t=d+e[0]*r[0],n=g+e[1]*r[1];y.push([t,n,p])})}),y}function generateContours(e){var t=e.thresholdData,r=(e.colors,e.cellWeights),n=e.gridSize,i=e.gridOrigin,o=e.cellSize,a=[],s=[],l=n[0],u=n[1];return t.forEach(function(e,t){for(var n=e.threshold,c=-1;c<l;c++)for(var p=-1;p<u;p++){var h=getCode({cellWeights:r,threshold:n,x:c,y:p,width:l,height:u}),f=h.code,d=h.meanCode,g={gridOrigin:i,cellSize:o,x:c,y:p,width:l,height:u,code:f,meanCode:d,thresholdData:e};if(Array.isArray(n)){g.type=Dt.ISO_BANDS,getVertices(g).forEach(function(e){s.push({vertices:e,threshold:n})})}else{g.type=Dt.ISO_LINES;for(var m=getVertices(g),y=0;y<m.length;y+=2)a.push({start:m[y],end:m[y+1],threshold:n})}}}),{contourSegments:a,contourPolygons:s}}function contour_layer_typeof(e){return(contour_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function contour_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function contour_layer_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function contour_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function contour_layer_get(e,t,r){return(contour_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=contour_layer_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function contour_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=contour_layer_getPrototypeOf(e)););return e}function contour_layer_getPrototypeOf(e){return(contour_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function contour_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&contour_layer_setPrototypeOf(e,t)}function contour_layer_setPrototypeOf(e,t){return(contour_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var zt=[255,255,255,255],Bt={cellSize:{type:"number",min:1,max:1e3,value:1e3},getPosition:{type:"accessor",value:function value(e){return e.position}},getWeight:{type:"accessor",value:function value(e){return 1}},contours:[{threshold:1}],fp64:!1,zOffsetScale:1},Ut=function(e){function ContourLayer(){return contour_layer_classCallCheck(this,ContourLayer),e=this,!(t=contour_layer_getPrototypeOf(ContourLayer).apply(this,arguments))||"object"!==contour_layer_typeof(t)&&"function"!=typeof t?contour_layer_assertThisInitialized(e):t;var e,t}var t,r,i;return contour_layer_inherits(ContourLayer,n["b"]),t=ContourLayer,(r=[{key:"initializeState",value:function initializeState(){var e=this.context.gl,t={id:"".concat(this.id,"-gpu-aggregator"),shaderCache:this.context.shaderCache};this.state={contourData:{},gridAggregator:new n.f(e,t),colorTrigger:0,strokeWidthTrigger:0}}},{key:"updateState",value:function updateState(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=!1,o=!1,a=this._getAggregationFlags({oldProps:t,props:r,changeFlags:n});a&&(i=!0,this.setState({countsData:null}),this._aggregateData(a)),this._shouldRebuildContours({oldProps:t,props:r})&&(o=!0,this._updateThresholdData(r)),i||o?this._generateContours():this._updateSubLayerTriggers(t,r)}},{key:"renderLayers",value:function renderLayers(){var e=this.state.contourData,t=e.contourSegments,r=e.contourPolygons,n=t&&t.length>0,i=r&&r.length>0;return[n&&new w(this._getLineLayerProps()),i&&new Se(this._getSolidPolygonLayerProps())]}},{key:"_aggregateData",value:function _aggregateData(e){var t=this.props,r=t.data,i=t.cellSize,o=t.getPosition,a=t.getWeight,s=t.gpuAggregation,l=t.fp64,u=t.coordinateSystem,c=Object(n.g)({data:r,cellSizeMeters:i,getPosition:o,getWeight:a,gpuAggregation:s,gpuGridAggregator:this.state.gridAggregator,fp64:l,coordinateSystem:u,viewport:this.context.viewport,boundingBox:this.state.boundingBox,aggregationFlags:e}),p=c.countsData,h=c.countsBuffer,f=c.gridSize,d=c.gridOrigin,g=c.cellSize,m=c.boundingBox;this.setState({countsData:p,countsBuffer:h,gridSize:f,gridOrigin:d,cellSize:g,boundingBox:m})}},{key:"_generateContours",value:function _generateContours(){var e=this.state,t=e.gridSize,r=e.gridOrigin,i=e.cellSize,o=e.thresholdData,a=this.state.countsData;a||(a=this.state.countsBuffer.getData(),this.setState({countsData:a}));var s=generateContours({thresholdData:o,cellWeights:n.f.getCellData({countsData:a}).cellWeights,gridSize:t,gridOrigin:r,cellSize:i});this.setState({contourData:s})}},{key:"_getAggregationFlags",value:function _getAggregationFlags(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=null;return(n.dataChanged||t.gpuAggregation!==r.gpuAggregation||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPosition))&&(i=Object.assign({},i,{dataChanged:!0})),t.cellSize!==r.cellSize&&(i=Object.assign({},i,{cellSizeChanged:!0})),i}},{key:"_getLineLayerProps",value:function _getLineLayerProps(){var e=this.props.fp64,t=this.state,r=t.colorTrigger,n=t.strokeWidthTrigger;return contour_layer_get(contour_layer_getPrototypeOf(ContourLayer.prototype),"getSubLayerProps",this).call(this,{id:"contour-line-layer",data:this.state.contourData.contourSegments,fp64:e,getSourcePosition:function getSourcePosition(e){return e.start},getTargetPosition:function getTargetPosition(e){return e.end},getColor:this._onGetSublayerColor.bind(this),getStrokeWidth:this._onGetSublayerStrokeWidth.bind(this),colorTrigger:r,strokeWidthTrigger:n,updateTriggers:{getColor:r,getStrokeWidth:n}})}},{key:"_getSolidPolygonLayerProps",value:function _getSolidPolygonLayerProps(){var e=this.props.fp64,t=this.state.colorTrigger;return contour_layer_get(contour_layer_getPrototypeOf(ContourLayer.prototype),"getSubLayerProps",this).call(this,{id:"contour-solid-polygon-layer",data:this.state.contourData.contourPolygons,fp64:e,getPolygon:function getPolygon(e){return e.vertices},getFillColor:this._onGetSublayerColor.bind(this),colorTrigger:t,updateTriggers:{getFillColor:t}})}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.props.contours,r=zt;return t.forEach(function(t){Object(Ke.e)(t.threshold,e.threshold)&&(r=t.color||zt)}),r}},{key:"_onGetSublayerStrokeWidth",value:function _onGetSublayerStrokeWidth(e){var t=this.props.contours,r=1;return t.some(function(t){return t.threshold===e.threshold&&(r=t.strokeWidth||1,!0)}),r}},{key:"_shouldRebuildContours",value:function _shouldRebuildContours(e){var t=e.oldProps,r=e.props;if(!t.contours||!t.zOffsetScale||t.contours.length!==r.contours.length||t.zOffsetScale!==r.zOffsetScale)return!0;var n=t.contours.map(function(e){return e.threshold}),i=r.contours.map(function(e){return e.threshold});return i.some(function(e,t){return!Object(Ke.e)(i[t],n[t])})}},{key:"_updateSubLayerTriggers",value:function _updateSubLayerTriggers(e,t){if(e&&e.contours&&t&&t.contours){var r=[],n=[],i=[],o=[];e.contours.forEach(function(e){r=r.concat(e.color),i.push(e.strokeWidth||1)}),t.contours.forEach(function(e){n=n.concat(e.color),o.push(e.strokeWidth||1)}),Object(Ke.e)(r,n)||this.state.colorTrigger++,Object(Ke.e)(i,o)||this.state.strokeWidthTrigger++}}},{key:"_updateThresholdData",value:function _updateThresholdData(e){var t=e.contours.map(function(t,r){return{threshold:t.threshold,zIndex:t.zIndex||r,zOffsetScale:e.zOffsetScale}});this.setState({thresholdData:t})}}])&&contour_layer_defineProperties(t.prototype,r),i&&contour_layer_defineProperties(t,i),ContourLayer}();Ut.layerName="ContourLayer",Ut.defaultProps=Bt,r.d(t,"ArcLayer",function(){return p}),r.d(t,"IconLayer",function(){return _}),r.d(t,"LineLayer",function(){return w}),r.d(t,"PointCloudLayer",function(){return T}),r.d(t,"ScatterplotLayer",function(){return I}),r.d(t,"ScreenGridLayer",function(){return F}),r.d(t,"GridLayer",function(){return K}),r.d(t,"GridCellLayer",function(){return U}),r.d(t,"HexagonLayer",function(){return ae}),r.d(t,"HexagonCellLayer",function(){return Q}),r.d(t,"PathLayer",function(){return de}),r.d(t,"PolygonLayer",function(){return Pe}),r.d(t,"GeoJsonLayer",function(){return ke}),r.d(t,"TextLayer",function(){return He}),r.d(t,"ContourLayer",function(){return Ut}),r.d(t,"_SolidPolygonLayer",function(){return Se}),r.d(t,"_MultiIconLayer",function(){return Oe})},function(e,t,r){"use strict";r.r(t);var n=r(15),i=r(7);function getDeckInstance(e){var t=e.map,r=e.gl,i=e.deck;if(t.__deck)return t.__deck;var o={useDevicePixels:!0,_customRender:function _customRender(){return t.triggerRepaint()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],blendEquation:r.FUNC_ADD},userData:{isExternal:!1,mapboxLayers:new Set}};return i?(i.setProps(o),i.props.userData.isExternal=!0):(Object.assign(o,{gl:r,width:!1,height:!1}),i=new n.c(o),t.on("remove",function(){i.finalize(),t.__deck=null})),t.__deck=i,t.on("render",function(){return afterRender(i,t)}),initEvents(t,i),i}function getViewState(e,t){var r=e.getCenter(),n=r.lng,i=r.lat;return Object.assign({longitude:n,latitude:i,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()},t)}function afterRender(e,t){var r=e.props.userData,n=r.mapboxLayers;if(r.isExternal){var i=getViewState(t,{nearZMultiplier:.1,farZMultiplier:10});e.setProps({viewState:i});var o=Array.from(n,function(e){return e.id});e.layerManager.layerFilter=function(e){for(var t=0;t<o.length;t++){if(shouldDrawLayer(o[t],e.layer))return!1}return!0},e._drawLayers("mapbox-repaint")}e.needsRedraw({clearRedrawFlags:!0})}function shouldDrawLayer(e,t){for(var r=t;r;){if(r.id===e)return!0;r=r.parent}return!1}function updateLayers(e){if(!e.props.userData.isExternal){var t=[];e.props.userData.mapboxLayers.forEach(function(e){var r=new(0,e.props.type)(e.props);t.push(r)}),e.setProps({layers:t})}}function handleMouseEvent(e,t){var r;switch(e.layerManager.layerFilter=null,t.type){case"click":r=e._onClick;break;case"mousemove":case"pointermove":r=e._onPointerMove;break;case"mouseleave":case"pointerleave":r=e._onPointerLeave;break;default:return}t.offsetCenter||(t={offsetCenter:t.point,srcEvent:t.originalEvent});var n=e.layerManager.context.gl;Object(i.E)(n,{depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},function(){return r(t)})}function initEvents(e,t){var r=function pickingEventHandler(e){return handleMouseEvent(t,e)};t.eventManager?(t.eventManager.off({click:t._onClick,pointermove:t._onPointerMove,pointerleave:t._onPointerLeave}),t.eventManager.on({click:r,pointermove:r,pointerleave:r})):(e.on("click",r),e.on("mousemove",r),e.on("mouseleave",r))}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function MapboxLayer(e){if(_classCallCheck(this,MapboxLayer),!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.map=null,this.deck=null,this.props=e}var e,t,r;return e=MapboxLayer,(t=[{key:"onAdd",value:function onAdd(e,t){var r,n;this.map=e,this.deck=getDeckInstance({map:e,gl:t,deck:this.props.deck}),r=this.deck,n=this,r.props.userData.mapboxLayers.add(n),updateLayers(r)}},{key:"onRemove",value:function onRemove(){var e,t;e=this.deck,t=this,e.props.userData.mapboxLayers.delete(t),updateLayers(e)}},{key:"setProps",value:function setProps(e){Object.assign(this.props,e,{id:this.id}),this.deck&&updateLayers(this.deck)}},{key:"render",value:function render(e,t){var r,n;this.deck.setProps({viewState:this._getViewState()}),r=this.deck,n=this,r.layerManager.layerFilter=function(e){return shouldDrawLayer(n.id,e.layer)},r._drawLayers("mapbox-repaint")}},{key:"_getViewState",value:function _getViewState(){var e=this.map,t=this.deck;return getViewState(e,{nearZMultiplier:t.height?1/t.height:1,farZMultiplier:1})}}])&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),MapboxLayer}();r.d(t,"MapboxLayer",function(){return o})},function(e,t,r){"use strict";var n=r(25),i=r(21),o=r(0),a=r(3),s=r(4),l=r(54);function getStorage(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch(e){return null}}var u=function(){function LocalStorage(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(a.a)(this,LocalStorage),this.storage=getStorage(r),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}return Object(s.a)(LocalStorage,[{key:"getConfiguration",value:function getConfiguration(){return this.config}},{key:"setConfiguration",value:function setConfiguration(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function updateConfiguration(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function _loadConfiguration(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),LocalStorage}(),c=r(44),p=r(56),h={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(e){return"string"==typeof e?h[e.toUpperCase()]||h.WHITE:e}function autobind(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r),i=!0,o=!1,a=void 0;try{for(var s,l=function _loop(){var r=s.value;"function"==typeof e[r]&&(t.find(function(e){return r===e})||(e[r]=e[r].bind(e)))},u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)l()}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}function assert_assert(e,t){if(!e)throw new Error(t||"Assertion failed")}r.d(t,"a",function(){return m});var f={debug:l.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},d={enabled:!1,priority:0};function noop(){}var g={};function getTableHeader(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}var m=function(){function Log(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(a.a)(this,Log),this.id=e,this.VERSION=l.a,this._startTs=Object(c.a)(),this._deltaTs=Object(c.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new u("__probe-".concat(this.id,"__"),d),this.userData={},this.timeStamp("".concat(this.id," started")),autobind(this),Object.seal(this)}return Object(s.a)(Log,[{key:"isEnabled",value:function isEnabled(){return this._storage.config.enabled}},{key:"getPriority",value:function getPriority(){return this._storage.config.priority}},{key:"getLevel",value:function getLevel(){return this._storage.config.priority}},{key:"getTotal",value:function getTotal(){return Number((Object(c.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function getDelta(){return Number((Object(c.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function enable(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function setLevel(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function assert(e,t){assert_assert(e,t)}},{key:"warn",value:function warn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._getLogFunction({message:e,args:r,method:f.warn,once:!0})}},{key:"error",value:function error(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._getLogFunction({message:e,args:r,method:f.error})}},{key:"deprecated",value:function deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function probe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:f.log,time:!0,once:!0})}},{key:"log",value:function log(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:f.debug})}},{key:"info",value:function info(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:console.info})}},{key:"once",value:function once(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:f.debug||f.info,once:!0})}},{key:"table",value:function table(e,t,r){if(t){var n=getTableHeader(t);return this._getLogFunction({priority:e,message:t,args:r&&[r],tag:n,method:console.table||noop})}return noop}},{key:"image",value:function image(e){var t=e.priority,r=e.image,n=e.message,i=void 0===n?"":n,o=e.scale,a=void 0===o?1:o;return t>this.getPriority()?noop:l.b?this._logImageInBrowser({image:r,message:i,scale:a}):this._logImageInNode({image:r,message:i,scale:a})}},{key:"settings",value:function settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function get(e){return this._storage.config[e]}},{key:"set",value:function set(e,t){this._storage.updateConfiguration(Object(o.a)({},e,t))}},{key:"_logImageInNode",value:function _logImageInNode(e){var t=e.image,n=(e.message,e.scale),i=void 0===n?1:n,o=null;try{o=r(388)}catch(e){}return o?function(){return o(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(e){return console.log(e)})}:noop}},{key:"_logImageInBrowser",value:function _logImageInBrowser(e){var t=e.image,r=e.message,n=void 0===r?"":r,o=e.scale,a=void 0===o?1:o;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=Object(p.a)(s,n,a);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,noop}var l,u=t.nodeName||"";if("img"===u.toLowerCase())return(l=console).log.apply(l,Object(i.a)(Object(p.a)(t,n,a))),noop;if("canvas"===u.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(Object(p.a)(c,n,a)))},c.src=t.toDataURL(),noop}return noop}},{key:"time",value:function time(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function timeEnd(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function timeStamp(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||noop})}},{key:"group",value:function group(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},n=(r=this._normalizeArguments({priority:e,message:t,opts:r})).collapsed;return this._getLogFunction({priority:e,message:t,opts:r,method:(n?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function groupCollapsed(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}},{key:"groupEnd",value:function groupEnd(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||noop})}},{key:"withGroup",value:function withGroup(e,t,r){var n=this._normalizeArguments({priority:e,message:t});this.group(n);try{r()}finally{this.groupEnd(n.message)}}},{key:"trace",value:function trace(){console.trace&&console.trace()}},{key:"_shouldLog",value:function _shouldLog(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function _getElapsedTime(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=Object(c.a)(),{total:e,delta:t}}},{key:"_getLogFunction",value:function _getLogFunction(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),assert_assert(t);var r=e.message,n=e.tag||e.message;if(e.once){if(g[n])return noop;g[n]=Object(c.a)()}return r=this._decorateMessage(r,e),t.bind.apply(t,[console,r].concat(Object(i.a)(e.args)))}return noop}},{key:"_parseArguments",value:function _parseArguments(e){var t=this._normalizeArguments(e),r=this._getElapsedTime(),n=r.delta,i=r.total;return Object.assign(e,t,{delta:n,total:i})}},{key:"_normalizePriority",value:function _normalizePriority(e){var t;switch(Object(n.a)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return assert_assert(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function _normalizeArguments(e){var t=e.priority,r=e.message,i=e.args,o=void 0===i?[]:i,a=e.opts,s={priority:this._normalizePriority(t),message:r,args:o};switch(Object(n.a)(t)){case"string":case"function":void 0!==r&&o.unshift(r),Object.assign(s,{message:t});break;case"object":Object.assign(s,t)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),assert_assert("string"==typeof s.message||"object"===Object(n.a)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function _decorateMessage(e,t){if("string"==typeof e){var r="";if(t.time){var n=this._getElapsedTime().total;r=Object(p.c)(Object(p.b)(n))}e=t.time?"".concat(this.id,": ").concat(r,"  ").concat(e):"".concat(this.id,": ").concat(e),i=e,o=t.color,a=t.background,l.b||"string"!=typeof i||(o&&(o=getColor(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=getColor(a),i="[".concat(a+10,"m").concat(i,"[49m"))),e=i}var i,o,a;return e}},{key:"priority",set:function set(e){return this._storage.updateConfiguration({priority:e}),this},get:function get(){return this._storage.config.priority}}]),Log}();m.VERSION=l.a},function(e,t,r){"use strict";var n=r(17),i=r(21),o=r(3),a=r(4),s=r(11),l=r(10),u=r(12),c=r(115),p=r(19),h=r(149),f=r(89),d=function(e){function Vector4(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(o.a)(this,Vector4),e=Object(s.a)(this,Object(l.a)(Vector4).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,r,n,i),e}return Object(u.a)(Vector4,e),Object(a.a)(Vector4,[{key:"applyMatrix4",value:function applyMatrix4(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function get(){return 4}},{key:"z",get:function get(){return this[2]},set:function set(e){return this[2]=Object(p.a)(e)}},{key:"w",get:function get(){return this[3]},set:function set(e){return this[3]=Object(p.a)(e)}}]),Vector4}(r(75).a),g=r(14),m=r(34),y=r(46),v=r(43);r.d(t,"a",function(){return b});var _=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function validateVector(e,t){return e.length===t&&e.every(Number.isFinite)}var b=function(e){function Matrix4(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Object(o.a)(this,Matrix4),e=Object(s.a)(this,Object(l.a)(Matrix4).call(this)),Array.isArray(r[0])&&1===arguments.length?e.copy(r[0]):e.identity(),e}return Object(u.a)(Matrix4,e),Object(a.a)(Matrix4,[{key:"setRowMajor",value:function setRowMajor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=i,this[2]=l,this[3]=h,this[4]=t,this[5]=o,this[6]=u,this[7]=f,this[8]=r,this[9]=a,this[10]=c,this[11]=d,this[12]=n,this[13]=s,this[14]=p,this[15]=g,this.check()}},{key:"setColumnMajor",value:function setColumnMajor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=u,this[10]=c,this[11]=p,this[12]=h,this[13]=f,this[14]=d,this[15]=g,this.check()}},{key:"copy",value:function copy(e){return this.setColumnMajor.apply(this,Object(i.a)(e))}},{key:"set",value:function set(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function getElement(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[e][t]:this[t][e]}},{key:"setElement",value:function setElement(e,t,r){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[e][t]=Object(p.a)(r):this[t][e]=Object(p.a)(r),this}},{key:"determinant",value:function determinant(){return g.a(this)}},{key:"identity",value:function identity(){return this.copy(_)}},{key:"fromQuaternion",value:function fromQuaternion(e){return g.c(this,e),this.check()}},{key:"frustum",value:function frustum(e){var t=e.left,r=e.right,n=e.bottom,i=e.top,o=e.near,a=e.far;return g.d(this,t,r,n,i,o,a),this.check()}},{key:"lookAt",value:function lookAt(e){var t=e.eye,r=e.center,n=void 0===r?[0,0,0]:r,i=e.up,o=void 0===i?[0,1,0]:i;return g.f(this,t,n,o),this.check()}},{key:"ortho",value:function ortho(e){var t=e.left,r=e.right,n=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,l=void 0===s?500:s;return g.h(this,t,r,n,i,a,l),this.check()}},{key:"orthographic",value:function orthographic(e){var t=e.fovy,r=void 0===t?45*Math.PI/180:t,n=e.aspect,i=void 0===n?1:n,o=e.focalDistance,a=void 0===o?1:o,s=e.near,l=void 0===s?.1:s,u=e.far,c=void 0===u?500:u;if(r>2*Math.PI)throw Error("radians");var p=r/2,h=a*Math.tan(p),f=h*i;return(new Matrix4).ortho({left:-f,right:f,bottom:-h,top:h,near:l,far:c})}},{key:"perspective",value:function perspective(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,r=e.fov,n=void 0===r?45*Math.PI/180:r,i=e.aspect,o=void 0===i?1:i,a=e.near,s=void 0===a?.1:a,l=e.far,u=void 0===l?500:l;if((t=t||n)>2*Math.PI)throw Error("radians");return g.i(this,t,o,s,u),this.check()}},{key:"transpose",value:function transpose(){return g.p(this,this),this.check()}},{key:"invert",value:function invert(){return g.e(this,this),this.check()}},{key:"multiplyLeft",value:function multiplyLeft(e){return g.g(this,e,this),this.check()}},{key:"multiplyRight",value:function multiplyRight(e){return g.g(this,this,e),this.check()}},{key:"rotateX",value:function rotateX(e){return g.k(this,this,e),this.check()}},{key:"rotateY",value:function rotateY(e){return g.l(this,this,e),this.check()}},{key:"rotateZ",value:function rotateZ(e){return g.m(this,this,e),this.check()}},{key:"rotateXYZ",value:function rotateXYZ(e){var t=Object(n.a)(e,3),r=t[0],i=t[1],o=t[2];return this.rotateX(r).rotateY(i).rotateZ(o)}},{key:"rotateAxis",value:function rotateAxis(e,t){return g.j(this,this,e,t),this.check()}},{key:"scale",value:function scale(e){return g.n(this,this,e),this.check()}},{key:"translate",value:function translate(e){return g.o(this,this,e),this.check()}},{key:"transformVector2",value:function transformVector2(e,t){return t=t||new h.a,m.h(t,e,this),validateVector(t,2),t}},{key:"transformVector3",value:function transformVector3(e,t){return t=t||new f.a,y.i(t,e,this),validateVector(t,3),t}},{key:"transformVector4",value:function transformVector4(e,t){return t=t||new d,v.c(t,e,this),validateVector(t,4),t.check()}},{key:"transformVector",value:function transformVector(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function transformDirection(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function transformPoint(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function _transformVector(e,t,r){switch(e.length){case 2:t=t||new h.a,v.c(t,[e[0],e[1],0,r],this),t.length=2,validateVector(t,2);break;case 3:t=t||new f.a,v.c(t,[e[0],e[1],e[2],r],this),t.length=3,validateVector(t,3);break;case 4:if(Boolean(r)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");t=t||new d,v.c(t,e,this),validateVector(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function makeRotationX(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function makeTranslation(e,t,r){return this.identity().translate([e,t,r])}},{key:"ELEMENTS",get:function get(){return 16}}]),Matrix4}(c.a)}]);